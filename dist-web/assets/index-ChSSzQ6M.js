const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/window-CWXygZvY.js","assets/dpi-BwbmHrYW.js"])))=>i.map(i=>d[i]);
var hg=Object.defineProperty,mg=Object.defineProperties;var gg=Object.getOwnPropertyDescriptors;var _o=Object.getOwnPropertySymbols;var fc=Object.prototype.hasOwnProperty,hc=Object.prototype.propertyIsEnumerable;var mc=Math.pow,si=(t,e,n)=>e in t?hg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||(e={}))fc.call(e,n)&&si(t,n,e[n]);if(_o)for(var n of _o(e))hc.call(e,n)&&si(t,n,e[n]);return t},F=(t,e)=>mg(t,gg(e));var G=(t,e)=>{var n={};for(var s in t)fc.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&_o)for(var s of _o(t))e.indexOf(s)<0&&hc.call(t,s)&&(n[s]=t[s]);return n};var pg=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var as=(t,e,n)=>si(t,typeof e!="symbol"?e+"":e,n);var T=(t,e,n)=>new Promise((s,r)=>{var o=f=>{try{c(n.next(f))}catch(u){r(u)}},i=f=>{try{c(n.throw(f))}catch(u){r(u)}},c=f=>f.done?s(f.value):Promise.resolve(f.value).then(o,i);c((n=n.apply(t,e)).next())});import{r as w,j as a,S as ro,O as vl,R as Mu,C as Eu,a as Du,T as Iu,D as Au,P as ju,b as es,c as ma,d as Ru,u as yg,e as ga,f as xg,g as gr,A as vg,h as $t,i as wl,k as wg,l as Cg,m as bg,n as kg,o as _g,p as Tg,q as se,s as Sg,t as Ng,v as Mg,w as Eg,I as Dg,x as Ig,y as Pu,z as Ou,B as Fu,E as Ag,F as Lu,G as $u,H as jg,J as Vu,V as Rg,L as Uu,K as Bu,M as Pg,N as Og,Q as Gu,U as Fg,W as Lg,X as $g,Y as Wu,Z as Vg,_ as Ug,$ as Bg,a0 as Gg,a1 as Wg,a2 as Yg,a3 as Hg,a4 as zg,a5 as qg,a6 as Zg,a7 as Jg,a8 as Kg,a9 as Xg,aa as Qg,ab as ep,ac as tp,ad as np}from"./ui-B4Jiezzt.js";import{a as sp,g as rp}from"./vendor-DKqf9w2B.js";import{_ as Ei,c as op}from"./supabase-zXg-GOkM.js";import{f as Nt,a as Ht,b as Di,c as jr,d as Ii,e as ap,g as ip,h as lp,i as cp,j as dp,k as Rr,l as up,m as fp,n as hp,o as mp,p as gp,q as pp,r as yp,s as xp,t as $o,u as vp,v as wp,w as Cp,x as bp,y as kp,z as _p,A as Vo,B as Tp,C as Sp,D as Zs,E as Np,F as Yu,G as To,H as gc,I as pc}from"./calendar-BxOAF2Np.js";var MP=pg((He,Jo)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var So={},yc;function Mp(){if(yc)return So;yc=1;var t=sp();return So.createRoot=t.createRoot,So.hydrateRoot=t.hydrateRoot,So}var Ep=Mp();const Dp=rp(Ep);var Nr={},xc;function Ip(){if(xc)return Nr;xc=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.parse=i,Nr.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,o=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function i(g,y){const p=new o,v=g.length;if(v<2)return p;const C=(y==null?void 0:y.decode)||h;let b=0;do{const N=g.indexOf("=",b);if(N===-1)break;const M=g.indexOf(";",b),D=M===-1?v:M;if(N>D){b=g.lastIndexOf(";",N-1)+1;continue}const k=c(g,b,N),_=f(g,N,k),E=g.slice(k,_);if(p[E]===void 0){let P=c(g,N+1,D),R=f(g,D,P);const B=C(g.slice(P,R));p[E]=B}b=D+1}while(b<v);return p}function c(g,y,p){do{const v=g.charCodeAt(y);if(v!==32&&v!==9)return y}while(++y<p);return p}function f(g,y,p){for(;y>p;){const v=g.charCodeAt(--y);if(v!==32&&v!==9)return y+1}return p}function u(g,y,p){const v=(p==null?void 0:p.encode)||encodeURIComponent;if(!t.test(g))throw new TypeError(`argument name is invalid: ${g}`);const C=v(y);if(!e.test(C))throw new TypeError(`argument val is invalid: ${y}`);let b=g+"="+C;if(!p)return b;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);b+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);b+="; Domain="+p.domain}if(p.path){if(!s.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);b+="; Path="+p.path}if(p.expires){if(!m(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);b+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(b+="; HttpOnly"),p.secure&&(b+="; Secure"),p.partitioned&&(b+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return b}function h(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch(y){return g}}function m(g){return r.call(g)==="[object Date]"}return Nr}Ip();var vc="popstate";function Ap(t={}){function e(s,r){let{pathname:o,search:i,hash:c}=s.location;return Ai("",{pathname:o,search:i,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Zr(r)}return Rp(e,n,null,t)}function pt(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function kn(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(n){}}}function jp(){return Math.random().toString(36).substring(2,10)}function wc(t,e){return{usr:t.state,key:t.key,idx:e}}function Ai(t,e,n=null,s){return F(x({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?pr(e):e),{state:n,key:e&&e.key||s||jp()})}function Zr({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function pr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function Rp(t,e,n,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,i=r.history,c="POP",f=null,u=h();u==null&&(u=0,i.replaceState(F(x({},i.state),{idx:u}),""));function h(){return(i.state||{idx:null}).idx}function m(){c="POP";let C=h(),b=C==null?null:C-u;u=C,f&&f({action:c,location:v.location,delta:b})}function g(C,b){c="PUSH";let N=Ai(v.location,C,b);u=h()+1;let M=wc(N,u),D=v.createHref(N);try{i.pushState(M,"",D)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(D)}o&&f&&f({action:c,location:v.location,delta:1})}function y(C,b){c="REPLACE";let N=Ai(v.location,C,b);u=h();let M=wc(N,u),D=v.createHref(N);i.replaceState(M,"",D),o&&f&&f({action:c,location:v.location,delta:0})}function p(C){return Pp(C)}let v={get action(){return c},get location(){return t(r,i)},listen(C){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(vc,m),f=C,()=>{r.removeEventListener(vc,m),f=null}},createHref(C){return e(r,C)},createURL:p,encodeLocation(C){let b=p(C);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:y,go(C){return i.go(C)}};return v}function Pp(t,e=!1){let n="http://localhost";typeof window!="undefined"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),pt(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Zr(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Hu(t,e,n="/"){return Op(t,e,n,!1)}function Op(t,e,n,s){let r=typeof e=="string"?pr(e):e,o=Kn(r.pathname||"/",n);if(o==null)return null;let i=zu(t);Fp(i);let c=null;for(let f=0;c==null&&f<i.length;++f){let u=qp(o);c=Hp(i[f],u,s)}return c}function zu(t,e=[],n=[],s=""){let r=(o,i,c)=>{let f={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};f.relativePath.startsWith("/")&&(pt(f.relativePath.startsWith(s),`Absolute route path "${f.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(s.length));let u=Wn([s,f.relativePath]),h=n.concat(f);o.children&&o.children.length>0&&(pt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),zu(o.children,e,h,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:Wp(u,o.index),routesMeta:h})};return t.forEach((o,i)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))r(o,i);else for(let f of qu(o.path))r(o,i,f)}),e}function qu(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let i=qu(s.join("/")),c=[];return c.push(...i.map(f=>f===""?o:[o,f].join("/"))),r&&c.push(...i),c.map(f=>t.startsWith("/")&&f===""?"/":f)}function Fp(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Yp(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Lp=/^:[\w-]+$/,$p=3,Vp=2,Up=1,Bp=10,Gp=-2,Cc=t=>t==="*";function Wp(t,e){let n=t.split("/"),s=n.length;return n.some(Cc)&&(s+=Gp),e&&(s+=Vp),n.filter(r=>!Cc(r)).reduce((r,o)=>r+(Lp.test(o)?$p:o===""?Up:Bp),s)}function Yp(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function Hp(t,e,n=!1){let{routesMeta:s}=t,r={},o="/",i=[];for(let c=0;c<s.length;++c){let f=s[c],u=c===s.length-1,h=o==="/"?e:e.slice(o.length)||"/",m=Ko({path:f.relativePath,caseSensitive:f.caseSensitive,end:u},h),g=f.route;if(!m&&u&&n&&!s[s.length-1].route.index&&(m=Ko({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},h)),!m)return null;Object.assign(r,m.params),i.push({params:r,pathname:Wn([o,m.pathname]),pathnameBase:Xp(Wn([o,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(o=Wn([o,m.pathnameBase]))}return i}function Ko(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=zp(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],i=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:s.reduce((u,{paramName:h,isOptional:m},g)=>{if(h==="*"){let p=c[g]||"";i=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const y=c[g];return m&&!y?u[h]=void 0:u[h]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:t}}function zp(t,e=!1,n=!0){kn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,f)=>(s.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function qp(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Kn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function Zp(t,e="/"){let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?pr(t):t;return{pathname:n?n.startsWith("/")?n:Jp(n,e):e,search:Qp(s),hash:ey(r)}}function Jp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ri(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Kp(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zu(t){let e=Kp(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Ju(t,e,n,s=!1){let r;typeof t=="string"?r=pr(t):(r=x({},t),pt(!r.pathname||!r.pathname.includes("?"),ri("?","pathname","search",r)),pt(!r.pathname||!r.pathname.includes("#"),ri("#","pathname","hash",r)),pt(!r.search||!r.search.includes("#"),ri("#","search","hash",r)));let o=t===""||r.pathname==="",i=o?"/":r.pathname,c;if(i==null)c=n;else{let m=e.length-1;if(!s&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}c=m>=0?e[m]:"/"}let f=Zp(r,c),u=i&&i!=="/"&&i.endsWith("/"),h=(o||i===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(u||h)&&(f.pathname+="/"),f}var Wn=t=>t.join("/").replace(/\/\/+/g,"/"),Xp=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Qp=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ey=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ty(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Ku=["POST","PUT","PATCH","DELETE"];new Set(Ku);var ny=["GET",...Ku];new Set(ny);var yr=w.createContext(null);yr.displayName="DataRouter";var pa=w.createContext(null);pa.displayName="DataRouterState";var Xu=w.createContext({isTransitioning:!1});Xu.displayName="ViewTransition";var sy=w.createContext(new Map);sy.displayName="Fetchers";var ry=w.createContext(null);ry.displayName="Await";var Sn=w.createContext(null);Sn.displayName="Navigation";var oo=w.createContext(null);oo.displayName="Location";var Nn=w.createContext({outlet:null,matches:[],isDataRoute:!1});Nn.displayName="Route";var Cl=w.createContext(null);Cl.displayName="RouteError";function oy(t,{relative:e}={}){pt(ao(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=w.useContext(Sn),{hash:r,pathname:o,search:i}=io(t,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:Wn([n,o])),s.createHref({pathname:c,search:i,hash:r})}function ao(){return w.useContext(oo)!=null}function ws(){return pt(ao(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(oo).location}var Qu="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ef(t){w.useContext(Sn).static||w.useLayoutEffect(t)}function bl(){let{isDataRoute:t}=w.useContext(Nn);return t?vy():ay()}function ay(){pt(ao(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(yr),{basename:e,navigator:n}=w.useContext(Sn),{matches:s}=w.useContext(Nn),{pathname:r}=ws(),o=JSON.stringify(Zu(s)),i=w.useRef(!1);return ef(()=>{i.current=!0}),w.useCallback((f,u={})=>{if(kn(i.current,Qu),!i.current)return;if(typeof f=="number"){n.go(f);return}let h=Ju(f,JSON.parse(o),r,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Wn([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,o,r,t])}w.createContext(null);function iy(){let{matches:t}=w.useContext(Nn),e=t[t.length-1];return e?e.params:{}}function io(t,{relative:e}={}){let{matches:n}=w.useContext(Nn),{pathname:s}=ws(),r=JSON.stringify(Zu(n));return w.useMemo(()=>Ju(t,JSON.parse(r),s,e==="path"),[t,r,s,e])}function ly(t,e){return tf(t,e)}function tf(t,e,n,s){var b;pt(ao(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=w.useContext(Sn),{matches:o}=w.useContext(Nn),i=o[o.length-1],c=i?i.params:{},f=i?i.pathname:"/",u=i?i.pathnameBase:"/",h=i&&i.route;{let N=h&&h.path||"";nf(f,!h||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let m=ws(),g;if(e){let N=typeof e=="string"?pr(e):e;pt(u==="/"||((b=N.pathname)==null?void 0:b.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${N.pathname}" was given in the \`location\` prop.`),g=N}else g=m;let y=g.pathname||"/",p=y;if(u!=="/"){let N=u.replace(/^\//,"").split("/");p="/"+y.replace(/^\//,"").split("/").slice(N.length).join("/")}let v=Hu(t,{pathname:p});kn(h||v!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),kn(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=hy(v&&v.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Wn([u,r.encodeLocation?r.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Wn([u,r.encodeLocation?r.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,n,s);return e&&C?w.createElement(oo.Provider,{value:{location:x({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:"POP"}},C):C}function cy(){let t=xy(),e=ty(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=w.createElement(w.Fragment,null,w.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:r},n):null,i)}var dy=w.createElement(cy,null),uy=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?w.createElement(Nn.Provider,{value:this.props.routeContext},w.createElement(Cl.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fy({routeContext:t,match:e,children:n}){let s=w.useContext(yr);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Nn.Provider,{value:t},n)}function hy(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,o=n==null?void 0:n.errors;if(o!=null){let f=r.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);pt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,f+1))}let i=!1,c=-1;if(n)for(let f=0;f<r.length;f++){let u=r[f];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=f),u.route.id){let{loaderData:h,errors:m}=n,g=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!m||m[u.route.id]===void 0);if(u.route.lazy||g){i=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}return r.reduceRight((f,u,h)=>{let m,g=!1,y=null,p=null;n&&(m=o&&u.route.id?o[u.route.id]:void 0,y=u.route.errorElement||dy,i&&(c<0&&h===0?(nf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,p=null):c===h&&(g=!0,p=u.route.hydrateFallbackElement||null)));let v=e.concat(r.slice(0,h+1)),C=()=>{let b;return m?b=y:g?b=p:u.route.Component?b=w.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=f,w.createElement(fy,{match:u,routeContext:{outlet:f,matches:v,isDataRoute:n!=null},children:b})};return n&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?w.createElement(uy,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:C(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):C()},null)}function kl(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function my(t){let e=w.useContext(yr);return pt(e,kl(t)),e}function gy(t){let e=w.useContext(pa);return pt(e,kl(t)),e}function py(t){let e=w.useContext(Nn);return pt(e,kl(t)),e}function _l(t){let e=py(t),n=e.matches[e.matches.length-1];return pt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function yy(){return _l("useRouteId")}function xy(){var s;let t=w.useContext(Cl),e=gy("useRouteError"),n=_l("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function vy(){let{router:t}=my("useNavigate"),e=_l("useNavigate"),n=w.useRef(!1);return ef(()=>{n.current=!0}),w.useCallback((i,...c)=>T(null,[i,...c],function*(r,o={}){kn(n.current,Qu),n.current&&(typeof r=="number"?t.navigate(r):yield t.navigate(r,x({fromRouteId:e},o)))}),[t,e])}var bc={};function nf(t,e,n){!e&&!bc[t]&&(bc[t]=!0,kn(!1,n))}w.memo(wy);function wy({routes:t,future:e,state:n}){return tf(t,void 0,n,e)}function Pr(t){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Cy({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:r,static:o=!1}){pt(!ao(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:i,navigator:r,static:o,future:{}}),[i,r,o]);typeof n=="string"&&(n=pr(n));let{pathname:f="/",search:u="",hash:h="",state:m=null,key:g="default"}=n,y=w.useMemo(()=>{let p=Kn(f,i);return p==null?null:{location:{pathname:p,search:u,hash:h,state:m,key:g},navigationType:s}},[i,f,u,h,m,g,s]);return kn(y!=null,`<Router basename="${i}"> is not able to match the URL "${f}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:w.createElement(Sn.Provider,{value:c},w.createElement(oo.Provider,{children:e,value:y}))}function by({children:t,location:e}){return ly(ji(t),e)}function ji(t,e=[]){let n=[];return w.Children.forEach(t,(s,r)=>{if(!w.isValidElement(s))return;let o=[...e,r];if(s.type===w.Fragment){n.push.apply(n,ji(s.props.children,o));return}pt(s.type===Pr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=ji(s.props.children,o)),n.push(i)}),n}var Uo="get",Bo="application/x-www-form-urlencoded";function ya(t){return t!=null&&typeof t.tagName=="string"}function ky(t){return ya(t)&&t.tagName.toLowerCase()==="button"}function _y(t){return ya(t)&&t.tagName.toLowerCase()==="form"}function Ty(t){return ya(t)&&t.tagName.toLowerCase()==="input"}function Sy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ny(t,e){return t.button===0&&(!e||e==="_self")&&!Sy(t)}var No=null;function My(){if(No===null)try{new FormData(document.createElement("form"),0),No=!1}catch(t){No=!0}return No}var Ey=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oi(t){return t!=null&&!Ey.has(t)?(kn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bo}"`),null):t}function Dy(t,e){let n,s,r,o,i;if(_y(t)){let c=t.getAttribute("action");s=c?Kn(c,e):null,n=t.getAttribute("method")||Uo,r=oi(t.getAttribute("enctype"))||Bo,o=new FormData(t)}else if(ky(t)||Ty(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||c.getAttribute("action");if(s=f?Kn(f,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Uo,r=oi(t.getAttribute("formenctype"))||oi(c.getAttribute("enctype"))||Bo,o=new FormData(c,t),!My()){let{name:u,type:h,value:m}=t;if(h==="image"){let g=u?`${u}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else u&&o.append(u,m)}}else{if(ya(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Uo,s=null,r=Bo,i=t}return o&&r==="text/plain"&&(i=o,o=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:o,body:i}}function Tl(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function Iy(t,e){return T(this,null,function*(){if(t.id in e)return e[t.id];try{let n=yield import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}function Ay(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}function jy(t,e,n){return T(this,null,function*(){let s=yield Promise.all(t.map(r=>T(null,null,function*(){let o=e.routes[r.route.id];if(o){let i=yield Iy(o,n);return i.links?i.links():[]}return[]})));return Fy(s.flat(1).filter(Ay).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?F(x({},r),{rel:"prefetch",as:"style"}):F(x({},r),{rel:"prefetch"})))})}function kc(t,e,n,s,r,o){let i=(f,u)=>n[u]?f.route.id!==n[u].route.id:!0,c=(f,u)=>{var h;return n[u].pathname!==f.pathname||((h=n[u].route.path)==null?void 0:h.endsWith("*"))&&n[u].params["*"]!==f.params["*"]};return o==="assets"?e.filter((f,u)=>i(f,u)||c(f,u)):o==="data"?e.filter((f,u)=>{var m;let h=s.routes[f.route.id];if(!h||!h.hasLoader)return!1;if(i(f,u)||c(f,u))return!0;if(f.route.shouldRevalidate){let g=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function Ry(t,e,{includeHydrateFallback:n}={}){return Py(t.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function Py(t){return[...new Set(t)]}function Oy(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function Fy(t,e){let n=new Set;return new Set(e),t.reduce((s,r)=>{let o=JSON.stringify(Oy(r));return n.has(o)||(n.add(o),s.push({key:o,link:r})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ly=new Set([100,101,204,205]);function $y(t,e){let n=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Kn(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function sf(){let t=w.useContext(yr);return Tl(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Vy(){let t=w.useContext(pa);return Tl(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Sl=w.createContext(void 0);Sl.displayName="FrameworkContext";function rf(){let t=w.useContext(Sl);return Tl(t,"You must render this element inside a <HydratedRouter> element"),t}function Uy(t,e){let n=w.useContext(Sl),[s,r]=w.useState(!1),[o,i]=w.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:u,onMouseLeave:h,onTouchStart:m}=e,g=w.useRef(null);w.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let v=b=>{b.forEach(N=>{i(N.isIntersecting)})},C=new IntersectionObserver(v,{threshold:.5});return g.current&&C.observe(g.current),()=>{C.disconnect()}}},[t]),w.useEffect(()=>{if(s){let v=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(v)}}},[s]);let y=()=>{r(!0)},p=()=>{r(!1),i(!1)};return n?t!=="intent"?[o,g,{}]:[o,g,{onFocus:Mr(c,y),onBlur:Mr(f,p),onMouseEnter:Mr(u,y),onMouseLeave:Mr(h,p),onTouchStart:Mr(m,y)}]:[!1,g,{}]}function Mr(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function By(n){var s=n,{page:t}=s,e=G(s,["page"]);let{router:r}=sf(),o=w.useMemo(()=>Hu(r.routes,t,r.basename),[r.routes,t,r.basename]);return o?w.createElement(Wy,x({page:t,matches:o},e)):null}function Gy(t){let{manifest:e,routeModules:n}=rf(),[s,r]=w.useState([]);return w.useEffect(()=>{let o=!1;return jy(t,e,n).then(i=>{o||r(i)}),()=>{o=!0}},[t,e,n]),s}function Wy(s){var r=s,{page:t,matches:e}=r,n=G(r,["page","matches"]);let o=ws(),{manifest:i,routeModules:c}=rf(),{basename:f}=sf(),{loaderData:u,matches:h}=Vy(),m=w.useMemo(()=>kc(t,e,h,i,o,"data"),[t,e,h,i,o]),g=w.useMemo(()=>kc(t,e,h,i,o,"assets"),[t,e,h,i,o]),y=w.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let C=new Set,b=!1;if(e.forEach(M=>{var k;let D=i.routes[M.route.id];!D||!D.hasLoader||(!m.some(_=>_.route.id===M.route.id)&&M.route.id in u&&((k=c[M.route.id])!=null&&k.shouldRevalidate)||D.hasClientLoader?b=!0:C.add(M.route.id))}),C.size===0)return[];let N=$y(t,f);return b&&C.size>0&&N.searchParams.set("_routes",e.filter(M=>C.has(M.route.id)).map(M=>M.route.id).join(",")),[N.pathname+N.search]},[f,u,o,i,m,e,t,c]),p=w.useMemo(()=>Ry(g,i),[g,i]),v=Gy(g);return w.createElement(w.Fragment,null,y.map(C=>w.createElement("link",x({key:C,rel:"prefetch",as:"fetch",href:C},n))),p.map(C=>w.createElement("link",x({key:C,rel:"modulepreload",href:C},n))),v.map(({key:C,link:b})=>w.createElement("link",x({key:C},b))))}function Yy(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var of=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{of&&(window.__reactRouterVersion="7.6.2")}catch(t){}function Hy({basename:t,children:e,window:n}){let s=w.useRef();s.current==null&&(s.current=Ap({window:n,v5Compat:!0}));let r=s.current,[o,i]=w.useState({action:r.action,location:r.location}),c=w.useCallback(f=>{w.startTransition(()=>i(f))},[i]);return w.useLayoutEffect(()=>r.listen(c),[r,c]),w.createElement(Cy,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:r})}var af=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lf=w.forwardRef(function(p,y){var v=p,{onClick:e,discover:n="render",prefetch:s="none",relative:r,reloadDocument:o,replace:i,state:c,target:f,to:u,preventScrollReset:h,viewTransition:m}=v,g=G(v,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"]);let{basename:C}=w.useContext(Sn),b=typeof u=="string"&&af.test(u),N,M=!1;if(typeof u=="string"&&b&&(N=u,of))try{let $=new URL(window.location.href),K=u.startsWith("//")?new URL($.protocol+u):new URL(u),te=Kn(K.pathname,C);K.origin===$.origin&&te!=null?u=te+K.search+K.hash:M=!0}catch($){kn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=oy(u,{relative:r}),[k,_,E]=Uy(s,g),P=Jy(u,{replace:i,state:c,target:f,preventScrollReset:h,relative:r,viewTransition:m});function R($){e&&e($),$.defaultPrevented||P($)}let B=w.createElement("a",F(x(x({},g),E),{href:N||D,onClick:M||o?e:R,ref:Yy(y,_),target:f,"data-discover":!b&&n==="render"?"true":void 0}));return k&&!b?w.createElement(w.Fragment,null,B,w.createElement(By,{page:D})):B});lf.displayName="Link";var zy=w.forwardRef(function(m,h){var g=m,{"aria-current":e="page",caseSensitive:n=!1,className:s="",end:r=!1,style:o,to:i,viewTransition:c,children:f}=g,u=G(g,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let y=io(i,{relative:u.relative}),p=ws(),v=w.useContext(pa),{navigator:C,basename:b}=w.useContext(Sn),N=v!=null&&tx(y)&&c===!0,M=C.encodeLocation?C.encodeLocation(y).pathname:y.pathname,D=p.pathname,k=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(D=D.toLowerCase(),k=k?k.toLowerCase():null,M=M.toLowerCase()),k&&b&&(k=Kn(k,b)||k);const _=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let E=D===M||!r&&D.startsWith(M)&&D.charAt(_)==="/",P=k!=null&&(k===M||!r&&k.startsWith(M)&&k.charAt(M.length)==="/"),R={isActive:E,isPending:P,isTransitioning:N},B=E?e:void 0,$;typeof s=="function"?$=s(R):$=[s,E?"active":null,P?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let K=typeof o=="function"?o(R):o;return w.createElement(lf,F(x({},u),{"aria-current":B,className:$,ref:h,style:K,to:i,viewTransition:c}),typeof f=="function"?f(R):f)});zy.displayName="NavLink";var qy=w.forwardRef((p,y)=>{var v=p,{discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:r,state:o,method:i=Uo,action:c,onSubmit:f,relative:u,preventScrollReset:h,viewTransition:m}=v,g=G(v,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"]);let C=Qy(),b=ex(c,{relative:u}),N=i.toLowerCase()==="get"?"get":"post",M=typeof c=="string"&&af.test(c),D=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let _=k.nativeEvent.submitter,E=(_==null?void 0:_.getAttribute("formmethod"))||i;C(_||k.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:r,state:o,relative:u,preventScrollReset:h,viewTransition:m})};return w.createElement("form",F(x({ref:y,method:N,action:b,onSubmit:s?f:D},g),{"data-discover":!M&&t==="render"?"true":void 0}))});qy.displayName="Form";function Zy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cf(t){let e=w.useContext(yr);return pt(e,Zy(t)),e}function Jy(t,{target:e,replace:n,state:s,preventScrollReset:r,relative:o,viewTransition:i}={}){let c=bl(),f=ws(),u=io(t,{relative:o});return w.useCallback(h=>{if(Ny(h,e)){h.preventDefault();let m=n!==void 0?n:Zr(f)===Zr(u);c(t,{replace:m,state:s,preventScrollReset:r,relative:o,viewTransition:i})}},[f,c,u,n,s,e,t,r,o,i])}var Ky=0,Xy=()=>`__${String(++Ky)}__`;function Qy(){let{router:t}=cf("useSubmit"),{basename:e}=w.useContext(Sn),n=yy();return w.useCallback((o,...i)=>T(null,[o,...i],function*(s,r={}){let{action:c,method:f,encType:u,formData:h,body:m}=Dy(s,e);if(r.navigate===!1){let g=r.fetcherKey||Xy();yield t.fetch(g,n,r.action||c,{preventScrollReset:r.preventScrollReset,formData:h,body:m,formMethod:r.method||f,formEncType:r.encType||u,flushSync:r.flushSync})}else yield t.navigate(r.action||c,{preventScrollReset:r.preventScrollReset,formData:h,body:m,formMethod:r.method||f,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})}),[t,e,n])}function ex(t,{relative:e}={}){let{basename:n}=w.useContext(Sn),s=w.useContext(Nn);pt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o=x({},io(t||".",{relative:e})),i=ws();if(t==null){o.search=i.search;let c=new URLSearchParams(o.search),f=c.getAll("index");if(f.some(h=>h==="")){c.delete("index"),f.filter(m=>m).forEach(m=>c.append("index",m));let h=c.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Wn([n,o.pathname])),Zr(o)}function tx(t,e={}){let n=w.useContext(Xu);pt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=cf("useViewTransitionState"),r=io(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Kn(n.currentLocation.pathname,s)||n.currentLocation.pathname,i=Kn(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ko(r.pathname,i)!=null||Ko(r.pathname,o)!=null}[...Ly];const df=w.createContext(void 0);function nx({children:t}){const[e,n]=w.useState(()=>{const r=localStorage.getItem("dayflow-theme");return r||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});w.useEffect(()=>{const r=window.document.documentElement;r.classList.remove("light","dark"),r.classList.add(e),localStorage.setItem("dayflow-theme",e)},[e]);const s=()=>{n(r=>r==="light"?"dark":"light")};return a.jsx(df.Provider,{value:{theme:e,setTheme:n,toggleTheme:s},children:t})}function sx(){const t=w.useContext(df);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ox=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),_c=t=>{const e=ox(t);return e.charAt(0).toUpperCase()+e.slice(1)},uf=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),ax=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ix={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=w.forwardRef((u,f)=>{var h=u,{color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:o,iconNode:i}=h,c=G(h,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return w.createElement("svg",x(x(F(x({ref:f},ix),{width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:uf("lucide",r)}),!o&&!ax(c)&&{"aria-hidden":"true"}),c),[...i.map(([m,g])=>w.createElement(m,g)),...Array.isArray(o)?o:[o]])});/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=(t,e)=>{const n=w.forwardRef((i,o)=>{var c=i,{className:s}=c,r=G(c,["className"]);return w.createElement(lx,x({ref:o,iconNode:e,className:uf(`lucide-${rx(_c(t))}`,`lucide-${t}`,s)},r))});return n.displayName=_c(t),n};/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]],dx=z("apple",cx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nr=z("arrow-left",ux);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ff=z("arrow-right",fx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Xo=z("arrow-up",hx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],gx=z("award",mx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=[["path",{d:"M4 13c3.5-2 8-2 10 2a5.5 5.5 0 0 1 8 5",key:"1cscit"}],["path",{d:"M5.15 17.89c5.52-1.52 8.65-6.89 7-12C11.55 4 11.5 2 13 2c3.22 0 5 5.5 5 8 0 6.5-4.2 12-10.49 12C5.11 22 2 22 2 20c0-1.5 1.14-1.55 3.15-2.11Z",key:"1y1nbv"}]],yx=z("banana",px);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],vx=z("battery",xx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Cx=z("book",wx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ri=z("briefcase",bx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],_x=z("building",kx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],hf=z("calendar-days",Tx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],nt=z("calendar",Sx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Mx=z("camera",Nx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],Dx=z("car",Ex);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],Ax=z("chart-no-axes-column-increasing",Ix);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ms=z("check",jx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Nl=z("chevron-down",Rx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ml=z("chevron-left",Px);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],lo=z("chevron-right",Ox);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Lx=z("chevron-up",Fx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ut=z("circle-alert",$x);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],At=z("circle-check-big",Vx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Bx=z("circle-check",Ux);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Wx=z("circle-plus",Gx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Hx=z("circle",Yx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Vt=z("clock",zx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Zx=z("cloud-off",qx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Rs=z("cloud",Jx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Xx=z("coffee",Kx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ev=z("compass",Qx);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$r=z("copy",tv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Pi=z("download",nv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],rv=z("droplets",sv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],av=z("dumbbell",ov);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],mf=z("external-link",iv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ai=z("eye-off",lv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Go=z("eye",cv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],uv=z("factory",dv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],hv=z("flag",fv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]],gv=z("flower",mv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],yv=z("folder",pv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],vv=z("gamepad-2",xv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Cv=z("gift",wv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],kv=z("git-merge",bv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Tv=z("globe",_v);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Nv=z("grid-3x3",Sv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Ev=z("grip-vertical",Mv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Iv=z("headphones",Dv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],jv=z("heart",Av);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]],Pv=z("hospital",Rv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Fv=z("house",Ov);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$v=z("info",Lv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]],Uv=z("kanban",Vv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Oi=z("key",Bv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],Wv=z("keyboard",Gv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],Hv=z("laptop",Yv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Xs=z("layers",zv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Zv=z("layout-dashboard",qv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Kv=z("layout-grid",Jv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Qv=z("leaf",Xv);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],t0=z("lightbulb",e0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],s0=z("list-checks",n0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Jr=z("list",r0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Qo=z("loader-circle",o0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],i0=z("log-out",a0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Qs=z("mail",l0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],d0=z("map",c0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],f0=z("message-circle",u0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],m0=z("mic",h0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=[["path",{d:"M5 12h14",key:"1ays0h"}]],gf=z("minus",g0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],y0=z("monitor",p0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],v0=z("moon",x0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]],C0=z("mouse",w0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],k0=z("music",b0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],T0=z("palette",_0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],N0=z("panel-left",S0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],E0=z("panels-top-left",M0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],I0=z("phone",D0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],j0=z("plane",A0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$n=z("plus",R0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],O0=z("printer",P0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],L0=z("puzzle",F0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],V0=z("refresh-cw",$0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Ns=z("repeat",U0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pf=z("save",B0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],W0=z("school",G0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],H0=z("search",Y0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],q0=z("settings",z0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],yf=z("shield",Z0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],K0=z("shopping-bag",J0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Q0=z("smile",X0);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],cs=z("sparkles",ew);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nw=z("square-check-big",tw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],en=z("square-pen",sw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ow=z("star",rw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],iw=z("store",aw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],cw=z("sun",lw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],uw=z("tag",dw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xf=z("target",fw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ds=z("trash-2",hw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],gw=z("trees",mw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xa=z("triangle-alert",pw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],xw=z("trending-up",yw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],ww=z("unlink",vw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fi=z("user",Cw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],kw=z("utensils",bw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Tw=z("wifi",_w);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xn=z("x",Sw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],vf=z("zap",Nw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Ew=z("zoom-in",Mw);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Iw=z("zoom-out",Dw);function wf(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=wf(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Cf(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=wf(t))&&(s&&(s+=" "),s+=e);return s}const Tc=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Sc=Cf,co=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return Sc(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:o}=e,i=Object.keys(r).map(u=>{const h=n==null?void 0:n[u],m=o==null?void 0:o[u];if(h===null)return null;const g=Tc(h)||Tc(m);return r[u][g]}),c=n&&Object.entries(n).reduce((u,h)=>{let[m,g]=h;return g===void 0||(u[m]=g),u},{}),f=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,h)=>{let p=h,{class:m,className:g}=p,y=G(p,["class","className"]);return Object.entries(y).every(v=>{let[C,b]=v;return Array.isArray(b)?b.includes(x(x({},o),c)[C]):x(x({},o),c)[C]===b})?[...u,m,g]:u},[]);return Sc(t,i,f,n==null?void 0:n.class,n==null?void 0:n.className)},El="-",Aw=t=>{const e=Rw(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:i=>{const c=i.split(El);return c[0]===""&&c.length!==1&&c.shift(),bf(c,e)||jw(i)},getConflictingClassGroupIds:(i,c)=>{const f=n[i]||[];return c&&s[i]?[...f,...s[i]]:f}}},bf=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),r=s?bf(t.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const o=t.join(El);return(i=e.validators.find(({validator:c})=>c(o)))==null?void 0:i.classGroupId},Nc=/^\[(.+)\]$/,jw=t=>{if(Nc.test(t)){const e=Nc.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Rw=t=>{const{theme:e,classGroups:n}=t,s={nextPart:new Map,validators:[]};for(const r in n)Li(n[r],s,r,e);return s},Li=(t,e,n,s)=>{t.forEach(r=>{if(typeof r=="string"){const o=r===""?e:Mc(e,r);o.classGroupId=n;return}if(typeof r=="function"){if(Pw(r)){Li(r(s),e,n,s);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([o,i])=>{Li(i,Mc(e,o),n,s)})})},Mc=(t,e)=>{let n=t;return e.split(El).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},Pw=t=>t.isThemeGetter,Ow=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const r=(o,i)=>{n.set(o,i),e++,e>t&&(e=0,s=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return r(o,i),i},set(o,i){n.has(o)?n.set(o,i):r(o,i)}}},$i="!",Vi=":",Fw=Vi.length,Lw=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=r=>{const o=[];let i=0,c=0,f=0,u;for(let p=0;p<r.length;p++){let v=r[p];if(i===0&&c===0){if(v===Vi){o.push(r.slice(f,p)),f=p+Fw;continue}if(v==="/"){u=p;continue}}v==="["?i++:v==="]"?i--:v==="("?c++:v===")"&&c--}const h=o.length===0?r:r.substring(f),m=$w(h),g=m!==h,y=u&&u>f?u-f:void 0;return{modifiers:o,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:y}};if(e){const r=e+Vi,o=s;s=i=>i.startsWith(r)?o(i.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=o=>n({className:o,parseClassName:r})}return s},$w=t=>t.endsWith($i)?t.substring(0,t.length-1):t.startsWith($i)?t.substring(1):t,Vw=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let o=[];return s.forEach(i=>{i[0]==="["||e[i]?(r.push(...o.sort(),i),o=[]):o.push(i)}),r.push(...o.sort()),r}},Uw=t=>x({cache:Ow(t.cacheSize),parseClassName:Lw(t),sortModifiers:Vw(t)},Aw(t)),Bw=/\s+/,Gw=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:o}=e,i=[],c=t.trim().split(Bw);let f="";for(let u=c.length-1;u>=0;u-=1){const h=c[u],{isExternal:m,modifiers:g,hasImportantModifier:y,baseClassName:p,maybePostfixModifierPosition:v}=n(h);if(m){f=h+(f.length>0?" "+f:f);continue}let C=!!v,b=s(C?p.substring(0,v):p);if(!b){if(!C){f=h+(f.length>0?" "+f:f);continue}if(b=s(p),!b){f=h+(f.length>0?" "+f:f);continue}C=!1}const N=o(g).join(":"),M=y?N+$i:N,D=M+b;if(i.includes(D))continue;i.push(D);const k=r(b,C);for(let _=0;_<k.length;++_){const E=k[_];i.push(M+E)}f=h+(f.length>0?" "+f:f)}return f};function Ww(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=kf(e))&&(s&&(s+=" "),s+=n);return s}const kf=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=kf(t[s]))&&(n&&(n+=" "),n+=e);return n};function Yw(t,...e){let n,s,r,o=i;function i(f){const u=e.reduce((h,m)=>m(h),t());return n=Uw(u),s=n.cache.get,r=n.cache.set,o=c,c(f)}function c(f){const u=s(f);if(u)return u;const h=Gw(f,n);return r(f,h),h}return function(){return o(Ww.apply(null,arguments))}}const kt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},_f=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Tf=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Hw=/^\d+\/\d+$/,zw=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qw=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zw=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Jw=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Kw=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ws=t=>Hw.test(t),Ie=t=>!!t&&!Number.isNaN(Number(t)),is=t=>!!t&&Number.isInteger(Number(t)),ii=t=>t.endsWith("%")&&Ie(t.slice(0,-1)),Rn=t=>zw.test(t),Xw=()=>!0,Qw=t=>qw.test(t)&&!Zw.test(t),Sf=()=>!1,e1=t=>Jw.test(t),t1=t=>Kw.test(t),n1=t=>!ce(t)&&!de(t),s1=t=>xr(t,Ef,Sf),ce=t=>_f.test(t),_s=t=>xr(t,Df,Qw),li=t=>xr(t,l1,Ie),Ec=t=>xr(t,Nf,Sf),r1=t=>xr(t,Mf,t1),Mo=t=>xr(t,If,e1),de=t=>Tf.test(t),Er=t=>vr(t,Df),o1=t=>vr(t,c1),Dc=t=>vr(t,Nf),a1=t=>vr(t,Ef),i1=t=>vr(t,Mf),Eo=t=>vr(t,If,!0),xr=(t,e,n)=>{const s=_f.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},vr=(t,e,n=!1)=>{const s=Tf.exec(t);return s?s[1]?e(s[1]):n:!1},Nf=t=>t==="position"||t==="percentage",Mf=t=>t==="image"||t==="url",Ef=t=>t==="length"||t==="size"||t==="bg-size",Df=t=>t==="length",l1=t=>t==="number",c1=t=>t==="family-name",If=t=>t==="shadow",d1=()=>{const t=kt("color"),e=kt("font"),n=kt("text"),s=kt("font-weight"),r=kt("tracking"),o=kt("leading"),i=kt("breakpoint"),c=kt("container"),f=kt("spacing"),u=kt("radius"),h=kt("shadow"),m=kt("inset-shadow"),g=kt("text-shadow"),y=kt("drop-shadow"),p=kt("blur"),v=kt("perspective"),C=kt("aspect"),b=kt("ease"),N=kt("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...D(),de,ce],_=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],P=()=>[de,ce,f],R=()=>[Ws,"full","auto",...P()],B=()=>[is,"none","subgrid",de,ce],$=()=>["auto",{span:["full",is,de,ce]},is,de,ce],K=()=>[is,"auto",de,ce],te=()=>["auto","min","max","fr",de,ce],le=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ve=()=>["start","end","center","stretch","center-safe","end-safe"],we=()=>["auto",...P()],_e=()=>[Ws,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],S=()=>[t,de,ce],L=()=>[...D(),Dc,Ec,{position:[de,ce]}],j=()=>["no-repeat",{repeat:["","x","y","space","round"]}],W=()=>["auto","cover","contain",a1,s1,{size:[de,ce]}],Q=()=>[ii,Er,_s],A=()=>["","none","full",u,de,ce],H=()=>["",Ie,Er,_s],O=()=>["solid","dashed","dotted","double"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ne=()=>[Ie,ii,Dc,Ec],U=()=>["","none",p,de,ce],Ce=()=>["none",Ie,de,ce],dt=()=>["none",Ie,de,ce],yt=()=>[Ie,de,ce],Je=()=>[Ws,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Rn],breakpoint:[Rn],color:[Xw],container:[Rn],"drop-shadow":[Rn],ease:["in","out","in-out"],font:[n1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Rn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Rn],shadow:[Rn],spacing:["px",Ie],text:[Rn],"text-shadow":[Rn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ws,ce,de,C]}],container:["container"],columns:[{columns:[Ie,ce,de,c]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[is,"auto",de,ce]}],basis:[{basis:[Ws,"full","auto",c,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ie,Ws,"auto","initial","none",ce]}],grow:[{grow:["",Ie,de,ce]}],shrink:[{shrink:["",Ie,de,ce]}],order:[{order:[is,"first","last","none",de,ce]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":K()}],"col-end":[{"col-end":K()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":K()}],"row-end":[{"row-end":K()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":te()}],"auto-rows":[{"auto-rows":te()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...le(),"normal"]}],"justify-items":[{"justify-items":[...ve(),"normal"]}],"justify-self":[{"justify-self":["auto",...ve()]}],"align-content":[{content:["normal",...le()]}],"align-items":[{items:[...ve(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ve(),{baseline:["","last"]}]}],"place-content":[{"place-content":le()}],"place-items":[{"place-items":[...ve(),"baseline"]}],"place-self":[{"place-self":["auto",...ve()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:we()}],mx:[{mx:we()}],my:[{my:we()}],ms:[{ms:we()}],me:[{me:we()}],mt:[{mt:we()}],mr:[{mr:we()}],mb:[{mb:we()}],ml:[{ml:we()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:_e()}],w:[{w:[c,"screen",..._e()]}],"min-w":[{"min-w":[c,"screen","none",..._e()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[i]},..._e()]}],h:[{h:["screen","lh",..._e()]}],"min-h":[{"min-h":["screen","lh","none",..._e()]}],"max-h":[{"max-h":["screen","lh",..._e()]}],"font-size":[{text:["base",n,Er,_s]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,de,li]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ii,ce]}],"font-family":[{font:[o1,ce,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,de,ce]}],"line-clamp":[{"line-clamp":[Ie,"none",de,li]}],leading:[{leading:[o,...P()]}],"list-image":[{"list-image":["none",de,ce]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",de,ce]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:S()}],"text-color":[{text:S()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ie,"from-font","auto",de,_s]}],"text-decoration-color":[{decoration:S()}],"underline-offset":[{"underline-offset":[Ie,"auto",de,ce]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de,ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de,ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:L()}],"bg-repeat":[{bg:j()}],"bg-size":[{bg:W()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},is,de,ce],radial:["",de,ce],conic:[is,de,ce]},i1,r1]}],"bg-color":[{bg:S()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:S()}],"gradient-via":[{via:S()}],"gradient-to":[{to:S()}],rounded:[{rounded:A()}],"rounded-s":[{"rounded-s":A()}],"rounded-e":[{"rounded-e":A()}],"rounded-t":[{"rounded-t":A()}],"rounded-r":[{"rounded-r":A()}],"rounded-b":[{"rounded-b":A()}],"rounded-l":[{"rounded-l":A()}],"rounded-ss":[{"rounded-ss":A()}],"rounded-se":[{"rounded-se":A()}],"rounded-ee":[{"rounded-ee":A()}],"rounded-es":[{"rounded-es":A()}],"rounded-tl":[{"rounded-tl":A()}],"rounded-tr":[{"rounded-tr":A()}],"rounded-br":[{"rounded-br":A()}],"rounded-bl":[{"rounded-bl":A()}],"border-w":[{border:H()}],"border-w-x":[{"border-x":H()}],"border-w-y":[{"border-y":H()}],"border-w-s":[{"border-s":H()}],"border-w-e":[{"border-e":H()}],"border-w-t":[{"border-t":H()}],"border-w-r":[{"border-r":H()}],"border-w-b":[{"border-b":H()}],"border-w-l":[{"border-l":H()}],"divide-x":[{"divide-x":H()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":H()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...O(),"hidden","none"]}],"divide-style":[{divide:[...O(),"hidden","none"]}],"border-color":[{border:S()}],"border-color-x":[{"border-x":S()}],"border-color-y":[{"border-y":S()}],"border-color-s":[{"border-s":S()}],"border-color-e":[{"border-e":S()}],"border-color-t":[{"border-t":S()}],"border-color-r":[{"border-r":S()}],"border-color-b":[{"border-b":S()}],"border-color-l":[{"border-l":S()}],"divide-color":[{divide:S()}],"outline-style":[{outline:[...O(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ie,de,ce]}],"outline-w":[{outline:["",Ie,Er,_s]}],"outline-color":[{outline:S()}],shadow:[{shadow:["","none",h,Eo,Mo]}],"shadow-color":[{shadow:S()}],"inset-shadow":[{"inset-shadow":["none",m,Eo,Mo]}],"inset-shadow-color":[{"inset-shadow":S()}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:S()}],"ring-offset-w":[{"ring-offset":[Ie,_s]}],"ring-offset-color":[{"ring-offset":S()}],"inset-ring-w":[{"inset-ring":H()}],"inset-ring-color":[{"inset-ring":S()}],"text-shadow":[{"text-shadow":["none",g,Eo,Mo]}],"text-shadow-color":[{"text-shadow":S()}],opacity:[{opacity:[Ie,de,ce]}],"mix-blend":[{"mix-blend":[...q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ie]}],"mask-image-linear-from-pos":[{"mask-linear-from":ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":ne()}],"mask-image-linear-from-color":[{"mask-linear-from":S()}],"mask-image-linear-to-color":[{"mask-linear-to":S()}],"mask-image-t-from-pos":[{"mask-t-from":ne()}],"mask-image-t-to-pos":[{"mask-t-to":ne()}],"mask-image-t-from-color":[{"mask-t-from":S()}],"mask-image-t-to-color":[{"mask-t-to":S()}],"mask-image-r-from-pos":[{"mask-r-from":ne()}],"mask-image-r-to-pos":[{"mask-r-to":ne()}],"mask-image-r-from-color":[{"mask-r-from":S()}],"mask-image-r-to-color":[{"mask-r-to":S()}],"mask-image-b-from-pos":[{"mask-b-from":ne()}],"mask-image-b-to-pos":[{"mask-b-to":ne()}],"mask-image-b-from-color":[{"mask-b-from":S()}],"mask-image-b-to-color":[{"mask-b-to":S()}],"mask-image-l-from-pos":[{"mask-l-from":ne()}],"mask-image-l-to-pos":[{"mask-l-to":ne()}],"mask-image-l-from-color":[{"mask-l-from":S()}],"mask-image-l-to-color":[{"mask-l-to":S()}],"mask-image-x-from-pos":[{"mask-x-from":ne()}],"mask-image-x-to-pos":[{"mask-x-to":ne()}],"mask-image-x-from-color":[{"mask-x-from":S()}],"mask-image-x-to-color":[{"mask-x-to":S()}],"mask-image-y-from-pos":[{"mask-y-from":ne()}],"mask-image-y-to-pos":[{"mask-y-to":ne()}],"mask-image-y-from-color":[{"mask-y-from":S()}],"mask-image-y-to-color":[{"mask-y-to":S()}],"mask-image-radial":[{"mask-radial":[de,ce]}],"mask-image-radial-from-pos":[{"mask-radial-from":ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":ne()}],"mask-image-radial-from-color":[{"mask-radial-from":S()}],"mask-image-radial-to-color":[{"mask-radial-to":S()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[Ie]}],"mask-image-conic-from-pos":[{"mask-conic-from":ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":ne()}],"mask-image-conic-from-color":[{"mask-conic-from":S()}],"mask-image-conic-to-color":[{"mask-conic-to":S()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:L()}],"mask-repeat":[{mask:j()}],"mask-size":[{mask:W()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",de,ce]}],filter:[{filter:["","none",de,ce]}],blur:[{blur:U()}],brightness:[{brightness:[Ie,de,ce]}],contrast:[{contrast:[Ie,de,ce]}],"drop-shadow":[{"drop-shadow":["","none",y,Eo,Mo]}],"drop-shadow-color":[{"drop-shadow":S()}],grayscale:[{grayscale:["",Ie,de,ce]}],"hue-rotate":[{"hue-rotate":[Ie,de,ce]}],invert:[{invert:["",Ie,de,ce]}],saturate:[{saturate:[Ie,de,ce]}],sepia:[{sepia:["",Ie,de,ce]}],"backdrop-filter":[{"backdrop-filter":["","none",de,ce]}],"backdrop-blur":[{"backdrop-blur":U()}],"backdrop-brightness":[{"backdrop-brightness":[Ie,de,ce]}],"backdrop-contrast":[{"backdrop-contrast":[Ie,de,ce]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ie,de,ce]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ie,de,ce]}],"backdrop-invert":[{"backdrop-invert":["",Ie,de,ce]}],"backdrop-opacity":[{"backdrop-opacity":[Ie,de,ce]}],"backdrop-saturate":[{"backdrop-saturate":[Ie,de,ce]}],"backdrop-sepia":[{"backdrop-sepia":["",Ie,de,ce]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",de,ce]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ie,"initial",de,ce]}],ease:[{ease:["linear","initial",b,de,ce]}],delay:[{delay:[Ie,de,ce]}],animate:[{animate:["none",N,de,ce]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,de,ce]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Ce()}],"rotate-x":[{"rotate-x":Ce()}],"rotate-y":[{"rotate-y":Ce()}],"rotate-z":[{"rotate-z":Ce()}],scale:[{scale:dt()}],"scale-x":[{"scale-x":dt()}],"scale-y":[{"scale-y":dt()}],"scale-z":[{"scale-z":dt()}],"scale-3d":["scale-3d"],skew:[{skew:yt()}],"skew-x":[{"skew-x":yt()}],"skew-y":[{"skew-y":yt()}],transform:[{transform:[de,ce,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Je()}],"translate-x":[{"translate-x":Je()}],"translate-y":[{"translate-y":Je()}],"translate-z":[{"translate-z":Je()}],"translate-none":["translate-none"],accent:[{accent:S()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:S()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de,ce]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de,ce]}],fill:[{fill:["none",...S()]}],"stroke-w":[{stroke:[Ie,Er,_s,li]}],stroke:[{stroke:["none",...S()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},u1=Yw(d1);function V(...t){return u1(Cf(t))}const Ui=co("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Z(o){var i=o,{className:t,variant:e,size:n,asChild:s=!1}=i,r=G(i,["className","variant","size","asChild"]);const c=s?ro:"button";return a.jsx(c,x({"data-slot":"button",className:V(Ui({variant:e,size:n,className:t}))},r))}const f1=()=>!0;let ci=null;const Ft=()=>T(null,null,function*(){if(!ci)try{const{getCurrentWindow:t}=yield Ei(()=>T(null,null,function*(){const{getCurrentWindow:e}=yield import("./window-CWXygZvY.js");return{getCurrentWindow:e}}),__vite__mapDeps([0,1]));ci=t()}catch(t){console.warn("Failed to load Tauri window APIs:",t)}return ci});class h1{minimize(){return T(this,null,function*(){const e=yield Ft();e&&(yield e.minimize())})}toggleMaximize(){return T(this,null,function*(){const e=yield Ft();e&&(yield e.toggleMaximize())})}close(){return T(this,null,function*(){const e=yield Ft();e&&(yield e.close())})}setAlwaysOnTop(e){return T(this,null,function*(){const n=yield Ft();n&&(yield n.setAlwaysOnTop(e))})}setSize(e,n){return T(this,null,function*(){const s=yield Ft();if(s){const{LogicalSize:r}=yield Ei(()=>T(null,null,function*(){const{LogicalSize:o}=yield import("./dpi-BwbmHrYW.js").then(i=>i.d);return{LogicalSize:o}}),[]);yield s.setSize(new r(e,n))}})}setPosition(e,n){return T(this,null,function*(){const s=yield Ft();if(s){const{LogicalPosition:r}=yield Ei(()=>T(null,null,function*(){const{LogicalPosition:o}=yield import("./dpi-BwbmHrYW.js").then(i=>i.d);return{LogicalPosition:o}}),[]);yield s.setPosition(new r(e,n))}})}setResizable(e){return T(this,null,function*(){const n=yield Ft();n&&(yield n.setResizable(e))})}setDecorations(e){return T(this,null,function*(){const n=yield Ft();n&&(yield n.setDecorations(e))})}setFullscreen(e){return T(this,null,function*(){const n=yield Ft();n&&(yield n.setFullscreen(e))})}center(){return T(this,null,function*(){const e=yield Ft();e&&(yield e.center())})}setFocus(){return T(this,null,function*(){const e=yield Ft();e&&(yield e.setFocus())})}isAlwaysOnTop(){return T(this,null,function*(){const e=yield Ft();return e?yield e.isAlwaysOnTop():!1})}setVisibleOnAllWorkspaces(e){return T(this,null,function*(){const n=yield Ft();if(n)try{yield n.setVisibleOnAllWorkspaces(e)}catch(s){console.debug("setVisibleOnAllWorkspaces not supported:",s)}})}setMinimizable(e){return T(this,null,function*(){const n=yield Ft();n&&(yield n.setMinimizable(e))})}}const Do=new h1,Ms=()=>{const[t,e]=w.useState(!1);if(w.useEffect(()=>{e(!0)},[]),!t)return null;const n=()=>{Do.minimize()},s=()=>{Do.toggleMaximize()},r=()=>{Do.close()},o=i=>{i.detail===2&&Do.toggleMaximize()};return a.jsxs("div",{className:"flex items-center justify-between h-8 select-none fixed top-0 left-0 right-0 z-50 backdrop-blur-sm  pointer-events-none",children:[a.jsx("div",{className:"flex items-center gap-2 px-3 h-full flex-1 pointer-events-auto","data-tauri-drag-region":!0,onDoubleClick:o})," ",a.jsxs("div",{className:"flex items-center h-full pointer-events-auto",children:[a.jsx(Z,{onClick:n,variant:"ghost",size:"sm",className:"h-8 w-12 p-0 rounded-none hover:bg-muted/50 transition-colors","aria-label":"Minimize",children:a.jsx(gf,{className:"h-3 w-3"})}),a.jsx(Z,{onClick:s,variant:"ghost",size:"sm",className:"h-8 w-12 p-0 rounded-none hover:bg-muted/50 transition-colors","aria-label":"Maximize",children:a.jsx("div",{className:"w-2.5 h-2.5 border border-current"})}),a.jsx(Z,{onClick:r,variant:"ghost",size:"sm",className:"h-8 w-12 p-0 rounded-none hover:bg-destructive hover:text-destructive-foreground transition-colors","aria-label":"Close",children:a.jsx(xn,{})})]})]})};function vn(e){var t=G(e,[]);return a.jsx(Mu,x({"data-slot":"dialog"},t))}function m1(e){var t=G(e,[]);return a.jsx(ju,x({"data-slot":"dialog-portal"},t))}const Af=w.forwardRef((s,n)=>{var r=s,{className:t}=r,e=G(r,["className"]);return a.jsx(vl,x({ref:n,"data-slot":"dialog-overlay",className:V("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t)},e))});Af.displayName=vl.displayName;function wn(s){var r=s,{className:t,children:e}=r,n=G(r,["className","children"]);return a.jsxs(m1,{"data-slot":"dialog-portal",children:[a.jsx(Af,{}),a.jsxs(Eu,F(x({"data-slot":"dialog-content",className:V("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t)},n),{children:[e,a.jsxs(Du,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[a.jsx(xn,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})}function gs(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"dialog-header",className:V("flex flex-col gap-2 text-center sm:text-left",t)},e))}function Is(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"dialog-footer",className:V("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t)},e))}function Yn(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx(Iu,x({"data-slot":"dialog-title",className:V("text-lg leading-none font-semibold",t)},e))}function Hn(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx(Au,x({"data-slot":"dialog-description",className:V("text-muted-foreground text-sm",t)},e))}function Ae(s){var r=s,{className:t,type:e}=r,n=G(r,["className","type"]);return a.jsx("input",x({type:e,"data-slot":"input",className:V("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t)},n))}function va(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("textarea",x({"data-slot":"textarea",className:V("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t)},e))}const jf=[{name:"Briefcase",component:Ri},{name:"Target",component:xf},{name:"CheckSquare",component:nw},{name:"Calendar",component:nt},{name:"BarChart",component:Ax},{name:"TrendingUp",component:xw},{name:"Lightbulb",component:t0},{name:"Star",component:ow},{name:"Flag",component:hv},{name:"Award",component:gx},{name:"Zap",component:vf},{name:"Heart",component:jv},{name:"Book",component:Cx},{name:"Music",component:k0},{name:"Camera",component:Mx},{name:"Coffee",component:Xx},{name:"Gamepad2",component:vv},{name:"Plane",component:j0},{name:"Car",component:Dx},{name:"ShoppingBag",component:K0},{name:"Dumbbell",component:av},{name:"Utensils",component:kw},{name:"Laptop",component:Hv},{name:"Phone",component:I0},{name:"Mail",component:Qs},{name:"MessageCircle",component:f0},{name:"Clock",component:Vt},{name:"Gift",component:Cv},{name:"Shield",component:yf},{name:"Key",component:Oi},{name:"Eye",component:Go},{name:"Search",component:H0},{name:"Globe",component:Tv},{name:"Map",component:d0},{name:"Compass",component:ev},{name:"Sun",component:cw},{name:"Moon",component:v0},{name:"Cloud",component:Rs},{name:"Droplets",component:rv},{name:"Building",component:_x},{name:"Home",component:Fv},{name:"School",component:W0},{name:"Hospital",component:Pv},{name:"Store",component:iw},{name:"Factory",component:uv},{name:"Wifi",component:Tw},{name:"Battery",component:vx},{name:"Headphones",component:Iv},{name:"Mic",component:m0},{name:"Monitor",component:y0},{name:"Printer",component:O0},{name:"Mouse",component:C0},{name:"Keyboard",component:Wv},{name:"Puzzle",component:L0},{name:"Smile",component:Q0},{name:"Flower",component:gv},{name:"Trees",component:gw},{name:"Leaf",component:Qv},{name:"Apple",component:dx},{name:"Banana",component:yx}],Fn=(t,e="h-4 w-4")=>{if(!t)return a.jsx(Ri,{className:e});const n=jf.find(s=>s.name===t);if(n){const s=n.component;return a.jsx(s,{className:e})}return a.jsx(Ri,{className:e})},di=768;function g1(){const[t,e]=w.useState(void 0);return w.useEffect(()=>{const n=window.matchMedia(`(max-width: ${di-1}px)`),s=()=>{e(window.innerWidth<di)};return n.addEventListener("change",s),e(window.innerWidth<di),()=>n.removeEventListener("change",s)},[]),!!t}var p1="Separator",Ic="horizontal",y1=["horizontal","vertical"],Rf=w.forwardRef((t,e)=>{const f=t,{decorative:n,orientation:s=Ic}=f,r=G(f,["decorative","orientation"]),o=x1(s)?s:Ic,c=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return a.jsx(es.div,F(x(x({"data-orientation":o},c),r),{ref:e}))});Rf.displayName=p1;function x1(t){return y1.includes(t)}var v1=Rf;function As(r){var o=r,{className:t,orientation:e="horizontal",decorative:n=!0}=o,s=G(o,["className","orientation","decorative"]);return a.jsx(v1,x({"data-slot":"separator",decorative:n,orientation:e,className:V("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t)},s))}function w1(e){var t=G(e,[]);return a.jsx(Mu,x({"data-slot":"sheet"},t))}function C1(e){var t=G(e,[]);return a.jsx(ju,x({"data-slot":"sheet-portal"},t))}function b1(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx(vl,x({"data-slot":"sheet-overlay",className:V("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t)},e))}function k1(r){var o=r,{className:t,children:e,side:n="right"}=o,s=G(o,["className","children","side"]);return a.jsxs(C1,{children:[a.jsx(b1,{}),a.jsxs(Eu,F(x({"data-slot":"sheet-content",className:V("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t)},s),{children:[e,a.jsxs(Du,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[a.jsx(xn,{className:"size-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})}function _1(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"sheet-header",className:V("flex flex-col gap-1.5 p-4",t)},e))}function T1(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx(Iu,x({"data-slot":"sheet-title",className:V("text-foreground font-semibold",t)},e))}function S1(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx(Au,x({"data-slot":"sheet-description",className:V("text-muted-foreground text-sm",t)},e))}var[wa,RP]=ma("Tooltip",[Ru]),Ca=Ru(),Pf="TooltipProvider",N1=700,Bi="tooltip.open",[M1,Dl]=wa(Pf),Of=t=>{const{__scopeTooltip:e,delayDuration:n=N1,skipDelayDuration:s=300,disableHoverableContent:r=!1,children:o}=t,i=w.useRef(!0),c=w.useRef(!1),f=w.useRef(0);return w.useEffect(()=>{const u=f.current;return()=>window.clearTimeout(u)},[]),a.jsx(M1,{scope:e,isOpenDelayedRef:i,delayDuration:n,onOpen:w.useCallback(()=>{window.clearTimeout(f.current),i.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:c,onPointerInTransitChange:w.useCallback(u=>{c.current=u},[]),disableHoverableContent:r,children:o})};Of.displayName=Pf;var Kr="Tooltip",[E1,uo]=wa(Kr),Ff=t=>{const{__scopeTooltip:e,children:n,open:s,defaultOpen:r,onOpenChange:o,disableHoverableContent:i,delayDuration:c}=t,f=Dl(Kr,t.__scopeTooltip),u=Ca(e),[h,m]=w.useState(null),g=yg(),y=w.useRef(0),p=i!=null?i:f.disableHoverableContent,v=c!=null?c:f.delayDuration,C=w.useRef(!1),[b,N]=ga({prop:s,defaultProp:r!=null?r:!1,onChange:E=>{E?(f.onOpen(),document.dispatchEvent(new CustomEvent(Bi))):f.onClose(),o==null||o(E)},caller:Kr}),M=w.useMemo(()=>b?C.current?"delayed-open":"instant-open":"closed",[b]),D=w.useCallback(()=>{window.clearTimeout(y.current),y.current=0,C.current=!1,N(!0)},[N]),k=w.useCallback(()=>{window.clearTimeout(y.current),y.current=0,N(!1)},[N]),_=w.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{C.current=!0,N(!0),y.current=0},v)},[v,N]);return w.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),a.jsx(xg,F(x({},u),{children:a.jsx(E1,{scope:e,contentId:g,open:b,stateAttribute:M,trigger:h,onTriggerChange:m,onTriggerEnter:w.useCallback(()=>{f.isOpenDelayedRef.current?_():D()},[f.isOpenDelayedRef,_,D]),onTriggerLeave:w.useCallback(()=>{p?k():(window.clearTimeout(y.current),y.current=0)},[k,p]),onOpen:D,onClose:k,disableHoverableContent:p,children:n})}))};Ff.displayName=Kr;var Gi="TooltipTrigger",Lf=w.forwardRef((t,e)=>{const g=t,{__scopeTooltip:n}=g,s=G(g,["__scopeTooltip"]),r=uo(Gi,n),o=Dl(Gi,n),i=Ca(n),c=w.useRef(null),f=gr(e,c,r.onTriggerChange),u=w.useRef(!1),h=w.useRef(!1),m=w.useCallback(()=>u.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),a.jsx(vg,F(x({asChild:!0},i),{children:a.jsx(es.button,F(x({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},s),{ref:f,onPointerMove:$t(t.onPointerMove,y=>{y.pointerType!=="touch"&&!h.current&&!o.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:$t(t.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:$t(t.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:$t(t.onFocus,()=>{u.current||r.onOpen()}),onBlur:$t(t.onBlur,r.onClose),onClick:$t(t.onClick,r.onClose)}))}))});Lf.displayName=Gi;var Il="TooltipPortal",[D1,I1]=wa(Il,{forceMount:void 0}),$f=t=>{const{__scopeTooltip:e,forceMount:n,children:s,container:r}=t,o=uo(Il,e);return a.jsx(D1,{scope:e,forceMount:n,children:a.jsx(wl,{present:n||o.open,children:a.jsx(wg,{asChild:!0,container:r,children:s})})})};$f.displayName=Il;var lr="TooltipContent",Vf=w.forwardRef((t,e)=>{const n=I1(lr,t.__scopeTooltip),c=t,{forceMount:s=n.forceMount,side:r="top"}=c,o=G(c,["forceMount","side"]),i=uo(lr,t.__scopeTooltip);return a.jsx(wl,{present:s||i.open,children:i.disableHoverableContent?a.jsx(Uf,F(x({side:r},o),{ref:e})):a.jsx(A1,F(x({side:r},o),{ref:e}))})}),A1=w.forwardRef((t,e)=>{const n=uo(lr,t.__scopeTooltip),s=Dl(lr,t.__scopeTooltip),r=w.useRef(null),o=gr(e,r),[i,c]=w.useState(null),{trigger:f,onClose:u}=n,h=r.current,{onPointerInTransitChange:m}=s,g=w.useCallback(()=>{c(null),m(!1)},[m]),y=w.useCallback((p,v)=>{const C=p.currentTarget,b={x:p.clientX,y:p.clientY},N=O1(b,C.getBoundingClientRect()),M=F1(b,N),D=L1(v.getBoundingClientRect()),k=V1([...M,...D]);c(k),m(!0)},[m]);return w.useEffect(()=>()=>g(),[g]),w.useEffect(()=>{if(f&&h){const p=C=>y(C,h),v=C=>y(C,f);return f.addEventListener("pointerleave",p),h.addEventListener("pointerleave",v),()=>{f.removeEventListener("pointerleave",p),h.removeEventListener("pointerleave",v)}}},[f,h,y,g]),w.useEffect(()=>{if(i){const p=v=>{const C=v.target,b={x:v.clientX,y:v.clientY},N=(f==null?void 0:f.contains(C))||(h==null?void 0:h.contains(C)),M=!$1(b,i);N?g():M&&(g(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[f,h,i,u,g]),a.jsx(Uf,F(x({},t),{ref:o}))}),[j1,R1]=wa(Kr,{isInside:!1}),P1=_g("TooltipContent"),Uf=w.forwardRef((t,e)=>{const m=t,{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:o,onPointerDownOutside:i}=m,c=G(m,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),f=uo(lr,n),u=Ca(n),{onClose:h}=f;return w.useEffect(()=>(document.addEventListener(Bi,h),()=>document.removeEventListener(Bi,h)),[h]),w.useEffect(()=>{if(f.trigger){const g=y=>{const p=y.target;p!=null&&p.contains(f.trigger)&&h()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[f.trigger,h]),a.jsx(bg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:g=>g.preventDefault(),onDismiss:h,children:a.jsxs(kg,F(x(x({"data-state":f.stateAttribute},u),c),{ref:e,style:F(x({},c.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}),children:[a.jsx(P1,{children:s}),a.jsx(j1,{scope:n,isInside:!0,children:a.jsx(Tg,{id:f.contentId,role:"tooltip",children:r||s})})]}))})});Vf.displayName=lr;var Bf="TooltipArrow",Gf=w.forwardRef((t,e)=>{const i=t,{__scopeTooltip:n}=i,s=G(i,["__scopeTooltip"]),r=Ca(n);return R1(Bf,n).isInside?null:a.jsx(Cg,F(x(x({},r),s),{ref:e}))});Gf.displayName=Bf;function O1(t,e){const n=Math.abs(e.top-t.y),s=Math.abs(e.bottom-t.y),r=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,s,r,o)){case o:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function F1(t,e,n=5){const s=[];switch(e){case"top":s.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":s.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":s.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":s.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return s}function L1(t){const{top:e,right:n,bottom:s,left:r}=t;return[{x:r,y:e},{x:n,y:e},{x:n,y:s},{x:r,y:s}]}function $1(t,e){const{x:n,y:s}=t;let r=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const c=e[o],f=e[i],u=c.x,h=c.y,m=f.x,g=f.y;h>s!=g>s&&n<(m-u)*(s-h)/(g-h)+u&&(r=!r)}return r}function V1(t){const e=t.slice();return e.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),U1(e)}function U1(t){if(t.length<=1)return t.slice();const e=[];for(let s=0;s<t.length;s++){const r=t[s];for(;e.length>=2;){const o=e[e.length-1],i=e[e.length-2];if((o.x-i.x)*(r.y-i.y)>=(o.y-i.y)*(r.x-i.x))e.pop();else break}e.push(r)}e.pop();const n=[];for(let s=t.length-1;s>=0;s--){const r=t[s];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(r.y-i.y)>=(o.y-i.y)*(r.x-i.x))n.pop();else break}n.push(r)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var B1=Of,G1=Ff,W1=Lf,Y1=$f,H1=Vf,z1=Gf;function Wf(n){var s=n,{delayDuration:t=0}=s,e=G(s,["delayDuration"]);return a.jsx(B1,x({"data-slot":"tooltip-provider",delayDuration:t},e))}function q1(e){var t=G(e,[]);return a.jsx(Wf,{children:a.jsx(G1,x({"data-slot":"tooltip"},t))})}function Z1(e){var t=G(e,[]);return a.jsx(W1,x({"data-slot":"tooltip-trigger"},t))}function J1(r){var o=r,{className:t,sideOffset:e=0,children:n}=o,s=G(o,["className","sideOffset","children"]);return a.jsx(Y1,{children:a.jsxs(H1,F(x({"data-slot":"tooltip-content",sideOffset:e,className:V("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t)},s),{children:[n,a.jsx(z1,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]}))})}const Ac="sidebar_state",K1=60*60*24*7,X1="16rem",Q1="18rem",eC="3rem",tC="b",Yf=w.createContext(null);function ba(){const t=w.useContext(Yf);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function fo(c){var f=c,{defaultOpen:t=!0,open:e,onOpenChange:n,className:s,style:r,children:o}=f,i=G(f,["defaultOpen","open","onOpenChange","className","style","children"]);const u=g1(),[h,m]=w.useState(!1),g=w.useCallback(()=>{if(typeof document=="undefined")return t;const k=document.cookie.split(";").find(_=>_.trim().startsWith(`${Ac}=`));return k?k.split("=")[1]==="true":t},[t]),[y,p]=w.useState(()=>g()),v=e!=null?e:y,C=w.useCallback(D=>{const k=typeof D=="function"?D(v):D;n?n(k):p(k),document.cookie=`${Ac}=${k}; path=/; max-age=${K1}`},[n,v]),b=w.useCallback(()=>u?m(D=>!D):C(D=>!D),[u,C,m]);w.useEffect(()=>{const D=k=>{k.key===tC&&(k.metaKey||k.ctrlKey)&&(k.preventDefault(),b())};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[b]);const N=v?"expanded":"collapsed",M=w.useMemo(()=>({state:N,open:v,setOpen:C,isMobile:u,openMobile:h,setOpenMobile:m,toggleSidebar:b}),[N,v,C,u,h,m,b]);return a.jsx(Yf.Provider,{value:M,children:a.jsx(Wf,{delayDuration:0,children:a.jsx("div",F(x({"data-slot":"sidebar-wrapper",style:x({"--sidebar-width":X1,"--sidebar-width-icon":eC},r),className:V("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",s)},i),{children:o}))})})}function Hf(i){var c=i,{side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:s,children:r}=c,o=G(c,["side","variant","collapsible","className","children"]);const{isMobile:f,state:u,openMobile:h,setOpenMobile:m}=ba();return n==="none"?a.jsx("div",F(x({"data-slot":"sidebar",className:V("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",s)},o),{children:r})):f?a.jsx(w1,F(x({open:h,onOpenChange:m},o),{children:a.jsxs(k1,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":Q1},side:t,children:[a.jsxs(_1,{className:"sr-only",children:[a.jsx(T1,{children:"Sidebar"}),a.jsx(S1,{children:"Displays the mobile sidebar."})]}),a.jsx("div",{className:"flex h-full w-full flex-col",children:r})]})})):a.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":u,"data-collapsible":u==="collapsed"?n:"","data-variant":e,"data-side":t,"data-slot":"sidebar",children:[a.jsx("div",{"data-slot":"sidebar-gap",className:V("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),a.jsx("div",F(x({"data-slot":"sidebar-container",className:V("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",s)},o),{children:a.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:r})}))]})}function zf(s){var r=s,{className:t,onClick:e}=r,n=G(r,["className","onClick"]);const{toggleSidebar:o}=ba();return a.jsxs(Z,F(x({"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:V("size-7",t),onClick:i=>{e==null||e(i),o()}},n),{children:[a.jsx(N0,{}),a.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]}))}function nC(n){var s=n,{className:t}=s,e=G(s,["className"]);const{toggleSidebar:r}=ba();return a.jsx("button",x({"data-sidebar":"rail","data-slot":"sidebar-rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:V("hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex","in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t)},e))}function ho(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("main",x({"data-slot":"sidebar-inset",className:V("bg-background relative flex w-full flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",t)},e))}function qf(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"sidebar-header","data-sidebar":"header",className:V("flex flex-col gap-2 p-2",t)},e))}function sC(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"sidebar-footer","data-sidebar":"footer",className:V("flex flex-col gap-2 p-2",t)},e))}function Zf(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"sidebar-content","data-sidebar":"content",className:V("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t)},e))}function Vr(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"sidebar-group","data-sidebar":"group",className:V("relative flex w-full min-w-0 flex-col p-2",t)},e))}function Ur(s){var r=s,{className:t,asChild:e=!1}=r,n=G(r,["className","asChild"]);const o=e?ro:"div";return a.jsx(o,x({"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:V("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t)},n))}function Br(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:V("w-full text-sm",t)},e))}function Es(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("ul",x({"data-slot":"sidebar-menu","data-sidebar":"menu",className:V("flex w-full min-w-0 flex-col gap-1",t)},e))}function hn(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("li",x({"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:V("group/menu-item relative",t)},e))}const rC=co("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Ln(c){var f=c,{asChild:t=!1,isActive:e=!1,variant:n="default",size:s="default",tooltip:r,className:o}=f,i=G(f,["asChild","isActive","variant","size","tooltip","className"]);const u=t?ro:"button",{isMobile:h,state:m}=ba(),g=a.jsx(u,x({"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":s,"data-active":e,className:V(rC({variant:n,size:s}),o)},i));return r?(typeof r=="string"&&(r={children:r}),a.jsxs(q1,{children:[a.jsx(Z1,{asChild:!0,children:g}),a.jsx(J1,x({side:"right",align:"center",hidden:m!=="collapsed"||h},r))]})):g}function oC(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("ul",x({"data-slot":"sidebar-menu-sub","data-sidebar":"menu-sub",className:V("border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t)},e))}function Io(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("li",x({"data-slot":"sidebar-menu-sub-item","data-sidebar":"menu-sub-item",className:V("group/menu-sub-item relative",t)},e))}function ui(o){var i=o,{asChild:t=!1,size:e="md",isActive:n=!1,className:s}=i,r=G(i,["asChild","size","isActive","className"]);const c=t?ro:"a";return a.jsx(c,x({"data-slot":"sidebar-menu-sub-button","data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:V("text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",s)},r))}function aC(t){if(typeof document=="undefined")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Array(12).fill(0);let Wi=1;class iC{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const f=e,{message:s}=f,r=G(f,["message"]),o=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Wi++,i=this.toasts.find(u=>u.id===o),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),i?this.toasts=this.toasts.map(u=>u.id===o?(this.publish(F(x(x({},u),e),{id:o,title:s})),F(x(x({},u),e),{id:o,dismissible:c,title:s})):u):this.addToast(F(x({title:s},r),{dismissible:c,id:o})),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create(F(x({},n),{message:e})),this.error=(e,n)=>this.create(F(x({},n),{message:e,type:"error"})),this.success=(e,n)=>this.create(F(x({},n),{type:"success",message:e})),this.info=(e,n)=>this.create(F(x({},n),{type:"info",message:e})),this.warning=(e,n)=>this.create(F(x({},n),{type:"warning",message:e})),this.loading=(e,n)=>this.create(F(x({},n),{type:"loading",message:e})),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create(F(x({},n),{promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0})));const r=Promise.resolve(e instanceof Function?e():e);let o=s!==void 0,i;const c=r.then(u=>T(this,null,function*(){if(i=["resolve",u],se.isValidElement(u))o=!1,this.create({id:s,type:"default",message:u});else if(cC(u)&&!u.ok){o=!1;const m=typeof n.error=="function"?yield n.error(`HTTP error! status: ${u.status}`):n.error,g=typeof n.description=="function"?yield n.description(`HTTP error! status: ${u.status}`):n.description,p=typeof m=="object"&&!se.isValidElement(m)?m:{message:m};this.create(x({id:s,type:"error",description:g},p))}else if(u instanceof Error){o=!1;const m=typeof n.error=="function"?yield n.error(u):n.error,g=typeof n.description=="function"?yield n.description(u):n.description,p=typeof m=="object"&&!se.isValidElement(m)?m:{message:m};this.create(x({id:s,type:"error",description:g},p))}else if(n.success!==void 0){o=!1;const m=typeof n.success=="function"?yield n.success(u):n.success,g=typeof n.description=="function"?yield n.description(u):n.description,p=typeof m=="object"&&!se.isValidElement(m)?m:{message:m};this.create(x({id:s,type:"success",description:g},p))}})).catch(u=>T(this,null,function*(){if(i=["reject",u],n.error!==void 0){o=!1;const h=typeof n.error=="function"?yield n.error(u):n.error,m=typeof n.description=="function"?yield n.description(u):n.description,y=typeof h=="object"&&!se.isValidElement(h)?h:{message:h};this.create(x({id:s,type:"error",description:m},y))}})).finally(()=>{o&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),f=()=>new Promise((u,h)=>c.then(()=>i[0]==="reject"?h(i[1]):u(i[1])).catch(h));return typeof s!="string"&&typeof s!="number"?{unwrap:f}:Object.assign(s,{unwrap:f})},this.custom=(e,n)=>{const s=(n==null?void 0:n.id)||Wi++;return this.create(x({jsx:e(s),id:s},n)),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Zt=new iC,lC=(t,e)=>{const n=(e==null?void 0:e.id)||Wi++;return Zt.addToast(F(x({title:t},e),{id:n})),n},cC=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",dC=lC,uC=()=>Zt.toasts,fC=()=>Zt.getActiveToasts(),Ye=Object.assign(dC,{success:Zt.success,info:Zt.info,warning:Zt.warning,error:Zt.error,custom:Zt.custom,message:Zt.message,promise:Zt.promise,dismiss:Zt.dismiss,loading:Zt.loading},{getHistory:uC,getToasts:fC});aC("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");var Ve;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const o={};for(const i of r)o[i]=i;return o},t.getValidEnumValues=r=>{const o=t.objectKeys(r).filter(c=>typeof r[r[c]]!="number"),i={};for(const c of o)i[c]=r[c];return t.objectValues(i)},t.objectValues=r=>t.objectKeys(r).map(function(o){return r[o]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const o=[];for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&o.push(i);return o},t.find=(r,o)=>{for(const i of r)if(o(i))return i},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,o=" | "){return r.map(i=>typeof i=="string"?`'${i}'`:i).join(o)}t.joinValues=s,t.jsonStringifyReplacer=(r,o)=>typeof o=="bigint"?o.toString():o})(Ve||(Ve={}));var jc;(function(t){t.mergeShapes=(e,n)=>x(x({},e),n)})(jc||(jc={}));const ue=Ve.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ls=t=>{switch(typeof t){case"undefined":return ue.undefined;case"string":return ue.string;case"number":return Number.isNaN(t)?ue.nan:ue.number;case"boolean":return ue.boolean;case"function":return ue.function;case"bigint":return ue.bigint;case"symbol":return ue.symbol;case"object":return Array.isArray(t)?ue.array:t===null?ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ue.promise:typeof Map!="undefined"&&t instanceof Map?ue.map:typeof Set!="undefined"&&t instanceof Set?ue.set:typeof Date!="undefined"&&t instanceof Date?ue.date:ue.object;default:return ue.unknown}},ee=Ve.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Xn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},s={_errors:[]},r=o=>{for(const i of o.issues)if(i.code==="invalid_union")i.unionErrors.map(r);else if(i.code==="invalid_return_type")r(i.returnTypeError);else if(i.code==="invalid_arguments")r(i.argumentsError);else if(i.path.length===0)s._errors.push(n(i));else{let c=s,f=0;for(;f<i.path.length;){const u=i.path[f];f===i.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(n(i))):c[u]=c[u]||{_errors:[]},c=c[u],f++}}};return r(this),s}static assert(e){if(!(e instanceof Xn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ve.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},s=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}Xn.create=t=>new Xn(t);const Yi=(t,e)=>{let n;switch(t.code){case ee.invalid_type:t.received===ue.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ee.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ve.jsonStringifyReplacer)}`;break;case ee.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ve.joinValues(t.keys,", ")}`;break;case ee.invalid_union:n="Invalid input";break;case ee.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ve.joinValues(t.options)}`;break;case ee.invalid_enum_value:n=`Invalid enum value. Expected ${Ve.joinValues(t.options)}, received '${t.received}'`;break;case ee.invalid_arguments:n="Invalid function arguments";break;case ee.invalid_return_type:n="Invalid function return type";break;case ee.invalid_date:n="Invalid date";break;case ee.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ve.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ee.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ee.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ee.custom:n="Invalid input";break;case ee.invalid_intersection_types:n="Intersection results could not be merged";break;case ee.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ee.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ve.assertNever(t)}return{message:n}};let hC=Yi;function mC(){return hC}const gC=t=>{const{data:e,path:n,errorMaps:s,issueData:r}=t,o=[...n,...r.path||[]],i=F(x({},r),{path:o});if(r.message!==void 0)return F(x({},r),{path:o,message:r.message});let c="";const f=s.filter(u=>!!u).slice().reverse();for(const u of f)c=u(i,{data:e,defaultError:c}).message;return F(x({},r),{path:o,message:c})};function ae(t,e){const n=mC(),s=gC({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Yi?void 0:Yi].filter(r=>!!r)});t.common.issues.push(s)}class Rt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const s=[];for(const r of n){if(r.status==="aborted")return Se;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static mergeObjectAsync(e,n){return T(this,null,function*(){const s=[];for(const r of n){const o=yield r.key,i=yield r.value;s.push({key:o,value:i})}return Rt.mergeObjectSync(e,s)})}static mergeObjectSync(e,n){const s={};for(const r of n){const{key:o,value:i}=r;if(o.status==="aborted"||i.status==="aborted")return Se;o.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof i.value!="undefined"||r.alwaysSet)&&(s[o.value]=i.value)}return{status:e.value,value:s}}}const Se=Object.freeze({status:"aborted"}),Or=t=>({status:"dirty",value:t}),Kt=t=>({status:"valid",value:t}),Rc=t=>t.status==="aborted",Pc=t=>t.status==="dirty",cr=t=>t.status==="valid",ea=t=>typeof Promise!="undefined"&&t instanceof Promise;var he;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(he||(he={}));class _n{constructor(e,n,s,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Oc=(t,e)=>{if(cr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Xn(t.common.issues);return this._error=n,this._error}}};function De(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:s,description:r}=t;if(e&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(i,c)=>{var u,h;const{message:f}=t;return i.code==="invalid_enum_value"?{message:f!=null?f:c.defaultError}:typeof c.data=="undefined"?{message:(u=f!=null?f:s)!=null?u:c.defaultError}:i.code!=="invalid_type"?{message:c.defaultError}:{message:(h=f!=null?f:n)!=null?h:c.defaultError}},description:r}}class Oe{get description(){return this._def.description}_getType(e){return ls(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ls(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Rt,ctx:{common:e.parent.common,data:e.data,parsedType:ls(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(ea(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const s=this.safeParse(e,n);if(s.success)return s.data;throw s.error}safeParse(e,n){var o;const s={common:{issues:[],async:(o=n==null?void 0:n.async)!=null?o:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ls(e)},r=this._parseSync({data:e,path:s.path,parent:s});return Oc(s,r)}"~validate"(e){var s,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ls(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:n});return cr(o)?{value:o.value}:{issues:n.common.issues}}catch(o){(r=(s=o==null?void 0:o.message)==null?void 0:s.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(o=>cr(o)?{value:o.value}:{issues:n.common.issues})}parseAsync(e,n){return T(this,null,function*(){const s=yield this.safeParseAsync(e,n);if(s.success)return s.data;throw s.error})}safeParseAsync(e,n){return T(this,null,function*(){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ls(e)},r=this._parse({data:e,path:s.path,parent:s}),o=yield ea(r)?r:Promise.resolve(r);return Oc(s,o)})}refine(e,n){const s=r=>typeof n=="string"||typeof n=="undefined"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,o)=>{const i=e(r),c=()=>o.addIssue(x({code:ee.custom},s(r)));return typeof Promise!="undefined"&&i instanceof Promise?i.then(f=>f?!0:(c(),!1)):i?!0:(c(),!1)})}refinement(e,n){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof n=="function"?n(s,r):n),!1))}_refinement(e){return new fr({schema:this,typeName:Te.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ps.create(this,this._def)}nullable(){return hr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Cn.create(this)}promise(){return oa.create(this,this._def)}or(e){return na.create([this,e],this._def)}and(e){return sa.create(this,e,this._def)}transform(e){return new fr(F(x({},De(this._def)),{schema:this,typeName:Te.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const n=typeof e=="function"?e:()=>e;return new Zi(F(x({},De(this._def)),{innerType:this,defaultValue:n,typeName:Te.ZodDefault}))}brand(){return new LC(x({typeName:Te.ZodBranded,type:this},De(this._def)))}catch(e){const n=typeof e=="function"?e:()=>e;return new Ji(F(x({},De(this._def)),{innerType:this,catchValue:n,typeName:Te.ZodCatch}))}describe(e){const n=this.constructor;return new n(F(x({},this._def),{description:e}))}pipe(e){return Al.create(this,e)}readonly(){return Ki.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pC=/^c[^\s-]{8,}$/i,yC=/^[0-9a-z]+$/,xC=/^[0-9A-HJKMNP-TV-Z]{26}$/i,vC=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wC=/^[a-z0-9_-]{21}$/i,CC=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,bC=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,kC=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_C="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let fi;const TC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,NC=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,MC=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,EC=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,DC=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Jf="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",IC=new RegExp(`^${Jf}$`);function Kf(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function AC(t){return new RegExp(`^${Kf(t)}$`)}function jC(t){let e=`${Jf}T${Kf(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function RC(t,e){return!!((e==="v4"||!e)&&TC.test(t)||(e==="v6"||!e)&&NC.test(t))}function PC(t,e){if(!CC.test(t))return!1;try{const[n]=t.split("."),s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch(n){return!1}}function OC(t,e){return!!((e==="v4"||!e)&&SC.test(t)||(e==="v6"||!e)&&MC.test(t))}class gn extends Oe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ue.string){const o=this._getOrReturnCtx(e);return ae(o,{code:ee.invalid_type,expected:ue.string,received:o.parsedType}),Se}const s=new Rt;let r;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="max")e.data.length>o.value&&(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="length"){const i=e.data.length>o.value,c=e.data.length<o.value;(i||c)&&(r=this._getOrReturnCtx(e,r),i?ae(r,{code:ee.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&ae(r,{code:ee.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),s.dirty())}else if(o.kind==="email")kC.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"email",code:ee.invalid_string,message:o.message}),s.dirty());else if(o.kind==="emoji")fi||(fi=new RegExp(_C,"u")),fi.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"emoji",code:ee.invalid_string,message:o.message}),s.dirty());else if(o.kind==="uuid")vC.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"uuid",code:ee.invalid_string,message:o.message}),s.dirty());else if(o.kind==="nanoid")wC.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"nanoid",code:ee.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid")pC.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"cuid",code:ee.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid2")yC.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"cuid2",code:ee.invalid_string,message:o.message}),s.dirty());else if(o.kind==="ulid")xC.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"ulid",code:ee.invalid_string,message:o.message}),s.dirty());else if(o.kind==="url")try{new URL(e.data)}catch(i){r=this._getOrReturnCtx(e,r),ae(r,{validation:"url",code:ee.invalid_string,message:o.message}),s.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"regex",code:ee.invalid_string,message:o.message}),s.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),s.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.invalid_string,validation:{startsWith:o.value},message:o.message}),s.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.invalid_string,validation:{endsWith:o.value},message:o.message}),s.dirty()):o.kind==="datetime"?jC(o).test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.invalid_string,validation:"datetime",message:o.message}),s.dirty()):o.kind==="date"?IC.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.invalid_string,validation:"date",message:o.message}),s.dirty()):o.kind==="time"?AC(o).test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.invalid_string,validation:"time",message:o.message}),s.dirty()):o.kind==="duration"?bC.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"duration",code:ee.invalid_string,message:o.message}),s.dirty()):o.kind==="ip"?RC(e.data,o.version)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"ip",code:ee.invalid_string,message:o.message}),s.dirty()):o.kind==="jwt"?PC(e.data,o.alg)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"jwt",code:ee.invalid_string,message:o.message}),s.dirty()):o.kind==="cidr"?OC(e.data,o.version)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"cidr",code:ee.invalid_string,message:o.message}),s.dirty()):o.kind==="base64"?EC.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"base64",code:ee.invalid_string,message:o.message}),s.dirty()):o.kind==="base64url"?DC.test(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{validation:"base64url",code:ee.invalid_string,message:o.message}),s.dirty()):Ve.assertNever(o);return{status:s.value,value:e.data}}_regex(e,n,s){return this.refinement(r=>e.test(r),x({validation:n,code:ee.invalid_string},he.errToObj(s)))}_addCheck(e){return new gn(F(x({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(x({kind:"email"},he.errToObj(e)))}url(e){return this._addCheck(x({kind:"url"},he.errToObj(e)))}emoji(e){return this._addCheck(x({kind:"emoji"},he.errToObj(e)))}uuid(e){return this._addCheck(x({kind:"uuid"},he.errToObj(e)))}nanoid(e){return this._addCheck(x({kind:"nanoid"},he.errToObj(e)))}cuid(e){return this._addCheck(x({kind:"cuid"},he.errToObj(e)))}cuid2(e){return this._addCheck(x({kind:"cuid2"},he.errToObj(e)))}ulid(e){return this._addCheck(x({kind:"ulid"},he.errToObj(e)))}base64(e){return this._addCheck(x({kind:"base64"},he.errToObj(e)))}base64url(e){return this._addCheck(x({kind:"base64url"},he.errToObj(e)))}jwt(e){return this._addCheck(x({kind:"jwt"},he.errToObj(e)))}ip(e){return this._addCheck(x({kind:"ip"},he.errToObj(e)))}cidr(e){return this._addCheck(x({kind:"cidr"},he.errToObj(e)))}datetime(e){var n,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(x({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!=null?n:!1,local:(s=e==null?void 0:e.local)!=null?s:!1},he.errToObj(e==null?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(x({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision},he.errToObj(e==null?void 0:e.message)))}duration(e){return this._addCheck(x({kind:"duration"},he.errToObj(e)))}regex(e,n){return this._addCheck(x({kind:"regex",regex:e},he.errToObj(n)))}includes(e,n){return this._addCheck(x({kind:"includes",value:e,position:n==null?void 0:n.position},he.errToObj(n==null?void 0:n.message)))}startsWith(e,n){return this._addCheck(x({kind:"startsWith",value:e},he.errToObj(n)))}endsWith(e,n){return this._addCheck(x({kind:"endsWith",value:e},he.errToObj(n)))}min(e,n){return this._addCheck(x({kind:"min",value:e},he.errToObj(n)))}max(e,n){return this._addCheck(x({kind:"max",value:e},he.errToObj(n)))}length(e,n){return this._addCheck(x({kind:"length",value:e},he.errToObj(n)))}nonempty(e){return this.min(1,he.errToObj(e))}trim(){return new gn(F(x({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new gn(F(x({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new gn(F(x({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}gn.create=t=>{var e;return new gn(x({checks:[],typeName:Te.ZodString,coerce:(e=t==null?void 0:t.coerce)!=null?e:!1},De(t)))};function FC(t,e){const n=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=n>s?n:s,o=Number.parseInt(t.toFixed(r).replace(".","")),i=Number.parseInt(e.toFixed(r).replace(".",""));return o%i/mc(10,r)}class Ps extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ue.number){const o=this._getOrReturnCtx(e);return ae(o,{code:ee.invalid_type,expected:ue.number,received:o.parsedType}),Se}let s;const r=new Rt;for(const o of this._def.checks)o.kind==="int"?Ve.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.invalid_type,expected:"integer",received:"float",message:o.message}),r.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),r.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),r.dirty()):o.kind==="multipleOf"?FC(e.data,o.value)!==0&&(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.not_finite,message:o.message}),r.dirty()):Ve.assertNever(o);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,s,r){return new Ps(F(x({},this._def),{checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:he.toString(r)}]}))}_addCheck(e){return new Ps(F(x({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:he.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:he.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:he.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:he.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ve.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ps.create=t=>new Ps(x({checks:[],typeName:Te.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1},De(t)));class Os extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(o){return this._getInvalidInput(e)}if(this._getType(e)!==ue.bigint)return this._getInvalidInput(e);let s;const r=new Rt;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),r.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),r.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):Ve.assertNever(o);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ae(n,{code:ee.invalid_type,expected:ue.bigint,received:n.parsedType}),Se}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,s,r){return new Os(F(x({},this._def),{checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:he.toString(r)}]}))}_addCheck(e){return new Os(F(x({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Os.create=t=>{var e;return new Os(x({checks:[],typeName:Te.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!=null?e:!1},De(t)))};class ta extends Oe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ue.boolean){const s=this._getOrReturnCtx(e);return ae(s,{code:ee.invalid_type,expected:ue.boolean,received:s.parsedType}),Se}return Kt(e.data)}}ta.create=t=>new ta(x({typeName:Te.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1},De(t)));class dr extends Oe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ue.date){const o=this._getOrReturnCtx(e);return ae(o,{code:ee.invalid_type,expected:ue.date,received:o.parsedType}),Se}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return ae(o,{code:ee.invalid_date}),Se}const s=new Rt;let r;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),s.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),s.dirty()):Ve.assertNever(o);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new dr(F(x({},this._def),{checks:[...this._def.checks,e]}))}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:he.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:he.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}dr.create=t=>new dr(x({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Te.ZodDate},De(t)));class Fc extends Oe{_parse(e){if(this._getType(e)!==ue.symbol){const s=this._getOrReturnCtx(e);return ae(s,{code:ee.invalid_type,expected:ue.symbol,received:s.parsedType}),Se}return Kt(e.data)}}Fc.create=t=>new Fc(x({typeName:Te.ZodSymbol},De(t)));class Lc extends Oe{_parse(e){if(this._getType(e)!==ue.undefined){const s=this._getOrReturnCtx(e);return ae(s,{code:ee.invalid_type,expected:ue.undefined,received:s.parsedType}),Se}return Kt(e.data)}}Lc.create=t=>new Lc(x({typeName:Te.ZodUndefined},De(t)));class $c extends Oe{_parse(e){if(this._getType(e)!==ue.null){const s=this._getOrReturnCtx(e);return ae(s,{code:ee.invalid_type,expected:ue.null,received:s.parsedType}),Se}return Kt(e.data)}}$c.create=t=>new $c(x({typeName:Te.ZodNull},De(t)));class Vc extends Oe{constructor(){super(...arguments),this._any=!0}_parse(e){return Kt(e.data)}}Vc.create=t=>new Vc(x({typeName:Te.ZodAny},De(t)));class Hi extends Oe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Kt(e.data)}}Hi.create=t=>new Hi(x({typeName:Te.ZodUnknown},De(t)));class vs extends Oe{_parse(e){const n=this._getOrReturnCtx(e);return ae(n,{code:ee.invalid_type,expected:ue.never,received:n.parsedType}),Se}}vs.create=t=>new vs(x({typeName:Te.ZodNever},De(t)));class Uc extends Oe{_parse(e){if(this._getType(e)!==ue.undefined){const s=this._getOrReturnCtx(e);return ae(s,{code:ee.invalid_type,expected:ue.void,received:s.parsedType}),Se}return Kt(e.data)}}Uc.create=t=>new Uc(x({typeName:Te.ZodVoid},De(t)));class Cn extends Oe{_parse(e){const{ctx:n,status:s}=this._processInputParams(e),r=this._def;if(n.parsedType!==ue.array)return ae(n,{code:ee.invalid_type,expected:ue.array,received:n.parsedType}),Se;if(r.exactLength!==null){const i=n.data.length>r.exactLength.value,c=n.data.length<r.exactLength.value;(i||c)&&(ae(n,{code:i?ee.too_big:ee.too_small,minimum:c?r.exactLength.value:void 0,maximum:i?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ae(n,{code:ee.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ae(n,{code:ee.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((i,c)=>r.type._parseAsync(new _n(n,i,n.path,c)))).then(i=>Rt.mergeArray(s,i));const o=[...n.data].map((i,c)=>r.type._parseSync(new _n(n,i,n.path,c)));return Rt.mergeArray(s,o)}get element(){return this._def.type}min(e,n){return new Cn(F(x({},this._def),{minLength:{value:e,message:he.toString(n)}}))}max(e,n){return new Cn(F(x({},this._def),{maxLength:{value:e,message:he.toString(n)}}))}length(e,n){return new Cn(F(x({},this._def),{exactLength:{value:e,message:he.toString(n)}}))}nonempty(e){return this.min(1,e)}}Cn.create=(t,e)=>new Cn(x({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Te.ZodArray},De(e)));function Js(t){if(t instanceof Ct){const e={};for(const n in t.shape){const s=t.shape[n];e[n]=ps.create(Js(s))}return new Ct(F(x({},t._def),{shape:()=>e}))}else return t instanceof Cn?new Cn(F(x({},t._def),{type:Js(t.element)})):t instanceof ps?ps.create(Js(t.unwrap())):t instanceof hr?hr.create(Js(t.unwrap())):t instanceof Fs?Fs.create(t.items.map(e=>Js(e))):t}class Ct extends Oe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ve.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ue.object){const u=this._getOrReturnCtx(e);return ae(u,{code:ee.invalid_type,expected:ue.object,received:u.parsedType}),Se}const{status:s,ctx:r}=this._processInputParams(e),{shape:o,keys:i}=this._getCached(),c=[];if(!(this._def.catchall instanceof vs&&this._def.unknownKeys==="strip"))for(const u in r.data)i.includes(u)||c.push(u);const f=[];for(const u of i){const h=o[u],m=r.data[u];f.push({key:{status:"valid",value:u},value:h._parse(new _n(r,m,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof vs){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of c)f.push({key:{status:"valid",value:h},value:{status:"valid",value:r.data[h]}});else if(u==="strict")c.length>0&&(ae(r,{code:ee.unrecognized_keys,keys:c}),s.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of c){const m=r.data[h];f.push({key:{status:"valid",value:h},value:u._parse(new _n(r,m,r.path,h)),alwaysSet:h in r.data})}}return r.common.async?Promise.resolve().then(()=>T(this,null,function*(){const u=[];for(const h of f){const m=yield h.key,g=yield h.value;u.push({key:m,value:g,alwaysSet:h.alwaysSet})}return u})).then(u=>Rt.mergeObjectSync(s,u)):Rt.mergeObjectSync(s,f)}get shape(){return this._def.shape()}strict(e){return he.errToObj,new Ct(x(F(x({},this._def),{unknownKeys:"strict"}),e!==void 0?{errorMap:(n,s)=>{var o,i,c,f;const r=(c=(i=(o=this._def).errorMap)==null?void 0:i.call(o,n,s).message)!=null?c:s.defaultError;return n.code==="unrecognized_keys"?{message:(f=he.errToObj(e).message)!=null?f:r}:{message:r}}}:{}))}strip(){return new Ct(F(x({},this._def),{unknownKeys:"strip"}))}passthrough(){return new Ct(F(x({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new Ct(F(x({},this._def),{shape:()=>x(x({},this._def.shape()),e)}))}merge(e){return new Ct({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>x(x({},this._def.shape()),e._def.shape()),typeName:Te.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ct(F(x({},this._def),{catchall:e}))}pick(e){const n={};for(const s of Ve.objectKeys(e))e[s]&&this.shape[s]&&(n[s]=this.shape[s]);return new Ct(F(x({},this._def),{shape:()=>n}))}omit(e){const n={};for(const s of Ve.objectKeys(this.shape))e[s]||(n[s]=this.shape[s]);return new Ct(F(x({},this._def),{shape:()=>n}))}deepPartial(){return Js(this)}partial(e){const n={};for(const s of Ve.objectKeys(this.shape)){const r=this.shape[s];e&&!e[s]?n[s]=r:n[s]=r.optional()}return new Ct(F(x({},this._def),{shape:()=>n}))}required(e){const n={};for(const s of Ve.objectKeys(this.shape))if(e&&!e[s])n[s]=this.shape[s];else{let o=this.shape[s];for(;o instanceof ps;)o=o._def.innerType;n[s]=o}return new Ct(F(x({},this._def),{shape:()=>n}))}keyof(){return Xf(Ve.objectKeys(this.shape))}}Ct.create=(t,e)=>new Ct(x({shape:()=>t,unknownKeys:"strip",catchall:vs.create(),typeName:Te.ZodObject},De(e)));Ct.strictCreate=(t,e)=>new Ct(x({shape:()=>t,unknownKeys:"strict",catchall:vs.create(),typeName:Te.ZodObject},De(e)));Ct.lazycreate=(t,e)=>new Ct(x({shape:t,unknownKeys:"strip",catchall:vs.create(),typeName:Te.ZodObject},De(e)));class na extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e),s=this._def.options;function r(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const i=o.map(c=>new Xn(c.ctx.common.issues));return ae(n,{code:ee.invalid_union,unionErrors:i}),Se}if(n.common.async)return Promise.all(s.map(o=>T(this,null,function*(){const i=F(x({},n),{common:F(x({},n.common),{issues:[]}),parent:null});return{result:yield o._parseAsync({data:n.data,path:n.path,parent:i}),ctx:i}}))).then(r);{let o;const i=[];for(const f of s){const u=F(x({},n),{common:F(x({},n.common),{issues:[]}),parent:null}),h=f._parseSync({data:n.data,path:n.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!o&&(o={result:h,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const c=i.map(f=>new Xn(f));return ae(n,{code:ee.invalid_union,unionErrors:c}),Se}}get options(){return this._def.options}}na.create=(t,e)=>new na(x({options:t,typeName:Te.ZodUnion},De(e)));function zi(t,e){const n=ls(t),s=ls(e);if(t===e)return{valid:!0,data:t};if(n===ue.object&&s===ue.object){const r=Ve.objectKeys(e),o=Ve.objectKeys(t).filter(c=>r.indexOf(c)!==-1),i=x(x({},t),e);for(const c of o){const f=zi(t[c],e[c]);if(!f.valid)return{valid:!1};i[c]=f.data}return{valid:!0,data:i}}else if(n===ue.array&&s===ue.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let o=0;o<t.length;o++){const i=t[o],c=e[o],f=zi(i,c);if(!f.valid)return{valid:!1};r.push(f.data)}return{valid:!0,data:r}}else return n===ue.date&&s===ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class sa extends Oe{_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=(o,i)=>{if(Rc(o)||Rc(i))return Se;const c=zi(o.value,i.value);return c.valid?((Pc(o)||Pc(i))&&n.dirty(),{status:n.value,value:c.data}):(ae(s,{code:ee.invalid_intersection_types}),Se)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([o,i])=>r(o,i)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}sa.create=(t,e,n)=>new sa(x({left:t,right:e,typeName:Te.ZodIntersection},De(n)));class Fs extends Oe{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ue.array)return ae(s,{code:ee.invalid_type,expected:ue.array,received:s.parsedType}),Se;if(s.data.length<this._def.items.length)return ae(s,{code:ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&s.data.length>this._def.items.length&&(ae(s,{code:ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...s.data].map((i,c)=>{const f=this._def.items[c]||this._def.rest;return f?f._parse(new _n(s,i,s.path,c)):null}).filter(i=>!!i);return s.common.async?Promise.all(o).then(i=>Rt.mergeArray(n,i)):Rt.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new Fs(F(x({},this._def),{rest:e}))}}Fs.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fs(x({items:t,typeName:Te.ZodTuple,rest:null},De(e)))};class ra extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ue.object)return ae(s,{code:ee.invalid_type,expected:ue.object,received:s.parsedType}),Se;const r=[],o=this._def.keyType,i=this._def.valueType;for(const c in s.data)r.push({key:o._parse(new _n(s,c,s.path,c)),value:i._parse(new _n(s,s.data[c],s.path,c)),alwaysSet:c in s.data});return s.common.async?Rt.mergeObjectAsync(n,r):Rt.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,s){return n instanceof Oe?new ra(x({keyType:e,valueType:n,typeName:Te.ZodRecord},De(s))):new ra(x({keyType:gn.create(),valueType:e,typeName:Te.ZodRecord},De(n)))}}class Bc extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ue.map)return ae(s,{code:ee.invalid_type,expected:ue.map,received:s.parsedType}),Se;const r=this._def.keyType,o=this._def.valueType,i=[...s.data.entries()].map(([c,f],u)=>({key:r._parse(new _n(s,c,s.path,[u,"key"])),value:o._parse(new _n(s,f,s.path,[u,"value"]))}));if(s.common.async){const c=new Map;return Promise.resolve().then(()=>T(this,null,function*(){for(const f of i){const u=yield f.key,h=yield f.value;if(u.status==="aborted"||h.status==="aborted")return Se;(u.status==="dirty"||h.status==="dirty")&&n.dirty(),c.set(u.value,h.value)}return{status:n.value,value:c}}))}else{const c=new Map;for(const f of i){const u=f.key,h=f.value;if(u.status==="aborted"||h.status==="aborted")return Se;(u.status==="dirty"||h.status==="dirty")&&n.dirty(),c.set(u.value,h.value)}return{status:n.value,value:c}}}}Bc.create=(t,e,n)=>new Bc(x({valueType:e,keyType:t,typeName:Te.ZodMap},De(n)));class Xr extends Oe{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ue.set)return ae(s,{code:ee.invalid_type,expected:ue.set,received:s.parsedType}),Se;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(ae(s,{code:ee.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(ae(s,{code:ee.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const o=this._def.valueType;function i(f){const u=new Set;for(const h of f){if(h.status==="aborted")return Se;h.status==="dirty"&&n.dirty(),u.add(h.value)}return{status:n.value,value:u}}const c=[...s.data.values()].map((f,u)=>o._parse(new _n(s,f,s.path,u)));return s.common.async?Promise.all(c).then(f=>i(f)):i(c)}min(e,n){return new Xr(F(x({},this._def),{minSize:{value:e,message:he.toString(n)}}))}max(e,n){return new Xr(F(x({},this._def),{maxSize:{value:e,message:he.toString(n)}}))}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Xr.create=(t,e)=>new Xr(x({valueType:t,minSize:null,maxSize:null,typeName:Te.ZodSet},De(e)));class qi extends Oe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}qi.create=(t,e)=>new qi(x({getter:t,typeName:Te.ZodLazy},De(e)));class Gc extends Oe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ae(n,{received:n.data,code:ee.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:e.data}}get value(){return this._def.value}}Gc.create=(t,e)=>new Gc(x({value:t,typeName:Te.ZodLiteral},De(e)));function Xf(t,e){return new ur(x({values:t,typeName:Te.ZodEnum},De(e)))}class ur extends Oe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),s=this._def.values;return ae(n,{expected:Ve.joinValues(s),received:n.parsedType,code:ee.invalid_type}),Se}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),s=this._def.values;return ae(n,{received:n.data,code:ee.invalid_enum_value,options:s}),Se}return Kt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ur.create(e,x(x({},this._def),n))}exclude(e,n=this._def){return ur.create(this.options.filter(s=>!e.includes(s)),x(x({},this._def),n))}}ur.create=Xf;class Wc extends Oe{_parse(e){const n=Ve.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==ue.string&&s.parsedType!==ue.number){const r=Ve.objectValues(n);return ae(s,{expected:Ve.joinValues(r),received:s.parsedType,code:ee.invalid_type}),Se}if(this._cache||(this._cache=new Set(Ve.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Ve.objectValues(n);return ae(s,{received:s.data,code:ee.invalid_enum_value,options:r}),Se}return Kt(e.data)}get enum(){return this._def.values}}Wc.create=(t,e)=>new Wc(x({values:t,typeName:Te.ZodNativeEnum},De(e)));class oa extends Oe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.promise&&n.common.async===!1)return ae(n,{code:ee.invalid_type,expected:ue.promise,received:n.parsedType}),Se;const s=n.parsedType===ue.promise?n.data:Promise.resolve(n.data);return Kt(s.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}oa.create=(t,e)=>new oa(x({type:t,typeName:Te.ZodPromise},De(e)));class fr extends Oe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Te.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=this._def.effect||null,o={addIssue:i=>{ae(s,i),i.fatal?n.abort():n.dirty()},get path(){return s.path}};if(o.addIssue=o.addIssue.bind(o),r.type==="preprocess"){const i=r.transform(s.data,o);if(s.common.async)return Promise.resolve(i).then(c=>T(this,null,function*(){if(n.value==="aborted")return Se;const f=yield this._def.schema._parseAsync({data:c,path:s.path,parent:s});return f.status==="aborted"?Se:f.status==="dirty"||n.value==="dirty"?Or(f.value):f}));{if(n.value==="aborted")return Se;const c=this._def.schema._parseSync({data:i,path:s.path,parent:s});return c.status==="aborted"?Se:c.status==="dirty"||n.value==="dirty"?Or(c.value):c}}if(r.type==="refinement"){const i=c=>{const f=r.refinement(c,o);if(s.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(s.common.async===!1){const c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return c.status==="aborted"?Se:(c.status==="dirty"&&n.dirty(),i(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>c.status==="aborted"?Se:(c.status==="dirty"&&n.dirty(),i(c.value).then(()=>({status:n.value,value:c.value}))))}if(r.type==="transform")if(s.common.async===!1){const i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!cr(i))return Se;const c=r.transform(i.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>cr(i)?Promise.resolve(r.transform(i.value,o)).then(c=>({status:n.value,value:c})):Se);Ve.assertNever(r)}}fr.create=(t,e,n)=>new fr(x({schema:t,typeName:Te.ZodEffects,effect:e},De(n)));fr.createWithPreprocess=(t,e,n)=>new fr(x({schema:e,effect:{type:"preprocess",transform:t},typeName:Te.ZodEffects},De(n)));class ps extends Oe{_parse(e){return this._getType(e)===ue.undefined?Kt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ps.create=(t,e)=>new ps(x({innerType:t,typeName:Te.ZodOptional},De(e)));class hr extends Oe{_parse(e){return this._getType(e)===ue.null?Kt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hr.create=(t,e)=>new hr(x({innerType:t,typeName:Te.ZodNullable},De(e)));class Zi extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e);let s=n.data;return n.parsedType===ue.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Zi.create=(t,e)=>new Zi(x({innerType:t,typeName:Te.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default},De(e)));class Ji extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e),s=F(x({},n),{common:F(x({},n.common),{issues:[]})}),r=this._def.innerType._parse({data:s.data,path:s.path,parent:x({},s)});return ea(r)?r.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Xn(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Xn(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Ji.create=(t,e)=>new Ji(x({innerType:t,typeName:Te.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch},De(e)));class Yc extends Oe{_parse(e){if(this._getType(e)!==ue.nan){const s=this._getOrReturnCtx(e);return ae(s,{code:ee.invalid_type,expected:ue.nan,received:s.parsedType}),Se}return{status:"valid",value:e.data}}}Yc.create=t=>new Yc(x({typeName:Te.ZodNaN},De(t)));class LC extends Oe{_parse(e){const{ctx:n}=this._processInputParams(e),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class Al extends Oe{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.common.async)return T(this,null,function*(){const o=yield this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?Se:o.status==="dirty"?(n.dirty(),Or(o.value)):this._def.out._parseAsync({data:o.value,path:s.path,parent:s})});{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?Se:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,n){return new Al({in:e,out:n,typeName:Te.ZodPipeline})}}class Ki extends Oe{_parse(e){const n=this._def.innerType._parse(e),s=r=>(cr(r)&&(r.value=Object.freeze(r.value)),r);return ea(n)?n.then(r=>s(r)):s(n)}unwrap(){return this._def.innerType}}Ki.create=(t,e)=>new Ki(x({innerType:t,typeName:Te.ZodReadonly},De(e)));var Te;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Te||(Te={}));const Ts=gn.create,Hc=Ps.create;Os.create;const $C=ta.create;dr.create;const zc=Hi.create;vs.create;const Fr=Cn.create,VC=Ct.create,UC=na.create;sa.create;Fs.create;const BC=ra.create,GC=qi.create,WC=ur.create;oa.create;ps.create;hr.create;const Ys={string:t=>gn.create(F(x({},t),{coerce:!0})),number:t=>Ps.create(F(x({},t),{coerce:!0})),boolean:t=>ta.create(F(x({},t),{coerce:!0})),bigint:t=>Os.create(F(x({},t),{coerce:!0})),date:t=>dr.create(F(x({},t),{coerce:!0}))};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let YC,HC;function zC(){return{geminiUrl:YC,vertexUrl:HC}}function qC(t,e,n){var s,r,o;if(!(!((s=t.httpOptions)===null||s===void 0)&&s.baseUrl)){const i=zC();return t.vertexai?(r=i.vertexUrl)!==null&&r!==void 0?r:e:(o=i.geminiUrl)!==null&&o!==void 0?o:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wr{}function ke(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(t,e,n){for(let o=0;o<e.length-1;o++){const i=e[o];if(i.endsWith("[]")){const c=i.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[c])){const f=t[c];if(Array.isArray(n))for(let u=0;u<f.length;u++){const h=f[u];d(h,e.slice(o+1),n[u])}else for(const u of f)d(u,e.slice(o+1),n)}return}else if(i.endsWith("[0]")){const c=i.slice(0,-3);c in t||(t[c]=[{}]);const f=t[c];d(f[0],e.slice(o+1),n);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else t[s]=n}function l(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const s=e[n];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const o=t[r];return Array.isArray(o)?o.map(i=>l(i,e.slice(n+1))):void 0}else return}else t=t[s]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qc;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(qc||(qc={}));var Zc;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Zc||(Zc={}));var pn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(pn||(pn={}));var Jc;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Jc||(Jc={}));var Kc;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Kc||(Kc={}));var Xc;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Xc||(Xc={}));var Qc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Qc||(Qc={}));var ed;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ed||(ed={}));var td;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(td||(td={}));var nd;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(nd||(nd={}));var sd;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(sd||(sd={}));var rd;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(rd||(rd={}));var od;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(od||(od={}));var aa;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(aa||(aa={}));var ad;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ad||(ad={}));var Xi;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xi||(Xi={}));var id;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(id||(id={}));var ld;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ld||(ld={}));var cd;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(cd||(cd={}));var dd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(dd||(dd={}));var ud;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(ud||(ud={}));var fd;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(fd||(fd={}));var hd;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hd||(hd={}));var md;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(md||(md={}));var gd;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(gd||(gd={}));var pd;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(pd||(pd={}));var yd;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yd||(yd={}));var xd;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(xd||(xd={}));var vd;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vd||(vd={}));var wd;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(wd||(wd={}));var Cd;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Cd||(Cd={}));var bd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(bd||(bd={}));var kd;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(kd||(kd={}));var _d;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_d||(_d={}));var Td;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Td||(Td={}));var Sd;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sd||(Sd={}));var Nd;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Nd||(Nd={}));var Md;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Md||(Md={}));var er;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(er||(er={}));class Dr{get text(){var e,n,s,r,o,i,c,f;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",h=!1;const m=[];for(const g of(f=(c=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[y,p]of Object.entries(g))y!=="text"&&y!=="thought"&&(p!==null||p!==void 0)&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,u+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var e,n,s,r,o,i,c,f;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const h=[];for(const m of(f=(c=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&(y!==null||y!==void 0)&&h.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,s,r,o,i,c,f;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(f=(c=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,s,r,o,i,c,f,u;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(f=(c=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,s,r,o,i,c,f,u;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(f=(c=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.output}}class Ed{}class Dd{}class ZC{}class JC{}class Id{}class Ad{}class jd{}class KC{}class Rd{}class Pd{}class Od{}class XC{}class Qi{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class QC{}class eb{}class tb{get text(){var e,n,s;let r="",o=!1;const i=[];for(const c of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[f,u]of Object.entries(c))f!=="text"&&f!=="thought"&&u!==null&&i.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,r+=c.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,s;let r="";const o=[];for(const i of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[c,f]of Object.entries(i))c!=="inlineData"&&f!==null&&o.push(c);i.inlineData&&typeof i.inlineData.data=="string"&&(r+=atob(i.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class nb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Qf(t,e){const n=Xe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function eh(t,e){return Array.isArray(e)?e.map(n=>ia(t,n)):[ia(t,e)]}function ia(t,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function sb(t,e){const n=ia(t,e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function rb(t,e){const n=ia(t,e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Fd(t,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function th(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>Fd(t,n)):[Fd(t,e)]}function el(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Ld(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function $d(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function jt(t,e){if(e==null)throw new Error("ContentUnion is required");return el(e)?e:{role:"user",parts:th(t,e)}}function nh(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=jt(t,n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=jt(t,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>jt(t,n)):[jt(t,e)]}function an(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Ld(e)||$d(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[jt(t,e)]}const n=[],s=[],r=el(e[0]);for(const o of e){const i=el(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)n.push(o);else{if(Ld(o)||$d(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(o)}}return r||n.push({role:"user",parts:th(t,s)}),n}const ob=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Vd=WC(["string","number","integer","object","array","boolean","null"]),ab=UC([Vd,Fr(Vd)]);function ib(t=!0){const e=GC(()=>{const n=VC({type:ab.optional(),format:Ts().optional(),title:Ts().optional(),description:Ts().optional(),default:zc().optional(),items:e.optional(),minItems:Ys.string().optional(),maxItems:Ys.string().optional(),enum:Fr(zc()).optional(),properties:BC(Ts(),e).optional(),required:Fr(Ts()).optional(),minProperties:Ys.string().optional(),maxProperties:Ys.string().optional(),propertyOrdering:Fr(Ts()).optional(),minimum:Hc().optional(),maximum:Hc().optional(),minLength:Ys.string().optional(),maxLength:Ys.string().optional(),pattern:Ts().optional(),anyOf:Fr(e).optional(),additionalProperties:$C().optional()});return t?n.strict():n});return e}function lb(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(pn).includes(n[0].toUpperCase())?n[0].toUpperCase():pn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(pn).includes(s.toUpperCase())?s.toUpperCase():pn.TYPE_UNSPECIFIED})}}function sr(t){const e={},n=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&lb(t.type,e);for(const[i,c]of Object.entries(t))if(c!=null)if(i=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(pn).includes(c.toUpperCase())?c.toUpperCase():pn.TYPE_UNSPECIFIED}else if(n.includes(i))e[i]=sr(c);else if(s.includes(i)){const f=[];for(const u of c){if(u.type=="null"){e.nullable=!0;continue}f.push(sr(u))}e[i]=f}else if(r.includes(i)){const f={};for(const[u,h]of Object.entries(c))f[u]=sr(h);e[i]=f}else{if(i==="additionalProperties")continue;e[i]=c}return e}function la(t,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const n=ib().parse(e);return sr(n)}else return sr(e)}function sh(t,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function jl(t,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function mo(t,e){if(e.functionDeclarations)for(const n of e.functionDeclarations)n.parameters&&(n.parameters=la(t,n.parameters)),n.response&&(n.response=la(t,n.response));return e}function go(t,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const n=[];for(const s of e)n.push(s);return n}function cb(t,e,n,s=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Cs(t,e){if(typeof e!="string")throw new Error("name must be a string");return cb(t,e,"cachedContents")}function rh(t,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ts(t,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function db(t){return t!=null&&typeof t=="object"&&"name"in t}function ub(t){return t!=null&&typeof t=="object"&&"video"in t}function fb(t){return t!=null&&typeof t=="object"&&"uri"in t}function oh(t,e){var n;let s;if(db(e)&&(s=e.name),!(fb(e)&&(s=e.uri,s===void 0))&&!(ub(e)&&(s=(n=e.video)===null||n===void 0?void 0:n.uri,s===void 0))){if(typeof e=="string"&&(s=e),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const o=s.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${s}`);s=o[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function ah(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function ih(t,e){for(const n of["models","tunedModels","publisherModels"])if(hb(e,n))return e[n];return[]}function hb(t,e){return t!==null&&typeof t=="object"&&e in t}function mb(t,e={}){const n=t,s={name:n.name,description:n.description,parameters:sr(ka(n.inputSchema))};return e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function gb(t,e={}){const n=[],s=new Set;for(const r of t){const o=r.name;if(s.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);s.add(o);const i=mb(r,e);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function pb(t){const e=[];for(const n of t)e.push(ka(n));return e}function yb(t){const e={};for(const[n,s]of Object.entries(t)){const r=s;e[n]=ka(r)}return e}function ka(t){const e=new Set(["items"]),n=new Set(["anyOf"]),s=new Set(["properties"]),r={};for(const[o,i]of Object.entries(t))if(e.has(o))r[o]=ka(i);else if(n.has(o))r[o]=pb(i);else if(s.has(o))r[o]=yb(i);else if(o==="type"){const c=i.toUpperCase();r[o]=Object.values(pn).includes(c)?c:pn.TYPE_UNSPECIFIED}else ob.has(o)&&(r[o]=i);return r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xb(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function vb(t,e){const n={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=l(e,["data"]);s!=null&&d(n,["data"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function wb(t,e){const n={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=l(e,["fileUri"]);s!=null&&d(n,["fileUri"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function Cb(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],xb(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],vb(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],wb(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function Ud(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>Cb(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function bb(t,e){const n={},s=l(e,["behavior"]);s!=null&&d(n,["behavior"],s);const r=l(e,["description"]);r!=null&&d(n,["description"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const i=l(e,["parameters"]);i!=null&&d(n,["parameters"],i);const c=l(e,["response"]);return c!=null&&d(n,["response"],c),n}function kb(t,e){const n={},s=l(e,["startTime"]);s!=null&&d(n,["startTime"],s);const r=l(e,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function _b(t,e){const n={},s=l(e,["timeRangeFilter"]);return s!=null&&d(n,["timeRangeFilter"],kb(t,s)),n}function Tb(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function Sb(t,e){const n={},s=l(e,["dynamicRetrievalConfig"]);return s!=null&&d(n,["dynamicRetrievalConfig"],Tb(t,s)),n}function Nb(){return{}}function Mb(t,e){const n={},s=l(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(u=>bb(t,u))),d(n,["functionDeclarations"],f)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearch"]);r!=null&&d(n,["googleSearch"],_b(t,r));const o=l(e,["googleSearchRetrieval"]);if(o!=null&&d(n,["googleSearchRetrieval"],Sb(t,o)),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(e,["urlContext"])!=null&&d(n,["urlContext"],Nb());const c=l(e,["codeExecution"]);return c!=null&&d(n,["codeExecution"],c),n}function Eb(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["allowedFunctionNames"]);return r!=null&&d(n,["allowedFunctionNames"],r),n}function Db(t,e){const n={},s=l(e,["latitude"]);s!=null&&d(n,["latitude"],s);const r=l(e,["longitude"]);return r!=null&&d(n,["longitude"],r),n}function Ib(t,e){const n={},s=l(e,["latLng"]);s!=null&&d(n,["latLng"],Db(t,s));const r=l(e,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function Ab(t,e){const n={},s=l(e,["functionCallingConfig"]);s!=null&&d(n,["functionCallingConfig"],Eb(t,s));const r=l(e,["retrievalConfig"]);return r!=null&&d(n,["retrievalConfig"],Ib(t,r)),n}function jb(t,e,n){const s={},r=l(e,["ttl"]);n!==void 0&&r!=null&&d(n,["ttl"],r);const o=l(e,["expireTime"]);n!==void 0&&o!=null&&d(n,["expireTime"],o);const i=l(e,["displayName"]);n!==void 0&&i!=null&&d(n,["displayName"],i);const c=l(e,["contents"]);if(n!==void 0&&c!=null){let m=an(t,c);Array.isArray(m)&&(m=m.map(g=>Ud(t,g))),d(n,["contents"],m)}const f=l(e,["systemInstruction"]);n!==void 0&&f!=null&&d(n,["systemInstruction"],Ud(t,jt(t,f)));const u=l(e,["tools"]);if(n!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>Mb(t,g))),d(n,["tools"],m)}const h=l(e,["toolConfig"]);if(n!==void 0&&h!=null&&d(n,["toolConfig"],Ab(t,h)),l(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function Rb(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["model"],Qf(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],jb(t,r,n)),n}function Pb(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["_url","name"],Cs(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function Ob(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["_url","name"],Cs(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function Fb(t,e,n){const s={},r=l(e,["ttl"]);n!==void 0&&r!=null&&d(n,["ttl"],r);const o=l(e,["expireTime"]);return n!==void 0&&o!=null&&d(n,["expireTime"],o),s}function Lb(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["_url","name"],Cs(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],Fb(t,r,n)),n}function $b(t,e,n){const s={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=l(e,["pageToken"]);return n!==void 0&&o!=null&&d(n,["_query","pageToken"],o),s}function Vb(t,e){const n={},s=l(e,["config"]);return s!=null&&d(n,["config"],$b(t,s,n)),n}function Ub(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function Bb(t,e){const n={},s=l(e,["displayName"]);s!=null&&d(n,["displayName"],s);const r=l(e,["data"]);r!=null&&d(n,["data"],r);const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function Gb(t,e){const n={},s=l(e,["displayName"]);s!=null&&d(n,["displayName"],s);const r=l(e,["fileUri"]);r!=null&&d(n,["fileUri"],r);const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function Wb(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],Ub(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],Bb(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],Gb(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function Bd(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>Wb(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function Yb(t,e){const n={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=l(e,["description"]);s!=null&&d(n,["description"],s);const r=l(e,["name"]);r!=null&&d(n,["name"],r);const o=l(e,["parameters"]);o!=null&&d(n,["parameters"],o);const i=l(e,["response"]);return i!=null&&d(n,["response"],i),n}function Hb(t,e){const n={},s=l(e,["startTime"]);s!=null&&d(n,["startTime"],s);const r=l(e,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function zb(t,e){const n={},s=l(e,["timeRangeFilter"]);return s!=null&&d(n,["timeRangeFilter"],Hb(t,s)),n}function qb(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function Zb(t,e){const n={},s=l(e,["dynamicRetrievalConfig"]);return s!=null&&d(n,["dynamicRetrievalConfig"],qb(t,s)),n}function Jb(){return{}}function Kb(t,e){const n={},s=l(e,["apiKeyString"]);return s!=null&&d(n,["apiKeyString"],s),n}function Xb(t,e){const n={},s=l(e,["apiKeyConfig"]);s!=null&&d(n,["apiKeyConfig"],Kb(t,s));const r=l(e,["authType"]);r!=null&&d(n,["authType"],r);const o=l(e,["googleServiceAccountConfig"]);o!=null&&d(n,["googleServiceAccountConfig"],o);const i=l(e,["httpBasicAuthConfig"]);i!=null&&d(n,["httpBasicAuthConfig"],i);const c=l(e,["oauthConfig"]);c!=null&&d(n,["oauthConfig"],c);const f=l(e,["oidcConfig"]);return f!=null&&d(n,["oidcConfig"],f),n}function Qb(t,e){const n={},s=l(e,["authConfig"]);return s!=null&&d(n,["authConfig"],Xb(t,s)),n}function ek(){return{}}function tk(t,e){const n={},s=l(e,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(g=>Yb(t,g))),d(n,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(n,["retrieval"],r);const o=l(e,["googleSearch"]);o!=null&&d(n,["googleSearch"],zb(t,o));const i=l(e,["googleSearchRetrieval"]);i!=null&&d(n,["googleSearchRetrieval"],Zb(t,i)),l(e,["enterpriseWebSearch"])!=null&&d(n,["enterpriseWebSearch"],Jb());const f=l(e,["googleMaps"]);f!=null&&d(n,["googleMaps"],Qb(t,f)),l(e,["urlContext"])!=null&&d(n,["urlContext"],ek());const h=l(e,["codeExecution"]);return h!=null&&d(n,["codeExecution"],h),n}function nk(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["allowedFunctionNames"]);return r!=null&&d(n,["allowedFunctionNames"],r),n}function sk(t,e){const n={},s=l(e,["latitude"]);s!=null&&d(n,["latitude"],s);const r=l(e,["longitude"]);return r!=null&&d(n,["longitude"],r),n}function rk(t,e){const n={},s=l(e,["latLng"]);s!=null&&d(n,["latLng"],sk(t,s));const r=l(e,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function ok(t,e){const n={},s=l(e,["functionCallingConfig"]);s!=null&&d(n,["functionCallingConfig"],nk(t,s));const r=l(e,["retrievalConfig"]);return r!=null&&d(n,["retrievalConfig"],rk(t,r)),n}function ak(t,e,n){const s={},r=l(e,["ttl"]);n!==void 0&&r!=null&&d(n,["ttl"],r);const o=l(e,["expireTime"]);n!==void 0&&o!=null&&d(n,["expireTime"],o);const i=l(e,["displayName"]);n!==void 0&&i!=null&&d(n,["displayName"],i);const c=l(e,["contents"]);if(n!==void 0&&c!=null){let g=an(t,c);Array.isArray(g)&&(g=g.map(y=>Bd(t,y))),d(n,["contents"],g)}const f=l(e,["systemInstruction"]);n!==void 0&&f!=null&&d(n,["systemInstruction"],Bd(t,jt(t,f)));const u=l(e,["tools"]);if(n!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>tk(t,y))),d(n,["tools"],g)}const h=l(e,["toolConfig"]);n!==void 0&&h!=null&&d(n,["toolConfig"],ok(t,h));const m=l(e,["kmsKeyName"]);return n!==void 0&&m!=null&&d(n,["encryption_spec","kmsKeyName"],m),s}function ik(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["model"],Qf(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],ak(t,r,n)),n}function lk(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["_url","name"],Cs(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function ck(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["_url","name"],Cs(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function dk(t,e,n){const s={},r=l(e,["ttl"]);n!==void 0&&r!=null&&d(n,["ttl"],r);const o=l(e,["expireTime"]);return n!==void 0&&o!=null&&d(n,["expireTime"],o),s}function uk(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["_url","name"],Cs(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],dk(t,r,n)),n}function fk(t,e,n){const s={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=l(e,["pageToken"]);return n!==void 0&&o!=null&&d(n,["_query","pageToken"],o),s}function hk(t,e){const n={},s=l(e,["config"]);return s!=null&&d(n,["config"],fk(t,s,n)),n}function Wo(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["displayName"]);r!=null&&d(n,["displayName"],r);const o=l(e,["model"]);o!=null&&d(n,["model"],o);const i=l(e,["createTime"]);i!=null&&d(n,["createTime"],i);const c=l(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);const f=l(e,["expireTime"]);f!=null&&d(n,["expireTime"],f);const u=l(e,["usageMetadata"]);return u!=null&&d(n,["usageMetadata"],u),n}function mk(){return{}}function gk(t,e){const n={},s=l(e,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const r=l(e,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Wo(t,i))),d(n,["cachedContents"],o)}return n}function Yo(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["displayName"]);r!=null&&d(n,["displayName"],r);const o=l(e,["model"]);o!=null&&d(n,["model"],o);const i=l(e,["createTime"]);i!=null&&d(n,["createTime"],i);const c=l(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);const f=l(e,["expireTime"]);f!=null&&d(n,["expireTime"],f);const u=l(e,["usageMetadata"]);return u!=null&&d(n,["usageMetadata"],u),n}function pk(){return{}}function yk(t,e){const n={},s=l(e,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const r=l(e,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Yo(t,i))),d(n,["cachedContents"],o)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(mr||(mr={}));class _a{constructor(e,n,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,r)}init(e,n,s){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let i={config:{}};s?typeof s=="object"?i=Object.assign({},s):i=s:i={config:{}},i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(o=(r=i.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:()=>T(this,null,function*(){if(this.idxInternal>=this.pageLength)if(this.hasNextPage())yield this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}}),return:()=>T(this,null,function*(){return{value:void 0,done:!0}})}}nextPage(){return T(this,null,function*(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=yield this.requestInternal(this.params);return this.initNextPage(e),this.page})}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xk extends wr{constructor(e){super(),this.apiClient=e,this.list=(...s)=>T(this,[...s],function*(n={}){return new _a(mr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),yield this.listInternal(n),n)})}create(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=ik(this.apiClient,e);return c=ke("cachedContents",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>Yo(this.apiClient,h))}else{const u=Rb(this.apiClient,e);return c=ke("cachedContents",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>Wo(this.apiClient,h))}})}get(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=lk(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>Yo(this.apiClient,h))}else{const u=Pb(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>Wo(this.apiClient,h))}})}delete(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=ck(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(()=>{const h=pk(),m=new Pd;return Object.assign(m,h),m})}else{const u=Ob(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(()=>{const h=mk(),m=new Pd;return Object.assign(m,h),m})}})}update(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=uk(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>Yo(this.apiClient,h))}else{const u=Lb(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>Wo(this.apiClient,h))}})}listInternal(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=hk(this.apiClient,e);return c=ke("cachedContents",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>{const m=yk(this.apiClient,h),g=new Od;return Object.assign(g,m),g})}else{const u=Vb(this.apiClient,e);return c=ke("cachedContents",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>{const m=gk(this.apiClient,h),g=new Od;return Object.assign(g,m),g})}})}}function Gd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function et(t){return this instanceof et?(this.v=t,this):new et(t)}function rr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",i),r[Symbol.asyncIterator]=function(){return this},r;function i(y){return function(p){return Promise.resolve(p).then(y,m)}}function c(y,p){s[y]&&(r[y]=function(v){return new Promise(function(C,b){o.push([y,v,C,b])>1||f(y,v)})},p&&(r[y]=p(r[y])))}function f(y,p){try{u(s[y](p))}catch(v){g(o[0][3],v)}}function u(y){y.value instanceof et?Promise.resolve(y.value.v).then(h,m):g(o[0][2],y)}function h(y){f("next",y)}function m(y){f("throw",y)}function g(y,p){y(p),o.shift(),o.length&&f(o[0][0],o[0][1])}}function Gr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Gd=="function"?Gd(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(o){n[o]=t[o]&&function(i){return new Promise(function(c,f){i=t[o](i),r(c,f,i.done,i.value)})}}function r(o,i,c,f){Promise.resolve(f).then(function(u){o({value:u,done:c})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vk(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:lh(n)}function lh(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function wk(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Wd(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let o=!0;for(;s<n&&t[s].role==="model";)r.push(t[s]),o&&!lh(t[s])&&(o=!1),s++;o?e.push(...r):e.pop()}return e}class Ck{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new bk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class bk{constructor(e,n,s,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),wk(o)}sendMessage(e){return T(this,null,function*(){var n;yield this.sendPromise;const s=jt(this.apiClient,e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=T(this,null,function*(){var o,i,c;const f=yield r,u=(i=(o=f.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content,h=f.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];h!=null&&(g=(c=h.slice(m))!==null&&c!==void 0?c:[]);const y=u?[u]:[];this.recordHistory(s,y,g)}),yield this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r})}sendMessageStream(e){return T(this,null,function*(){var n;yield this.sendPromise;const s=jt(this.apiClient,e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=yield r;return this.processStreamResponse(o,s)})}getHistory(e=!1){const n=e?Wd(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var s,r;return rr(this,arguments,function*(){var i,c,f,u;const h=[];try{for(var m=!0,g=Gr(e),y;y=yield et(g.next()),i=y.done,!i;m=!0){u=y.value,m=!1;const p=u;if(vk(p)){const v=(r=(s=p.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;v!==void 0&&h.push(v)}yield yield et(p)}}catch(p){c={error:p}}finally{try{!m&&!i&&(f=g.return)&&(yield et(f.call(g)))}finally{if(c)throw c.error}}this.recordHistory(n,h)})}recordHistory(e,n,s){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Wd(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kk(t,e,n){const s={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=l(e,["pageToken"]);return n!==void 0&&o!=null&&d(n,["_query","pageToken"],o),s}function _k(t,e){const n={},s=l(e,["config"]);return s!=null&&d(n,["config"],kk(t,s,n)),n}function Tk(t,e){const n={},s=l(e,["details"]);s!=null&&d(n,["details"],s);const r=l(e,["message"]);r!=null&&d(n,["message"],r);const o=l(e,["code"]);return o!=null&&d(n,["code"],o),n}function Sk(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["displayName"]);r!=null&&d(n,["displayName"],r);const o=l(e,["mimeType"]);o!=null&&d(n,["mimeType"],o);const i=l(e,["sizeBytes"]);i!=null&&d(n,["sizeBytes"],i);const c=l(e,["createTime"]);c!=null&&d(n,["createTime"],c);const f=l(e,["expirationTime"]);f!=null&&d(n,["expirationTime"],f);const u=l(e,["updateTime"]);u!=null&&d(n,["updateTime"],u);const h=l(e,["sha256Hash"]);h!=null&&d(n,["sha256Hash"],h);const m=l(e,["uri"]);m!=null&&d(n,["uri"],m);const g=l(e,["downloadUri"]);g!=null&&d(n,["downloadUri"],g);const y=l(e,["state"]);y!=null&&d(n,["state"],y);const p=l(e,["source"]);p!=null&&d(n,["source"],p);const v=l(e,["videoMetadata"]);v!=null&&d(n,["videoMetadata"],v);const C=l(e,["error"]);return C!=null&&d(n,["error"],Tk(t,C)),n}function Nk(t,e){const n={},s=l(e,["file"]);s!=null&&d(n,["file"],Sk(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function Mk(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["_url","file"],oh(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function Ek(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["_url","file"],oh(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function Dk(t,e){const n={},s=l(e,["details"]);s!=null&&d(n,["details"],s);const r=l(e,["message"]);r!=null&&d(n,["message"],r);const o=l(e,["code"]);return o!=null&&d(n,["code"],o),n}function tl(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["displayName"]);r!=null&&d(n,["displayName"],r);const o=l(e,["mimeType"]);o!=null&&d(n,["mimeType"],o);const i=l(e,["sizeBytes"]);i!=null&&d(n,["sizeBytes"],i);const c=l(e,["createTime"]);c!=null&&d(n,["createTime"],c);const f=l(e,["expirationTime"]);f!=null&&d(n,["expirationTime"],f);const u=l(e,["updateTime"]);u!=null&&d(n,["updateTime"],u);const h=l(e,["sha256Hash"]);h!=null&&d(n,["sha256Hash"],h);const m=l(e,["uri"]);m!=null&&d(n,["uri"],m);const g=l(e,["downloadUri"]);g!=null&&d(n,["downloadUri"],g);const y=l(e,["state"]);y!=null&&d(n,["state"],y);const p=l(e,["source"]);p!=null&&d(n,["source"],p);const v=l(e,["videoMetadata"]);v!=null&&d(n,["videoMetadata"],v);const C=l(e,["error"]);return C!=null&&d(n,["error"],Dk(t,C)),n}function Ik(t,e){const n={},s=l(e,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const r=l(e,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>tl(t,i))),d(n,["files"],o)}return n}function Ak(){return{}}function jk(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rk extends wr{constructor(e){super(),this.apiClient=e,this.list=(...s)=>T(this,[...s],function*(n={}){return new _a(mr.PAGED_ITEM_FILES,r=>this.listInternal(r),yield this.listInternal(n),n)})}upload(e){return T(this,null,function*(){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>tl(this.apiClient,n))})}download(e){return T(this,null,function*(){yield this.apiClient.downloadFile(e)})}listInternal(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_k(this.apiClient,e);return o=ke("files",c._url),i=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const u=Ik(this.apiClient,f),h=new XC;return Object.assign(h,u),h})}})}createInternal(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Nk(this.apiClient,e);return o=ke("upload/v1beta/files",c._url),i=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(()=>{const f=Ak(),u=new QC;return Object.assign(u,f),u})}})}get(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Mk(this.apiClient,e);return o=ke("files/{file}",c._url),i=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>tl(this.apiClient,f))}})}delete(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Ek(this.apiClient,e);return o=ke("files/{file}",c._url),i=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(()=>{const f=jk(),u=new eb;return Object.assign(u,f),u})}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pk(t,e){const n={},s=l(e,["voiceName"]);return s!=null&&d(n,["voiceName"],s),n}function Ok(t,e){const n={},s=l(e,["voiceName"]);return s!=null&&d(n,["voiceName"],s),n}function ch(t,e){const n={},s=l(e,["prebuiltVoiceConfig"]);return s!=null&&d(n,["prebuiltVoiceConfig"],Pk(t,s)),n}function Fk(t,e){const n={},s=l(e,["prebuiltVoiceConfig"]);return s!=null&&d(n,["prebuiltVoiceConfig"],Ok(t,s)),n}function Lk(t,e){const n={},s=l(e,["speaker"]);s!=null&&d(n,["speaker"],s);const r=l(e,["voiceConfig"]);return r!=null&&d(n,["voiceConfig"],ch(t,r)),n}function $k(t,e){const n={},s=l(e,["speakerVoiceConfigs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Lk(t,o))),d(n,["speakerVoiceConfigs"],r)}return n}function Vk(t,e){const n={},s=l(e,["voiceConfig"]);s!=null&&d(n,["voiceConfig"],ch(t,s));const r=l(e,["multiSpeakerVoiceConfig"]);r!=null&&d(n,["multiSpeakerVoiceConfig"],$k(t,r));const o=l(e,["languageCode"]);return o!=null&&d(n,["languageCode"],o),n}function Uk(t,e){const n={},s=l(e,["voiceConfig"]);if(s!=null&&d(n,["voiceConfig"],Fk(t,s)),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(e,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function Bk(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function Gk(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function Wk(t,e){const n={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=l(e,["data"]);s!=null&&d(n,["data"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function Yk(t,e){const n={},s=l(e,["displayName"]);s!=null&&d(n,["displayName"],s);const r=l(e,["data"]);r!=null&&d(n,["data"],r);const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function Hk(t,e){const n={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=l(e,["fileUri"]);s!=null&&d(n,["fileUri"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function zk(t,e){const n={},s=l(e,["displayName"]);s!=null&&d(n,["displayName"],s);const r=l(e,["fileUri"]);r!=null&&d(n,["fileUri"],r);const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function qk(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],Bk(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],Wk(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],Hk(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function Zk(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],Gk(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],Yk(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],zk(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function Jk(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>qk(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function Kk(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>Zk(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function Xk(t,e){const n={},s=l(e,["behavior"]);s!=null&&d(n,["behavior"],s);const r=l(e,["description"]);r!=null&&d(n,["description"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const i=l(e,["parameters"]);i!=null&&d(n,["parameters"],i);const c=l(e,["response"]);return c!=null&&d(n,["response"],c),n}function Qk(t,e){const n={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=l(e,["description"]);s!=null&&d(n,["description"],s);const r=l(e,["name"]);r!=null&&d(n,["name"],r);const o=l(e,["parameters"]);o!=null&&d(n,["parameters"],o);const i=l(e,["response"]);return i!=null&&d(n,["response"],i),n}function e_(t,e){const n={},s=l(e,["startTime"]);s!=null&&d(n,["startTime"],s);const r=l(e,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function t_(t,e){const n={},s=l(e,["startTime"]);s!=null&&d(n,["startTime"],s);const r=l(e,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function n_(t,e){const n={},s=l(e,["timeRangeFilter"]);return s!=null&&d(n,["timeRangeFilter"],e_(t,s)),n}function s_(t,e){const n={},s=l(e,["timeRangeFilter"]);return s!=null&&d(n,["timeRangeFilter"],t_(t,s)),n}function r_(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function o_(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function a_(t,e){const n={},s=l(e,["dynamicRetrievalConfig"]);return s!=null&&d(n,["dynamicRetrievalConfig"],r_(t,s)),n}function i_(t,e){const n={},s=l(e,["dynamicRetrievalConfig"]);return s!=null&&d(n,["dynamicRetrievalConfig"],o_(t,s)),n}function l_(){return{}}function c_(t,e){const n={},s=l(e,["apiKeyString"]);return s!=null&&d(n,["apiKeyString"],s),n}function d_(t,e){const n={},s=l(e,["apiKeyConfig"]);s!=null&&d(n,["apiKeyConfig"],c_(t,s));const r=l(e,["authType"]);r!=null&&d(n,["authType"],r);const o=l(e,["googleServiceAccountConfig"]);o!=null&&d(n,["googleServiceAccountConfig"],o);const i=l(e,["httpBasicAuthConfig"]);i!=null&&d(n,["httpBasicAuthConfig"],i);const c=l(e,["oauthConfig"]);c!=null&&d(n,["oauthConfig"],c);const f=l(e,["oidcConfig"]);return f!=null&&d(n,["oidcConfig"],f),n}function u_(t,e){const n={},s=l(e,["authConfig"]);return s!=null&&d(n,["authConfig"],d_(t,s)),n}function f_(){return{}}function h_(){return{}}function m_(t,e){const n={},s=l(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(u=>Xk(t,u))),d(n,["functionDeclarations"],f)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearch"]);r!=null&&d(n,["googleSearch"],n_(t,r));const o=l(e,["googleSearchRetrieval"]);if(o!=null&&d(n,["googleSearchRetrieval"],a_(t,o)),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(e,["urlContext"])!=null&&d(n,["urlContext"],f_());const c=l(e,["codeExecution"]);return c!=null&&d(n,["codeExecution"],c),n}function g_(t,e){const n={},s=l(e,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(g=>Qk(t,g))),d(n,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(n,["retrieval"],r);const o=l(e,["googleSearch"]);o!=null&&d(n,["googleSearch"],s_(t,o));const i=l(e,["googleSearchRetrieval"]);i!=null&&d(n,["googleSearchRetrieval"],i_(t,i)),l(e,["enterpriseWebSearch"])!=null&&d(n,["enterpriseWebSearch"],l_());const f=l(e,["googleMaps"]);f!=null&&d(n,["googleMaps"],u_(t,f)),l(e,["urlContext"])!=null&&d(n,["urlContext"],h_());const h=l(e,["codeExecution"]);return h!=null&&d(n,["codeExecution"],h),n}function p_(t,e){const n={},s=l(e,["handle"]);if(s!=null&&d(n,["handle"],s),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function y_(t,e){const n={},s=l(e,["handle"]);s!=null&&d(n,["handle"],s);const r=l(e,["transparent"]);return r!=null&&d(n,["transparent"],r),n}function Yd(){return{}}function Hd(){return{}}function x_(t,e){const n={},s=l(e,["disabled"]);s!=null&&d(n,["disabled"],s);const r=l(e,["startOfSpeechSensitivity"]);r!=null&&d(n,["startOfSpeechSensitivity"],r);const o=l(e,["endOfSpeechSensitivity"]);o!=null&&d(n,["endOfSpeechSensitivity"],o);const i=l(e,["prefixPaddingMs"]);i!=null&&d(n,["prefixPaddingMs"],i);const c=l(e,["silenceDurationMs"]);return c!=null&&d(n,["silenceDurationMs"],c),n}function v_(t,e){const n={},s=l(e,["disabled"]);s!=null&&d(n,["disabled"],s);const r=l(e,["startOfSpeechSensitivity"]);r!=null&&d(n,["startOfSpeechSensitivity"],r);const o=l(e,["endOfSpeechSensitivity"]);o!=null&&d(n,["endOfSpeechSensitivity"],o);const i=l(e,["prefixPaddingMs"]);i!=null&&d(n,["prefixPaddingMs"],i);const c=l(e,["silenceDurationMs"]);return c!=null&&d(n,["silenceDurationMs"],c),n}function w_(t,e){const n={},s=l(e,["automaticActivityDetection"]);s!=null&&d(n,["automaticActivityDetection"],x_(t,s));const r=l(e,["activityHandling"]);r!=null&&d(n,["activityHandling"],r);const o=l(e,["turnCoverage"]);return o!=null&&d(n,["turnCoverage"],o),n}function C_(t,e){const n={},s=l(e,["automaticActivityDetection"]);s!=null&&d(n,["automaticActivityDetection"],v_(t,s));const r=l(e,["activityHandling"]);r!=null&&d(n,["activityHandling"],r);const o=l(e,["turnCoverage"]);return o!=null&&d(n,["turnCoverage"],o),n}function b_(t,e){const n={},s=l(e,["targetTokens"]);return s!=null&&d(n,["targetTokens"],s),n}function k_(t,e){const n={},s=l(e,["targetTokens"]);return s!=null&&d(n,["targetTokens"],s),n}function __(t,e){const n={},s=l(e,["triggerTokens"]);s!=null&&d(n,["triggerTokens"],s);const r=l(e,["slidingWindow"]);return r!=null&&d(n,["slidingWindow"],b_(t,r)),n}function T_(t,e){const n={},s=l(e,["triggerTokens"]);s!=null&&d(n,["triggerTokens"],s);const r=l(e,["slidingWindow"]);return r!=null&&d(n,["slidingWindow"],k_(t,r)),n}function S_(t,e){const n={},s=l(e,["proactiveAudio"]);return s!=null&&d(n,["proactiveAudio"],s),n}function N_(t,e){const n={},s=l(e,["proactiveAudio"]);return s!=null&&d(n,["proactiveAudio"],s),n}function M_(t,e,n){const s={},r=l(e,["generationConfig"]);n!==void 0&&r!=null&&d(n,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);n!==void 0&&o!=null&&d(n,["setup","generationConfig","responseModalities"],o);const i=l(e,["temperature"]);n!==void 0&&i!=null&&d(n,["setup","generationConfig","temperature"],i);const c=l(e,["topP"]);n!==void 0&&c!=null&&d(n,["setup","generationConfig","topP"],c);const f=l(e,["topK"]);n!==void 0&&f!=null&&d(n,["setup","generationConfig","topK"],f);const u=l(e,["maxOutputTokens"]);n!==void 0&&u!=null&&d(n,["setup","generationConfig","maxOutputTokens"],u);const h=l(e,["mediaResolution"]);n!==void 0&&h!=null&&d(n,["setup","generationConfig","mediaResolution"],h);const m=l(e,["seed"]);n!==void 0&&m!=null&&d(n,["setup","generationConfig","seed"],m);const g=l(e,["speechConfig"]);n!==void 0&&g!=null&&d(n,["setup","generationConfig","speechConfig"],Vk(t,jl(t,g)));const y=l(e,["enableAffectiveDialog"]);n!==void 0&&y!=null&&d(n,["setup","generationConfig","enableAffectiveDialog"],y);const p=l(e,["systemInstruction"]);n!==void 0&&p!=null&&d(n,["setup","systemInstruction"],Jk(t,jt(t,p)));const v=l(e,["tools"]);if(n!==void 0&&v!=null){let _=go(t,v);Array.isArray(_)&&(_=_.map(E=>m_(t,mo(t,E)))),d(n,["setup","tools"],_)}const C=l(e,["sessionResumption"]);n!==void 0&&C!=null&&d(n,["setup","sessionResumption"],p_(t,C));const b=l(e,["inputAudioTranscription"]);n!==void 0&&b!=null&&d(n,["setup","inputAudioTranscription"],Yd());const N=l(e,["outputAudioTranscription"]);n!==void 0&&N!=null&&d(n,["setup","outputAudioTranscription"],Yd());const M=l(e,["realtimeInputConfig"]);n!==void 0&&M!=null&&d(n,["setup","realtimeInputConfig"],w_(t,M));const D=l(e,["contextWindowCompression"]);n!==void 0&&D!=null&&d(n,["setup","contextWindowCompression"],__(t,D));const k=l(e,["proactivity"]);return n!==void 0&&k!=null&&d(n,["setup","proactivity"],S_(t,k)),s}function E_(t,e,n){const s={},r=l(e,["generationConfig"]);n!==void 0&&r!=null&&d(n,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);n!==void 0&&o!=null&&d(n,["setup","generationConfig","responseModalities"],o);const i=l(e,["temperature"]);n!==void 0&&i!=null&&d(n,["setup","generationConfig","temperature"],i);const c=l(e,["topP"]);n!==void 0&&c!=null&&d(n,["setup","generationConfig","topP"],c);const f=l(e,["topK"]);n!==void 0&&f!=null&&d(n,["setup","generationConfig","topK"],f);const u=l(e,["maxOutputTokens"]);n!==void 0&&u!=null&&d(n,["setup","generationConfig","maxOutputTokens"],u);const h=l(e,["mediaResolution"]);n!==void 0&&h!=null&&d(n,["setup","generationConfig","mediaResolution"],h);const m=l(e,["seed"]);n!==void 0&&m!=null&&d(n,["setup","generationConfig","seed"],m);const g=l(e,["speechConfig"]);n!==void 0&&g!=null&&d(n,["setup","generationConfig","speechConfig"],Uk(t,jl(t,g)));const y=l(e,["enableAffectiveDialog"]);n!==void 0&&y!=null&&d(n,["setup","generationConfig","enableAffectiveDialog"],y);const p=l(e,["systemInstruction"]);n!==void 0&&p!=null&&d(n,["setup","systemInstruction"],Kk(t,jt(t,p)));const v=l(e,["tools"]);if(n!==void 0&&v!=null){let _=go(t,v);Array.isArray(_)&&(_=_.map(E=>g_(t,mo(t,E)))),d(n,["setup","tools"],_)}const C=l(e,["sessionResumption"]);n!==void 0&&C!=null&&d(n,["setup","sessionResumption"],y_(t,C));const b=l(e,["inputAudioTranscription"]);n!==void 0&&b!=null&&d(n,["setup","inputAudioTranscription"],Hd());const N=l(e,["outputAudioTranscription"]);n!==void 0&&N!=null&&d(n,["setup","outputAudioTranscription"],Hd());const M=l(e,["realtimeInputConfig"]);n!==void 0&&M!=null&&d(n,["setup","realtimeInputConfig"],C_(t,M));const D=l(e,["contextWindowCompression"]);n!==void 0&&D!=null&&d(n,["setup","contextWindowCompression"],T_(t,D));const k=l(e,["proactivity"]);return n!==void 0&&k!=null&&d(n,["setup","proactivity"],N_(t,k)),s}function D_(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["setup","model"],Xe(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],M_(t,r,n)),n}function I_(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["setup","model"],Xe(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],E_(t,r,n)),n}function A_(){return{}}function j_(){return{}}function R_(){return{}}function P_(){return{}}function O_(t,e){const n={},s=l(e,["media"]);s!=null&&d(n,["mediaChunks"],eh(t,s));const r=l(e,["audio"]);r!=null&&d(n,["audio"],rb(t,r));const o=l(e,["audioStreamEnd"]);o!=null&&d(n,["audioStreamEnd"],o);const i=l(e,["video"]);i!=null&&d(n,["video"],sb(t,i));const c=l(e,["text"]);return c!=null&&d(n,["text"],c),l(e,["activityStart"])!=null&&d(n,["activityStart"],A_()),l(e,["activityEnd"])!=null&&d(n,["activityEnd"],R_()),n}function F_(t,e){const n={},s=l(e,["media"]);if(s!=null&&d(n,["mediaChunks"],eh(t,s)),l(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const r=l(e,["audioStreamEnd"]);if(r!=null&&d(n,["audioStreamEnd"],r),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(l(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return l(e,["activityStart"])!=null&&d(n,["activityStart"],j_()),l(e,["activityEnd"])!=null&&d(n,["activityEnd"],P_()),n}function dh(t,e){const n={},s=l(e,["text"]);s!=null&&d(n,["text"],s);const r=l(e,["weight"]);return r!=null&&d(n,["weight"],r),n}function L_(t,e){const n={},s=l(e,["weightedPrompts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>dh(t,o))),d(n,["weightedPrompts"],r)}return n}function uh(t,e){const n={},s=l(e,["temperature"]);s!=null&&d(n,["temperature"],s);const r=l(e,["topK"]);r!=null&&d(n,["topK"],r);const o=l(e,["seed"]);o!=null&&d(n,["seed"],o);const i=l(e,["guidance"]);i!=null&&d(n,["guidance"],i);const c=l(e,["bpm"]);c!=null&&d(n,["bpm"],c);const f=l(e,["density"]);f!=null&&d(n,["density"],f);const u=l(e,["brightness"]);u!=null&&d(n,["brightness"],u);const h=l(e,["scale"]);h!=null&&d(n,["scale"],h);const m=l(e,["muteBass"]);m!=null&&d(n,["muteBass"],m);const g=l(e,["muteDrums"]);g!=null&&d(n,["muteDrums"],g);const y=l(e,["onlyBassAndDrums"]);return y!=null&&d(n,["onlyBassAndDrums"],y),n}function $_(t,e){const n={},s=l(e,["musicGenerationConfig"]);return s!=null&&d(n,["musicGenerationConfig"],uh(t,s)),n}function fh(t,e){const n={},s=l(e,["model"]);return s!=null&&d(n,["model"],s),n}function hh(t,e){const n={},s=l(e,["weightedPrompts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>dh(t,o))),d(n,["weightedPrompts"],r)}return n}function nl(t,e){const n={},s=l(e,["setup"]);s!=null&&d(n,["setup"],fh(t,s));const r=l(e,["clientContent"]);r!=null&&d(n,["clientContent"],hh(t,r));const o=l(e,["musicGenerationConfig"]);o!=null&&d(n,["musicGenerationConfig"],uh(t,o));const i=l(e,["playbackControl"]);return i!=null&&d(n,["playbackControl"],i),n}function V_(){return{}}function U_(){return{}}function B_(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function G_(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function W_(t,e){const n={},s=l(e,["data"]);s!=null&&d(n,["data"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function Y_(t,e){const n={},s=l(e,["displayName"]);s!=null&&d(n,["displayName"],s);const r=l(e,["data"]);r!=null&&d(n,["data"],r);const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function H_(t,e){const n={},s=l(e,["fileUri"]);s!=null&&d(n,["fileUri"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function z_(t,e){const n={},s=l(e,["displayName"]);s!=null&&d(n,["displayName"],s);const r=l(e,["fileUri"]);r!=null&&d(n,["fileUri"],r);const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function q_(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],B_(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],W_(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],H_(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function Z_(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],G_(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],Y_(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],z_(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function J_(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>q_(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function K_(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>Z_(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function zd(t,e){const n={},s=l(e,["text"]);s!=null&&d(n,["text"],s);const r=l(e,["finished"]);return r!=null&&d(n,["finished"],r),n}function qd(t,e){const n={},s=l(e,["text"]);s!=null&&d(n,["text"],s);const r=l(e,["finished"]);return r!=null&&d(n,["finished"],r),n}function X_(t,e){const n={},s=l(e,["retrievedUrl"]);s!=null&&d(n,["retrievedUrl"],s);const r=l(e,["urlRetrievalStatus"]);return r!=null&&d(n,["urlRetrievalStatus"],r),n}function Q_(t,e){const n={},s=l(e,["urlMetadata"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>X_(t,o))),d(n,["urlMetadata"],r)}return n}function eT(t,e){const n={},s=l(e,["modelTurn"]);s!=null&&d(n,["modelTurn"],J_(t,s));const r=l(e,["turnComplete"]);r!=null&&d(n,["turnComplete"],r);const o=l(e,["interrupted"]);o!=null&&d(n,["interrupted"],o);const i=l(e,["groundingMetadata"]);i!=null&&d(n,["groundingMetadata"],i);const c=l(e,["generationComplete"]);c!=null&&d(n,["generationComplete"],c);const f=l(e,["inputTranscription"]);f!=null&&d(n,["inputTranscription"],zd(t,f));const u=l(e,["outputTranscription"]);u!=null&&d(n,["outputTranscription"],zd(t,u));const h=l(e,["urlContextMetadata"]);return h!=null&&d(n,["urlContextMetadata"],Q_(t,h)),n}function tT(t,e){const n={},s=l(e,["modelTurn"]);s!=null&&d(n,["modelTurn"],K_(t,s));const r=l(e,["turnComplete"]);r!=null&&d(n,["turnComplete"],r);const o=l(e,["interrupted"]);o!=null&&d(n,["interrupted"],o);const i=l(e,["groundingMetadata"]);i!=null&&d(n,["groundingMetadata"],i);const c=l(e,["generationComplete"]);c!=null&&d(n,["generationComplete"],c);const f=l(e,["inputTranscription"]);f!=null&&d(n,["inputTranscription"],qd(t,f));const u=l(e,["outputTranscription"]);return u!=null&&d(n,["outputTranscription"],qd(t,u)),n}function nT(t,e){const n={},s=l(e,["id"]);s!=null&&d(n,["id"],s);const r=l(e,["args"]);r!=null&&d(n,["args"],r);const o=l(e,["name"]);return o!=null&&d(n,["name"],o),n}function sT(t,e){const n={},s=l(e,["args"]);s!=null&&d(n,["args"],s);const r=l(e,["name"]);return r!=null&&d(n,["name"],r),n}function rT(t,e){const n={},s=l(e,["functionCalls"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>nT(t,o))),d(n,["functionCalls"],r)}return n}function oT(t,e){const n={},s=l(e,["functionCalls"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>sT(t,o))),d(n,["functionCalls"],r)}return n}function aT(t,e){const n={},s=l(e,["ids"]);return s!=null&&d(n,["ids"],s),n}function iT(t,e){const n={},s=l(e,["ids"]);return s!=null&&d(n,["ids"],s),n}function Ao(t,e){const n={},s=l(e,["modality"]);s!=null&&d(n,["modality"],s);const r=l(e,["tokenCount"]);return r!=null&&d(n,["tokenCount"],r),n}function jo(t,e){const n={},s=l(e,["modality"]);s!=null&&d(n,["modality"],s);const r=l(e,["tokenCount"]);return r!=null&&d(n,["tokenCount"],r),n}function lT(t,e){const n={},s=l(e,["promptTokenCount"]);s!=null&&d(n,["promptTokenCount"],s);const r=l(e,["cachedContentTokenCount"]);r!=null&&d(n,["cachedContentTokenCount"],r);const o=l(e,["responseTokenCount"]);o!=null&&d(n,["responseTokenCount"],o);const i=l(e,["toolUsePromptTokenCount"]);i!=null&&d(n,["toolUsePromptTokenCount"],i);const c=l(e,["thoughtsTokenCount"]);c!=null&&d(n,["thoughtsTokenCount"],c);const f=l(e,["totalTokenCount"]);f!=null&&d(n,["totalTokenCount"],f);const u=l(e,["promptTokensDetails"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(p=>Ao(t,p))),d(n,["promptTokensDetails"],y)}const h=l(e,["cacheTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(p=>Ao(t,p))),d(n,["cacheTokensDetails"],y)}const m=l(e,["responseTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(p=>Ao(t,p))),d(n,["responseTokensDetails"],y)}const g=l(e,["toolUsePromptTokensDetails"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(p=>Ao(t,p))),d(n,["toolUsePromptTokensDetails"],y)}return n}function cT(t,e){const n={},s=l(e,["promptTokenCount"]);s!=null&&d(n,["promptTokenCount"],s);const r=l(e,["cachedContentTokenCount"]);r!=null&&d(n,["cachedContentTokenCount"],r);const o=l(e,["candidatesTokenCount"]);o!=null&&d(n,["responseTokenCount"],o);const i=l(e,["toolUsePromptTokenCount"]);i!=null&&d(n,["toolUsePromptTokenCount"],i);const c=l(e,["thoughtsTokenCount"]);c!=null&&d(n,["thoughtsTokenCount"],c);const f=l(e,["totalTokenCount"]);f!=null&&d(n,["totalTokenCount"],f);const u=l(e,["promptTokensDetails"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(v=>jo(t,v))),d(n,["promptTokensDetails"],p)}const h=l(e,["cacheTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(v=>jo(t,v))),d(n,["cacheTokensDetails"],p)}const m=l(e,["candidatesTokensDetails"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(v=>jo(t,v))),d(n,["responseTokensDetails"],p)}const g=l(e,["toolUsePromptTokensDetails"]);if(g!=null){let p=g;Array.isArray(p)&&(p=p.map(v=>jo(t,v))),d(n,["toolUsePromptTokensDetails"],p)}const y=l(e,["trafficType"]);return y!=null&&d(n,["trafficType"],y),n}function dT(t,e){const n={},s=l(e,["timeLeft"]);return s!=null&&d(n,["timeLeft"],s),n}function uT(t,e){const n={},s=l(e,["timeLeft"]);return s!=null&&d(n,["timeLeft"],s),n}function fT(t,e){const n={},s=l(e,["newHandle"]);s!=null&&d(n,["newHandle"],s);const r=l(e,["resumable"]);r!=null&&d(n,["resumable"],r);const o=l(e,["lastConsumedClientMessageIndex"]);return o!=null&&d(n,["lastConsumedClientMessageIndex"],o),n}function hT(t,e){const n={},s=l(e,["newHandle"]);s!=null&&d(n,["newHandle"],s);const r=l(e,["resumable"]);r!=null&&d(n,["resumable"],r);const o=l(e,["lastConsumedClientMessageIndex"]);return o!=null&&d(n,["lastConsumedClientMessageIndex"],o),n}function mT(t,e){const n={};l(e,["setupComplete"])!=null&&d(n,["setupComplete"],V_());const r=l(e,["serverContent"]);r!=null&&d(n,["serverContent"],eT(t,r));const o=l(e,["toolCall"]);o!=null&&d(n,["toolCall"],rT(t,o));const i=l(e,["toolCallCancellation"]);i!=null&&d(n,["toolCallCancellation"],aT(t,i));const c=l(e,["usageMetadata"]);c!=null&&d(n,["usageMetadata"],lT(t,c));const f=l(e,["goAway"]);f!=null&&d(n,["goAway"],dT(t,f));const u=l(e,["sessionResumptionUpdate"]);return u!=null&&d(n,["sessionResumptionUpdate"],fT(t,u)),n}function gT(t,e){const n={};l(e,["setupComplete"])!=null&&d(n,["setupComplete"],U_());const r=l(e,["serverContent"]);r!=null&&d(n,["serverContent"],tT(t,r));const o=l(e,["toolCall"]);o!=null&&d(n,["toolCall"],oT(t,o));const i=l(e,["toolCallCancellation"]);i!=null&&d(n,["toolCallCancellation"],iT(t,i));const c=l(e,["usageMetadata"]);c!=null&&d(n,["usageMetadata"],cT(t,c));const f=l(e,["goAway"]);f!=null&&d(n,["goAway"],uT(t,f));const u=l(e,["sessionResumptionUpdate"]);return u!=null&&d(n,["sessionResumptionUpdate"],hT(t,u)),n}function pT(){return{}}function yT(t,e){const n={},s=l(e,["text"]);s!=null&&d(n,["text"],s);const r=l(e,["weight"]);return r!=null&&d(n,["weight"],r),n}function xT(t,e){const n={},s=l(e,["weightedPrompts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>yT(t,o))),d(n,["weightedPrompts"],r)}return n}function vT(t,e){const n={},s=l(e,["temperature"]);s!=null&&d(n,["temperature"],s);const r=l(e,["topK"]);r!=null&&d(n,["topK"],r);const o=l(e,["seed"]);o!=null&&d(n,["seed"],o);const i=l(e,["guidance"]);i!=null&&d(n,["guidance"],i);const c=l(e,["bpm"]);c!=null&&d(n,["bpm"],c);const f=l(e,["density"]);f!=null&&d(n,["density"],f);const u=l(e,["brightness"]);u!=null&&d(n,["brightness"],u);const h=l(e,["scale"]);h!=null&&d(n,["scale"],h);const m=l(e,["muteBass"]);m!=null&&d(n,["muteBass"],m);const g=l(e,["muteDrums"]);g!=null&&d(n,["muteDrums"],g);const y=l(e,["onlyBassAndDrums"]);return y!=null&&d(n,["onlyBassAndDrums"],y),n}function wT(t,e){const n={},s=l(e,["clientContent"]);s!=null&&d(n,["clientContent"],xT(t,s));const r=l(e,["musicGenerationConfig"]);return r!=null&&d(n,["musicGenerationConfig"],vT(t,r)),n}function CT(t,e){const n={},s=l(e,["data"]);s!=null&&d(n,["data"],s);const r=l(e,["mimeType"]);r!=null&&d(n,["mimeType"],r);const o=l(e,["sourceMetadata"]);return o!=null&&d(n,["sourceMetadata"],wT(t,o)),n}function bT(t,e){const n={},s=l(e,["audioChunks"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>CT(t,o))),d(n,["audioChunks"],r)}return n}function kT(t,e){const n={},s=l(e,["text"]);s!=null&&d(n,["text"],s);const r=l(e,["filteredReason"]);return r!=null&&d(n,["filteredReason"],r),n}function _T(t,e){const n={};l(e,["setupComplete"])!=null&&d(n,["setupComplete"],pT());const r=l(e,["serverContent"]);r!=null&&d(n,["serverContent"],bT(t,r));const o=l(e,["filteredPrompt"]);return o!=null&&d(n,["filteredPrompt"],kT(t,o)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TT(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function ST(t,e){const n={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=l(e,["data"]);s!=null&&d(n,["data"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function NT(t,e){const n={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=l(e,["fileUri"]);s!=null&&d(n,["fileUri"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function MT(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],TT(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],ST(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],NT(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function Ta(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>MT(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function ET(t,e){const n={},s=l(e,["anyOf"]);s!=null&&d(n,["anyOf"],s);const r=l(e,["default"]);r!=null&&d(n,["default"],r);const o=l(e,["description"]);o!=null&&d(n,["description"],o);const i=l(e,["enum"]);i!=null&&d(n,["enum"],i);const c=l(e,["example"]);c!=null&&d(n,["example"],c);const f=l(e,["format"]);f!=null&&d(n,["format"],f);const u=l(e,["items"]);u!=null&&d(n,["items"],u);const h=l(e,["maxItems"]);h!=null&&d(n,["maxItems"],h);const m=l(e,["maxLength"]);m!=null&&d(n,["maxLength"],m);const g=l(e,["maxProperties"]);g!=null&&d(n,["maxProperties"],g);const y=l(e,["maximum"]);y!=null&&d(n,["maximum"],y);const p=l(e,["minItems"]);p!=null&&d(n,["minItems"],p);const v=l(e,["minLength"]);v!=null&&d(n,["minLength"],v);const C=l(e,["minProperties"]);C!=null&&d(n,["minProperties"],C);const b=l(e,["minimum"]);b!=null&&d(n,["minimum"],b);const N=l(e,["nullable"]);N!=null&&d(n,["nullable"],N);const M=l(e,["pattern"]);M!=null&&d(n,["pattern"],M);const D=l(e,["properties"]);D!=null&&d(n,["properties"],D);const k=l(e,["propertyOrdering"]);k!=null&&d(n,["propertyOrdering"],k);const _=l(e,["required"]);_!=null&&d(n,["required"],_);const E=l(e,["title"]);E!=null&&d(n,["title"],E);const P=l(e,["type"]);return P!=null&&d(n,["type"],P),n}function DT(t,e){const n={};if(l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=l(e,["category"]);s!=null&&d(n,["category"],s);const r=l(e,["threshold"]);return r!=null&&d(n,["threshold"],r),n}function IT(t,e){const n={},s=l(e,["behavior"]);s!=null&&d(n,["behavior"],s);const r=l(e,["description"]);r!=null&&d(n,["description"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const i=l(e,["parameters"]);i!=null&&d(n,["parameters"],i);const c=l(e,["response"]);return c!=null&&d(n,["response"],c),n}function AT(t,e){const n={},s=l(e,["startTime"]);s!=null&&d(n,["startTime"],s);const r=l(e,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function jT(t,e){const n={},s=l(e,["timeRangeFilter"]);return s!=null&&d(n,["timeRangeFilter"],AT(t,s)),n}function RT(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function PT(t,e){const n={},s=l(e,["dynamicRetrievalConfig"]);return s!=null&&d(n,["dynamicRetrievalConfig"],RT(t,s)),n}function OT(){return{}}function FT(t,e){const n={},s=l(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(u=>IT(t,u))),d(n,["functionDeclarations"],f)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearch"]);r!=null&&d(n,["googleSearch"],jT(t,r));const o=l(e,["googleSearchRetrieval"]);if(o!=null&&d(n,["googleSearchRetrieval"],PT(t,o)),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(e,["urlContext"])!=null&&d(n,["urlContext"],OT());const c=l(e,["codeExecution"]);return c!=null&&d(n,["codeExecution"],c),n}function LT(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["allowedFunctionNames"]);return r!=null&&d(n,["allowedFunctionNames"],r),n}function $T(t,e){const n={},s=l(e,["latitude"]);s!=null&&d(n,["latitude"],s);const r=l(e,["longitude"]);return r!=null&&d(n,["longitude"],r),n}function VT(t,e){const n={},s=l(e,["latLng"]);s!=null&&d(n,["latLng"],$T(t,s));const r=l(e,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function UT(t,e){const n={},s=l(e,["functionCallingConfig"]);s!=null&&d(n,["functionCallingConfig"],LT(t,s));const r=l(e,["retrievalConfig"]);return r!=null&&d(n,["retrievalConfig"],VT(t,r)),n}function BT(t,e){const n={},s=l(e,["voiceName"]);return s!=null&&d(n,["voiceName"],s),n}function mh(t,e){const n={},s=l(e,["prebuiltVoiceConfig"]);return s!=null&&d(n,["prebuiltVoiceConfig"],BT(t,s)),n}function GT(t,e){const n={},s=l(e,["speaker"]);s!=null&&d(n,["speaker"],s);const r=l(e,["voiceConfig"]);return r!=null&&d(n,["voiceConfig"],mh(t,r)),n}function WT(t,e){const n={},s=l(e,["speakerVoiceConfigs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>GT(t,o))),d(n,["speakerVoiceConfigs"],r)}return n}function YT(t,e){const n={},s=l(e,["voiceConfig"]);s!=null&&d(n,["voiceConfig"],mh(t,s));const r=l(e,["multiSpeakerVoiceConfig"]);r!=null&&d(n,["multiSpeakerVoiceConfig"],WT(t,r));const o=l(e,["languageCode"]);return o!=null&&d(n,["languageCode"],o),n}function HT(t,e){const n={},s=l(e,["includeThoughts"]);s!=null&&d(n,["includeThoughts"],s);const r=l(e,["thinkingBudget"]);return r!=null&&d(n,["thinkingBudget"],r),n}function zT(t,e,n){const s={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],Ta(t,jt(t,r)));const o=l(e,["temperature"]);o!=null&&d(s,["temperature"],o);const i=l(e,["topP"]);i!=null&&d(s,["topP"],i);const c=l(e,["topK"]);c!=null&&d(s,["topK"],c);const f=l(e,["candidateCount"]);f!=null&&d(s,["candidateCount"],f);const u=l(e,["maxOutputTokens"]);u!=null&&d(s,["maxOutputTokens"],u);const h=l(e,["stopSequences"]);h!=null&&d(s,["stopSequences"],h);const m=l(e,["responseLogprobs"]);m!=null&&d(s,["responseLogprobs"],m);const g=l(e,["logprobs"]);g!=null&&d(s,["logprobs"],g);const y=l(e,["presencePenalty"]);y!=null&&d(s,["presencePenalty"],y);const p=l(e,["frequencyPenalty"]);p!=null&&d(s,["frequencyPenalty"],p);const v=l(e,["seed"]);v!=null&&d(s,["seed"],v);const C=l(e,["responseMimeType"]);C!=null&&d(s,["responseMimeType"],C);const b=l(e,["responseSchema"]);if(b!=null&&d(s,["responseSchema"],ET(t,la(t,b))),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=l(e,["safetySettings"]);if(n!==void 0&&N!=null){let B=N;Array.isArray(B)&&(B=B.map($=>DT(t,$))),d(n,["safetySettings"],B)}const M=l(e,["tools"]);if(n!==void 0&&M!=null){let B=go(t,M);Array.isArray(B)&&(B=B.map($=>FT(t,mo(t,$)))),d(n,["tools"],B)}const D=l(e,["toolConfig"]);if(n!==void 0&&D!=null&&d(n,["toolConfig"],UT(t,D)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=l(e,["cachedContent"]);n!==void 0&&k!=null&&d(n,["cachedContent"],Cs(t,k));const _=l(e,["responseModalities"]);_!=null&&d(s,["responseModalities"],_);const E=l(e,["mediaResolution"]);E!=null&&d(s,["mediaResolution"],E);const P=l(e,["speechConfig"]);if(P!=null&&d(s,["speechConfig"],YT(t,sh(t,P))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=l(e,["thinkingConfig"]);return R!=null&&d(s,["thinkingConfig"],HT(t,R)),s}function Zd(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["contents"]);if(r!=null){let i=an(t,r);Array.isArray(i)&&(i=i.map(c=>Ta(t,c))),d(n,["contents"],i)}const o=l(e,["config"]);return o!=null&&d(n,["generationConfig"],zT(t,o,n)),n}function qT(t,e,n){const s={},r=l(e,["taskType"]);n!==void 0&&r!=null&&d(n,["requests[]","taskType"],r);const o=l(e,["title"]);n!==void 0&&o!=null&&d(n,["requests[]","title"],o);const i=l(e,["outputDimensionality"]);if(n!==void 0&&i!=null&&d(n,["requests[]","outputDimensionality"],i),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function ZT(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["contents"]);r!=null&&d(n,["requests[]","content"],nh(t,r));const o=l(e,["config"]);o!=null&&d(n,["config"],qT(t,o,n));const i=l(e,["model"]);return i!==void 0&&d(n,["requests[]","model"],Xe(t,i)),n}function JT(t,e,n){const s={};if(l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(e,["numberOfImages"]);n!==void 0&&r!=null&&d(n,["parameters","sampleCount"],r);const o=l(e,["aspectRatio"]);n!==void 0&&o!=null&&d(n,["parameters","aspectRatio"],o);const i=l(e,["guidanceScale"]);if(n!==void 0&&i!=null&&d(n,["parameters","guidanceScale"],i),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=l(e,["safetyFilterLevel"]);n!==void 0&&c!=null&&d(n,["parameters","safetySetting"],c);const f=l(e,["personGeneration"]);n!==void 0&&f!=null&&d(n,["parameters","personGeneration"],f);const u=l(e,["includeSafetyAttributes"]);n!==void 0&&u!=null&&d(n,["parameters","includeSafetyAttributes"],u);const h=l(e,["includeRaiReason"]);n!==void 0&&h!=null&&d(n,["parameters","includeRaiReason"],h);const m=l(e,["language"]);n!==void 0&&m!=null&&d(n,["parameters","language"],m);const g=l(e,["outputMimeType"]);n!==void 0&&g!=null&&d(n,["parameters","outputOptions","mimeType"],g);const y=l(e,["outputCompressionQuality"]);if(n!==void 0&&y!=null&&d(n,["parameters","outputOptions","compressionQuality"],y),l(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function KT(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=l(e,["config"]);return o!=null&&d(n,["config"],JT(t,o,n)),n}function XT(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","name"],Xe(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function QT(t,e,n){const s={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const i=l(e,["filter"]);n!==void 0&&i!=null&&d(n,["_query","filter"],i);const c=l(e,["queryBase"]);return n!==void 0&&c!=null&&d(n,["_url","models_url"],ah(t,c)),s}function eS(t,e){const n={},s=l(e,["config"]);return s!=null&&d(n,["config"],QT(t,s,n)),n}function tS(t,e,n){const s={},r=l(e,["displayName"]);n!==void 0&&r!=null&&d(n,["displayName"],r);const o=l(e,["description"]);n!==void 0&&o!=null&&d(n,["description"],o);const i=l(e,["defaultCheckpointId"]);return n!==void 0&&i!=null&&d(n,["defaultCheckpointId"],i),s}function nS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","name"],Xe(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],tS(t,r,n)),n}function sS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","name"],Xe(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function rS(t,e){const n={};if(l(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function oS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["contents"]);if(r!=null){let i=an(t,r);Array.isArray(i)&&(i=i.map(c=>Ta(t,c))),d(n,["contents"],i)}const o=l(e,["config"]);return o!=null&&d(n,["config"],rS(t,o)),n}function aS(t,e){const n={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=l(e,["imageBytes"]);s!=null&&d(n,["bytesBase64Encoded"],ts(t,s));const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function iS(t,e,n){const s={},r=l(e,["numberOfVideos"]);if(n!==void 0&&r!=null&&d(n,["parameters","sampleCount"],r),l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(e,["durationSeconds"]);if(n!==void 0&&o!=null&&d(n,["parameters","durationSeconds"],o),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(e,["aspectRatio"]);if(n!==void 0&&i!=null&&d(n,["parameters","aspectRatio"],i),l(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const c=l(e,["personGeneration"]);if(n!==void 0&&c!=null&&d(n,["parameters","personGeneration"],c),l(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=l(e,["negativePrompt"]);n!==void 0&&f!=null&&d(n,["parameters","negativePrompt"],f);const u=l(e,["enhancePrompt"]);if(n!==void 0&&u!=null&&d(n,["parameters","enhancePrompt"],u),l(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(l(e,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");return s}function lS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=l(e,["image"]);if(o!=null&&d(n,["instances[0]","image"],aS(t,o)),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=l(e,["config"]);return i!=null&&d(n,["config"],iS(t,i,n)),n}function cS(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function dS(t,e){const n={},s=l(e,["displayName"]);s!=null&&d(n,["displayName"],s);const r=l(e,["data"]);r!=null&&d(n,["data"],r);const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function uS(t,e){const n={},s=l(e,["displayName"]);s!=null&&d(n,["displayName"],s);const r=l(e,["fileUri"]);r!=null&&d(n,["fileUri"],r);const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function fS(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],cS(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],dS(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],uS(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function Cr(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>fS(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function hS(t,e){const n={},s=l(e,["anyOf"]);s!=null&&d(n,["anyOf"],s);const r=l(e,["default"]);r!=null&&d(n,["default"],r);const o=l(e,["description"]);o!=null&&d(n,["description"],o);const i=l(e,["enum"]);i!=null&&d(n,["enum"],i);const c=l(e,["example"]);c!=null&&d(n,["example"],c);const f=l(e,["format"]);f!=null&&d(n,["format"],f);const u=l(e,["items"]);u!=null&&d(n,["items"],u);const h=l(e,["maxItems"]);h!=null&&d(n,["maxItems"],h);const m=l(e,["maxLength"]);m!=null&&d(n,["maxLength"],m);const g=l(e,["maxProperties"]);g!=null&&d(n,["maxProperties"],g);const y=l(e,["maximum"]);y!=null&&d(n,["maximum"],y);const p=l(e,["minItems"]);p!=null&&d(n,["minItems"],p);const v=l(e,["minLength"]);v!=null&&d(n,["minLength"],v);const C=l(e,["minProperties"]);C!=null&&d(n,["minProperties"],C);const b=l(e,["minimum"]);b!=null&&d(n,["minimum"],b);const N=l(e,["nullable"]);N!=null&&d(n,["nullable"],N);const M=l(e,["pattern"]);M!=null&&d(n,["pattern"],M);const D=l(e,["properties"]);D!=null&&d(n,["properties"],D);const k=l(e,["propertyOrdering"]);k!=null&&d(n,["propertyOrdering"],k);const _=l(e,["required"]);_!=null&&d(n,["required"],_);const E=l(e,["title"]);E!=null&&d(n,["title"],E);const P=l(e,["type"]);return P!=null&&d(n,["type"],P),n}function mS(t,e){const n={},s=l(e,["featureSelectionPreference"]);return s!=null&&d(n,["featureSelectionPreference"],s),n}function gS(t,e){const n={},s=l(e,["method"]);s!=null&&d(n,["method"],s);const r=l(e,["category"]);r!=null&&d(n,["category"],r);const o=l(e,["threshold"]);return o!=null&&d(n,["threshold"],o),n}function pS(t,e){const n={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=l(e,["description"]);s!=null&&d(n,["description"],s);const r=l(e,["name"]);r!=null&&d(n,["name"],r);const o=l(e,["parameters"]);o!=null&&d(n,["parameters"],o);const i=l(e,["response"]);return i!=null&&d(n,["response"],i),n}function yS(t,e){const n={},s=l(e,["startTime"]);s!=null&&d(n,["startTime"],s);const r=l(e,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function xS(t,e){const n={},s=l(e,["timeRangeFilter"]);return s!=null&&d(n,["timeRangeFilter"],yS(t,s)),n}function vS(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function wS(t,e){const n={},s=l(e,["dynamicRetrievalConfig"]);return s!=null&&d(n,["dynamicRetrievalConfig"],vS(t,s)),n}function CS(){return{}}function bS(t,e){const n={},s=l(e,["apiKeyString"]);return s!=null&&d(n,["apiKeyString"],s),n}function kS(t,e){const n={},s=l(e,["apiKeyConfig"]);s!=null&&d(n,["apiKeyConfig"],bS(t,s));const r=l(e,["authType"]);r!=null&&d(n,["authType"],r);const o=l(e,["googleServiceAccountConfig"]);o!=null&&d(n,["googleServiceAccountConfig"],o);const i=l(e,["httpBasicAuthConfig"]);i!=null&&d(n,["httpBasicAuthConfig"],i);const c=l(e,["oauthConfig"]);c!=null&&d(n,["oauthConfig"],c);const f=l(e,["oidcConfig"]);return f!=null&&d(n,["oidcConfig"],f),n}function _S(t,e){const n={},s=l(e,["authConfig"]);return s!=null&&d(n,["authConfig"],kS(t,s)),n}function TS(){return{}}function gh(t,e){const n={},s=l(e,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(g=>pS(t,g))),d(n,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(n,["retrieval"],r);const o=l(e,["googleSearch"]);o!=null&&d(n,["googleSearch"],xS(t,o));const i=l(e,["googleSearchRetrieval"]);i!=null&&d(n,["googleSearchRetrieval"],wS(t,i)),l(e,["enterpriseWebSearch"])!=null&&d(n,["enterpriseWebSearch"],CS());const f=l(e,["googleMaps"]);f!=null&&d(n,["googleMaps"],_S(t,f)),l(e,["urlContext"])!=null&&d(n,["urlContext"],TS());const h=l(e,["codeExecution"]);return h!=null&&d(n,["codeExecution"],h),n}function SS(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["allowedFunctionNames"]);return r!=null&&d(n,["allowedFunctionNames"],r),n}function NS(t,e){const n={},s=l(e,["latitude"]);s!=null&&d(n,["latitude"],s);const r=l(e,["longitude"]);return r!=null&&d(n,["longitude"],r),n}function MS(t,e){const n={},s=l(e,["latLng"]);s!=null&&d(n,["latLng"],NS(t,s));const r=l(e,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function ES(t,e){const n={},s=l(e,["functionCallingConfig"]);s!=null&&d(n,["functionCallingConfig"],SS(t,s));const r=l(e,["retrievalConfig"]);return r!=null&&d(n,["retrievalConfig"],MS(t,r)),n}function DS(t,e){const n={},s=l(e,["voiceName"]);return s!=null&&d(n,["voiceName"],s),n}function IS(t,e){const n={},s=l(e,["prebuiltVoiceConfig"]);return s!=null&&d(n,["prebuiltVoiceConfig"],DS(t,s)),n}function AS(t,e){const n={},s=l(e,["voiceConfig"]);if(s!=null&&d(n,["voiceConfig"],IS(t,s)),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(e,["languageCode"]);return r!=null&&d(n,["languageCode"],r),n}function jS(t,e){const n={},s=l(e,["includeThoughts"]);s!=null&&d(n,["includeThoughts"],s);const r=l(e,["thinkingBudget"]);return r!=null&&d(n,["thinkingBudget"],r),n}function RS(t,e,n){const s={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],Cr(t,jt(t,r)));const o=l(e,["temperature"]);o!=null&&d(s,["temperature"],o);const i=l(e,["topP"]);i!=null&&d(s,["topP"],i);const c=l(e,["topK"]);c!=null&&d(s,["topK"],c);const f=l(e,["candidateCount"]);f!=null&&d(s,["candidateCount"],f);const u=l(e,["maxOutputTokens"]);u!=null&&d(s,["maxOutputTokens"],u);const h=l(e,["stopSequences"]);h!=null&&d(s,["stopSequences"],h);const m=l(e,["responseLogprobs"]);m!=null&&d(s,["responseLogprobs"],m);const g=l(e,["logprobs"]);g!=null&&d(s,["logprobs"],g);const y=l(e,["presencePenalty"]);y!=null&&d(s,["presencePenalty"],y);const p=l(e,["frequencyPenalty"]);p!=null&&d(s,["frequencyPenalty"],p);const v=l(e,["seed"]);v!=null&&d(s,["seed"],v);const C=l(e,["responseMimeType"]);C!=null&&d(s,["responseMimeType"],C);const b=l(e,["responseSchema"]);b!=null&&d(s,["responseSchema"],hS(t,la(t,b)));const N=l(e,["routingConfig"]);N!=null&&d(s,["routingConfig"],N);const M=l(e,["modelSelectionConfig"]);M!=null&&d(s,["modelConfig"],mS(t,M));const D=l(e,["safetySettings"]);if(n!==void 0&&D!=null){let le=D;Array.isArray(le)&&(le=le.map(ve=>gS(t,ve))),d(n,["safetySettings"],le)}const k=l(e,["tools"]);if(n!==void 0&&k!=null){let le=go(t,k);Array.isArray(le)&&(le=le.map(ve=>gh(t,mo(t,ve)))),d(n,["tools"],le)}const _=l(e,["toolConfig"]);n!==void 0&&_!=null&&d(n,["toolConfig"],ES(t,_));const E=l(e,["labels"]);n!==void 0&&E!=null&&d(n,["labels"],E);const P=l(e,["cachedContent"]);n!==void 0&&P!=null&&d(n,["cachedContent"],Cs(t,P));const R=l(e,["responseModalities"]);R!=null&&d(s,["responseModalities"],R);const B=l(e,["mediaResolution"]);B!=null&&d(s,["mediaResolution"],B);const $=l(e,["speechConfig"]);$!=null&&d(s,["speechConfig"],AS(t,sh(t,$)));const K=l(e,["audioTimestamp"]);K!=null&&d(s,["audioTimestamp"],K);const te=l(e,["thinkingConfig"]);return te!=null&&d(s,["thinkingConfig"],jS(t,te)),s}function Jd(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["contents"]);if(r!=null){let i=an(t,r);Array.isArray(i)&&(i=i.map(c=>Cr(t,c))),d(n,["contents"],i)}const o=l(e,["config"]);return o!=null&&d(n,["generationConfig"],RS(t,o,n)),n}function PS(t,e,n){const s={},r=l(e,["taskType"]);n!==void 0&&r!=null&&d(n,["instances[]","task_type"],r);const o=l(e,["title"]);n!==void 0&&o!=null&&d(n,["instances[]","title"],o);const i=l(e,["outputDimensionality"]);n!==void 0&&i!=null&&d(n,["parameters","outputDimensionality"],i);const c=l(e,["mimeType"]);n!==void 0&&c!=null&&d(n,["instances[]","mimeType"],c);const f=l(e,["autoTruncate"]);return n!==void 0&&f!=null&&d(n,["parameters","autoTruncate"],f),s}function OS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["contents"]);r!=null&&d(n,["instances[]","content"],nh(t,r));const o=l(e,["config"]);return o!=null&&d(n,["config"],PS(t,o,n)),n}function FS(t,e,n){const s={},r=l(e,["outputGcsUri"]);n!==void 0&&r!=null&&d(n,["parameters","storageUri"],r);const o=l(e,["negativePrompt"]);n!==void 0&&o!=null&&d(n,["parameters","negativePrompt"],o);const i=l(e,["numberOfImages"]);n!==void 0&&i!=null&&d(n,["parameters","sampleCount"],i);const c=l(e,["aspectRatio"]);n!==void 0&&c!=null&&d(n,["parameters","aspectRatio"],c);const f=l(e,["guidanceScale"]);n!==void 0&&f!=null&&d(n,["parameters","guidanceScale"],f);const u=l(e,["seed"]);n!==void 0&&u!=null&&d(n,["parameters","seed"],u);const h=l(e,["safetyFilterLevel"]);n!==void 0&&h!=null&&d(n,["parameters","safetySetting"],h);const m=l(e,["personGeneration"]);n!==void 0&&m!=null&&d(n,["parameters","personGeneration"],m);const g=l(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&d(n,["parameters","includeSafetyAttributes"],g);const y=l(e,["includeRaiReason"]);n!==void 0&&y!=null&&d(n,["parameters","includeRaiReason"],y);const p=l(e,["language"]);n!==void 0&&p!=null&&d(n,["parameters","language"],p);const v=l(e,["outputMimeType"]);n!==void 0&&v!=null&&d(n,["parameters","outputOptions","mimeType"],v);const C=l(e,["outputCompressionQuality"]);n!==void 0&&C!=null&&d(n,["parameters","outputOptions","compressionQuality"],C);const b=l(e,["addWatermark"]);n!==void 0&&b!=null&&d(n,["parameters","addWatermark"],b);const N=l(e,["enhancePrompt"]);return n!==void 0&&N!=null&&d(n,["parameters","enhancePrompt"],N),s}function LS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=l(e,["config"]);return o!=null&&d(n,["config"],FS(t,o,n)),n}function Sa(t,e){const n={},s=l(e,["gcsUri"]);s!=null&&d(n,["gcsUri"],s);const r=l(e,["imageBytes"]);r!=null&&d(n,["bytesBase64Encoded"],ts(t,r));const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function $S(t,e){const n={},s=l(e,["maskMode"]);s!=null&&d(n,["maskMode"],s);const r=l(e,["segmentationClasses"]);r!=null&&d(n,["maskClasses"],r);const o=l(e,["maskDilation"]);return o!=null&&d(n,["dilation"],o),n}function VS(t,e){const n={},s=l(e,["controlType"]);s!=null&&d(n,["controlType"],s);const r=l(e,["enableControlImageComputation"]);return r!=null&&d(n,["computeControl"],r),n}function US(t,e){const n={},s=l(e,["styleDescription"]);return s!=null&&d(n,["styleDescription"],s),n}function BS(t,e){const n={},s=l(e,["subjectType"]);s!=null&&d(n,["subjectType"],s);const r=l(e,["subjectDescription"]);return r!=null&&d(n,["subjectDescription"],r),n}function GS(t,e){const n={},s=l(e,["referenceImage"]);s!=null&&d(n,["referenceImage"],Sa(t,s));const r=l(e,["referenceId"]);r!=null&&d(n,["referenceId"],r);const o=l(e,["referenceType"]);o!=null&&d(n,["referenceType"],o);const i=l(e,["maskImageConfig"]);i!=null&&d(n,["maskImageConfig"],$S(t,i));const c=l(e,["controlImageConfig"]);c!=null&&d(n,["controlImageConfig"],VS(t,c));const f=l(e,["styleImageConfig"]);f!=null&&d(n,["styleImageConfig"],US(t,f));const u=l(e,["subjectImageConfig"]);return u!=null&&d(n,["subjectImageConfig"],BS(t,u)),n}function WS(t,e,n){const s={},r=l(e,["outputGcsUri"]);n!==void 0&&r!=null&&d(n,["parameters","storageUri"],r);const o=l(e,["negativePrompt"]);n!==void 0&&o!=null&&d(n,["parameters","negativePrompt"],o);const i=l(e,["numberOfImages"]);n!==void 0&&i!=null&&d(n,["parameters","sampleCount"],i);const c=l(e,["aspectRatio"]);n!==void 0&&c!=null&&d(n,["parameters","aspectRatio"],c);const f=l(e,["guidanceScale"]);n!==void 0&&f!=null&&d(n,["parameters","guidanceScale"],f);const u=l(e,["seed"]);n!==void 0&&u!=null&&d(n,["parameters","seed"],u);const h=l(e,["safetyFilterLevel"]);n!==void 0&&h!=null&&d(n,["parameters","safetySetting"],h);const m=l(e,["personGeneration"]);n!==void 0&&m!=null&&d(n,["parameters","personGeneration"],m);const g=l(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&d(n,["parameters","includeSafetyAttributes"],g);const y=l(e,["includeRaiReason"]);n!==void 0&&y!=null&&d(n,["parameters","includeRaiReason"],y);const p=l(e,["language"]);n!==void 0&&p!=null&&d(n,["parameters","language"],p);const v=l(e,["outputMimeType"]);n!==void 0&&v!=null&&d(n,["parameters","outputOptions","mimeType"],v);const C=l(e,["outputCompressionQuality"]);n!==void 0&&C!=null&&d(n,["parameters","outputOptions","compressionQuality"],C);const b=l(e,["editMode"]);n!==void 0&&b!=null&&d(n,["parameters","editMode"],b);const N=l(e,["baseSteps"]);return n!==void 0&&N!=null&&d(n,["parameters","editConfig","baseSteps"],N),s}function YS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=l(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>GS(t,f))),d(n,["instances[0]","referenceImages"],c)}const i=l(e,["config"]);return i!=null&&d(n,["config"],WS(t,i,n)),n}function HS(t,e,n){const s={},r=l(e,["includeRaiReason"]);n!==void 0&&r!=null&&d(n,["parameters","includeRaiReason"],r);const o=l(e,["outputMimeType"]);n!==void 0&&o!=null&&d(n,["parameters","outputOptions","mimeType"],o);const i=l(e,["outputCompressionQuality"]);n!==void 0&&i!=null&&d(n,["parameters","outputOptions","compressionQuality"],i);const c=l(e,["numberOfImages"]);n!==void 0&&c!=null&&d(n,["parameters","sampleCount"],c);const f=l(e,["mode"]);return n!==void 0&&f!=null&&d(n,["parameters","mode"],f),s}function zS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["image"]);r!=null&&d(n,["instances[0]","image"],Sa(t,r));const o=l(e,["upscaleFactor"]);o!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],o);const i=l(e,["config"]);return i!=null&&d(n,["config"],HS(t,i,n)),n}function qS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","name"],Xe(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function ZS(t,e,n){const s={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const i=l(e,["filter"]);n!==void 0&&i!=null&&d(n,["_query","filter"],i);const c=l(e,["queryBase"]);return n!==void 0&&c!=null&&d(n,["_url","models_url"],ah(t,c)),s}function JS(t,e){const n={},s=l(e,["config"]);return s!=null&&d(n,["config"],ZS(t,s,n)),n}function KS(t,e,n){const s={},r=l(e,["displayName"]);n!==void 0&&r!=null&&d(n,["displayName"],r);const o=l(e,["description"]);n!==void 0&&o!=null&&d(n,["description"],o);const i=l(e,["defaultCheckpointId"]);return n!==void 0&&i!=null&&d(n,["defaultCheckpointId"],i),s}function XS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],KS(t,r,n)),n}function QS(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","name"],Xe(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function eN(t,e,n){const s={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&d(n,["systemInstruction"],Cr(t,jt(t,r)));const o=l(e,["tools"]);if(n!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>gh(t,f))),d(n,["tools"],c)}const i=l(e,["generationConfig"]);return n!==void 0&&i!=null&&d(n,["generationConfig"],i),s}function tN(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["contents"]);if(r!=null){let i=an(t,r);Array.isArray(i)&&(i=i.map(c=>Cr(t,c))),d(n,["contents"],i)}const o=l(e,["config"]);return o!=null&&d(n,["config"],eN(t,o,n)),n}function nN(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["contents"]);if(r!=null){let i=an(t,r);Array.isArray(i)&&(i=i.map(c=>Cr(t,c))),d(n,["contents"],i)}const o=l(e,["config"]);return o!=null&&d(n,["config"],o),n}function sN(t,e){const n={},s=l(e,["uri"]);s!=null&&d(n,["gcsUri"],s);const r=l(e,["videoBytes"]);r!=null&&d(n,["bytesBase64Encoded"],ts(t,r));const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function rN(t,e,n){const s={},r=l(e,["numberOfVideos"]);n!==void 0&&r!=null&&d(n,["parameters","sampleCount"],r);const o=l(e,["outputGcsUri"]);n!==void 0&&o!=null&&d(n,["parameters","storageUri"],o);const i=l(e,["fps"]);n!==void 0&&i!=null&&d(n,["parameters","fps"],i);const c=l(e,["durationSeconds"]);n!==void 0&&c!=null&&d(n,["parameters","durationSeconds"],c);const f=l(e,["seed"]);n!==void 0&&f!=null&&d(n,["parameters","seed"],f);const u=l(e,["aspectRatio"]);n!==void 0&&u!=null&&d(n,["parameters","aspectRatio"],u);const h=l(e,["resolution"]);n!==void 0&&h!=null&&d(n,["parameters","resolution"],h);const m=l(e,["personGeneration"]);n!==void 0&&m!=null&&d(n,["parameters","personGeneration"],m);const g=l(e,["pubsubTopic"]);n!==void 0&&g!=null&&d(n,["parameters","pubsubTopic"],g);const y=l(e,["negativePrompt"]);n!==void 0&&y!=null&&d(n,["parameters","negativePrompt"],y);const p=l(e,["enhancePrompt"]);n!==void 0&&p!=null&&d(n,["parameters","enhancePrompt"],p);const v=l(e,["generateAudio"]);n!==void 0&&v!=null&&d(n,["parameters","generateAudio"],v);const C=l(e,["lastFrame"]);return n!==void 0&&C!=null&&d(n,["instances[0]","lastFrame"],Sa(t,C)),s}function oN(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["_url","model"],Xe(t,s));const r=l(e,["prompt"]);r!=null&&d(n,["instances[0]","prompt"],r);const o=l(e,["image"]);o!=null&&d(n,["instances[0]","image"],Sa(t,o));const i=l(e,["video"]);i!=null&&d(n,["instances[0]","video"],sN(t,i));const c=l(e,["config"]);return c!=null&&d(n,["config"],rN(t,c,n)),n}function aN(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function iN(t,e){const n={},s=l(e,["data"]);s!=null&&d(n,["data"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function lN(t,e){const n={},s=l(e,["fileUri"]);s!=null&&d(n,["fileUri"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function cN(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],aN(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],iN(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],lN(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function dN(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>cN(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function uN(t,e){const n={},s=l(e,["citationSources"]);return s!=null&&d(n,["citations"],s),n}function fN(t,e){const n={},s=l(e,["retrievedUrl"]);s!=null&&d(n,["retrievedUrl"],s);const r=l(e,["urlRetrievalStatus"]);return r!=null&&d(n,["urlRetrievalStatus"],r),n}function hN(t,e){const n={},s=l(e,["urlMetadata"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>fN(t,o))),d(n,["urlMetadata"],r)}return n}function mN(t,e){const n={},s=l(e,["content"]);s!=null&&d(n,["content"],dN(t,s));const r=l(e,["citationMetadata"]);r!=null&&d(n,["citationMetadata"],uN(t,r));const o=l(e,["tokenCount"]);o!=null&&d(n,["tokenCount"],o);const i=l(e,["finishReason"]);i!=null&&d(n,["finishReason"],i);const c=l(e,["urlContextMetadata"]);c!=null&&d(n,["urlContextMetadata"],hN(t,c));const f=l(e,["avgLogprobs"]);f!=null&&d(n,["avgLogprobs"],f);const u=l(e,["groundingMetadata"]);u!=null&&d(n,["groundingMetadata"],u);const h=l(e,["index"]);h!=null&&d(n,["index"],h);const m=l(e,["logprobsResult"]);m!=null&&d(n,["logprobsResult"],m);const g=l(e,["safetyRatings"]);return g!=null&&d(n,["safetyRatings"],g),n}function Kd(t,e){const n={},s=l(e,["candidates"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>mN(t,f))),d(n,["candidates"],c)}const r=l(e,["modelVersion"]);r!=null&&d(n,["modelVersion"],r);const o=l(e,["promptFeedback"]);o!=null&&d(n,["promptFeedback"],o);const i=l(e,["usageMetadata"]);return i!=null&&d(n,["usageMetadata"],i),n}function gN(t,e){const n={},s=l(e,["values"]);return s!=null&&d(n,["values"],s),n}function pN(){return{}}function yN(t,e){const n={},s=l(e,["embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>gN(t,i))),d(n,["embeddings"],o)}return l(e,["metadata"])!=null&&d(n,["metadata"],pN()),n}function xN(t,e){const n={},s=l(e,["bytesBase64Encoded"]);s!=null&&d(n,["imageBytes"],ts(t,s));const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function ph(t,e){const n={},s=l(e,["safetyAttributes","categories"]);s!=null&&d(n,["categories"],s);const r=l(e,["safetyAttributes","scores"]);r!=null&&d(n,["scores"],r);const o=l(e,["contentType"]);return o!=null&&d(n,["contentType"],o),n}function vN(t,e){const n={},s=l(e,["_self"]);s!=null&&d(n,["image"],xN(t,s));const r=l(e,["raiFilteredReason"]);r!=null&&d(n,["raiFilteredReason"],r);const o=l(e,["_self"]);return o!=null&&d(n,["safetyAttributes"],ph(t,o)),n}function wN(t,e){const n={},s=l(e,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>vN(t,i))),d(n,["generatedImages"],o)}const r=l(e,["positivePromptSafetyAttributes"]);return r!=null&&d(n,["positivePromptSafetyAttributes"],ph(t,r)),n}function CN(t,e){const n={},s=l(e,["baseModel"]);s!=null&&d(n,["baseModel"],s);const r=l(e,["createTime"]);r!=null&&d(n,["createTime"],r);const o=l(e,["updateTime"]);return o!=null&&d(n,["updateTime"],o),n}function sl(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["displayName"]);r!=null&&d(n,["displayName"],r);const o=l(e,["description"]);o!=null&&d(n,["description"],o);const i=l(e,["version"]);i!=null&&d(n,["version"],i);const c=l(e,["_self"]);c!=null&&d(n,["tunedModelInfo"],CN(t,c));const f=l(e,["inputTokenLimit"]);f!=null&&d(n,["inputTokenLimit"],f);const u=l(e,["outputTokenLimit"]);u!=null&&d(n,["outputTokenLimit"],u);const h=l(e,["supportedGenerationMethods"]);return h!=null&&d(n,["supportedActions"],h),n}function bN(t,e){const n={},s=l(e,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const r=l(e,["_self"]);if(r!=null){let o=ih(t,r);Array.isArray(o)&&(o=o.map(i=>sl(t,i))),d(n,["models"],o)}return n}function kN(){return{}}function _N(t,e){const n={},s=l(e,["totalTokens"]);s!=null&&d(n,["totalTokens"],s);const r=l(e,["cachedContentTokenCount"]);return r!=null&&d(n,["cachedContentTokenCount"],r),n}function TN(t,e){const n={},s=l(e,["video","uri"]);s!=null&&d(n,["uri"],s);const r=l(e,["video","encodedVideo"]);r!=null&&d(n,["videoBytes"],ts(t,r));const o=l(e,["encoding"]);return o!=null&&d(n,["mimeType"],o),n}function SN(t,e){const n={},s=l(e,["_self"]);return s!=null&&d(n,["video"],TN(t,s)),n}function NN(t,e){const n={},s=l(e,["generatedSamples"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>SN(t,c))),d(n,["generatedVideos"],i)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(n,["raiMediaFilteredReasons"],o),n}function MN(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["metadata"]);r!=null&&d(n,["metadata"],r);const o=l(e,["done"]);o!=null&&d(n,["done"],o);const i=l(e,["error"]);i!=null&&d(n,["error"],i);const c=l(e,["response","generateVideoResponse"]);return c!=null&&d(n,["response"],NN(t,c)),n}function EN(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function DN(t,e){const n={},s=l(e,["displayName"]);s!=null&&d(n,["displayName"],s);const r=l(e,["data"]);r!=null&&d(n,["data"],r);const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function IN(t,e){const n={},s=l(e,["displayName"]);s!=null&&d(n,["displayName"],s);const r=l(e,["fileUri"]);r!=null&&d(n,["fileUri"],r);const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function AN(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],EN(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],DN(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],IN(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function jN(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>AN(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function RN(t,e){const n={},s=l(e,["citations"]);return s!=null&&d(n,["citations"],s),n}function PN(t,e){const n={},s=l(e,["retrievedUrl"]);s!=null&&d(n,["retrievedUrl"],s);const r=l(e,["urlRetrievalStatus"]);return r!=null&&d(n,["urlRetrievalStatus"],r),n}function ON(t,e){const n={},s=l(e,["urlMetadata"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>PN(t,o))),d(n,["urlMetadata"],r)}return n}function FN(t,e){const n={},s=l(e,["content"]);s!=null&&d(n,["content"],jN(t,s));const r=l(e,["citationMetadata"]);r!=null&&d(n,["citationMetadata"],RN(t,r));const o=l(e,["finishMessage"]);o!=null&&d(n,["finishMessage"],o);const i=l(e,["finishReason"]);i!=null&&d(n,["finishReason"],i);const c=l(e,["urlContextMetadata"]);c!=null&&d(n,["urlContextMetadata"],ON(t,c));const f=l(e,["avgLogprobs"]);f!=null&&d(n,["avgLogprobs"],f);const u=l(e,["groundingMetadata"]);u!=null&&d(n,["groundingMetadata"],u);const h=l(e,["index"]);h!=null&&d(n,["index"],h);const m=l(e,["logprobsResult"]);m!=null&&d(n,["logprobsResult"],m);const g=l(e,["safetyRatings"]);return g!=null&&d(n,["safetyRatings"],g),n}function Xd(t,e){const n={},s=l(e,["candidates"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>FN(t,h))),d(n,["candidates"],u)}const r=l(e,["createTime"]);r!=null&&d(n,["createTime"],r);const o=l(e,["responseId"]);o!=null&&d(n,["responseId"],o);const i=l(e,["modelVersion"]);i!=null&&d(n,["modelVersion"],i);const c=l(e,["promptFeedback"]);c!=null&&d(n,["promptFeedback"],c);const f=l(e,["usageMetadata"]);return f!=null&&d(n,["usageMetadata"],f),n}function LN(t,e){const n={},s=l(e,["truncated"]);s!=null&&d(n,["truncated"],s);const r=l(e,["token_count"]);return r!=null&&d(n,["tokenCount"],r),n}function $N(t,e){const n={},s=l(e,["values"]);s!=null&&d(n,["values"],s);const r=l(e,["statistics"]);return r!=null&&d(n,["statistics"],LN(t,r)),n}function VN(t,e){const n={},s=l(e,["billableCharacterCount"]);return s!=null&&d(n,["billableCharacterCount"],s),n}function UN(t,e){const n={},s=l(e,["predictions[]","embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>$N(t,i))),d(n,["embeddings"],o)}const r=l(e,["metadata"]);return r!=null&&d(n,["metadata"],VN(t,r)),n}function BN(t,e){const n={},s=l(e,["gcsUri"]);s!=null&&d(n,["gcsUri"],s);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(n,["imageBytes"],ts(t,r));const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function yh(t,e){const n={},s=l(e,["safetyAttributes","categories"]);s!=null&&d(n,["categories"],s);const r=l(e,["safetyAttributes","scores"]);r!=null&&d(n,["scores"],r);const o=l(e,["contentType"]);return o!=null&&d(n,["contentType"],o),n}function Rl(t,e){const n={},s=l(e,["_self"]);s!=null&&d(n,["image"],BN(t,s));const r=l(e,["raiFilteredReason"]);r!=null&&d(n,["raiFilteredReason"],r);const o=l(e,["_self"]);o!=null&&d(n,["safetyAttributes"],yh(t,o));const i=l(e,["prompt"]);return i!=null&&d(n,["enhancedPrompt"],i),n}function GN(t,e){const n={},s=l(e,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>Rl(t,i))),d(n,["generatedImages"],o)}const r=l(e,["positivePromptSafetyAttributes"]);return r!=null&&d(n,["positivePromptSafetyAttributes"],yh(t,r)),n}function WN(t,e){const n={},s=l(e,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Rl(t,o))),d(n,["generatedImages"],r)}return n}function YN(t,e){const n={},s=l(e,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Rl(t,o))),d(n,["generatedImages"],r)}return n}function HN(t,e){const n={},s=l(e,["endpoint"]);s!=null&&d(n,["name"],s);const r=l(e,["deployedModelId"]);return r!=null&&d(n,["deployedModelId"],r),n}function zN(t,e){const n={},s=l(e,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&d(n,["baseModel"],s);const r=l(e,["createTime"]);r!=null&&d(n,["createTime"],r);const o=l(e,["updateTime"]);return o!=null&&d(n,["updateTime"],o),n}function qN(t,e){const n={},s=l(e,["checkpointId"]);s!=null&&d(n,["checkpointId"],s);const r=l(e,["epoch"]);r!=null&&d(n,["epoch"],r);const o=l(e,["step"]);return o!=null&&d(n,["step"],o),n}function rl(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["displayName"]);r!=null&&d(n,["displayName"],r);const o=l(e,["description"]);o!=null&&d(n,["description"],o);const i=l(e,["versionId"]);i!=null&&d(n,["version"],i);const c=l(e,["deployedModels"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>HN(t,y))),d(n,["endpoints"],g)}const f=l(e,["labels"]);f!=null&&d(n,["labels"],f);const u=l(e,["_self"]);u!=null&&d(n,["tunedModelInfo"],zN(t,u));const h=l(e,["defaultCheckpointId"]);h!=null&&d(n,["defaultCheckpointId"],h);const m=l(e,["checkpoints"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>qN(t,y))),d(n,["checkpoints"],g)}return n}function ZN(t,e){const n={},s=l(e,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const r=l(e,["_self"]);if(r!=null){let o=ih(t,r);Array.isArray(o)&&(o=o.map(i=>rl(t,i))),d(n,["models"],o)}return n}function JN(){return{}}function KN(t,e){const n={},s=l(e,["totalTokens"]);return s!=null&&d(n,["totalTokens"],s),n}function XN(t,e){const n={},s=l(e,["tokensInfo"]);return s!=null&&d(n,["tokensInfo"],s),n}function QN(t,e){const n={},s=l(e,["gcsUri"]);s!=null&&d(n,["uri"],s);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(n,["videoBytes"],ts(t,r));const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function e2(t,e){const n={},s=l(e,["_self"]);return s!=null&&d(n,["video"],QN(t,s)),n}function t2(t,e){const n={},s=l(e,["videos"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>e2(t,c))),d(n,["generatedVideos"],i)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(n,["raiMediaFilteredReasons"],o),n}function n2(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["metadata"]);r!=null&&d(n,["metadata"],r);const o=l(e,["done"]);o!=null&&d(n,["done"],o);const i=l(e,["error"]);i!=null&&d(n,["error"],i);const c=l(e,["response"]);return c!=null&&d(n,["response"],t2(t,c)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s2="Content-Type",r2="X-Server-Timeout",o2="User-Agent",ol="x-goog-api-client",a2="1.5.1",i2=`google-genai-sdk/${a2}`,l2="v1beta1",c2="v1beta",Qd=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class xh extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class al extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class d2{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:l2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:c2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const r=[this.getRequestUrlInternal(n)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}request(e){return T(this,null,function*(){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[i,c]of Object.entries(e.queryParams))r.searchParams.append(i,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=yield this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)})}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?s[r]=Object.assign(Object.assign({},s[r]),o):o!==void 0&&(s[r]=o);return s}requestStream(e){return T(this,null,function*(){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=yield this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(r,o,e.httpMethod)})}includeExtraHttpOptionsToRequestInit(e,n,s){return T(this,null,function*(){if(n&&n.timeout||s){const r=new AbortController,o=r.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>r.abort(),n.timeout),s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=o}return e.headers=yield this.getHeadersInternal(n),e})}unaryApiCall(e,n,s){return T(this,null,function*(){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(r=>T(this,null,function*(){return yield eu(r),new Qi(r)})).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})})}streamApiCall(e,n,s){return T(this,null,function*(){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(r=>T(this,null,function*(){return yield eu(r),this.processStreamResponse(r)})).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})})}processStreamResponse(e){var n;return rr(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let i="";for(;;){const{done:c,value:f}=yield et(r.read());if(c){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=o.decode(f);try{const m=JSON.parse(u);if("error"in m){const g=JSON.parse(JSON.stringify(m.error)),y=g.status,p=g.code,v=`got status: ${y}. ${JSON.stringify(m)}`;if(p>=400&&p<500)throw new xh(v);if(p>=500&&p<600)throw new al(v)}}catch(m){const g=m;if(g.name==="ClientError"||g.name==="ServerError")throw m}i+=u;let h=i.match(Qd);for(;h;){const m=h[1];try{const g=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield et(new Qi(g)),i=i.slice(h[0].length),h=i.match(Qd)}catch(g){throw new Error(`exception parsing stream chunk ${m}. ${g}`)}}}}finally{r.releaseLock()}})}apiCall(e,n){return T(this,null,function*(){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})})}getDefaultHeaders(){const e={},n=i2+" "+this.clientOptions.userAgentExtra;return e[o2]=n,e[ol]=n,e[s2]="application/json",e}getHeadersInternal(e){return T(this,null,function*(){const n=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))n.append(s,r);e.timeout&&e.timeout>0&&n.append(r2,String(Math.ceil(e.timeout/1e3)))}return yield this.clientOptions.auth.addAuthHeaders(n),n})}uploadFile(e,n){return T(this,null,function*(){var s;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,i=yield o.stat(e);r.sizeBytes=String(i.size);const c=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:i.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const f=yield this.fetchUploadUrl(r,n);return o.upload(e,f,this)})}downloadFile(e){return T(this,null,function*(){yield this.clientOptions.downloader.download(e,this)})}fetchUploadUrl(e,n){return T(this,null,function*(){var s;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},i=yield this.request({path:ke("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:r});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(s=i==null?void 0:i.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c})}}function eu(t){return T(this,null,function*(){var e;if(t===void 0)throw new al("response is undefined");if(!t.ok){const n=t.status,s=t.statusText;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=yield t.json():r={error:{message:yield t.text(),code:t.status,status:t.statusText}};const o=`got status: ${n} ${s}. ${JSON.stringify(r)}`;throw n>=400&&n<500?new xh(o):n>=500&&n<600?new al(o):new Error(o)}})}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u2="mcp_used/unknown";function vh(t){for(const e of t)if(Pl(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function wh(t){var e;const n=(e=t[ol])!==null&&e!==void 0?e:"";t[ol]=(n+` ${u2}`).trimStart()}function f2(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Pl(r)))!==null&&s!==void 0?s:!1}function h2(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!Pl(r)))!==null&&s!==void 0?s:!1}function Pl(t){return t!==null&&typeof t=="object"&&t instanceof Ol}function m2(t,e=100){return rr(this,arguments,function*(){let s,r=0;for(;r<e;){const o=yield et(t.listTools({cursor:s}));for(const i of o.tools)yield yield et(i),r++;if(!o.nextCursor)break;s=o.nextCursor}})}class Ol{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Ol(e,n)}initialize(){return T(this,null,function*(){var e,n,s,r;if(this.mcpTools.length>0)return;const o={},i=[];for(const h of this.mcpClients)try{for(var c=!0,f=(n=void 0,Gr(m2(h))),u;u=yield f.next(),e=u.done,!e;c=!0){r=u.value,c=!1;const m=r;i.push(m);const g=m.name;if(o[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);o[g]=h}}catch(m){n={error:m}}finally{try{!c&&!e&&(s=f.return)&&(yield s.call(f))}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=o})}tool(){return T(this,null,function*(){return yield this.initialize(),gb(this.mcpTools,this.config)})}callTool(e){return T(this,null,function*(){yield this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const i=yield r.callTool({name:s.name,arguments:s.args},void 0,o);n.push({functionResponse:{name:s.name,response:i.isError?{error:i}:i}})}return n})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g2(t,e,n){return T(this,null,function*(){const s=new nb;let r;n.data instanceof Blob?r=JSON.parse(yield n.data.text()):r=JSON.parse(n.data);const o=_T(t,r);Object.assign(s,o),e(s)})}class p2{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}connect(e){return T(this,null,function*(){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),i=v2(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let u=()=>{};const h=new Promise(M=>{u=M}),m=e.callbacks,g=function(){u({})},y=this.apiClient,p={onopen:g,onmessage:M=>{g2(y,m.onmessage,M)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(M){},onclose:(s=m==null?void 0:m.onclose)!==null&&s!==void 0?s:function(M){}},v=this.webSocketFactory.create(f,x2(i),p);v.connect(),yield h;const C=Xe(this.apiClient,e.model),b=fh(this.apiClient,{model:C}),N=nl(this.apiClient,{setup:b});return v.send(JSON.stringify(N)),new y2(v,this.apiClient)})}}class y2{constructor(e,n){this.conn=e,this.apiClient=n}setWeightedPrompts(e){return T(this,null,function*(){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=L_(this.apiClient,e),s=hh(this.apiClient,n);this.conn.send(JSON.stringify({clientContent:s}))})}setMusicGenerationConfig(e){return T(this,null,function*(){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=$_(this.apiClient,e),s=nl(this.apiClient,n);this.conn.send(JSON.stringify(s))})}sendPlaybackControl(e){const n=nl(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(er.PLAY)}pause(){this.sendPlaybackControl(er.PAUSE)}stop(){this.sendPlaybackControl(er.STOP)}resetContext(){this.sendPlaybackControl(er.RESET_CONTEXT)}close(){this.conn.close()}}function x2(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function v2(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";function C2(t,e,n){return T(this,null,function*(){const s=new tb;let r;if(n.data instanceof Blob?r=JSON.parse(yield n.data.text()):r=JSON.parse(n.data),t.isVertexAI()){const o=gT(t,r);Object.assign(s,o)}else{const o=mT(t,r);Object.assign(s,o)}e(s)})}class b2{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new p2(this.apiClient,this.auth,this.webSocketFactory)}connect(e){return T(this,null,function*(){var n,s,r,o,i,c;const f=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let h;const m=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&vh(e.config.tools)&&wh(m);const g=S2(m);if(this.apiClient.isVertexAI())h=`${f}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,yield this.auth.addAuthHeaders(g);else{const R=this.apiClient.getApiKey();let B="BidiGenerateContent",$="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),B="BidiGenerateContentConstrained",$="access_token"),h=`${f}/ws/google.ai.generativelanguage.${u}.GenerativeService.${B}?${$}=${R}`}let y=()=>{};const p=new Promise(R=>{y=R}),v=e.callbacks,C=function(){var R;(R=v==null?void 0:v.onopen)===null||R===void 0||R.call(v),y({})},b=this.apiClient,N={onopen:C,onmessage:R=>{C2(b,v.onmessage,R)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(R){},onclose:(s=v==null?void 0:v.onclose)!==null&&s!==void 0?s:function(R){}},M=this.webSocketFactory.create(h,T2(g),N);M.connect(),yield p;let D=Xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const R=this.apiClient.getProject(),B=this.apiClient.getLocation();D=`projects/${R}/locations/${B}/`+D}let k={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[aa.AUDIO]}:e.config.responseModalities=[aa.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _=(c=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&c!==void 0?c:[],E=[];for(const R of _)if(this.isCallableTool(R)){const B=R;E.push(yield B.tool())}else E.push(R);E.length>0&&(e.config.tools=E);const P={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=I_(this.apiClient,P):k=D_(this.apiClient,P),delete k.config,M.send(JSON.stringify(k)),new _2(M,this.apiClient)})}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const k2={turnComplete:!0};class _2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=an(e,n.turns),e.isVertexAI()?s=s.map(r=>Cr(e,r)):s=s.map(r=>Ta(e,r))}catch(r){throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const o of s){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(w2)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},k2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:F_(this.apiClient,e)}:n={realtimeInput:O_(this.apiClient,e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function T2(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function S2(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tu=10;function nu(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const i of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ho(i)){r=!0;break}if(!r)return!0;const o=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ho(t){return"callTool"in t&&typeof t.callTool=="function"}function su(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N2 extends wr{constructor(e){super(),this.apiClient=e,this.generateContent=n=>T(this,null,function*(){var s,r,o,i,c;const f=yield this.processParamsForMcpUsage(n);if(!f2(n)||nu(n.config))return yield this.generateContentInternal(f);if(h2(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,h;const m=an(this.apiClient,f.contents),g=(o=(r=(s=f.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:tu;let y=0;for(;y<g&&(u=yield this.generateContentInternal(f),!(!u.functionCalls||u.functionCalls.length===0));){const p=u.candidates[0].content,v=[];for(const C of(c=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&c!==void 0?c:[])if(Ho(C)){const N=yield C.callTool(u.functionCalls);v.push(...N)}y++,h={role:"user",parts:v},f.contents=an(this.apiClient,f.contents),f.contents.push(p),f.contents.push(h),su(f.config)&&(m.push(p),m.push(h))}return su(f.config)&&(u.automaticFunctionCallingHistory=m),u}),this.generateContentStream=n=>T(this,null,function*(){if(nu(n.config)){const s=yield this.processParamsForMcpUsage(n);return yield this.generateContentStreamInternal(s)}else return yield this.processAfcStream(n)}),this.generateImages=n=>T(this,null,function*(){return yield this.generateImagesInternal(n).then(s=>{var r;let o;const i=[];if(s!=null&&s.generatedImages)for(const f of s.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=f==null?void 0:f.safetyAttributes:i.push(f);let c;return o?c={generatedImages:i,positivePromptSafetyAttributes:o}:c={generatedImages:i},c})}),this.list=n=>T(this,null,function*(){var s;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((s=i.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new _a(mr.PAGED_ITEM_MODELS,c=>this.listInternal(c),yield this.listInternal(i),i)}),this.editImage=n=>T(this,null,function*(){const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),yield this.editImageInternal(s)}),this.upscaleImage=n=>T(this,null,function*(){let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return yield this.upscaleImageInternal(r)})}processParamsForMcpUsage(e){return T(this,null,function*(){var n,s,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const i=yield Promise.all(o.map(f=>T(null,null,function*(){return Ho(f)?yield f.tool():f}))),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(c.config.tools=i,e.config&&e.config.tools&&vh(e.config.tools)){const f=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let u=Object.assign({},f);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),wh(u),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return c})}initAfcToolsMap(e){return T(this,null,function*(){var n,s,r;const o=new Map;for(const i of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(Ho(i)){const c=i,f=yield c.tool();for(const u of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,c)}}return o})}processAfcStream(e){return T(this,null,function*(){var n,s,r;const o=(r=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:tu;let i=!1,c=0;const f=yield this.initAfcToolsMap(e);return function(u,h,m){var g,y;return rr(this,arguments,function*(){for(var p,v,C,b;c<o;){i&&(c++,i=!1);const k=yield et(u.processParamsForMcpUsage(m)),_=yield et(u.generateContentStreamInternal(k)),E=[],P=[];try{for(var N=!0,M=(v=void 0,Gr(_)),D;D=yield et(M.next()),p=D.done,!p;N=!0){b=D.value,N=!1;const R=b;if(yield yield et(R),R.candidates&&(!((g=R.candidates[0])===null||g===void 0)&&g.content)){P.push(R.candidates[0].content);for(const B of(y=R.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(c<o&&B.functionCall){if(!B.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(B.functionCall.name)){const $=yield et(h.get(B.functionCall.name).callTool([B.functionCall]));E.push(...$)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${B.functionCall.name}`)}}}}catch(R){v={error:R}}finally{try{!N&&!p&&(C=M.return)&&(yield et(C.call(M)))}finally{if(v)throw v.error}}if(E.length>0){i=!0;const R=new Dr;R.candidates=[{content:{role:"user",parts:E}}],yield yield et(R);const B=[];B.push(...P),B.push({role:"user",parts:E});const $=an(u.apiClient,m.contents).concat(B);m.contents=$}else break}})}(this,f,e)})}generateContentInternal(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=Jd(this.apiClient,e);return c=ke("{model}:generateContent",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>{const m=Xd(this.apiClient,h),g=new Dr;return Object.assign(g,m),g})}else{const u=Zd(this.apiClient,e);return c=ke("{model}:generateContent",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>{const m=Kd(this.apiClient,h),g=new Dr;return Object.assign(g,m),g})}})}generateContentStreamInternal(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=Jd(this.apiClient,e);c=ke("{model}:streamGenerateContent?alt=sse",u._url),f=u._query,delete u.config,delete u._url,delete u._query;const h=this.apiClient;return i=h.requestStream({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(m){return rr(this,arguments,function*(){var g,y,p,v;try{for(var C=!0,b=Gr(m),N;N=yield et(b.next()),g=N.done,!g;C=!0){v=N.value,C=!1;const D=Xd(h,yield et(v.json())),k=new Dr;Object.assign(k,D),yield yield et(k)}}catch(M){y={error:M}}finally{try{!C&&!g&&(p=b.return)&&(yield et(p.call(b)))}finally{if(y)throw y.error}}})})}else{const u=Zd(this.apiClient,e);c=ke("{model}:streamGenerateContent?alt=sse",u._url),f=u._query,delete u.config,delete u._url,delete u._query;const h=this.apiClient;return i=h.requestStream({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),i.then(function(m){return rr(this,arguments,function*(){var g,y,p,v;try{for(var C=!0,b=Gr(m),N;N=yield et(b.next()),g=N.done,!g;C=!0){v=N.value,C=!1;const D=Kd(h,yield et(v.json())),k=new Dr;Object.assign(k,D),yield yield et(k)}}catch(M){y={error:M}}finally{try{!C&&!g&&(p=b.return)&&(yield et(p.call(b)))}finally{if(y)throw y.error}}})})}})}embedContent(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=OS(this.apiClient,e);return c=ke("{model}:predict",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>{const m=UN(this.apiClient,h),g=new Ed;return Object.assign(g,m),g})}else{const u=ZT(this.apiClient,e);return c=ke("{model}:batchEmbedContents",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>{const m=yN(this.apiClient,h),g=new Ed;return Object.assign(g,m),g})}})}generateImagesInternal(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=LS(this.apiClient,e);return c=ke("{model}:predict",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>{const m=GN(this.apiClient,h),g=new Dd;return Object.assign(g,m),g})}else{const u=KT(this.apiClient,e);return c=ke("{model}:predict",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>{const m=wN(this.apiClient,h),g=new Dd;return Object.assign(g,m),g})}})}editImageInternal(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI()){const c=YS(this.apiClient,e);return o=ke("{model}:predict",c._url),i=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const u=WN(this.apiClient,f),h=new ZC;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")})}upscaleImageInternal(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI()){const c=zS(this.apiClient,e);return o=ke("{model}:predict",c._url),i=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const u=YN(this.apiClient,f),h=new JC;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")})}get(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=qS(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>rl(this.apiClient,h))}else{const u=XT(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>sl(this.apiClient,h))}})}listInternal(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=JS(this.apiClient,e);return c=ke("{models_url}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>{const m=ZN(this.apiClient,h),g=new Id;return Object.assign(g,m),g})}else{const u=eS(this.apiClient,e);return c=ke("{models_url}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>{const m=bN(this.apiClient,h),g=new Id;return Object.assign(g,m),g})}})}update(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=XS(this.apiClient,e);return c=ke("{model}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>rl(this.apiClient,h))}else{const u=nS(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>sl(this.apiClient,h))}})}delete(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=QS(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(()=>{const h=JN(),m=new Ad;return Object.assign(m,h),m})}else{const u=sS(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(()=>{const h=kN(),m=new Ad;return Object.assign(m,h),m})}})}countTokens(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=tN(this.apiClient,e);return c=ke("{model}:countTokens",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>{const m=KN(this.apiClient,h),g=new jd;return Object.assign(g,m),g})}else{const u=oS(this.apiClient,e);return c=ke("{model}:countTokens",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>{const m=_N(this.apiClient,h),g=new jd;return Object.assign(g,m),g})}})}computeTokens(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI()){const c=nN(this.apiClient,e);return o=ke("{model}:computeTokens",c._url),i=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>{const u=XN(this.apiClient,f),h=new KC;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")})}generateVideos(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=oN(this.apiClient,e);return c=ke("{model}:predictLongRunning",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>n2(this.apiClient,h))}else{const u=lS(this.apiClient,e);return c=ke("{model}:predictLongRunning",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>MN(this.apiClient,h))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M2(t,e){const n={},s=l(e,["operationName"]);s!=null&&d(n,["_url","operationName"],s);const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function E2(t,e){const n={},s=l(e,["operationName"]);s!=null&&d(n,["_url","operationName"],s);const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function D2(t,e){const n={},s=l(e,["operationName"]);s!=null&&d(n,["operationName"],s);const r=l(e,["resourceName"]);r!=null&&d(n,["_url","resourceName"],r);const o=l(e,["config"]);return o!=null&&d(n,["config"],o),n}function I2(t,e){const n={},s=l(e,["video","uri"]);s!=null&&d(n,["uri"],s);const r=l(e,["video","encodedVideo"]);r!=null&&d(n,["videoBytes"],ts(t,r));const o=l(e,["encoding"]);return o!=null&&d(n,["mimeType"],o),n}function A2(t,e){const n={},s=l(e,["_self"]);return s!=null&&d(n,["video"],I2(t,s)),n}function j2(t,e){const n={},s=l(e,["generatedSamples"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>A2(t,c))),d(n,["generatedVideos"],i)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(n,["raiMediaFilteredReasons"],o),n}function R2(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["metadata"]);r!=null&&d(n,["metadata"],r);const o=l(e,["done"]);o!=null&&d(n,["done"],o);const i=l(e,["error"]);i!=null&&d(n,["error"],i);const c=l(e,["response","generateVideoResponse"]);return c!=null&&d(n,["response"],j2(t,c)),n}function P2(t,e){const n={},s=l(e,["gcsUri"]);s!=null&&d(n,["uri"],s);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(n,["videoBytes"],ts(t,r));const o=l(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function O2(t,e){const n={},s=l(e,["_self"]);return s!=null&&d(n,["video"],P2(t,s)),n}function F2(t,e){const n={},s=l(e,["videos"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(c=>O2(t,c))),d(n,["generatedVideos"],i)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(n,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(n,["raiMediaFilteredReasons"],o),n}function ru(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["metadata"]);r!=null&&d(n,["metadata"],r);const o=l(e,["done"]);o!=null&&d(n,["done"],o);const i=l(e,["error"]);i!=null&&d(n,["error"],i);const c=l(e,["response"]);return c!=null&&d(n,["response"],F2(t,c)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L2 extends wr{constructor(e){super(),this.apiClient=e}getVideosOperation(e){return T(this,null,function*(){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;return s&&"httpOptions"in s&&(o=s.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:n.name,config:s})})}getVideosOperationInternal(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=E2(this.apiClient,e);return c=ke("{operationName}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>ru(this.apiClient,h))}else{const u=M2(this.apiClient,e);return c=ke("{operationName}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>R2(this.apiClient,h))}})}fetchPredictVideosOperationInternal(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI()){const c=D2(this.apiClient,e);return o=ke("{resourceName}:fetchPredictOperation",c._url),i=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>ru(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $2(t,e){const n={},s=l(e,["voiceName"]);return s!=null&&d(n,["voiceName"],s),n}function Ch(t,e){const n={},s=l(e,["prebuiltVoiceConfig"]);return s!=null&&d(n,["prebuiltVoiceConfig"],$2(t,s)),n}function V2(t,e){const n={},s=l(e,["speaker"]);s!=null&&d(n,["speaker"],s);const r=l(e,["voiceConfig"]);return r!=null&&d(n,["voiceConfig"],Ch(t,r)),n}function U2(t,e){const n={},s=l(e,["speakerVoiceConfigs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>V2(t,o))),d(n,["speakerVoiceConfigs"],r)}return n}function B2(t,e){const n={},s=l(e,["voiceConfig"]);s!=null&&d(n,["voiceConfig"],Ch(t,s));const r=l(e,["multiSpeakerVoiceConfig"]);r!=null&&d(n,["multiSpeakerVoiceConfig"],U2(t,r));const o=l(e,["languageCode"]);return o!=null&&d(n,["languageCode"],o),n}function G2(t,e){const n={},s=l(e,["fps"]);s!=null&&d(n,["fps"],s);const r=l(e,["endOffset"]);r!=null&&d(n,["endOffset"],r);const o=l(e,["startOffset"]);return o!=null&&d(n,["startOffset"],o),n}function W2(t,e){const n={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=l(e,["data"]);s!=null&&d(n,["data"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function Y2(t,e){const n={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=l(e,["fileUri"]);s!=null&&d(n,["fileUri"],s);const r=l(e,["mimeType"]);return r!=null&&d(n,["mimeType"],r),n}function H2(t,e){const n={},s=l(e,["videoMetadata"]);s!=null&&d(n,["videoMetadata"],G2(t,s));const r=l(e,["thought"]);r!=null&&d(n,["thought"],r);const o=l(e,["inlineData"]);o!=null&&d(n,["inlineData"],W2(t,o));const i=l(e,["fileData"]);i!=null&&d(n,["fileData"],Y2(t,i));const c=l(e,["thoughtSignature"]);c!=null&&d(n,["thoughtSignature"],c);const f=l(e,["codeExecutionResult"]);f!=null&&d(n,["codeExecutionResult"],f);const u=l(e,["executableCode"]);u!=null&&d(n,["executableCode"],u);const h=l(e,["functionCall"]);h!=null&&d(n,["functionCall"],h);const m=l(e,["functionResponse"]);m!=null&&d(n,["functionResponse"],m);const g=l(e,["text"]);return g!=null&&d(n,["text"],g),n}function z2(t,e){const n={},s=l(e,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>H2(t,i))),d(n,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(n,["role"],r),n}function q2(t,e){const n={},s=l(e,["behavior"]);s!=null&&d(n,["behavior"],s);const r=l(e,["description"]);r!=null&&d(n,["description"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const i=l(e,["parameters"]);i!=null&&d(n,["parameters"],i);const c=l(e,["response"]);return c!=null&&d(n,["response"],c),n}function Z2(t,e){const n={},s=l(e,["startTime"]);s!=null&&d(n,["startTime"],s);const r=l(e,["endTime"]);return r!=null&&d(n,["endTime"],r),n}function J2(t,e){const n={},s=l(e,["timeRangeFilter"]);return s!=null&&d(n,["timeRangeFilter"],Z2(t,s)),n}function K2(t,e){const n={},s=l(e,["mode"]);s!=null&&d(n,["mode"],s);const r=l(e,["dynamicThreshold"]);return r!=null&&d(n,["dynamicThreshold"],r),n}function X2(t,e){const n={},s=l(e,["dynamicRetrievalConfig"]);return s!=null&&d(n,["dynamicRetrievalConfig"],K2(t,s)),n}function Q2(){return{}}function eM(t,e){const n={},s=l(e,["functionDeclarations"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(u=>q2(t,u))),d(n,["functionDeclarations"],f)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearch"]);r!=null&&d(n,["googleSearch"],J2(t,r));const o=l(e,["googleSearchRetrieval"]);if(o!=null&&d(n,["googleSearchRetrieval"],X2(t,o)),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(e,["urlContext"])!=null&&d(n,["urlContext"],Q2());const c=l(e,["codeExecution"]);return c!=null&&d(n,["codeExecution"],c),n}function tM(t,e){const n={},s=l(e,["handle"]);if(s!=null&&d(n,["handle"],s),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function ou(){return{}}function nM(t,e){const n={},s=l(e,["disabled"]);s!=null&&d(n,["disabled"],s);const r=l(e,["startOfSpeechSensitivity"]);r!=null&&d(n,["startOfSpeechSensitivity"],r);const o=l(e,["endOfSpeechSensitivity"]);o!=null&&d(n,["endOfSpeechSensitivity"],o);const i=l(e,["prefixPaddingMs"]);i!=null&&d(n,["prefixPaddingMs"],i);const c=l(e,["silenceDurationMs"]);return c!=null&&d(n,["silenceDurationMs"],c),n}function sM(t,e){const n={},s=l(e,["automaticActivityDetection"]);s!=null&&d(n,["automaticActivityDetection"],nM(t,s));const r=l(e,["activityHandling"]);r!=null&&d(n,["activityHandling"],r);const o=l(e,["turnCoverage"]);return o!=null&&d(n,["turnCoverage"],o),n}function rM(t,e){const n={},s=l(e,["targetTokens"]);return s!=null&&d(n,["targetTokens"],s),n}function oM(t,e){const n={},s=l(e,["triggerTokens"]);s!=null&&d(n,["triggerTokens"],s);const r=l(e,["slidingWindow"]);return r!=null&&d(n,["slidingWindow"],rM(t,r)),n}function aM(t,e){const n={},s=l(e,["proactiveAudio"]);return s!=null&&d(n,["proactiveAudio"],s),n}function iM(t,e,n){const s={},r=l(e,["generationConfig"]);n!==void 0&&r!=null&&d(n,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);n!==void 0&&o!=null&&d(n,["setup","generationConfig","responseModalities"],o);const i=l(e,["temperature"]);n!==void 0&&i!=null&&d(n,["setup","generationConfig","temperature"],i);const c=l(e,["topP"]);n!==void 0&&c!=null&&d(n,["setup","generationConfig","topP"],c);const f=l(e,["topK"]);n!==void 0&&f!=null&&d(n,["setup","generationConfig","topK"],f);const u=l(e,["maxOutputTokens"]);n!==void 0&&u!=null&&d(n,["setup","generationConfig","maxOutputTokens"],u);const h=l(e,["mediaResolution"]);n!==void 0&&h!=null&&d(n,["setup","generationConfig","mediaResolution"],h);const m=l(e,["seed"]);n!==void 0&&m!=null&&d(n,["setup","generationConfig","seed"],m);const g=l(e,["speechConfig"]);n!==void 0&&g!=null&&d(n,["setup","generationConfig","speechConfig"],B2(t,jl(t,g)));const y=l(e,["enableAffectiveDialog"]);n!==void 0&&y!=null&&d(n,["setup","generationConfig","enableAffectiveDialog"],y);const p=l(e,["systemInstruction"]);n!==void 0&&p!=null&&d(n,["setup","systemInstruction"],z2(t,jt(t,p)));const v=l(e,["tools"]);if(n!==void 0&&v!=null){let _=go(t,v);Array.isArray(_)&&(_=_.map(E=>eM(t,mo(t,E)))),d(n,["setup","tools"],_)}const C=l(e,["sessionResumption"]);n!==void 0&&C!=null&&d(n,["setup","sessionResumption"],tM(t,C));const b=l(e,["inputAudioTranscription"]);n!==void 0&&b!=null&&d(n,["setup","inputAudioTranscription"],ou());const N=l(e,["outputAudioTranscription"]);n!==void 0&&N!=null&&d(n,["setup","outputAudioTranscription"],ou());const M=l(e,["realtimeInputConfig"]);n!==void 0&&M!=null&&d(n,["setup","realtimeInputConfig"],sM(t,M));const D=l(e,["contextWindowCompression"]);n!==void 0&&D!=null&&d(n,["setup","contextWindowCompression"],oM(t,D));const k=l(e,["proactivity"]);return n!==void 0&&k!=null&&d(n,["setup","proactivity"],aM(t,k)),s}function lM(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["setup","model"],Xe(t,s));const r=l(e,["config"]);return r!=null&&d(n,["config"],iM(t,r,n)),n}function cM(t,e,n){const s={},r=l(e,["expireTime"]);n!==void 0&&r!=null&&d(n,["expireTime"],r);const o=l(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&d(n,["newSessionExpireTime"],o);const i=l(e,["uses"]);n!==void 0&&i!=null&&d(n,["uses"],i);const c=l(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&d(n,["bidiGenerateContentSetup"],lM(t,c));const f=l(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&d(n,["fieldMask"],f),s}function dM(t,e){const n={},s=l(e,["config"]);return s!=null&&d(n,["config"],cM(t,s,n)),n}function uM(t,e){const n={},s=l(e,["name"]);return s!=null&&d(n,["name"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fM(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function hM(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const o=s.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=fM(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(u=>i.includes(u)?`generationConfig.${u}`:u));const f=[];o&&f.push(o),c.length>0&&f.push(...c),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class mM extends wr{constructor(e){super(),this.apiClient=e}create(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=dM(this.apiClient,e);o=ke("auth_tokens",c._url),i=c._query,delete c.config,delete c._url,delete c._query;const f=hM(c,e.config);return r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r.then(u=>uM(this.apiClient,u))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gM(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["_url","name"],s);const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function pM(t,e,n){const s={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const i=l(e,["filter"]);return n!==void 0&&i!=null&&d(n,["_query","filter"],i),s}function yM(t,e){const n={},s=l(e,["config"]);return s!=null&&d(n,["config"],pM(t,s,n)),n}function xM(t,e){const n={},s=l(e,["textInput"]);s!=null&&d(n,["textInput"],s);const r=l(e,["output"]);return r!=null&&d(n,["output"],r),n}function vM(t,e){const n={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=l(e,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>xM(t,o))),d(n,["examples","examples"],r)}return n}function wM(t,e,n){const s={};if(l(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(e,["tunedModelDisplayName"]);if(n!==void 0&&r!=null&&d(n,["displayName"],r),l(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=l(e,["epochCount"]);n!==void 0&&o!=null&&d(n,["tuningTask","hyperparameters","epochCount"],o);const i=l(e,["learningRateMultiplier"]);if(i!=null&&d(s,["tuningTask","hyperparameters","learningRateMultiplier"],i),l(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=l(e,["batchSize"]);n!==void 0&&c!=null&&d(n,["tuningTask","hyperparameters","batchSize"],c);const f=l(e,["learningRate"]);return n!==void 0&&f!=null&&d(n,["tuningTask","hyperparameters","learningRate"],f),s}function CM(t,e){const n={},s=l(e,["baseModel"]);s!=null&&d(n,["baseModel"],s);const r=l(e,["trainingDataset"]);r!=null&&d(n,["tuningTask","trainingData"],vM(t,r));const o=l(e,["config"]);return o!=null&&d(n,["config"],wM(t,o,n)),n}function bM(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["_url","name"],s);const r=l(e,["config"]);return r!=null&&d(n,["config"],r),n}function kM(t,e,n){const s={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&d(n,["_query","pageSize"],r);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const i=l(e,["filter"]);return n!==void 0&&i!=null&&d(n,["_query","filter"],i),s}function _M(t,e){const n={},s=l(e,["config"]);return s!=null&&d(n,["config"],kM(t,s,n)),n}function TM(t,e,n){const s={},r=l(e,["gcsUri"]);if(n!==void 0&&r!=null&&d(n,["supervisedTuningSpec","trainingDatasetUri"],r),l(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function SM(t,e){const n={},s=l(e,["gcsUri"]);return s!=null&&d(n,["validationDatasetUri"],s),n}function NM(t,e,n){const s={},r=l(e,["validationDataset"]);n!==void 0&&r!=null&&d(n,["supervisedTuningSpec"],SM(t,r));const o=l(e,["tunedModelDisplayName"]);n!==void 0&&o!=null&&d(n,["tunedModelDisplayName"],o);const i=l(e,["description"]);n!==void 0&&i!=null&&d(n,["description"],i);const c=l(e,["epochCount"]);n!==void 0&&c!=null&&d(n,["supervisedTuningSpec","hyperParameters","epochCount"],c);const f=l(e,["learningRateMultiplier"]);n!==void 0&&f!=null&&d(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const u=l(e,["exportLastCheckpointOnly"]);n!==void 0&&u!=null&&d(n,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const h=l(e,["adapterSize"]);if(n!==void 0&&h!=null&&d(n,["supervisedTuningSpec","hyperParameters","adapterSize"],h),l(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return s}function MM(t,e){const n={},s=l(e,["baseModel"]);s!=null&&d(n,["baseModel"],s);const r=l(e,["trainingDataset"]);r!=null&&d(n,["supervisedTuningSpec","trainingDatasetUri"],TM(t,r,n));const o=l(e,["config"]);return o!=null&&d(n,["config"],NM(t,o,n)),n}function EM(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["model"],s);const r=l(e,["name"]);return r!=null&&d(n,["endpoint"],r),n}function bh(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["state"]);r!=null&&d(n,["state"],rh(t,r));const o=l(e,["createTime"]);o!=null&&d(n,["createTime"],o);const i=l(e,["tuningTask","startTime"]);i!=null&&d(n,["startTime"],i);const c=l(e,["tuningTask","completeTime"]);c!=null&&d(n,["endTime"],c);const f=l(e,["updateTime"]);f!=null&&d(n,["updateTime"],f);const u=l(e,["description"]);u!=null&&d(n,["description"],u);const h=l(e,["baseModel"]);h!=null&&d(n,["baseModel"],h);const m=l(e,["_self"]);m!=null&&d(n,["tunedModel"],EM(t,m));const g=l(e,["distillationSpec"]);g!=null&&d(n,["distillationSpec"],g);const y=l(e,["experiment"]);y!=null&&d(n,["experiment"],y);const p=l(e,["labels"]);p!=null&&d(n,["labels"],p);const v=l(e,["pipelineJob"]);v!=null&&d(n,["pipelineJob"],v);const C=l(e,["serviceAccount"]);C!=null&&d(n,["serviceAccount"],C);const b=l(e,["tunedModelDisplayName"]);return b!=null&&d(n,["tunedModelDisplayName"],b),n}function DM(t,e){const n={},s=l(e,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const r=l(e,["tunedModels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>bh(t,i))),d(n,["tuningJobs"],o)}return n}function IM(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["metadata"]);r!=null&&d(n,["metadata"],r);const o=l(e,["done"]);o!=null&&d(n,["done"],o);const i=l(e,["error"]);return i!=null&&d(n,["error"],i),n}function AM(t,e){const n={},s=l(e,["checkpointId"]);s!=null&&d(n,["checkpointId"],s);const r=l(e,["epoch"]);r!=null&&d(n,["epoch"],r);const o=l(e,["step"]);o!=null&&d(n,["step"],o);const i=l(e,["endpoint"]);return i!=null&&d(n,["endpoint"],i),n}function jM(t,e){const n={},s=l(e,["model"]);s!=null&&d(n,["model"],s);const r=l(e,["endpoint"]);r!=null&&d(n,["endpoint"],r);const o=l(e,["checkpoints"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(c=>AM(t,c))),d(n,["checkpoints"],i)}return n}function il(t,e){const n={},s=l(e,["name"]);s!=null&&d(n,["name"],s);const r=l(e,["state"]);r!=null&&d(n,["state"],rh(t,r));const o=l(e,["createTime"]);o!=null&&d(n,["createTime"],o);const i=l(e,["startTime"]);i!=null&&d(n,["startTime"],i);const c=l(e,["endTime"]);c!=null&&d(n,["endTime"],c);const f=l(e,["updateTime"]);f!=null&&d(n,["updateTime"],f);const u=l(e,["error"]);u!=null&&d(n,["error"],u);const h=l(e,["description"]);h!=null&&d(n,["description"],h);const m=l(e,["baseModel"]);m!=null&&d(n,["baseModel"],m);const g=l(e,["tunedModel"]);g!=null&&d(n,["tunedModel"],jM(t,g));const y=l(e,["supervisedTuningSpec"]);y!=null&&d(n,["supervisedTuningSpec"],y);const p=l(e,["tuningDataStats"]);p!=null&&d(n,["tuningDataStats"],p);const v=l(e,["encryptionSpec"]);v!=null&&d(n,["encryptionSpec"],v);const C=l(e,["partnerModelTuningSpec"]);C!=null&&d(n,["partnerModelTuningSpec"],C);const b=l(e,["distillationSpec"]);b!=null&&d(n,["distillationSpec"],b);const N=l(e,["experiment"]);N!=null&&d(n,["experiment"],N);const M=l(e,["labels"]);M!=null&&d(n,["labels"],M);const D=l(e,["pipelineJob"]);D!=null&&d(n,["pipelineJob"],D);const k=l(e,["serviceAccount"]);k!=null&&d(n,["serviceAccount"],k);const _=l(e,["tunedModelDisplayName"]);return _!=null&&d(n,["tunedModelDisplayName"],_),n}function RM(t,e){const n={},s=l(e,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const r=l(e,["tuningJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>il(t,i))),d(n,["tuningJobs"],o)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PM extends wr{constructor(e){super(),this.apiClient=e,this.get=n=>T(this,null,function*(){return yield this.getInternal(n)}),this.list=(...s)=>T(this,[...s],function*(n={}){return new _a(mr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),yield this.listInternal(n),n)}),this.tune=n=>T(this,null,function*(){if(this.apiClient.isVertexAI())return yield this.tuneInternal(n);{const s=yield this.tuneMldevInternal(n);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:Xi.JOB_STATE_QUEUED}}})}getInternal(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=bM(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>il(this.apiClient,h))}else{const u=gM(this.apiClient,e);return c=ke("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>bh(this.apiClient,h))}})}listInternal(e){return T(this,null,function*(){var n,s,r,o;let i,c="",f={};if(this.apiClient.isVertexAI()){const u=_M(this.apiClient,e);return c=ke("tuningJobs",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),i.then(h=>{const m=RM(this.apiClient,h),g=new Rd;return Object.assign(g,m),g})}else{const u=yM(this.apiClient,e);return c=ke("tunedModels",u._url),f=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),i.then(h=>{const m=DM(this.apiClient,h),g=new Rd;return Object.assign(g,m),g})}})}tuneInternal(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI()){const c=MM(this.apiClient,e);return o=ke("tuningJobs",c._url),i=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>il(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")})}tuneMldevInternal(e){return T(this,null,function*(){var n,s;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=CM(this.apiClient,e);return o=ke("tunedModels",c._url),i=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),r.then(f=>IM(this.apiClient,f))}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OM{download(e,n){return T(this,null,function*(){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")})}}const FM=1024*1024*8,LM=3,$M=1e3,VM=2,hi="x-goog-upload-status";function UM(t,e,n){return T(this,null,function*(){var s,r,o;let i=0,c=0,f=new Qi(new Response),u="upload";for(i=t.size;c<i;){const m=Math.min(FM,i-c),g=t.slice(c,c+m);c+m>=i&&(u+=", finalize");let y=0,p=$M;for(;y<LM&&(f=yield n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[hi]));)y++,yield GM(p),p=p*VM;if(c+=m,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[hi])!=="active")break;if(i<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=yield f==null?void 0:f.json();if(((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[hi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file})}function BM(t){return T(this,null,function*(){return{size:t.size,type:t.type}})}function GM(t){return new Promise(e=>setTimeout(e,t))}class WM{upload(e,n,s){return T(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield UM(e,n,s)})}stat(e){return T(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield BM(e)})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YM{create(e,n,s){return new HM(e,n,s)}}class HM{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const au="x-goog-api-key";class zM{constructor(e){this.apiKey=e}addAuthHeaders(e){return T(this,null,function*(){if(e.get(au)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(au,this.apiKey)}})}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qM="gl-node/";class ZM{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=qC(e,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new zM(this.apiKey);this.apiClient=new d2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:qM+"web",uploader:new WM,downloader:new OM}),this.models=new N2(this.apiClient),this.live=new b2(this.apiClient,r,new YM),this.chats=new Ck(this.models,this.apiClient),this.caches=new xk(this.apiClient),this.files=new Rk(this.apiClient),this.operations=new L2(this.apiClient),this.authTokens=new mM(this.apiClient),this.tunings=new PM(this.apiClient)}}const kh=()=>{const t="AIzaSyDX3fyRDlS0kcZovIclZEzWalJCfmWswIA";return new ZM({apiKey:t})},JM=t=>{const e=[];return t.workingHoursMondayEnabled&&e.push(`Monday: ${t.workingHoursMondayStart} - ${t.workingHoursMondayEnd}`),t.workingHoursTuesdayEnabled&&e.push(`Tuesday: ${t.workingHoursTuesdayStart} - ${t.workingHoursTuesdayEnd}`),t.workingHoursWednesdayEnabled&&e.push(`Wednesday: ${t.workingHoursWednesdayStart} - ${t.workingHoursWednesdayEnd}`),t.workingHoursThursdayEnabled&&e.push(`Thursday: ${t.workingHoursThursdayStart} - ${t.workingHoursThursdayEnd}`),t.workingHoursFridayEnabled&&e.push(`Friday: ${t.workingHoursFridayStart} - ${t.workingHoursFridayEnd}`),t.workingHoursSaturdayEnabled&&e.push(`Saturday: ${t.workingHoursSaturdayStart} - ${t.workingHoursSaturdayEnd}`),t.workingHoursSundayEnabled&&e.push(`Sunday: ${t.workingHoursSundayStart} - ${t.workingHoursSundayEnd}`),e.join(", ")},_h=t=>t.map(e=>{const n=[`ID: ${e.id}`,`Title: "${e.title}"`,`Current Status: ${e.status}`,`Priority: ${e.priority} (1=Low, 2=Medium, 3=High, 4=Critical)`,`Time Estimate: ${e.timeEstimate} minutes`,e.dueDate?`Due Date: ${e.dueDate}`:null,e.scheduledDate?`Currently Scheduled: ${e.scheduledDate}`:null,e.description?`Description: "${e.description}"`:null,e.category?`Category: ${e.category}`:null].filter(Boolean);return`Task ${e.id}: {${n.join(", ")}}`}).join(`
`),KM=t=>T(null,null,function*(){const{tasks:e,userPreferences:n,startDate:s,endDate:r,customInstructions:o}=t;if(!n.autoScheduleEnabled)throw new Error("AI scheduling is not enabled in user preferences");const i=e.filter(p=>p.timeEstimate===0);let c=[...e];if(i.length>0){console.log(`Auto-estimating time for ${i.length} tasks with 0 minutes...`);try{const p=yield Th(i,n);c=e.map(v=>v.timeEstimate===0&&p[v.id]?F(x({},v),{timeEstimate:p[v.id]}):v),console.log("Applied time estimates:",p)}catch(p){console.warn("Failed to auto-estimate times, proceeding with original estimates:",p)}}const f=kh(),u=s||Nt(new Date,"yyyy-MM-dd"),h=r||Nt(Ht(new Date,n.schedulingLookaheadDays),"yyyy-MM-dd"),m=c.filter(p=>p.timeEstimate===0),g=m.length>0,y=`You are an intelligent task scheduling assistant for DayFlow, a productivity app. Please schedule the following tasks based on the user's preferences and constraints.

**USER PREFERENCES:**
- Working Hours: ${JM(n)}
- Max Daily Work Hours: ${n.maxDailyWorkHours} hours
- Buffer Time Between Tasks: ${n.bufferTimeBetweenTasks} minutes
- Min Task Chunk Size: ${n.minTaskChunkSize} minutes
- Max Task Chunk Size: ${n.maxTaskChunkSize} minutes
- Focus Time Minimum: ${n.focusTimeMinimumMinutes} minutes
- Context Switch Penalty: ${n.contextSwitchPenaltyMinutes} minutes
- Scheduling Style: ${n.aiSuggestionPreference}
- Allow Overtime: ${n.allowOvertimeScheduling}
- Deadline Buffer: ${n.deadlineBufferDays} days
- Priority Boost for Overdue: ${n.priorityBoostForOverdue}
- Respect Calendar Events: ${n.respectCalendarEvents}
- Auto Reschedule on Conflict: ${n.autoRescheduleOnConflict}

**SCHEDULING PERIOD:** ${u} to ${h}

**TASKS TO SCHEDULE:**
${_h(c)}

${g?`**IMPORTANT:** ${m.length} task(s) still have 0 minutes time estimates. You MUST provide realistic time estimates for these tasks based on their titles, descriptions, and complexity. Use the following guidelines based on the user's preference style:

- **Conservative (${n.aiSuggestionPreference==="conservative"?"ACTIVE":"inactive"})**: Provide higher estimates to ensure adequate time (add 20-30% buffer)
- **Balanced (${n.aiSuggestionPreference==="balanced"?"ACTIVE":"inactive"})**: Provide realistic estimates based on typical completion times
- **Aggressive (${n.aiSuggestionPreference==="aggressive"?"ACTIVE":"inactive"})**: Provide tighter estimates to maximize productivity (reduce by 10-15%)

Tasks requiring estimates: ${m.map(p=>`Task ${p.id} ("${p.title}")`).join(", ")}

`:""}${o?`**CUSTOM USER INSTRUCTIONS:**
${o}

`:""}**INSTRUCTIONS:**
1. **FIRST**: For any task with 0 minutes estimate, provide a realistic time estimate based on its title, description, and complexity
2. Schedule ALL tasks within the user's working hours and preferences
3. Consider task priorities and due dates
4. Break down large tasks if they exceed max chunk size
5. Add buffer time between tasks
6. Group similar tasks to minimize context switching
7. Optimize for the user's scheduling style (${n.aiSuggestionPreference})
8. Provide scheduling suggestions and insights

**RESPONSE FORMAT:**
Return a JSON object with this exact structure:
{
  "scheduledTasks": [
    {
      "id": number,
      "scheduledDate": "YYYY-MM-DDTHH:mm:ss.sssZ",
      "timeEstimate": number (in minutes - REQUIRED for all tasks, especially those with 0 estimate),
      "reasoning": "Brief explanation for scheduling decision and time estimate if updated"
    }
  ],
  "suggestions": [
    "List of helpful scheduling suggestions and insights"
  ],
  "conflictsResolved": number,
  "totalTimeScheduled": number (total minutes scheduled)
}

Only return the JSON object, no additional text or formatting.`;try{console.log("Sending AI scheduling request to Gemini...");const v=(yield f.models.generateContent({model:"gemini-2.5-flash",contents:y,config:{thinkingConfig:{thinkingBudget:0}}})).text;if(!v)throw new Error("Empty response from AI");console.log("Gemini response:",v);let C;try{const N=v.replace(/```json\n?|\n?```/g,"").trim();C=JSON.parse(N)}catch(N){throw console.error("Failed to parse AI response:",N),new Error("Invalid response format from AI")}return{scheduledTasks:c.map(N=>{const M=C.scheduledTasks.find(D=>D.id===N.id);return M?F(x({},N),{scheduledDate:M.scheduledDate,timeEstimate:M.timeEstimate||N.timeEstimate}):N}),suggestions:C.suggestions||[],conflictsResolved:C.conflictsResolved||0,totalTimeScheduled:C.totalTimeScheduled||0}}catch(p){throw console.error("AI scheduling error:",p),new Error(`Failed to schedule tasks with AI: ${p instanceof Error?p.message:"Unknown error"}`)}}),Th=(t,e)=>T(null,null,function*(){const n=kh(),s=t.filter(o=>o.timeEstimate===0||o.timeEstimate<5);if(s.length===0)return{};const r=`You are a time estimation expert. Please provide realistic time estimates for these tasks based on their complexity and description.

**TASKS REQUIRING ESTIMATES:**
${_h(s)}

**USER PREFERENCES:**
- Suggestion Style: ${e.aiSuggestionPreference}
- Minimum task chunk: ${e.minTaskChunkSize} minutes
- Maximum task chunk: ${e.maxTaskChunkSize} minutes

**ESTIMATION GUIDELINES:**
Based on the user's ${e.aiSuggestionPreference} preference style:

${e.aiSuggestionPreference==="conservative"?`- **CONSERVATIVE STYLE (ACTIVE)**: Provide generous estimates with built-in buffers
- Add 20-30% extra time to account for unexpected complications
- Prefer higher estimates to reduce stress and ensure quality
- Minimum estimates: Simple tasks 15-30 min, moderate tasks 45-90 min, complex tasks 2-4 hours`:e.aiSuggestionPreference==="balanced"?`- **BALANCED STYLE (ACTIVE)**: Provide realistic, well-calibrated estimates
- Use typical completion times for similar tasks
- Include moderate buffer for normal variations
- Minimum estimates: Simple tasks 10-20 min, moderate tasks 30-60 min, complex tasks 1-2 hours`:`- **AGGRESSIVE STYLE (ACTIVE)**: Provide tight, ambitious estimates
- Focus on efficiency and pushing productivity
- Minimal buffers, optimistic but achievable
- Minimum estimates: Simple tasks 5-15 min, moderate tasks 20-45 min, complex tasks 60-90 min`}

**INSTRUCTIONS:**
1. Analyze each task's title, description, and complexity
2. Consider typical time required for similar tasks
3. Apply the ${e.aiSuggestionPreference} estimation style
4. Ensure estimates are at least ${e.minTaskChunkSize} minutes
5. Break large estimates into chunks if they exceed ${e.maxTaskChunkSize} minutes

**RESPONSE FORMAT:**
Return a JSON object with task IDs as keys and time estimates (in minutes) as values:
{
  "1": 60,
  "2": 120,
  "3": 30
}

Only return the JSON object, no additional text.`;try{const i=(yield n.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{thinkingConfig:{thinkingBudget:0}}})).text;if(!i)throw new Error("Empty response from AI");const c=i.replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(c)}catch(o){throw console.error("AI time estimation error:",o),new Error(`Failed to get AI time estimates: ${o instanceof Error?o.message:"Unknown error"}`)}}),XM="https://anpfjtcydxtqsqtaxddt.supabase.co",QM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFucGZqdGN5ZHh0cXNxdGF4ZGR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5ODg2NjcsImV4cCI6MjA2NDU2NDY2N30.KyYY2XlZZfACzMt-Doyx-Vv96bSQCwx-ibPX0Cdi67g",ye=op(XM,QM),eE=t=>{var n,s,r,o,i,c;const e={};return t.title!==void 0&&(e.title=t.title),t.description!==void 0&&(e.description=t.description),t.timeEstimate!==void 0&&(e.time_estimate=t.timeEstimate),t.status!==void 0&&(e.status=t.status),t.priority!==void 0&&(e.priority=t.priority),t.position!==void 0&&(e.position=t.position),t.boardId!==void 0&&(e.board_id=t.boardId),t.progressPercentage!==void 0&&(e.progress_percentage=t.progressPercentage),t.timeSpent!==void 0&&(e.time_spent=t.timeSpent),t.scheduledDate!==void 0&&(e.scheduled_date=t.scheduledDate),t.startDate!==void 0&&(e.start_date=t.startDate),t.dueDate!==void 0&&(e.due_date=t.dueDate),t.category!==void 0&&(e.category=t.category),t.labels!==void 0&&(e.labels=JSON.stringify(t.labels)),t.tags!==void 0&&(e.tags=JSON.stringify(t.tags)),t.attachments!==void 0&&(e.attachments=JSON.stringify(t.attachments)),t.googleCalendarEventId!==void 0&&(e.google_calendar_event_id=t.googleCalendarEventId),t.googleCalendarSynced!==void 0&&(e.google_calendar_synced=t.googleCalendarSynced),t.recurring!==void 0&&(e.recurring_pattern=(n=t.recurring)==null?void 0:n.pattern,e.recurring_interval=(s=t.recurring)==null?void 0:s.interval,e.recurring_days_of_week=(r=t.recurring)!=null&&r.daysOfWeek?JSON.stringify(t.recurring.daysOfWeek):null,e.recurring_days_of_month=(o=t.recurring)!=null&&o.daysOfMonth?JSON.stringify(t.recurring.daysOfMonth):null,e.recurring_months_of_year=(i=t.recurring)!=null&&i.monthsOfYear?JSON.stringify(t.recurring.monthsOfYear):null,e.recurring_end_date=(c=t.recurring)==null?void 0:c.endDate),e},mi=t=>{var n;const e=t.recurring_pattern?{pattern:t.recurring_pattern,interval:(n=t.recurring_interval)!=null?n:1,daysOfWeek:t.recurring_days_of_week||[],daysOfMonth:t.recurring_days_of_month||[],monthsOfYear:t.recurring_months_of_year||[],endDate:t.recurring_end_date||void 0}:void 0;return{id:t.id,title:t.title||"",description:t.description||"",timeEstimate:t.time_estimate||0,status:t.status||"backlog",position:t.position||0,scheduledDate:t.scheduled_date||void 0,startDate:t.start_date||void 0,dueDate:t.due_date||void 0,tags:t.tags||[],createdAt:t.created_at||new Date().toISOString(),completedAt:t.completed_at||void 0,userId:t.user_id||"",boardId:t.board_id||void 0,priority:t.priority||2,category:t.category||"",progressPercentage:t.progress_percentage||0,timeSpent:t.time_spent||0,labels:[],attachments:[],assigneeId:t.assignee_id||void 0,parentTaskId:t.parent_task_id||void 0,googleCalendarEventId:t.google_calendar_event_id||void 0,googleCalendarSynced:t.google_calendar_synced||!1,recurring:e}},tE=(t,e)=>{var n,s,r,o,i,c;return{title:t.title,description:t.description||null,time_estimate:t.timeEstimate,status:t.status,position:t.position,scheduled_date:t.scheduledDate||null,tags:t.tags||[],completed_at:t.completedAt||null,user_id:e,board_id:t.boardId||null,priority:t.priority||2,due_date:t.dueDate||null,start_date:t.startDate||null,category:t.category||null,progress_percentage:t.progressPercentage||0,time_spent:t.timeSpent||0,assignee_id:t.assigneeId||null,parent_task_id:t.parentTaskId||null,google_calendar_event_id:t.googleCalendarEventId||null,google_calendar_synced:t.googleCalendarSynced||!1,recurring_pattern:((n=t.recurring)==null?void 0:n.pattern)||null,recurring_interval:((s=t.recurring)==null?void 0:s.interval)||null,recurring_days_of_week:((r=t.recurring)==null?void 0:r.daysOfWeek)||null,recurring_days_of_month:((o=t.recurring)==null?void 0:o.daysOfMonth)||null,recurring_months_of_year:((i=t.recurring)==null?void 0:i.monthsOfYear)||null,recurring_end_date:((c=t.recurring)==null?void 0:c.endDate)||null}},gi=t=>({id:t.id,name:t.name,description:t.description||void 0,color:t.color||void 0,icon:t.icon||void 0,createdAt:t.created_at,userId:t.user_id,isDefault:t.is_default}),nE=(t,e)=>({name:t.name,description:t.description||null,color:t.color||null,icon:t.icon||null,user_id:e,is_default:t.isDefault||!1}),iu=t=>({id:t.id,parentTaskId:t.parent_task_id,title:t.title,description:t.description||void 0,isCompleted:t.is_completed,position:t.position,timeEstimate:t.time_estimate,createdAt:t.created_at,completedAt:t.completed_at||void 0,userId:t.user_id}),Na=()=>{const[t,e]=w.useState([]),[n,s]=w.useState([]),[r,o]=w.useState(!0),[i,c]=w.useState(null),[f,u]=w.useState(!1);w.useEffect(()=>{ye.auth.getSession().then(({data:{session:L}})=>{var j;c((j=L==null?void 0:L.user)!=null?j:null),u(!0)});const{data:{subscription:S}}=ye.auth.onAuthStateChange((L,j)=>{var W;c((W=j==null?void 0:j.user)!=null?W:null),L==="SIGNED_IN"?(h(),m()):L==="SIGNED_OUT"&&(e([]),s([]))});return()=>S.unsubscribe()},[]);const h=w.useCallback(S=>T(null,null,function*(){if(!i){o(!1);return}try{o(!0);let L=ye.from("tasks").select("*").eq("user_id",i.id);S!==void 0&&(L=L.eq("board_id",S));const{data:j,error:W}=yield L.order("status").order("position",{ascending:!0}).order("created_at",{ascending:!1});if(W){console.error("Failed to load tasks:",W);return}const Q=j.map(mi);e(Q)}catch(L){console.error("Failed to load tasks:",L)}finally{o(!1)}}),[i]),m=w.useCallback(()=>T(null,null,function*(){if(i)try{const{data:S,error:L}=yield ye.from("boards").select("*").eq("user_id",i.id).order("created_at",{ascending:!0});if(L){console.error("Failed to load boards:",L);return}const j=S.map(gi);if(!j.find(Q=>Q.isDefault)){const{data:Q,error:A}=yield ye.from("boards").insert([{name:"All Tasks",description:"View all tasks across all boards",user_id:i.id,is_default:!0}]).select().single();!A&&Q&&j.unshift(gi(Q))}s(j)}catch(S){console.error("Failed to load boards:",S)}}),[i]);w.useEffect(()=>{i&&f?(h(),m()):!i&&f&&(e([]),s([]),o(!1))},[i==null?void 0:i.id,f]);const g=S=>T(null,null,function*(){var L;if(!i)return null;try{const{data:j}=yield ye.from("tasks").select("position").eq("user_id",i.id).eq("status",S.status).order("position",{ascending:!1}).limit(1),Q=(((L=j==null?void 0:j[0])==null?void 0:L.position)||0)+1,A=tE(F(x({},S),{position:Q}),i.id),{data:H,error:O}=yield ye.from("tasks").insert([A]).select().single();if(O)return console.error("Failed to add task:",O),null;const q=mi(H);return e(ne=>[...ne,q]),H.id}catch(j){return console.error("Failed to add task:",j),null}}),y=()=>T(null,null,function*(){if(!i)return[];try{const{data:S,error:L}=yield ye.from("tasks").select("*").eq("user_id",i.id).order("status").order("position",{ascending:!0}).order("created_at",{ascending:!1});return L?(console.error("Failed to get tasks:",L),[]):S.map(mi)}catch(S){return console.error("Failed to get tasks:",S),[]}}),p=(S,L)=>T(null,null,function*(){if(!i)return!1;if(S===0)return console.log("Creating new task instead of updating:",L),(yield g(L))!==null;try{e(A=>A.map(H=>H.id===S?x(x({},H),L):H));const j=eE(L);console.log("Updating task with:",j),console.log("Task ID:",S,"User ID:",i.id);const{data:W,error:Q}=yield ye.from("tasks").update(j).eq("id",S).eq("user_id",i.id).select();return console.log("Update result:",{data:W,error:Q}),Q?(console.error("Failed to update task:",Q),yield h(),!1):!0}catch(j){return console.error("Failed to update task:",j),yield h(),!1}}),v=S=>T(null,null,function*(){if(!i)return!1;try{e(j=>j.filter(W=>W.id!==S));const{error:L}=yield ye.from("tasks").delete().eq("id",S).eq("user_id",i.id);return L?(console.error("Failed to delete task:",L),yield h(),!1):!0}catch(L){return console.error("Failed to delete task:",L),yield h(),!1}}),C=S=>T(null,null,function*(){if(!i)return null;try{const L={title:`${S.title} (Copy)`,description:S.description,timeEstimate:S.timeEstimate,status:S.status,position:0,scheduledDate:S.scheduledDate,tags:S.tags,boardId:S.boardId,priority:S.priority,progressPercentage:0,timeSpent:0,labels:[...S.labels||[]],attachments:[]};return yield g(L)}catch(L){return console.error("Failed to duplicate task:",L),null}}),b=(S,L,j)=>T(null,null,function*(){var W;if(!i)return!1;try{const Q={status:L};if(L==="done"?Q.completedAt=new Date().toISOString():Q.completedAt=void 0,j!==void 0){const{data:A}=yield ye.from("tasks").select("id, position").eq("user_id",i.id).eq("status",L).order("position",{ascending:!0});if(A)for(let H=0;H<A.length;H++){const O=A[H];if(O.id!==S){const q=H>=j?H+1:H;q!==O.position&&(yield ye.from("tasks").update({position:q}).eq("id",O.id).eq("user_id",i.id))}}return Q.position=j,yield p(S,Q)}else{const{data:A}=yield ye.from("tasks").select("position").eq("user_id",i.id).eq("status",L).order("position",{ascending:!1}).limit(1),H=((W=A==null?void 0:A[0])==null?void 0:W.position)||0;return Q.position=H+1,yield p(S,Q)}}catch(Q){return console.error("Failed to move task:",Q),!1}}),N=(S,L,j)=>T(null,null,function*(){return yield b(S,j,L)}),M=(S,L)=>T(null,null,function*(){if(!i)return!1;try{e(j=>{const W=[...j];return S.forEach((Q,A)=>{const H=W.findIndex(O=>O.id===Q);H!==-1&&(W[H]=F(x({},W[H]),{position:A+1}))}),W});for(let j=0;j<S.length;j++){const W=S[j],Q=j+1,{error:A}=yield ye.from("tasks").update({position:Q}).eq("id",W).eq("user_id",i.id).eq("status",L);if(A)return console.error("Failed to update task position:",A),yield h(),!1}return!0}catch(j){return console.error("Failed to reorder tasks in column:",j),yield h(),!1}}),D=w.useCallback((S,L)=>T(null,null,function*(){if(!i)throw new Error("User not authenticated");const{data:j}=yield ye.from("subtasks").select("position").eq("parent_task_id",S).eq("user_id",i.id).order("position",{ascending:!1}).limit(1),W=j&&j.length>0?j[0].position+1:0,Q={parent_task_id:S,title:L,description:null,is_completed:!1,position:W,time_estimate:15,completed_at:null,user_id:i.id},{data:A,error:H}=yield ye.from("subtasks").insert(Q).select().single();if(H)throw H;return iu(A)}),[i]),k=w.useCallback((S,L)=>T(null,null,function*(){if(!i)throw new Error("User not authenticated");const j={};L.title!==void 0&&(j.title=L.title),L.description!==void 0&&(j.description=L.description||null),L.isCompleted!==void 0&&(j.is_completed=L.isCompleted,j.completed_at=L.isCompleted?new Date().toISOString():null),L.position!==void 0&&(j.position=L.position),L.timeEstimate!==void 0&&(j.time_estimate=L.timeEstimate);const{error:W}=yield ye.from("subtasks").update(j).eq("id",S).eq("user_id",i.id);if(W)throw W}),[i]),_=w.useCallback(S=>T(null,null,function*(){if(!i)throw new Error("User not authenticated");const{error:L}=yield ye.from("subtasks").delete().eq("id",S).eq("user_id",i.id);if(L)throw L}),[i]),E=w.useCallback(S=>T(null,null,function*(){if(!i)return[];const{data:L,error:j}=yield ye.from("subtasks").select("*").eq("parent_task_id",S).eq("user_id",i.id).order("position",{ascending:!0});if(j)throw console.error("getSubtasks: Database error:",j),j;return L.map(iu)}),[i]),P=w.useCallback(S=>T(null,null,function*(){if(!i)throw new Error("User not authenticated");const L=S.map((j,W)=>({id:j,position:W}));for(const j of L)yield ye.from("subtasks").update({position:j.position}).eq("id",j.id).eq("user_id",i.id)}),[i]);return{isInitialized:f,tasks:t,boards:n,isLoading:r,user:i,addTask:g,getTasks:y,updateTask:p,deleteTask:v,duplicateTask:C,moveTask:b,reorderTask:N,reorderTasksInColumn:M,addBoard:S=>T(null,null,function*(){if(!i)return null;try{const L=nE(S,i.id),{data:j,error:W}=yield ye.from("boards").insert([L]).select().single();if(W)return console.error("Failed to add board:",W),null;const Q=gi(j);return s(A=>[...A,Q]),j.id}catch(L){return console.error("Failed to add board:",L),null}}),updateBoard:(S,L)=>T(null,null,function*(){if(!i)return!1;try{s(Q=>Q.map(A=>A.id===S?x(x({},A),L):A));const j={};L.name!==void 0&&(j.name=L.name),L.description!==void 0&&(j.description=L.description||null),L.color!==void 0&&(j.color=L.color||null),L.icon!==void 0&&(j.icon=L.icon||null);const{error:W}=yield ye.from("boards").update(j).eq("id",S).eq("user_id",i.id);return W?(console.error("Failed to update board:",W),yield m(),!1):!0}catch(j){return console.error("Failed to update board:",j),yield m(),!1}}),deleteBoard:S=>T(null,null,function*(){if(!i)return!1;try{const L=n.find(Q=>Q.id===S);if(L!=null&&L.isDefault)return console.error('Cannot delete the default "All Tasks" board'),!1;const j=n.find(Q=>Q.isDefault);if(j){const{error:Q}=yield ye.from("tasks").update({board_id:j.id}).eq("board_id",S).eq("user_id",i.id);if(Q)return console.error("Failed to move tasks to default board:",Q),!1}s(Q=>Q.filter(A=>A.id!==S));const{error:W}=yield ye.from("boards").delete().eq("id",S).eq("user_id",i.id);return W?(console.error("Failed to delete board:",W),yield m(),!1):(yield h(),!0)}catch(L){return console.error("Failed to delete board:",L),yield m(),!1}}),loadBoards:m,addSubtask:D,updateSubtask:k,deleteSubtask:_,getSubtasks:E,reorderSubtasks:P,signUp:(S,L)=>T(null,null,function*(){const{data:j,error:W}=yield ye.auth.signUp({email:S,password:L});return{data:j,error:W}}),signIn:(S,L)=>T(null,null,function*(){const{data:j,error:W}=yield ye.auth.signInWithPassword({email:S,password:L});return{data:j,error:W}}),signInWithGoogle:()=>T(null,null,function*(){try{const{data:S,error:L}=yield ye.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}`,queryParams:{access_type:"offline",prompt:"consent"}}});return L?(console.error("Google OAuth error:",L),{data:null,error:L}):{data:S,error:null}}catch(S){return console.error("Google OAuth error:",S),{data:null,error:S}}}),signOut:()=>T(null,null,function*(){const{error:S}=yield ye.auth.signOut();return{error:S}}),resetPasswordForEmail:S=>T(null,null,function*(){const{data:L,error:j}=yield ye.auth.resetPasswordForEmail(S,{redirectTo:`${window.location.origin}/auth/reset-password`});return{data:L,error:j}}),updatePassword:S=>T(null,null,function*(){const{data:L,error:j}=yield ye.auth.updateUser({password:S});return{data:L,error:j}}),loadTasks:h}};function Sh(){const[t,e]=w.useState(!1),[n,s]=w.useState(!1),[r,o]=w.useState(null),{updateTask:i}=Na();return{isScheduling:t,isEstimating:n,scheduleTasksWithAI:(u,h,m)=>T(null,null,function*(){if(t)return Ye.warning("AI scheduling is already in progress"),null;if(!h.autoScheduleEnabled)return Ye.error("AI scheduling is not enabled. Please enable it in settings."),null;if(u.length===0)return Ye.warning("No tasks to schedule"),null;e(!0);try{Ye.loading("AI is analyzing and scheduling your tasks...",{id:"ai-scheduling"});const g=yield KM({tasks:u,userPreferences:h,customInstructions:m}),y=g.scheduledTasks.map(C=>{const b=u.find(N=>N.id===C.id);return b&&(b.scheduledDate!==C.scheduledDate||b.timeEstimate!==C.timeEstimate)?i(C.id,{scheduledDate:C.scheduledDate,timeEstimate:C.timeEstimate}):Promise.resolve()});yield Promise.allSettled(y),o(g);const p=g.scheduledTasks.filter(C=>C.scheduledDate).length,v=Math.round(g.totalTimeScheduled/60*10)/10;return Ye.success(`AI scheduling complete! Scheduled ${p} tasks (${v} hours total)`,{id:"ai-scheduling",description:g.suggestions.length>0?`Suggestion: ${g.suggestions[0]}`:void 0,duration:5e3}),g.suggestions.length>1&&g.suggestions.slice(1,3).forEach((C,b)=>{setTimeout(()=>{Ye.info(`AI Insight: ${C}`,{duration:4e3})},(b+1)*1e3)}),g}catch(g){return console.error("AI scheduling failed:",g),Ye.error("Failed to schedule tasks with AI",{id:"ai-scheduling",description:g instanceof Error?g.message:"Unknown error occurred",duration:5e3}),null}finally{e(!1)}}),updateTimeEstimatesWithAI:(u,h)=>T(null,null,function*(){if(n)return Ye.warning("AI time estimation is already in progress"),!1;if(u.length===0)return Ye.warning("No tasks to estimate"),!1;s(!0);try{Ye.loading("AI is analyzing task complexity and updating time estimates...",{id:"ai-estimation"});const m=yield Th(u,h),g=Object.entries(m).map(([p,v])=>{const C=parseInt(p,10),b=u.find(N=>N.id===C);return b&&b.timeEstimate!==v?i(C,{timeEstimate:v}):Promise.resolve()});yield Promise.allSettled(g);const y=Object.keys(m).length;return Ye.success(`AI updated time estimates for ${y} tasks`,{id:"ai-estimation",duration:3e3}),!0}catch(m){return console.error("AI time estimation failed:",m),Ye.error("Failed to update time estimates with AI",{id:"ai-estimation",description:m instanceof Error?m.message:"Unknown error occurred",duration:5e3}),!1}finally{s(!1)}}),lastScheduleResult:r}}function sE(e){var t=G(e,[]);return a.jsx(Sg,x({"data-slot":"dropdown-menu"},t))}function rE(e){var t=G(e,[]);return a.jsx(Ng,x({"data-slot":"dropdown-menu-trigger"},t))}function oE(s){var r=s,{className:t,sideOffset:e=4}=r,n=G(r,["className","sideOffset"]);return a.jsx(Mg,{children:a.jsx(Eg,x({"data-slot":"dropdown-menu-content",sideOffset:e,className:V("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t)},n))})}function lu(r){var o=r,{className:t,inset:e,variant:n="default"}=o,s=G(o,["className","inset","variant"]);return a.jsx(Dg,x({"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:V("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t)},s))}function aE(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx(Ig,x({"data-slot":"dropdown-menu-separator",className:V("bg-border -mx-1 my-1 h-px",t)},e))}var Ma="Checkbox",[iE,PP]=ma(Ma),[lE,Fl]=iE(Ma);function cE(t){const{__scopeCheckbox:e,checked:n,children:s,defaultChecked:r,disabled:o,form:i,name:c,onCheckedChange:f,required:u,value:h="on",internal_do_not_use_render:m}=t,[g,y]=ga({prop:n,defaultProp:r!=null?r:!1,onChange:f,caller:Ma}),[p,v]=w.useState(null),[C,b]=w.useState(null),N=w.useRef(!1),M=p?!!i||!!p.closest("form"):!0,D={checked:g,disabled:o,setChecked:y,control:p,setControl:v,name:c,form:i,value:h,hasConsumerStoppedPropagationRef:N,required:u,defaultChecked:ys(r)?!1:r,isFormControl:M,bubbleInput:C,setBubbleInput:b};return a.jsx(lE,F(x({scope:e},D),{children:dE(m)?m(D):s}))}var Nh="CheckboxTrigger",Mh=w.forwardRef((o,r)=>{var i=o,{__scopeCheckbox:t,onKeyDown:e,onClick:n}=i,s=G(i,["__scopeCheckbox","onKeyDown","onClick"]);const{control:c,value:f,disabled:u,checked:h,required:m,setControl:g,setChecked:y,hasConsumerStoppedPropagationRef:p,isFormControl:v,bubbleInput:C}=Fl(Nh,t),b=gr(r,g),N=w.useRef(h);return w.useEffect(()=>{const M=c==null?void 0:c.form;if(M){const D=()=>y(N.current);return M.addEventListener("reset",D),()=>M.removeEventListener("reset",D)}},[c,y]),a.jsx(es.button,F(x({type:"button",role:"checkbox","aria-checked":ys(h)?"mixed":h,"aria-required":m,"data-state":jh(h),"data-disabled":u?"":void 0,disabled:u,value:f},s),{ref:b,onKeyDown:$t(e,M=>{M.key==="Enter"&&M.preventDefault()}),onClick:$t(n,M=>{y(D=>ys(D)?!0:!D),C&&v&&(p.current=M.isPropagationStopped(),p.current||M.stopPropagation())})}))});Mh.displayName=Nh;var Ll=w.forwardRef((t,e)=>{const g=t,{__scopeCheckbox:n,name:s,checked:r,defaultChecked:o,required:i,disabled:c,value:f,onCheckedChange:u,form:h}=g,m=G(g,["__scopeCheckbox","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]);return a.jsx(cE,{__scopeCheckbox:n,checked:r,defaultChecked:o,disabled:c,required:i,onCheckedChange:u,name:s,form:h,value:f,internal_do_not_use_render:({isFormControl:y})=>a.jsxs(a.Fragment,{children:[a.jsx(Mh,F(x({},m),{ref:e,__scopeCheckbox:n})),y&&a.jsx(Ah,{__scopeCheckbox:n})]})})});Ll.displayName=Ma;var Eh="CheckboxIndicator",Dh=w.forwardRef((t,e)=>{const i=t,{__scopeCheckbox:n,forceMount:s}=i,r=G(i,["__scopeCheckbox","forceMount"]),o=Fl(Eh,n);return a.jsx(wl,{present:s||ys(o.checked)||o.checked===!0,children:a.jsx(es.span,F(x({"data-state":jh(o.checked),"data-disabled":o.disabled?"":void 0},r),{ref:e,style:x({pointerEvents:"none"},t.style)}))})});Dh.displayName=Eh;var Ih="CheckboxBubbleInput",Ah=w.forwardRef((s,n)=>{var r=s,{__scopeCheckbox:t}=r,e=G(r,["__scopeCheckbox"]);const{control:o,hasConsumerStoppedPropagationRef:i,checked:c,defaultChecked:f,required:u,disabled:h,name:m,value:g,form:y,bubbleInput:p,setBubbleInput:v}=Fl(Ih,t),C=gr(n,v),b=Pu(c),N=Ou(o);w.useEffect(()=>{const D=p;if(!D)return;const k=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(k,"checked").set,P=!i.current;if(b!==c&&E){const R=new Event("click",{bubbles:P});D.indeterminate=ys(c),E.call(D,ys(c)?!1:c),D.dispatchEvent(R)}},[p,b,c,i]);const M=w.useRef(ys(c)?!1:c);return a.jsx(es.input,F(x({type:"checkbox","aria-hidden":!0,defaultChecked:f!=null?f:M.current,required:u,disabled:h,name:m,value:g,form:y},e),{tabIndex:-1,ref:C,style:F(x(x({},e.style),N),{position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"})}))});Ah.displayName=Ih;function dE(t){return typeof t=="function"}function ys(t){return t==="indeterminate"}function jh(t){return ys(t)?"indeterminate":t?"checked":"unchecked"}const bt=w.forwardRef((s,n)=>{var r=s,{className:t}=r,e=G(r,["className"]);return a.jsx(Ll,F(x({ref:n,className:V("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t)},e),{children:a.jsx(Dh,{className:V("flex items-center justify-center text-current"),children:a.jsx(ms,{className:"h-4 w-4"})})}))});bt.displayName=Ll.displayName;var uE="Label",Rh=w.forwardRef((t,e)=>a.jsx(es.label,F(x({},t),{ref:e,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=t.onMouseDown)==null||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}})));Rh.displayName=uE;var Ph=Rh;const fE=co("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Wt=w.forwardRef((s,n)=>{var r=s,{className:t}=r,e=G(r,["className"]);return a.jsx(Ph,x({ref:n,className:V(fE(),t)},e))});Wt.displayName=Ph.displayName;const ht=Fg,mt=Lg,st=w.forwardRef((r,s)=>{var o=r,{className:t,children:e}=o,n=G(o,["className","children"]);return a.jsxs(Fu,F(x({ref:s,className:V("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t)},n),{children:[e,a.jsx(Ag,{asChild:!0,children:a.jsx(Nl,{className:"h-4 w-4 opacity-50"})})]}))});st.displayName=Fu.displayName;const Oh=w.forwardRef((s,n)=>{var r=s,{className:t}=r,e=G(r,["className"]);return a.jsx(Lu,F(x({ref:n,className:V("flex cursor-default items-center justify-center py-1",t)},e),{children:a.jsx(Lx,{className:"h-4 w-4"})}))});Oh.displayName=Lu.displayName;const Fh=w.forwardRef((s,n)=>{var r=s,{className:t}=r,e=G(r,["className"]);return a.jsx($u,F(x({ref:n,className:V("flex cursor-default items-center justify-center py-1",t)},e),{children:a.jsx(Nl,{className:"h-4 w-4"})}))});Fh.displayName=$u.displayName;const rt=w.forwardRef((o,r)=>{var i=o,{className:t,children:e,position:n="popper"}=i,s=G(i,["className","children","position"]);return a.jsx(jg,{children:a.jsxs(Vu,F(x({ref:r,className:V("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n},s),{children:[a.jsx(Oh,{}),a.jsx(Rg,{className:V("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(Fh,{})]}))})});rt.displayName=Vu.displayName;const hE=w.forwardRef((s,n)=>{var r=s,{className:t}=r,e=G(r,["className"]);return a.jsx(Uu,x({ref:n,className:V("py-1.5 pl-8 pr-2 text-sm font-semibold",t)},e))});hE.displayName=Uu.displayName;const ge=w.forwardRef((r,s)=>{var o=r,{className:t,children:e}=o,n=G(o,["className","children"]);return a.jsxs(Bu,F(x({ref:s,className:V("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},n),{children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Pg,{children:a.jsx(ms,{className:"h-4 w-4"})})}),a.jsx(Og,{children:e})]}))});ge.displayName=Bu.displayName;const mE=w.forwardRef((s,n)=>{var r=s,{className:t}=r,e=G(r,["className"]);return a.jsx(Gu,x({ref:n,className:V("-mx-1 my-1 h-px bg-muted",t)},e))});mE.displayName=Gu.displayName;const gE=co("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function tt(r){var o=r,{className:t,variant:e,asChild:n=!1}=o,s=G(o,["className","variant","asChild"]);const i=n?ro:"span";return a.jsx(i,x({"data-slot":"badge",className:V(gE({variant:e}),t)},s))}function $e(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"card",className:V("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t)},e))}function ot(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"card-header",className:V("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t)},e))}function at(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"card-title",className:V("leading-none font-semibold",t)},e))}function it(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"card-description",className:V("text-muted-foreground text-sm",t)},e))}function qe(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("div",x({"data-slot":"card-content",className:V("px-6",t)},e))}function cu({isOpen:t,onClose:e,tasks:n,boards:s,userPreferences:r}){const{isScheduling:o,isEstimating:i,scheduleTasksWithAI:c,updateTimeEstimatesWithAI:f}=Sh(),[u,h]=w.useState("unscheduled"),[m,g]=w.useState(null),[y,p]=w.useState("keep"),[v,C]=w.useState(new Set),[b,N]=w.useState(""),[M,D]=w.useState(()=>{const U=new Date;return U.setDate(U.getDate()+1),U.toISOString().split("T")[0]}),[k,_]=w.useState(14),[E,P]=w.useState(!0),[R,B]=w.useState(!0),[$,K]=w.useState(!0),[te,le]=w.useState(!1),ve=n.filter(U=>U.status!=="done"),we=ve.filter(U=>!U.scheduledDate),S=(()=>{switch(u){case"unscheduled":return we;case"all":return ve;case"board":return m?ve.filter(U=>U.boardId===m):[];case"selected":return ve.filter(U=>v.has(U.id));default:return[]}})(),L=U=>s.find(Ce=>Ce.id===U.boardId);w.useEffect(()=>{u!=="selected"&&C(new Set),u!=="board"&&g(null)},[u]),w.useEffect(()=>{if(u==="selected"&&v.size===0){const U=new Set(we.map(Ce=>Ce.id));C(U)}},[u,we,v.size]),w.useEffect(()=>{if(u==="board"&&!m&&s.length>0){const U=s.find(Ce=>!Ce.isDefault)||s[0];g(U.id)}},[u,m,s]);const j=U=>{const Ce=new Set(v);Ce.has(U)?Ce.delete(U):Ce.add(U),C(Ce)},W=()=>{C(new Set(ve.map(U=>U.id)))},Q=()=>{C(new Set)},A=()=>T(null,null,function*(){if(!(!r||S.length===0))try{y==="update"&&(yield f(S,r));const U=F(x({},r),{schedulingLookaheadDays:k}),dt=b+(te?" Allow tasks to overlap in time if they are from different boards or can be multitasked.":" Avoid any time overlaps between tasks.");yield c(S,U,dt),e()}catch(U){console.error("Failed to schedule tasks:",U)}}),H=()=>{h("unscheduled"),g(null),p("keep"),C(new Set),N(""),D(()=>{const U=new Date;return U.setDate(U.getDate()+1),U.toISOString().split("T")[0]}),_(14),P(!0),B(!0),K(!0),le(!1),e()},O=U=>{switch(U){case 1:return"bg-red-100 text-red-800 border-red-200";case 2:return"bg-orange-100 text-orange-800 border-orange-200";case 3:return"bg-blue-100 text-blue-800 border-blue-200";case 4:return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},q=U=>{switch(U){case 1:return"High";case 2:return"Medium";case 3:return"Low";case 4:return"Backlog";default:return"Unknown"}},ne=o||i;return r?r.autoScheduleEnabled?a.jsx(vn,{open:t,onOpenChange:H,children:a.jsxs(wn,{className:"!max-w-4xl max-h-[90vh] flex flex-col p-0",children:[a.jsxs(gs,{className:"px-6 pt-6 pb-4 border-b bg-background",children:[a.jsxs(Yn,{className:"flex items-center gap-3 text-xl",children:[a.jsx(cs,{className:"h-6 w-6 text-blue-600"}),"AI Task Scheduler"]}),a.jsx(Hn,{className:"text-base",children:"Let AI automatically schedule your tasks based on your preferences and availability."})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs($e,{children:[a.jsxs(ot,{className:"pb-4",children:[a.jsx(at,{className:"text-lg",children:"Select Tasks to Schedule"}),a.jsx(it,{className:"text-base",children:"Choose which tasks you want AI to schedule"})]}),a.jsxs(qe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"md:col-span-1",children:[a.jsx(Wt,{className:"text-sm font-medium",children:"Scheduling Mode"}),a.jsxs(ht,{value:u,onValueChange:U=>h(U),children:[a.jsx(st,{className:"h-10 mt-2",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsxs(ge,{value:"unscheduled",children:["Unscheduled (",we.length,")"]}),a.jsxs(ge,{value:"all",children:["All Active (",ve.length,")"]}),a.jsx(ge,{value:"board",children:"By Board"}),a.jsx(ge,{value:"selected",children:"Custom Selection"})]})]})]}),u==="board"&&a.jsxs("div",{className:"md:col-span-1",children:[a.jsx(Wt,{className:"text-sm font-medium",children:"Select Board"}),a.jsxs(ht,{value:(m==null?void 0:m.toString())||"",onValueChange:U=>g(parseInt(U)),children:[a.jsx(st,{className:"h-10 mt-2",children:a.jsx(mt,{placeholder:"Choose a board"})}),a.jsx(rt,{children:s.map(U=>a.jsx(ge,{value:U.id.toString(),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:U.color||"#3B82F6"},children:Fn(U.icon||"Briefcase","h-2 w-2")}),U.name,U.isDefault&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"(Default)"})]})},U.id))})]})]}),a.jsx("div",{className:V("flex items-end",u==="board"?"md:col-span-1":"md:col-span-2"),children:a.jsx("div",{className:"bg-muted/50 rounded-lg p-3 border flex-1",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Bx,{className:"h-4 w-4 text-green-600"}),a.jsxs("span",{className:"font-medium",children:[S.length," task",S.length!==1?"s":""," selected"]}),S.length>0&&a.jsxs("span",{className:"text-muted-foreground",children:["(",Math.round(S.reduce((U,Ce)=>U+(Ce.timeEstimate||0),0))," min total)"]})]})})})]}),u==="selected"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Z,{variant:"outline",size:"sm",onClick:W,className:"flex-1",children:"Select All"}),a.jsx(Z,{variant:"outline",size:"sm",onClick:Q,className:"flex-1",children:"Select None"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 border rounded-lg p-3 bg-muted/20",children:ve.length===0?a.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"No active tasks available"}):ve.map(U=>{const Ce=L(U);return a.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded hover:bg-background/80 border border-transparent hover:border-border/50 transition-colors",children:[a.jsx(bt,{id:`task-${U.id}`,checked:v.has(U.id),onCheckedChange:()=>j(U.id),className:"mt-0.5"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("label",{htmlFor:`task-${U.id}`,className:"text-sm font-medium cursor-pointer block",children:U.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Ce&&a.jsxs(tt,{variant:"outline",className:"text-xs",children:[a.jsx("div",{className:"w-2 h-2 rounded mr-1",style:{backgroundColor:Ce.color||"#3B82F6"}}),Ce.name]}),a.jsx(tt,{variant:"outline",className:V("text-xs",O(U.priority)),children:q(U.priority)}),U.timeEstimate>0&&a.jsxs(tt,{variant:"secondary",className:"text-xs",children:[a.jsx(Vt,{className:"h-3 w-3 mr-1"}),Math.round(U.timeEstimate)," min"]}),U.scheduledDate&&a.jsxs(tt,{variant:"outline",className:"text-xs",children:[a.jsx(nt,{className:"h-3 w-3 mr-1"}),Nt(new Date(U.scheduledDate),"MMM d")]})]})]})]},U.id)})})]}),u==="board"&&m&&a.jsx("div",{className:"space-y-3",children:a.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 border rounded-lg p-3 bg-muted/20",children:S.length===0?a.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"No active tasks in selected board"}):S.map(U=>{const Ce=L(U);return a.jsx("div",{className:"flex items-start space-x-3 p-2 rounded bg-background/80 border border-border/50",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium",children:U.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Ce&&a.jsxs(tt,{variant:"outline",className:"text-xs",children:[a.jsx("div",{className:"w-2 h-2 rounded mr-1",style:{backgroundColor:Ce.color||"#3B82F6"}}),Ce.name]}),a.jsx(tt,{variant:"outline",className:V("text-xs",O(U.priority)),children:q(U.priority)}),U.timeEstimate>0&&a.jsxs(tt,{variant:"secondary",className:"text-xs",children:[a.jsx(Vt,{className:"h-3 w-3 mr-1"}),Math.round(U.timeEstimate)," min"]}),U.scheduledDate&&a.jsxs(tt,{variant:"outline",className:"text-xs",children:[a.jsx(nt,{className:"h-3 w-3 mr-1"}),Nt(new Date(U.scheduledDate),"MMM d")]})]})]})},U.id)})})})]})]}),a.jsxs($e,{children:[a.jsxs(ot,{className:"pb-4",children:[a.jsx(at,{className:"text-lg",children:"Scheduling Options"}),a.jsx(it,{className:"text-base",children:"Configure how tasks should be scheduled"})]}),a.jsx(qe,{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx(Wt,{htmlFor:"start-date",className:"text-sm font-medium",children:"Start Date"}),a.jsx(Ae,{id:"start-date",type:"date",value:M,onChange:U=>D(U.target.value),min:new Date().toISOString().split("T")[0],className:"h-10 mt-2"})]}),a.jsxs("div",{children:[a.jsx(Wt,{htmlFor:"max-days",className:"text-sm font-medium",children:"Max Days"}),a.jsx(Ae,{id:"max-days",type:"number",min:"1",max:"90",value:k,onChange:U=>_(parseInt(U.target.value)||14),className:"h-10 mt-2"})]}),a.jsxs("div",{children:[a.jsx(Wt,{className:"text-sm font-medium",children:"Time Estimates"}),a.jsxs(ht,{value:y,onValueChange:U=>p(U),children:[a.jsx(st,{className:"h-10 mt-2",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"keep",children:"Keep Current"}),a.jsx(ge,{value:"update",children:"Update with AI"})]})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("div",{className:"space-y-2 w-full",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{id:"respect-hours",checked:E,onCheckedChange:U=>P(U===!0)}),a.jsx(Wt,{htmlFor:"respect-hours",className:"text-sm",children:"Working hours"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{id:"group-similar",checked:R,onCheckedChange:U=>B(U===!0)}),a.jsx(Wt,{htmlFor:"group-similar",className:"text-sm",children:"Group similar"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{id:"prioritize-urgent",checked:$,onCheckedChange:U=>K(U===!0)}),a.jsx(Wt,{htmlFor:"prioritize-urgent",className:"text-sm",children:"Prioritize urgent"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{id:"allow-overlap",checked:te,onCheckedChange:U=>le(U===!0)}),a.jsxs(Wt,{htmlFor:"allow-overlap",className:"text-sm flex items-center gap-1",children:[a.jsx(kv,{className:"h-3 w-3"}),"Allow overlap"]})]})]})})]})})]}),a.jsxs($e,{children:[a.jsxs(ot,{className:"pb-4",children:[a.jsx(at,{className:"text-lg",children:"Custom Instructions"}),a.jsx(it,{className:"text-base",children:"Add specific instructions for the AI scheduler"})]}),a.jsxs(qe,{children:[a.jsx(va,{placeholder:"e.g., 'Schedule coding tasks in the morning when I'm most focused', 'Avoid scheduling meetings after 4 PM'...",value:b,onChange:U=>N(U.target.value),className:"min-h-[100px] resize-none",maxLength:500}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[b.length,"/500 characters"]})]})]})]})}),a.jsxs(Is,{className:"flex-col sm:flex-row gap-3 px-6 py-4 border-t bg-background",children:[a.jsx("div",{className:"flex-1 text-left",children:S.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"Select at least one task to schedule"})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Z,{variant:"outline",onClick:H,disabled:ne,className:"px-6 h-10",children:"Cancel"}),a.jsx(Z,{onClick:A,disabled:ne||S.length===0,className:"gap-2 px-6 h-10",children:o?a.jsxs(a.Fragment,{children:[a.jsx(Qo,{className:"h-4 w-4 animate-spin"}),"Scheduling..."]}):i?a.jsxs(a.Fragment,{children:[a.jsx(Qo,{className:"h-4 w-4 animate-spin"}),"Updating Estimates..."]}):a.jsxs(a.Fragment,{children:[a.jsx(cs,{className:"h-4 w-4"}),"Schedule ",S.length," Task",S.length!==1?"s":""]})})]})]})]})}):a.jsx(vn,{open:t,onOpenChange:H,children:a.jsxs(wn,{className:"max-w-md",children:[a.jsxs(gs,{children:[a.jsxs(Yn,{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"h-5 w-5 text-amber-500"}),"AI Scheduling Disabled"]}),a.jsx(Hn,{children:"AI scheduling is currently disabled. Enable it in Settings â†’ AI Scheduling to use this feature."})]}),a.jsx(Is,{children:a.jsx(Z,{onClick:H,children:"Close"})})]})}):a.jsx(vn,{open:t,onOpenChange:H,children:a.jsxs(wn,{className:"max-w-3xl",children:[a.jsxs(gs,{children:[a.jsxs(Yn,{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"h-5 w-5 text-amber-500"}),"AI Scheduling Unavailable"]}),a.jsx(Hn,{children:"User preferences are not loaded. Please try again later."})]}),a.jsx(Is,{children:a.jsx(Z,{onClick:H,children:"Close"})})]})})}function Lh({tasks:t,boards:e,userPreferences:n,variant:s="default",size:r="default",className:o,showDropdown:i=!0,compact:c=!1,onOpenSettings:f}){const{isScheduling:u,isEstimating:h,updateTimeEstimatesWithAI:m}=Sh(),[g,y]=w.useState(!1),p=u||h,v=()=>{y(!0)},C=()=>T(null,null,function*(){if(!n||t.length===0)return;const b=t.filter(N=>N.status!=="done");yield m(b,n)});return n?n.autoScheduleEnabled?i?a.jsxs(a.Fragment,{children:[a.jsxs(sE,{children:[a.jsx(rE,{asChild:!0,children:a.jsxs(Z,{variant:s,size:r,disabled:p,className:V("gap-2",o),children:[p?a.jsx(Qo,{className:"h-4 w-4 animate-spin"}):a.jsx(cs,{className:"h-4 w-4"}),!c&&(u?"Scheduling...":h?"Estimating...":"AI Scheduler")]})}),a.jsxs(oE,{align:"end",className:"w-60",children:[a.jsxs(lu,{onClick:v,disabled:p,className:"gap-2",children:[a.jsx(cs,{className:"h-4 w-4"}),a.jsxs("div",{className:"flex flex-col items-start",children:[a.jsx("span",{children:"Open AI Scheduler"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Configure and schedule tasks with AI"})]})]}),a.jsx(aE,{}),a.jsxs(lu,{onClick:C,disabled:t.length===0||p,className:"gap-2",children:[a.jsx(Vt,{className:"h-4 w-4"}),a.jsxs("div",{className:"flex flex-col items-start",children:[a.jsx("span",{children:"Update Time Estimates"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"AI will analyze and update task durations"})]})]})]})]}),a.jsx(cu,{isOpen:g,onClose:()=>y(!1),tasks:t,boards:e,userPreferences:n})]}):a.jsxs(a.Fragment,{children:[a.jsxs(Z,{variant:s,size:r,onClick:v,disabled:p,className:V("gap-2",o),title:"Open AI Scheduler",children:[p?a.jsx(Qo,{className:"h-4 w-4 animate-spin"}):a.jsx(cs,{className:"h-4 w-4"}),!c&&(p?"Scheduling...":"AI Schedule")]}),a.jsx(cu,{isOpen:g,onClose:()=>y(!1),tasks:t,boards:e,userPreferences:n})]}):a.jsxs(Z,{variant:"outline",size:r,onClick:f,className:V("gap-2 opacity-75 hover:opacity-100",o),title:"AI scheduling is disabled. Click to enable it in Settings.",children:[a.jsx(cs,{className:"h-4 w-4"}),!c&&"Enable AI"]}):a.jsxs(Z,{variant:"ghost",size:r,disabled:!0,className:V("gap-2",o),children:[a.jsx(cs,{className:"h-4 w-4"}),!c&&"AI Scheduler"]})}function pE(t){if(!t||t.length===0)return null;const e=new Date,n=t.filter(s=>s.status==="done"||s.completedAt?!1:s.scheduledDate||s.dueDate||s.startDate).map(s=>{let r=null;return s.scheduledDate?r=new Date(s.scheduledDate):s.dueDate?r=new Date(s.dueDate):s.startDate&&(r=new Date(s.startDate)),{task:s,relevantDate:r,isOverdue:r?r<e:!1,isToday:r?xE(r,e):!1,isUpcoming:r?r>e:!1}}).filter(s=>s.relevantDate!==null).sort((s,r)=>s.isOverdue&&!r.isOverdue?-1:!s.isOverdue&&r.isOverdue?1:s.isToday&&!r.isToday?-1:!s.isToday&&r.isToday?1:s.relevantDate.getTime()-r.relevantDate.getTime());return n.length>0?n[0].task:null}function yE(t){let e=null,n="";if(t.scheduledDate?(e=new Date(t.scheduledDate),n="Scheduled"):t.dueDate?(e=new Date(t.dueDate),n="Due"):t.startDate&&(e=new Date(t.startDate),n="Starts"),!e)return"";const s=new Date;s.setHours(0,0,0,0);const r=new Date(e);r.setHours(0,0,0,0);const o=r.getTime()-s.getTime(),i=Math.ceil(o/(1e3*60*60*24));if(i===0)return`${n} today at ${e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;if(i===1)return`${n} tomorrow at ${e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;if(i===-1)return`${n} yesterday (overdue)`;if(i<0)return`${n} ${Math.abs(i)} days ago (overdue)`;if(i<=7){const c=e.toLocaleDateString([],{weekday:"long"});return`${n} ${c} at ${e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`}else return`${n} ${e.toLocaleDateString()} at ${e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`}function xE(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function vE(t){switch(t.priority){case 4:return"text-red-600 dark:text-red-400";case 3:return"text-orange-600 dark:text-orange-400";case 2:return"text-blue-600 dark:text-blue-400";case 1:return"text-gray-600 dark:text-gray-400";default:return"text-gray-600 dark:text-gray-400"}}function wE(t){switch(t.priority){case 4:return"Critical";case 3:return"High";case 2:return"Medium";case 1:return"Low";default:return"Medium"}}function CE({task:t,onClick:e,className:n}){if(!t)return a.jsx("div",{className:V("flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 px-3 py-1.5 rounded-lg border border-border/50",n),children:a.jsx("span",{children:"No upcoming tasks"})});const s=yE(t),r=vE(t),o=wE(t),i=s.includes("overdue");return a.jsx("div",{className:V("flex items-center gap-2 text-xs bg-muted/30 px-3 py-1.5 rounded-lg border border-border/50 max-w-sm cursor-pointer hover:bg-muted/50 transition-colors",i&&"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800/30",n),onClick:()=>e==null?void 0:e(t),title:`Click to view task: ${t.title}`,children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[i&&a.jsx(xa,{className:"h-3 w-3 text-red-500"}),a.jsxs("div",{className:"flex gap-1.5 min-w-0 flex-col items-start",children:[a.jsx("span",{className:V("font-medium truncate w-full",i?"text-red-700 dark:text-red-300":"text-foreground"),children:t.title}),a.jsxs("div",{className:"flex items-center gap-1.5 w-full",children:[a.jsx("span",{className:V("text-muted-foreground text-[0.68rem] truncate",i&&"text-red-600 dark:text-red-400"),children:s}),t.priority>2&&a.jsx("span",{className:V("px-1.5 py-0.5 rounded text-[0.6rem] font-medium flex-shrink-0",r,"bg-current bg-opacity-10"),children:o})]})]})]})})}function bE({className:t="w-8 h-8"}){return a.jsxs("svg",{className:t,id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 476.2 458.2",children:[a.jsx("defs",{children:a.jsx("style",{children:`
						  .cls-1 {
        fill: var(--logo-primary, #6FB3A0);
      }

      .cls-2 {
        fill: var(--logo-secondary, #8FC4B0);
      }

      .cls-3 {
        fill: var(--logo-accent, #5A9B8A);
      }

      .cls-4 {
        fill: var(--logo-muted, #4A8274);
      }

      .cls-5 {
        fill: var(--logo-main, #6FB3A0);
      }
					`})}),a.jsx("path",{className:"cls-4",d:"M476.2,180.8c-.2-8.6-.2-17.6-.2-27.1.1,8.6.2,17.6.2,27.1Z"}),a.jsx("path",{className:"cls-4",d:"M.4,61.6c0,4.3-.1,9-.4,14.2,0-4.3,0-9,.4-14.2Z"}),a.jsx("path",{className:"cls-4",d:"M476.2,213.8c-.2-3.6-.2-7.6-.2-12.1.1,3.6.2,7.6.2,12.1Z"}),a.jsx("path",{className:"cls-4",d:"M476.2,145.8c-.2-2.6-.2-5.6-.2-9.1.1,2.6.2,5.7.2,9.1Z"}),a.jsx("path",{className:"cls-4",d:"M476.2,282.8c-.2-2.3-.2-5-.2-8.1.1,2.3.2,5,.2,8.1Z"}),a.jsx("path",{className:"cls-4",d:"M476.2,194.8c-.1-2.3-.2-5-.2-8.1.1,2.3.2,5,.2,8.1Z"}),a.jsx("path",{className:"cls-4",d:"M476.2,267.8c-.2-1.7-.2-3.7-.2-6.1.1,1.6.2,3.7.2,6.1Z"}),a.jsx("path",{className:"cls-4",d:"M476.2,347.8c-.2-1.7-.2-3.7-.2-6.1.1,1.6.2,3.7.2,6.1Z"}),a.jsx("path",{className:"cls-4",d:"M476.2,309.8c-.1-1.1-.2-2.4-.2-4.2.1,1,.2,2.5.2,4.2Z"}),a.jsx("path",{className:"cls-4",d:"M476.2,289.9c-.1-.5-.1-1.2-.1-2.3,0,.4.1,1.3.1,2.3Z"}),a.jsx("path",{className:"cls-5",d:"M322.4,157.2c23.1-8.5,35.3-13.7,46.2-30.3,7.6-11.4,13.2-24.2,19.7-36.3.3-.6.4-1.3.8-1.8,1.3-1.6,2.7-3.1,4-4.7,1.5,1.4,3.7,2.5,4.6,4.2,20.7,40.2,20.3,91.4-8.6,127.9-16.3,20.6-38.5,31.1-64.4,34.6-21.5,2.9-41.6-2.5-61.5-9.5-15.7-5.5-31.1-12-46.9-17.2-41.4-13.7-79.3-6.1-113.6,20-11.9,9-22.8,19.4-34.2,29.1-2.1,1.8-4.4,5.8-7.3,3-2.1-2-3.5-6.4-2.9-9.3,1.4-7,3.7-13.8,6.3-20.5,14.6-37.6,37.4-69,71.2-91.7,29.9-20,62.3-23.7,96.5-13.4,14.8,4.5,29.5,9.4,44.4,13.7,13,3,12.8,1.8,19.8,3,9.2-.3,6-.3,25.9-1v.2Z"}),a.jsx("path",{className:"cls-5",d:"M335.1,292.4c.4,0,.9,0,1.9-.2,1.1-.1,1.5-.2,1.9-.2,17.4-1,33.1-7,47.8-16.1,11.6-7.2,23-14.6,32.1-25,.5,0,.9.2,1.4.2-.1,2,.3,4.3-.4,6.1-3.5,8.8-6.7,17.8-11,26.2-12.9,24.6-29.3,46.5-52.9,62.1-18.6,12.4-39.4,18.3-61.6,16.4-20.8-1.7-40.2-9.1-58.1-20-10.4-6.3-20.6-13-31.1-19.1-14.3-8.4-29.5-14.9-46.2-16.5-27.4-2.7-50.6,6.4-69.5,25.9-7.7,8-14.3,17.1-21.5,25.6-1.1,1.4-2.9,2.2-4.4,3.3-.5-1.6-1.5-3.3-1.3-4.8,5.8-47.9,28-84.4,73.9-103.2,22.4-9.2,45.9-8,68.5.1,18.6,6.7,36.5,15.5,55,22.5,14.6,5.5,29.7,9.7,45.3,14.6,5.5.7,10.2,1.3,15,1.9.4,0,.8.2,1.9.5,4.8.1,9.1,0,13.3-.3h0Z"}),a.jsx("path",{className:"cls-3",d:"M338.4,292.3c-6,1.1-12.4,1.3-19.2.2,6-1.2,12.4-1.2,19.2-.2Z"}),a.jsx("path",{className:"cls-2",d:"M319.7,291.9c-4.5-.3-9.2-.9-14.3-1.6,4.4.4,9.2.9,14.3,1.6Z"}),a.jsx("path",{className:"cls-2",d:"M58.3,1.4c1.1-.4,2.5-.8,4.3-1.1-1.1.4-2.5.8-4.3,1.1Z"}),a.jsx("path",{className:"cls-2",d:"M338.8,291.8c-.3.2-.7.2-1.5.3.2-.1.8-.3,1.5-.3Z"}),a.jsx("path",{className:"cls-3",d:"M322.9,292.2c-6,.3-12.5-.3-19.1-2.2,6.1-.4,12.4.4,19.1,2.2Z"}),a.jsx("path",{className:"cls-3",d:"M354.5,289.6c-5.8,1.9-12.1,2.9-19,2.8,5.8-2,12.1-2.8,19-2.8Z"})]})}const kE=t=>{switch(t){case"kanban":return Uv;case"calendar":return nt;case"list":return Jr;default:return Jr}},_E=t=>{switch(t){case"kanban":return"Kanban Board";case"calendar":return"Calendar View";case"list":return"List View";default:return"List View"}};function Ea({boards:t,currentBoard:e,currentView:n,tasks:s,userPreferences:r,onSelectBoard:o,onSelectBoardView:i,onCreateBoard:c,onEditBoard:f,onCreateTask:u,onNavigateToBoards:h,onTaskClick:m}){const[g,y]=w.useState(new Set),p=t.filter(E=>!E.isDefault),v=t.find(E=>E.isDefault),C=s?pE(s):null,b=E=>{y(P=>{const R=new Set(P);return R.has(E)?R.delete(E):R.add(E),R})},N=E=>{o(E)},M=(E,P)=>{i?i(E,P):o(E)},D=E=>{v&&i&&i(v,E)},k=E=>{const P=["kanban","list","calendar"];return a.jsxs(oC,{children:[P.map(R=>{const B=kE(R),$=(e==null?void 0:e.id)===E.id&&n===R;return a.jsx(Io,{children:a.jsxs(ui,{onClick:()=>M(E,R),className:V("gap-2",$&&"bg-accent text-accent-foreground"),children:[a.jsx(B,{className:"h-3 w-3"}),a.jsx("span",{children:_E(R)})]})},R)}),a.jsx(Io,{children:a.jsx("div",{className:"px-2 py-1",children:a.jsx("div",{className:"h-px bg-border"})})}),u&&a.jsx(Io,{children:a.jsxs(ui,{onClick:()=>u(E),className:"gap-2 text-muted-foreground hover:text-foreground",children:[a.jsx($n,{className:"h-3 w-3"}),a.jsx("span",{children:"New Task"})]})}),f&&a.jsx(Io,{children:a.jsxs(ui,{onClick:()=>f(E),className:"gap-2 text-muted-foreground hover:text-foreground",children:[a.jsx(en,{className:"h-3 w-3"}),a.jsx("span",{children:"Edit Board"})]})})]})},_=(E,P=!1)=>{const R=(e==null?void 0:e.id)===E.id,B=g.has(E.id);return a.jsxs(hn,{children:[a.jsxs("div",{className:"flex items-center w-full group",children:[a.jsxs(Ln,{onClick:()=>N(E),className:V("gap-2 flex-1 justify-start",R&&!B&&"bg-accent text-accent-foreground"),isActive:R&&!B,children:[a.jsx("div",{className:"w-4 h-4 rounded flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:E.color||"#3B82F6"},children:Fn(E.icon||"Briefcase","h-3 w-3")}),a.jsx("span",{className:"flex-1 truncate",children:E.name})]}),!P&&a.jsx("button",{onClick:$=>{$.stopPropagation(),b(E.id)},className:V("p-1 hover:bg-accent rounded transition-all duration-200 flex-shrink-0 ml-1","opacity-70 hover:opacity-100"),title:B?"Collapse menu":"Expand menu",children:a.jsx(lo,{className:V("h-3 w-3 transition-transform duration-200",B&&"rotate-90")})})]}),!P&&B&&k(E)]},E.id)};return a.jsxs(Hf,{variant:"sidebar",children:[a.jsxs(qf,{children:[a.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[a.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:a.jsx(bE,{className:"w-full h-full"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-semibold",children:"DayFlow"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Task Management"})]})]}),C&&a.jsxs("div",{className:"px-2 py-3 border-t border-border/50",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Next Up"}),a.jsx(CE,{task:C,onClick:m,className:"w-full"})]})]}),a.jsxs(Zf,{children:[a.jsxs(Vr,{children:[a.jsx(Ur,{children:"Quick Actions"}),a.jsx(Br,{children:a.jsxs(Es,{children:[v&&a.jsxs(a.Fragment,{children:[a.jsx(hn,{children:a.jsxs(Ln,{onClick:()=>D("calendar"),className:"gap-2",children:[a.jsx(hf,{className:"h-4 w-4"}),a.jsx("span",{children:"My Calendar"})]})}),a.jsx(hn,{children:a.jsxs(Ln,{onClick:()=>D("list"),className:"gap-2",children:[a.jsx(s0,{className:"h-4 w-4"}),a.jsx("span",{children:"My Tasks"})]})}),a.jsx(hn,{children:a.jsxs(Ln,{onClick:()=>D("kanban"),className:"gap-2",children:[a.jsx(E0,{className:"h-4 w-4"}),a.jsx("span",{children:"Agenda"})]})})]}),s&&r&&a.jsx(hn,{children:a.jsx("div",{className:"p-1",children:a.jsx(Lh,{tasks:s,boards:t,userPreferences:r,variant:"outline",size:"sm",showDropdown:!1,className:"w-full justify-start"})})}),h&&a.jsx(hn,{children:a.jsxs(Ln,{onClick:h,className:"gap-2",children:[a.jsx(Xs,{className:"h-4 w-4"}),a.jsx("span",{children:"View All Boards"})]})}),c&&a.jsx(hn,{children:a.jsxs(Ln,{onClick:c,className:"gap-2",children:[a.jsx($n,{className:"h-4 w-4"}),a.jsx("span",{children:"New Board"})]})})]})})]}),v&&a.jsxs(Vr,{children:[a.jsx(Ur,{children:"Quick Access"}),a.jsx(Br,{children:a.jsx(Es,{children:_(v,!0)})})]}),p.length>0&&a.jsxs(Vr,{children:[a.jsx(Ur,{children:"Your Boards"}),a.jsx(Br,{children:a.jsx(Es,{children:p.map(E=>_(E))})})]})]}),a.jsx(sC,{children:a.jsx(Es,{})}),a.jsx(nC,{})]})}function TE({user:t,onSignOut:e,onOpenSettings:n}){const[s,r]=w.useState(!1),[o,i]=w.useState(!1),[c,f]=w.useState(null),u=()=>T(null,null,function*(){if(e){r(!0);try{const{error:g}=yield e();g&&console.error("Sign out error:",g)}catch(g){console.error("Sign out error:",g)}finally{r(!1)}}}),h=g=>{if(!o){const y=g.currentTarget.getBoundingClientRect();f(y)}i(!o)};if(!t)return null;const m=o&&c&&a.jsxs("div",{className:"fixed w-56 bg-white dark:bg-gray-800 border rounded-md shadow-lg z-[9999] p-2",style:{top:c.bottom+8,right:window.innerWidth-c.right},children:[a.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none",children:(t&&typeof t=="object"&&"email"in t?t.email:null)||"User"}),a.jsxs("p",{className:"text-xs leading-none text-gray-500 dark:text-gray-400",children:["Member since ",t&&typeof t=="object"&&"created_at"in t&&t.created_at?new Date(t.created_at).toLocaleDateString():"Unknown"]})]})}),a.jsx("hr",{className:"my-1"})," ",a.jsxs("button",{className:"w-full text-left px-2 py-1.5 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-sm flex items-center",onClick:()=>{n==null||n(),i(!1)},children:[a.jsx(q0,{className:"mr-2 h-4 w-4"}),"Settings"]}),a.jsx("hr",{className:"my-1"}),e&&a.jsxs("button",{className:"w-full text-left px-2 py-1.5 text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 rounded-sm flex items-center",onClick:u,disabled:s,children:[a.jsx(i0,{className:"mr-2 h-4 w-4"}),s?"Signing Out...":"Sign Out"]})]});return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"relative",children:a.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 rounded-full p-0 bg-primary/10 hover:bg-primary/20",onClick:h,children:a.jsx(Fi,{className:"h-4 w-4"})})}),o&&a.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>i(!1)}),typeof document!="undefined"&&m&&$g.createPortal(m,document.body)]})}const SE={kanban:a.jsx(Xs,{className:"h-4 w-4"}),calendar:a.jsx(nt,{className:"h-4 w-4"}),list:a.jsx(Jr,{className:"h-4 w-4"})},NE={kanban:"Kanban",calendar:"Calendar",list:"List"};function Da({title:t,subtitle:e,board:n,currentView:s,viewMode:r,boardCount:o,onViewChange:i,onCreateDetailedTask:c,onViewModeChange:f,user:u,onSignOut:h,onOpenSettings:m,tasks:g,boards:y,userPreferences:p,children:v}){return a.jsxs("header",{className:" flex h-16 shrink-0 items-center gap-2 px-4 border-b border-border bg-card/50 backdrop-blur-sm relative z-10",children:[a.jsx(zf,{className:"mr-2.5"}),a.jsx(As,{orientation:"vertical",className:"mr-2 h-4"}),a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n&&a.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:n.color||"#3B82F6"},children:Fn(n.icon,"h-5 w-5")}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h1",{className:"text-lg font-semibold text-foreground truncate",children:t}),e&&a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[v,f&&r&&a.jsxs("div",{className:"flex items-center gap-1 bg-muted/30 p-1 rounded-lg border border-border/50",children:[a.jsx(Z,{variant:r==="compact"?"default":"ghost",size:"sm",onClick:()=>f("compact"),className:"h-7 w-7 p-0",title:"Compact grid view",children:a.jsx(Kv,{className:"h-3.5 w-3.5"})}),a.jsx(Z,{variant:r==="grid"?"default":"ghost",size:"sm",onClick:()=>f("grid"),className:"h-7 w-7 p-0",title:"Grid view",children:a.jsx(Nv,{className:"h-3.5 w-3.5"})}),a.jsx(Z,{variant:r==="list"?"default":"ghost",size:"sm",onClick:()=>f("list"),className:"h-7 w-7 p-0",title:"List view",children:a.jsx(Jr,{className:"h-3.5 w-3.5"})})]}),i&&n&&s&&a.jsx("div",{className:"flex items-center gap-1 bg-muted/30 p-1 rounded-lg border border-border/50",children:["kanban","calendar","list"].map(C=>a.jsxs(Z,{variant:s===C?"default":"ghost",size:"sm",className:"gap-1.5 h-7",onClick:()=>{console.log("View change clicked:",C,"for board:",n.name),i(n,C)},children:[SE[C],NE[C]]},C))})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[o!==void 0&&o>0&&a.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 px-2.5 py-1.5 rounded-lg border border-border/50",children:[o," ",o===1?"board":"boards"]}),g&&y&&p&&(s==="kanban"||s==="list")&&a.jsx(Lh,{tasks:g,boards:y,userPreferences:p,variant:"outline",size:"sm",showDropdown:!1,onOpenSettings:m}),c&&a.jsxs(Z,{variant:"default",size:"sm",onClick:c,className:"gap-1.5",children:[a.jsx(Wx,{className:"h-4 w-4"}),"New Task"]}),a.jsx(TE,{user:u,onSignOut:h,onOpenSettings:m})]})]})}var $l="ContextMenu",[ME,OP]=ma($l,[Wu]),It=Wu(),[EE,$h]=ME($l),Vh=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:s,dir:r,modal:o=!0}=t,[i,c]=w.useState(!1),f=It(e),u=Vg(s),h=w.useCallback(m=>{c(m),u(m)},[u]);return a.jsx(EE,{scope:e,open:i,onOpenChange:h,modal:o,children:a.jsx(Ug,F(x({},f),{dir:r,open:i,onOpenChange:h,modal:o,children:n}))})};Vh.displayName=$l;var Uh="ContextMenuTrigger",Bh=w.forwardRef((t,e)=>{const g=t,{__scopeContextMenu:n,disabled:s=!1}=g,r=G(g,["__scopeContextMenu","disabled"]),o=$h(Uh,n),i=It(n),c=w.useRef({x:0,y:0}),f=w.useRef({getBoundingClientRect:()=>DOMRect.fromRect(x({width:0,height:0},c.current))}),u=w.useRef(0),h=w.useCallback(()=>window.clearTimeout(u.current),[]),m=y=>{c.current={x:y.clientX,y:y.clientY},o.onOpenChange(!0)};return w.useEffect(()=>h,[h]),w.useEffect(()=>void(s&&h()),[s,h]),a.jsxs(a.Fragment,{children:[a.jsx(Bg,F(x({},i),{virtualRef:f})),a.jsx(es.span,F(x({"data-state":o.open?"open":"closed","data-disabled":s?"":void 0},r),{ref:e,style:x({WebkitTouchCallout:"none"},t.style),onContextMenu:s?t.onContextMenu:$t(t.onContextMenu,y=>{h(),m(y),y.preventDefault()}),onPointerDown:s?t.onPointerDown:$t(t.onPointerDown,Ro(y=>{h(),u.current=window.setTimeout(()=>m(y),700)})),onPointerMove:s?t.onPointerMove:$t(t.onPointerMove,Ro(h)),onPointerCancel:s?t.onPointerCancel:$t(t.onPointerCancel,Ro(h)),onPointerUp:s?t.onPointerUp:$t(t.onPointerUp,Ro(h))}))]})});Bh.displayName=Uh;var DE="ContextMenuPortal",Gh=t=>{const r=t,{__scopeContextMenu:e}=r,n=G(r,["__scopeContextMenu"]),s=It(e);return a.jsx(Gg,x(x({},s),n))};Gh.displayName=DE;var Wh="ContextMenuContent",Yh=w.forwardRef((t,e)=>{const c=t,{__scopeContextMenu:n}=c,s=G(c,["__scopeContextMenu"]),r=$h(Wh,n),o=It(n),i=w.useRef(!1);return a.jsx(Wg,F(x(x({},o),s),{ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:f=>{var u;(u=t.onCloseAutoFocus)==null||u.call(t,f),!f.defaultPrevented&&i.current&&f.preventDefault(),i.current=!1},onInteractOutside:f=>{var u;(u=t.onInteractOutside)==null||u.call(t,f),!f.defaultPrevented&&!r.modal&&(i.current=!0)},style:F(x({},t.style),{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});Yh.displayName=Wh;var IE="ContextMenuGroup",AE=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(Jg,F(x(x({},r),s),{ref:e}))});AE.displayName=IE;var jE="ContextMenuLabel",RE=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(Kg,F(x(x({},r),s),{ref:e}))});RE.displayName=jE;var PE="ContextMenuItem",Hh=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(Yg,F(x(x({},r),s),{ref:e}))});Hh.displayName=PE;var OE="ContextMenuCheckboxItem",FE=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(Xg,F(x(x({},r),s),{ref:e}))});FE.displayName=OE;var LE="ContextMenuRadioGroup",$E=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(Qg,F(x(x({},r),s),{ref:e}))});$E.displayName=LE;var VE="ContextMenuRadioItem",UE=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(ep,F(x(x({},r),s),{ref:e}))});UE.displayName=VE;var BE="ContextMenuItemIndicator",GE=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(tp,F(x(x({},r),s),{ref:e}))});GE.displayName=BE;var WE="ContextMenuSeparator",zh=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(Hg,F(x(x({},r),s),{ref:e}))});zh.displayName=WE;var YE="ContextMenuArrow",HE=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(np,F(x(x({},r),s),{ref:e}))});HE.displayName=YE;var qh="ContextMenuSub",Zh=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:s,open:r,defaultOpen:o}=t,i=It(e),[c,f]=ga({prop:r,defaultProp:o!=null?o:!1,onChange:s,caller:qh});return a.jsx(zg,F(x({},i),{open:c,onOpenChange:f,children:n}))};Zh.displayName=qh;var zE="ContextMenuSubTrigger",Jh=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(qg,F(x(x({},r),s),{ref:e}))});Jh.displayName=zE;var qE="ContextMenuSubContent",Kh=w.forwardRef((t,e)=>{const o=t,{__scopeContextMenu:n}=o,s=G(o,["__scopeContextMenu"]),r=It(n);return a.jsx(Zg,F(x(x({},r),s),{ref:e,style:F(x({},t.style),{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});Kh.displayName=qE;function Ro(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var ZE=Vh,JE=Bh,KE=Gh,XE=Yh,QE=Hh,eD=zh,tD=Zh,nD=Jh,sD=Kh;function Wr(e){var t=G(e,[]);return a.jsx(ZE,x({"data-slot":"context-menu"},t))}function Yr(e){var t=G(e,[]);return a.jsx(JE,x({"data-slot":"context-menu-trigger"},t))}function tn(e){var t=G(e,[]);return a.jsx(tD,x({"data-slot":"context-menu-sub"},t))}function nn(r){var o=r,{className:t,inset:e,children:n}=o,s=G(o,["className","inset","children"]);return a.jsxs(nD,F(x({"data-slot":"context-menu-sub-trigger","data-inset":e,className:V("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t)},s),{children:[n,a.jsx(lo,{className:"ml-auto"})]}))}function sn(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx(sD,x({"data-slot":"context-menu-sub-content",className:V("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",t)},e))}function Hr(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx(KE,{children:a.jsx(XE,x({"data-slot":"context-menu-content",className:V("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t)},e))})}function oe(r){var o=r,{className:t,inset:e,variant:n="default"}=o,s=G(o,["className","inset","variant"]);return a.jsx(QE,x({"data-slot":"context-menu-item","data-inset":e,"data-variant":n,className:V("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t)},s))}function ft(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx(eD,x({"data-slot":"context-menu-separator",className:V("bg-border -mx-1 my-1 h-px",t)},e))}const vt={slate:["#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#1e293b","#0f172a"],gray:["#f9fafb","#f3f4f6","#e5e7eb","#d1d5db","#9ca3af","#6b7280","#4b5563","#374151","#1f2937"],zinc:["#fafafa","#f4f4f5","#e4e4e7","#d4d4d8","#a1a1aa","#71717a","#52525b","#3f3f46","#27272a"],red:["#fef2f2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c","#991b1b","#7f1d1d"],orange:["#fff7ed","#fed7aa","#fdba74","#fb923c","#f97316","#ea580c","#c2410c","#9a3412","#7c2d12"],amber:["#fffbeb","#fde68a","#fcd34d","#fbbf24","#f59e0b","#d97706","#b45309","#92400e","#78350f"],yellow:["#fefce8","#fef3c7","#fde047","#facc15","#eab308","#ca8a04","#a16207","#854d0e","#713f12"],lime:["#f7fee7","#d9f99d","#bef264","#a3e635","#84cc16","#65a30d","#4d7c0f","#365314","#1a2e05"],green:["#f0fdf4","#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d","#166534","#14532d"],emerald:["#ecfdf5","#a7f3d0","#6ee7b7","#34d399","#10b981","#059669","#047857","#065f46","#064e3b"],teal:["#f0fdfa","#99f6e4","#5eead4","#2dd4bf","#14b8a6","#0d9488","#0f766e","#115e59","#134e4a"],cyan:["#ecfeff","#a5f3fc","#67e8f9","#22d3ee","#06b6d4","#0891b2","#0e7490","#155e75","#164e63"],sky:["#f0f9ff","#bae6fd","#7dd3fc","#38bdf8","#0ea5e9","#0284c7","#0369a1","#075985","#0c4a6e"],blue:["#eff6ff","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af","#1e3a8a"],indigo:["#eef2ff","#c7d2fe","#a5b4fc","#818cf8","#6366f1","#4f46e5","#4338ca","#3730a3","#312e81"],violet:["#f5f3ff","#ddd6fe","#c4b5fd","#a78bfa","#8b5cf6","#7c3aed","#6d28d9","#5b21b6","#4c1d95"],purple:["#faf5ff","#e9d5ff","#d8b4fe","#c084fc","#a855f7","#9333ea","#7e22ce","#6b21a8","#581c87"],fuchsia:["#fdf4ff","#f0abfc","#e879f9","#d946ef","#c026d3","#a21caf","#86198f","#701a75","#581c87"],pink:["#fdf2f8","#fce7f3","#fbcfe8","#f9a8d4","#ec4899","#db2777","#be185d","#9d174d","#831843"],rose:["#fff1f2","#fecdd3","#fda4af","#fb7185","#f43f5e","#e11d48","#be123c","#9f1239","#881337"]},Hs=[vt.blue[4],vt.green[4],vt.purple[4],vt.red[4],vt.orange[4],vt.yellow[4],vt.pink[4],vt.cyan[4],vt.indigo[4],vt.emerald[4],vt.violet[4],vt.rose[4],vt.amber[4],vt.lime[4],vt.teal[4],vt.sky[4],vt.fuchsia[4],vt.slate[5],vt.gray[5],vt.zinc[5]],rD=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),s=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16);return(.299*n+.587*s+.114*r)/255>.5},zs=t=>t&&rD(t)?"text-gray-800":"text-white";function oD({boards:t,tasks:e,onSelectBoard:n,onCreateBoard:s,onUpdateBoard:r,onDeleteBoard:o,onDuplicateBoard:i,user:c,onSignOut:f,onOpenSettings:u,userPreferences:h,onUpdateUserPreferences:m}){const[g,y]=w.useState(!1),[p,v]=w.useState(null),[C,b]=w.useState(!1),[N,M]=w.useState(!1),[D,k]=w.useState("compact"),[_,E]=w.useState({name:"",description:"",color:Hs[0],icon:"Briefcase"}),P=()=>T(null,null,function*(){if(_.name.trim())try{yield s({name:_.name,description:_.description,color:_.color,icon:_.icon}),E({name:"",description:"",color:Hs[0],icon:"Briefcase"}),y(!1)}catch(S){console.error("Failed to create board:",S)}}),R=()=>T(null,null,function*(){if(!(!p||!_.name.trim()))try{yield r(p.id,{name:_.name,description:_.description,color:_.color,icon:_.icon}),v(null),E({name:"",description:"",color:Hs[0],icon:"Briefcase"})}catch(S){console.error("Failed to update board:",S)}}),B=S=>{v(S),E({name:S.name,description:S.description||"",color:S.color||Hs[0],icon:S.icon||"Briefcase"})},$=S=>T(null,null,function*(){if(i)try{yield i(S)}catch(L){console.error("Failed to duplicate board:",L)}}),K=t,te=t.filter(S=>!S.isDefault),le=()=>{switch(D){case"grid":return"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6";case"compact":return"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4";case"list":return"flex flex-col gap-3";default:return"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4"}},ve=S=>{const L="bg-card border border-border rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer group relative overflow-hidden";switch(D){case"grid":return a.jsxs(Wr,{children:[a.jsx(Yr,{asChild:!0,children:a.jsxs("div",{className:V(L,"p-6 h-32"),onClick:()=>n(S),children:[a.jsxs("div",{className:"flex items-start gap-4 h-full",children:[a.jsx("div",{className:V("w-12 h-12 rounded-xl flex items-center justify-center shadow-sm flex-shrink-0",zs(S.color)),style:{backgroundColor:S.color},children:Fn(S.icon||"Briefcase","h-6 w-6")}),a.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between h-full",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground mb-1 truncate",children:S.name}),S.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:S.description})]}),a.jsx("div",{className:"flex items-center text-xs text-muted-foreground mt-2",children:a.jsx("span",{children:"Board â€¢ Click to open"})})]})]}),!S.isDefault&&a.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-all duration-300",children:a.jsx("button",{onClick:j=>{j.stopPropagation(),B(S)},className:"text-muted-foreground hover:text-foreground transition-colors p-2 rounded-lg hover:bg-accent/50",title:"Edit board",children:a.jsx(en,{className:"h-4 w-4"})})})]})}),a.jsxs(Hr,{className:"w-48",children:[a.jsxs(oe,{onClick:()=>n(S),children:[a.jsx(Xs,{className:"mr-2 h-4 w-4"}),"Open Board"]}),a.jsx(ft,{}),a.jsxs(oe,{onClick:()=>B(S),children:[a.jsx(en,{className:"mr-2 h-4 w-4"}),"Edit Board"]}),i&&a.jsxs(oe,{onClick:()=>$(S),children:[a.jsx($r,{className:"mr-2 h-4 w-4"}),"Duplicate Board"]}),!S.isDefault&&a.jsxs(a.Fragment,{children:[a.jsx(ft,{}),a.jsxs(oe,{onClick:()=>{v(S),b(!0)},className:"text-destructive",children:[a.jsx(ds,{className:"mr-2 h-4 w-4"}),"Delete Board"]})]})]})]},S.id);case"compact":return a.jsxs(Wr,{children:[a.jsx(Yr,{asChild:!0,children:a.jsxs("div",{className:V(L,"p-4 aspect-square flex flex-col items-center justify-center text-center"),onClick:()=>n(S),children:[a.jsx("div",{className:V("w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center shadow-sm mb-3",zs(S.color)),style:{backgroundColor:S.color},children:Fn(S.icon||"Briefcase","h-5 w-5 sm:h-6 sm:w-6")}),a.jsx("h3",{className:"text-sm sm:text-base font-semibold text-foreground mb-1 truncate w-full px-1",children:S.name}),S.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 hidden sm:block",children:S.description}),!S.isDefault&&a.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:a.jsx("button",{onClick:j=>{j.stopPropagation(),B(S)},className:"text-muted-foreground hover:text-foreground transition-colors p-1.5 rounded-lg hover:bg-accent/50",title:"Edit board",children:a.jsx(en,{className:"h-3 w-3"})})})]})}),a.jsxs(Hr,{className:"w-48",children:[a.jsxs(oe,{onClick:()=>n(S),children:[a.jsx(Xs,{className:"mr-2 h-4 w-4"}),"Open Board"]}),a.jsx(ft,{}),a.jsxs(oe,{onClick:()=>B(S),children:[a.jsx(en,{className:"mr-2 h-4 w-4"}),"Edit Board"]}),i&&a.jsxs(oe,{onClick:()=>$(S),children:[a.jsx($r,{className:"mr-2 h-4 w-4"}),"Duplicate Board"]}),!S.isDefault&&a.jsxs(a.Fragment,{children:[a.jsx(ft,{}),a.jsxs(oe,{onClick:()=>{v(S),b(!0)},className:"text-destructive",children:[a.jsx(ds,{className:"mr-2 h-4 w-4"}),"Delete Board"]})]})]})]},S.id);case"list":return a.jsxs(Wr,{children:[a.jsx(Yr,{asChild:!0,children:a.jsxs("div",{className:V(L,"p-4 flex items-center gap-4"),onClick:()=>n(S),children:[a.jsx("div",{className:V("w-10 h-10 rounded-lg flex items-center justify-center shadow-sm flex-shrink-0",zs(S.color)),style:{backgroundColor:S.color},children:Fn(S.icon||"Briefcase","h-5 w-5")}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground mb-1 truncate",children:S.name}),S.description&&a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:S.description})]}),a.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:a.jsx("span",{className:"hidden sm:inline",children:"Board"})}),!S.isDefault&&a.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-all duration-300",children:a.jsx("button",{onClick:j=>{j.stopPropagation(),B(S)},className:"text-muted-foreground hover:text-foreground transition-colors p-2 rounded-lg hover:bg-accent/50",title:"Edit board",children:a.jsx(en,{className:"h-4 w-4"})})})]})}),a.jsxs(Hr,{className:"w-48",children:[a.jsxs(oe,{onClick:()=>n(S),children:[a.jsx(Xs,{className:"mr-2 h-4 w-4"}),"Open Board"]}),a.jsx(ft,{}),a.jsxs(oe,{onClick:()=>B(S),children:[a.jsx(en,{className:"mr-2 h-4 w-4"}),"Edit Board"]}),i&&a.jsxs(oe,{onClick:()=>$(S),children:[a.jsx($r,{className:"mr-2 h-4 w-4"}),"Duplicate Board"]}),!S.isDefault&&a.jsxs(a.Fragment,{children:[a.jsx(ft,{}),a.jsxs(oe,{onClick:()=>{v(S),b(!0)},className:"text-destructive",children:[a.jsx(ds,{className:"mr-2 h-4 w-4"}),"Delete Board"]})]})]})]},S.id);default:return null}},we=()=>{const S="bg-card border-2 border-dashed border-muted-foreground/30 rounded-xl hover:border-primary/50 hover:bg-accent/30 transition-all duration-300 cursor-pointer group relative overflow-hidden";switch(D){case"grid":return a.jsx("div",{className:V(S,"p-6 h-32"),onClick:()=>y(!0),children:a.jsxs("div",{className:"flex items-start gap-4 h-full",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-muted/50 flex items-center justify-center shadow-sm flex-shrink-0 group-hover:bg-primary/10 transition-colors",children:a.jsx($n,{className:"h-6 w-6 text-muted-foreground group-hover:text-primary transition-colors"})}),a.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between h-full",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-muted-foreground group-hover:text-foreground mb-1 truncate transition-colors",children:"Create New Board"}),a.jsx("p",{className:"text-sm text-muted-foreground/70 line-clamp-2",children:"Add a new project board"})]}),a.jsx("div",{className:"flex items-center text-xs text-muted-foreground mt-2",children:a.jsx("span",{children:"New Board â€¢ Click to create"})})]})]})},"create-new");case"compact":return a.jsxs("div",{className:V(S,"p-4 aspect-square flex flex-col items-center justify-center text-center"),onClick:()=>y(!0),children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-muted/50 flex items-center justify-center text-lg sm:text-xl mb-3 group-hover:bg-primary/10 transition-colors",children:a.jsx($n,{className:"h-5 w-5 sm:h-6 sm:w-6 text-muted-foreground group-hover:text-primary transition-colors"})}),a.jsx("h3",{className:"text-sm sm:text-base font-semibold text-muted-foreground group-hover:text-foreground transition-colors truncate w-full px-1",children:"Create New Board"}),a.jsx("p",{className:"text-xs text-muted-foreground/70 hidden sm:block mt-1",children:"Add project"})]},"create-new");case"list":return a.jsxs("div",{className:V(S,"p-4 flex items-center gap-4"),onClick:()=>y(!0),children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted/50 flex items-center justify-center text-lg flex-shrink-0 group-hover:bg-primary/10 transition-colors",children:a.jsx($n,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-base font-semibold text-muted-foreground group-hover:text-foreground transition-colors",children:"Create New Board"}),a.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Add a new project board to organize your tasks"})]}),a.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:a.jsx("span",{className:"hidden sm:inline",children:"New Board"})})]},"create-new");default:return null}};w.useEffect(()=>{h&&h.boardDefaultView&&k(h.boardDefaultView)},[h]);const _e=S=>T(null,null,function*(){if(k(S),h&&m)try{yield m({boardDefaultView:S})}catch(L){console.error("Failed to update board view preference:",L)}});return a.jsxs(fo,{children:[a.jsxs("div",{className:"min-h-screen flex w-full",children:[a.jsx(Ea,{boards:t,tasks:e,userPreferences:h||void 0,onSelectBoard:n,onSelectBoardView:S=>{n(S)},onCreateBoard:()=>y(!0),onEditBoard:B,onCreateTask:S=>{n(S)},onTaskClick:S=>{const L=t.find(j=>j.id===S.boardId);L&&n(L)}}),a.jsxs(ho,{children:[a.jsx(Da,{title:"Your Boards",subtitle:"Organize your projects and workflows",viewMode:D,boardCount:te.length,tasks:e||[],userPreferences:h||void 0,onViewModeChange:_e,user:c,onSignOut:f,onOpenSettings:u}),a.jsx("div",{className:"flex-1 p-4 sm:p-6 bg-muted/30",children:t.length>0?a.jsxs("div",{className:le(),children:[K.map(ve),we()]}):a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"w-16 h-16 mx-auto rounded-2xl bg-muted/30 flex items-center justify-center mb-4",children:a.jsx(Xs,{className:"h-8 w-8 text-muted-foreground"})}),a.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Create your first board"}),a.jsx("p",{className:"text-muted-foreground mb-6",children:"Boards help you organize tasks into different projects or workflows. Get started by creating your first board."}),a.jsxs(Z,{onClick:()=>y(!0),size:"lg",className:"gap-2",children:[a.jsx($n,{className:"h-5 w-5"}),"Create Your First Board"]})]})})})]})]}),a.jsx(vn,{open:g||!!p,onOpenChange:S=>{S||(y(!1),v(null),b(!1),M(!1),E({name:"",description:"",color:Hs[0],icon:"Briefcase"}))},children:a.jsx(wn,{className:"sm:max-w-lg max-h-[90vh] overflow-hidden",children:a.jsx("div",{className:"p-6",children:C?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 mx-auto rounded-full bg-destructive/10 flex items-center justify-center mb-4",children:a.jsx(ds,{className:"h-6 w-6 text-destructive"})}),a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Delete Board"}),a.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:['Are you sure you want to delete "',a.jsx("strong",{children:p==null?void 0:p.name}),'"? This action cannot be undone.']})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Z,{variant:"outline",onClick:()=>b(!1),className:"flex-1",children:"Cancel"}),a.jsx(Z,{variant:"destructive",onClick:()=>T(null,null,function*(){p&&(yield o(p.id),v(null),b(!1))}),className:"flex-1",children:"Delete Board"})]})]}):N?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>M(!1),className:"p-2",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("h2",{className:"text-lg font-semibold",children:"Choose Color"})]}),a.jsx("div",{className:"flex items-center justify-center p-6 bg-muted/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:V("w-16 h-16 rounded-xl flex items-center justify-center shadow-lg border-2 border-background",zs(_.color)),style:{backgroundColor:_.color},children:Fn(_.icon,"h-8 w-8")}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:_.name||"Board Name"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Preview"})]})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Popular Colors"}),a.jsx("div",{className:"grid grid-cols-5 gap-3",children:Hs.slice(0,10).map(S=>a.jsx("button",{title:`Select color ${S}`,type:"button",className:V("w-full h-12 rounded-lg border-2 transition-all hover:scale-105 relative",_.color===S?"border-foreground ring-2 ring-primary/30":"border-border hover:border-muted-foreground"),style:{backgroundColor:S},onClick:()=>E(F(x({},_),{color:S})),children:_.color===S&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("svg",{className:V("w-5 h-5 drop-shadow-lg",zs(S)),fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})},S))})]}),a.jsxs("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"All Colors"}),Object.entries(vt).map(([S,L])=>a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-xs font-medium text-muted-foreground capitalize",children:S}),a.jsx("div",{className:"grid grid-cols-9 gap-1",children:L.map((j,W)=>a.jsx("button",{title:`${S} ${W+1}`,type:"button",className:V("w-8 h-8 rounded border transition-all hover:scale-110 relative",_.color===j?"border-foreground ring-1 ring-primary/30":"border-border/50 hover:border-muted-foreground"),style:{backgroundColor:j},onClick:()=>E(F(x({},_),{color:j})),children:_.color===j&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("svg",{className:V("w-3 h-3 drop-shadow-lg",zs(j)),fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})},`${S}-${W}`))})]},S))]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Custom Hex Color"}),a.jsx(Ae,{value:_.color,onChange:S=>E(F(x({},_),{color:S.target.value})),placeholder:"#000000",className:"font-mono text-sm"})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx(Z,{variant:"outline",onClick:()=>M(!1),className:"flex-1",children:"Cancel"}),a.jsx(Z,{onClick:()=>M(!1),className:"flex-1",children:"Select Color"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold",children:p?"Edit Board":"Create Board"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"space-y-2",children:a.jsx(Ae,{placeholder:"Board name",value:_.name,onChange:S=>E(F(x({},_),{name:S.target.value})),onKeyDown:S=>{S.key==="Enter"&&_.name.trim()&&(S.preventDefault(),p?R():P())},className:"text-base"})}),a.jsx("div",{className:"space-y-2",children:a.jsx(va,{placeholder:"Description (optional)",value:_.description,onChange:S=>E(F(x({},_),{description:S.target.value})),rows:2,className:"resize-none text-sm"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Appearance"})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Color"}),a.jsxs(Z,{variant:"outline",onClick:()=>M(!0),className:"w-full h-12 justify-start gap-3",type:"button",children:[a.jsx("div",{className:"w-6 h-6 rounded-lg border border-background shadow-sm",style:{backgroundColor:_.color}}),a.jsx("span",{className:"text-sm",children:"Choose Color"}),a.jsx("div",{className:"ml-auto text-xs font-mono text-muted-foreground",children:_.color.toUpperCase()})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Icon"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded border border-border flex items-center justify-center bg-muted/30",children:Fn(_.icon,"h-5 w-5")}),a.jsx(Ae,{placeholder:"Icon name (e.g., Briefcase)",value:_.icon,onChange:S=>E(F(x({},_),{icon:S.target.value})),className:"flex-1"})]}),a.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-32 overflow-y-auto",children:jf.map(S=>a.jsx("button",{type:"button",className:V("w-8 h-8 rounded border transition-all flex items-center justify-center hover:bg-accent",_.icon===S.name?"border-primary bg-primary/10":"border-border hover:border-muted-foreground"),onClick:()=>E(F(x({},_),{icon:S.name})),title:`Select icon ${S.name}`,children:Fn(S.name,"h-4 w-4")},S.name))})]})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx(Z,{variant:"outline",onClick:()=>{y(!1),v(null)},className:"flex-1",children:"Cancel"}),a.jsx(Z,{onClick:p?R:P,disabled:!_.name.trim(),className:"flex-1",children:p?"Save":"Create"}),p&&!p.isDefault&&a.jsx(Z,{variant:"destructive",size:"sm",onClick:()=>b(!0),className:"px-3",children:a.jsx(ds,{className:"h-4 w-4"})})]})]})})})})]})}const pi={},Lr={};function zr(t,e){try{const s=(pi[t]||(pi[t]=new Intl.DateTimeFormat("en-GB",{timeZone:t,hour:"numeric",timeZoneName:"longOffset"}).format))(e).split("GMT")[1]||"";return s in Lr?Lr[s]:du(s,s.split(":"))}catch(n){if(t in Lr)return Lr[t];const s=t==null?void 0:t.match(aD);return s?du(t,s.slice(1)):NaN}}const aD=/([+-]\d\d):?(\d\d)?/;function du(t,e){const n=+e[0],s=+(e[1]||0);return Lr[t]=n>0?n*60+s:n*60-s}class yn extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(zr(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),Xh(this),ll(this)):this.setTime(Date.now())}static tz(e,...n){return n.length?new yn(...n,e):new yn(Date.now(),e)}withTimeZone(e){return new yn(+this,e)}getTimezoneOffset(){return-zr(this.timeZone,this)}setTime(e){return Date.prototype.setTime.apply(this,arguments),ll(this),+this}[Symbol.for("constructDateFrom")](e){return new yn(+new Date(e),this.timeZone)}}const uu=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!uu.test(t))return;const e=t.replace(uu,"$1UTC");yn.prototype[e]&&(t.startsWith("get")?yn.prototype[t]=function(){return this.internal[e]()}:(yn.prototype[t]=function(){return Date.prototype[e].apply(this.internal,arguments),iD(this),+this},yn.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),ll(this),+this}))});function ll(t){t.internal.setTime(+t),t.internal.setUTCMinutes(t.internal.getUTCMinutes()-t.getTimezoneOffset())}function iD(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),Xh(t)}function Xh(t){const e=zr(t.timeZone,t),n=new Date(+t);n.setUTCHours(n.getUTCHours()-1);const s=-new Date(+t).getTimezoneOffset(),r=-new Date(+n).getTimezoneOffset(),o=s-r,i=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();o&&i&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+o);const c=s-e;c&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+c);const f=zr(t.timeZone,t),h=-new Date(+t).getTimezoneOffset()-f,m=f!==e,g=h-c;if(m&&g){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+g);const y=zr(t.timeZone,t),p=f-y;p&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+p),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+p))}}class Mt extends yn{static tz(e,...n){return n.length?new Mt(...n,e):new Mt(Date.now(),e)}toISOString(){const[e,n,s]=this.tzComponents(),r=`${e}${n}:${s}`;return this.internal.toISOString().slice(0,-1)+r}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,n,s,r]=this.internal.toUTCString().split(" ");return`${e==null?void 0:e.slice(0,-1)} ${s} ${n} ${r}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[n,s,r]=this.tzComponents();return`${e} GMT${n}${s}${r} (${lD(this.timeZone,this)})`}toLocaleString(e,n){return Date.prototype.toLocaleString.call(this,e,F(x({},n),{timeZone:(n==null?void 0:n.timeZone)||this.timeZone}))}toLocaleDateString(e,n){return Date.prototype.toLocaleDateString.call(this,e,F(x({},n),{timeZone:(n==null?void 0:n.timeZone)||this.timeZone}))}toLocaleTimeString(e,n){return Date.prototype.toLocaleTimeString.call(this,e,F(x({},n),{timeZone:(n==null?void 0:n.timeZone)||this.timeZone}))}tzComponents(){const e=this.getTimezoneOffset(),n=e>0?"-":"+",s=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),r=String(Math.abs(e)%60).padStart(2,"0");return[n,s,r]}withTimeZone(e){return new Mt(+this,e)}[Symbol.for("constructDateFrom")](e){return new Mt(+new Date(e),this.timeZone)}}function lD(t,e){return new Intl.DateTimeFormat("en-GB",{timeZone:t,timeZoneName:"long"}).format(e).slice(12)}var pe;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(pe||(pe={}));var gt;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(gt||(gt={}));var rn;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(rn||(rn={}));var Yt;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(Yt||(Yt={}));const fu=5,cD=4;function dD(t,e){const n=e.startOfMonth(t),s=n.getDay()>0?n.getDay():7,r=e.addDays(t,-s+1),o=e.addDays(r,fu*7-1);return e.getMonth(t)===e.getMonth(o)?fu:cD}function Qh(t,e){const n=e.startOfMonth(t),s=n.getDay();return s===1?n:s===0?e.addDays(n,-1*6):e.addDays(n,-1*(s-1))}function uD(t,e){const n=Qh(t,e),s=dD(t,e);return e.addDays(n,s*7-1)}class ns{constructor(e,n){this.Date=Date,this.today=()=>{var s;return(s=this.overrides)!=null&&s.today?this.overrides.today():this.options.timeZone?Mt.tz(this.options.timeZone):new this.Date},this.newDate=(s,r,o)=>{var i;return(i=this.overrides)!=null&&i.newDate?this.overrides.newDate(s,r,o):this.options.timeZone?new Mt(s,r,o,this.options.timeZone):new Date(s,r,o)},this.addDays=(s,r)=>{var o;return(o=this.overrides)!=null&&o.addDays?this.overrides.addDays(s,r):Ht(s,r)},this.addMonths=(s,r)=>{var o;return(o=this.overrides)!=null&&o.addMonths?this.overrides.addMonths(s,r):Di(s,r)},this.addWeeks=(s,r)=>{var o;return(o=this.overrides)!=null&&o.addWeeks?this.overrides.addWeeks(s,r):jr(s,r)},this.addYears=(s,r)=>{var o;return(o=this.overrides)!=null&&o.addYears?this.overrides.addYears(s,r):Ii(s,r)},this.differenceInCalendarDays=(s,r)=>{var o;return(o=this.overrides)!=null&&o.differenceInCalendarDays?this.overrides.differenceInCalendarDays(s,r):ap(s,r)},this.differenceInCalendarMonths=(s,r)=>{var o;return(o=this.overrides)!=null&&o.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(s,r):ip(s,r)},this.eachMonthOfInterval=s=>{var r;return(r=this.overrides)!=null&&r.eachMonthOfInterval?this.overrides.eachMonthOfInterval(s):lp(s)},this.endOfBroadcastWeek=s=>{var r;return(r=this.overrides)!=null&&r.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(s):uD(s,this)},this.endOfISOWeek=s=>{var r;return(r=this.overrides)!=null&&r.endOfISOWeek?this.overrides.endOfISOWeek(s):cp(s)},this.endOfMonth=s=>{var r;return(r=this.overrides)!=null&&r.endOfMonth?this.overrides.endOfMonth(s):dp(s)},this.endOfWeek=(s,r)=>{var o;return(o=this.overrides)!=null&&o.endOfWeek?this.overrides.endOfWeek(s,r):Rr(s,this.options)},this.endOfYear=s=>{var r;return(r=this.overrides)!=null&&r.endOfYear?this.overrides.endOfYear(s):up(s)},this.format=(s,r,o)=>{var c;const i=(c=this.overrides)!=null&&c.format?this.overrides.format(s,r,this.options):Nt(s,r,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(i):i},this.getISOWeek=s=>{var r;return(r=this.overrides)!=null&&r.getISOWeek?this.overrides.getISOWeek(s):fp(s)},this.getMonth=(s,r)=>{var o;return(o=this.overrides)!=null&&o.getMonth?this.overrides.getMonth(s,this.options):hp(s,this.options)},this.getYear=(s,r)=>{var o;return(o=this.overrides)!=null&&o.getYear?this.overrides.getYear(s,this.options):mp(s,this.options)},this.getWeek=(s,r)=>{var o;return(o=this.overrides)!=null&&o.getWeek?this.overrides.getWeek(s,this.options):gp(s,this.options)},this.isAfter=(s,r)=>{var o;return(o=this.overrides)!=null&&o.isAfter?this.overrides.isAfter(s,r):pp(s,r)},this.isBefore=(s,r)=>{var o;return(o=this.overrides)!=null&&o.isBefore?this.overrides.isBefore(s,r):yp(s,r)},this.isDate=s=>{var r;return(r=this.overrides)!=null&&r.isDate?this.overrides.isDate(s):xp(s)},this.isSameDay=(s,r)=>{var o;return(o=this.overrides)!=null&&o.isSameDay?this.overrides.isSameDay(s,r):$o(s,r)},this.isSameMonth=(s,r)=>{var o;return(o=this.overrides)!=null&&o.isSameMonth?this.overrides.isSameMonth(s,r):vp(s,r)},this.isSameYear=(s,r)=>{var o;return(o=this.overrides)!=null&&o.isSameYear?this.overrides.isSameYear(s,r):wp(s,r)},this.max=s=>{var r;return(r=this.overrides)!=null&&r.max?this.overrides.max(s):Cp(s)},this.min=s=>{var r;return(r=this.overrides)!=null&&r.min?this.overrides.min(s):bp(s)},this.setMonth=(s,r)=>{var o;return(o=this.overrides)!=null&&o.setMonth?this.overrides.setMonth(s,r):kp(s,r)},this.setYear=(s,r)=>{var o;return(o=this.overrides)!=null&&o.setYear?this.overrides.setYear(s,r):_p(s,r)},this.startOfBroadcastWeek=(s,r)=>{var o;return(o=this.overrides)!=null&&o.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(s,this):Qh(s,this)},this.startOfDay=s=>{var r;return(r=this.overrides)!=null&&r.startOfDay?this.overrides.startOfDay(s):Vo(s)},this.startOfISOWeek=s=>{var r;return(r=this.overrides)!=null&&r.startOfISOWeek?this.overrides.startOfISOWeek(s):Tp(s)},this.startOfMonth=s=>{var r;return(r=this.overrides)!=null&&r.startOfMonth?this.overrides.startOfMonth(s):Sp(s)},this.startOfWeek=(s,r)=>{var o;return(o=this.overrides)!=null&&o.startOfWeek?this.overrides.startOfWeek(s,this.options):Zs(s,this.options)},this.startOfYear=s=>{var r;return(r=this.overrides)!=null&&r.startOfYear?this.overrides.startOfYear(s):Np(s)},this.options=x({locale:Yu},e),this.overrides=n}getDigitMap(){const{numerals:e="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:e}),s={};for(let r=0;r<10;r++)s[r.toString()]=n.format(r);return s}replaceDigits(e){const n=this.getDigitMap();return e.replace(/\d/g,s=>n[s]||s)}formatNumber(e){return this.replaceDigits(e.toString())}}const Mn=new ns;class em{constructor(e,n,s=Mn){this.date=e,this.displayMonth=n,this.outside=!!(n&&!s.isSameMonth(e,n)),this.dateLib=s}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class fD{constructor(e,n){this.date=e,this.weeks=n}}class hD{constructor(e,n){this.days=n,this.weekNumber=e}}function Vn(t,e,n=!1,s=Mn){let{from:r,to:o}=t;const{differenceInCalendarDays:i,isSameDay:c}=s;return r&&o?(i(o,r)<0&&([r,o]=[o,r]),i(e,r)>=(n?1:0)&&i(o,e)>=(n?1:0)):!n&&o?c(o,e):!n&&r?c(r,e):!1}function tm(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Vl(t){return!!(t&&typeof t=="object"&&"from"in t)}function nm(t){return!!(t&&typeof t=="object"&&"after"in t)}function sm(t){return!!(t&&typeof t=="object"&&"before"in t)}function rm(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function om(t,e){return Array.isArray(t)&&t.every(e.isDate)}function Un(t,e,n=Mn){const s=Array.isArray(e)?e:[e],{isSameDay:r,differenceInCalendarDays:o,isAfter:i}=n;return s.some(c=>{if(typeof c=="boolean")return c;if(n.isDate(c))return r(t,c);if(om(c,n))return c.includes(t);if(Vl(c))return Vn(c,t,!1,n);if(rm(c))return Array.isArray(c.dayOfWeek)?c.dayOfWeek.includes(t.getDay()):c.dayOfWeek===t.getDay();if(tm(c)){const f=o(c.before,t),u=o(c.after,t),h=f>0,m=u<0;return i(c.before,c.after)?m&&h:h||m}return nm(c)?o(t,c.after)>0:sm(c)?o(c.before,t)>0:typeof c=="function"?c(t):!1})}function mD(t,e,n){const{disabled:s,hidden:r,modifiers:o,showOutsideDays:i,broadcastCalendar:c,today:f}=e,{isSameDay:u,isSameMonth:h,startOfMonth:m,isBefore:g,endOfMonth:y,isAfter:p}=n,v=e.startMonth&&m(e.startMonth),C=e.endMonth&&y(e.endMonth),b={[gt.focused]:[],[gt.outside]:[],[gt.disabled]:[],[gt.hidden]:[],[gt.today]:[]},N={};for(const M of t){const{date:D,displayMonth:k}=M,_=!!(k&&!h(D,k)),E=!!(v&&g(D,v)),P=!!(C&&p(D,C)),R=!!(s&&Un(D,s,n)),B=!!(r&&Un(D,r,n))||E||P||!c&&!i&&_||c&&i===!1&&_,$=u(D,f!=null?f:n.today());_&&b.outside.push(M),R&&b.disabled.push(M),B&&b.hidden.push(M),$&&b.today.push(M),o&&Object.keys(o).forEach(K=>{const te=o==null?void 0:o[K];te&&Un(D,te,n)&&(N[K]?N[K].push(M):N[K]=[M])})}return M=>{const D={[gt.focused]:!1,[gt.disabled]:!1,[gt.hidden]:!1,[gt.outside]:!1,[gt.today]:!1},k={};for(const _ in b){const E=b[_];D[_]=E.some(P=>P===M)}for(const _ in N)k[_]=N[_].some(E=>E===M);return x(x({},D),k)}}function gD(t,e,n={}){return Object.entries(t).filter(([,r])=>r===!0).reduce((r,[o])=>(n[o]?r.push(n[o]):e[gt[o]]?r.push(e[gt[o]]):e[rn[o]]&&r.push(e[rn[o]]),r),[e[pe.Day]])}function pD(t){return se.createElement("button",x({},t))}function yD(t){return se.createElement("span",x({},t))}function xD(t){const{size:e=24,orientation:n="left",className:s}=t;return se.createElement("svg",{className:s,width:e,height:e,viewBox:"0 0 24 24"},n==="up"&&se.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&se.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&se.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&se.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function vD(t){const r=t,{day:e,modifiers:n}=r,s=G(r,["day","modifiers"]);return se.createElement("td",x({},s))}function wD(t){const o=t,{day:e,modifiers:n}=o,s=G(o,["day","modifiers"]),r=se.useRef(null);return se.useEffect(()=>{var i;n.focused&&((i=r.current)==null||i.focus())},[n.focused]),se.createElement("button",x({ref:r},s))}function CD(t){const f=t,{options:e,className:n,components:s,classNames:r}=f,o=G(f,["options","className","components","classNames"]),i=[r[pe.Dropdown],n].join(" "),c=e==null?void 0:e.find(({value:u})=>u===o.value);return se.createElement("span",{"data-disabled":o.disabled,className:r[pe.DropdownRoot]},se.createElement(s.Select,x({className:i},o),e==null?void 0:e.map(({value:u,label:h,disabled:m})=>se.createElement(s.Option,{key:u,value:u,disabled:m},h))),se.createElement("span",{className:r[pe.CaptionLabel],"aria-hidden":!0},c==null?void 0:c.label,se.createElement(s.Chevron,{orientation:"down",size:18,className:r[pe.Chevron]})))}function bD(t){return se.createElement("div",x({},t))}function kD(t){return se.createElement("div",x({},t))}function _D(t){const r=t,{calendarMonth:e,displayIndex:n}=r,s=G(r,["calendarMonth","displayIndex"]);return se.createElement("div",x({},s),t.children)}function TD(t){const r=t,{calendarMonth:e,displayIndex:n}=r,s=G(r,["calendarMonth","displayIndex"]);return se.createElement("div",x({},s))}function SD(t){return se.createElement("table",x({},t))}function ND(t){return se.createElement("div",x({},t))}const am=w.createContext(void 0);function po(){const t=w.useContext(am);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function MD(t){const{components:e}=po();return se.createElement(e.Dropdown,x({},t))}function ED(t){const g=t,{onPreviousClick:e,onNextClick:n,previousMonth:s,nextMonth:r}=g,o=G(g,["onPreviousClick","onNextClick","previousMonth","nextMonth"]),{components:i,classNames:c,labels:{labelPrevious:f,labelNext:u}}=po(),h=w.useCallback(y=>{r&&(n==null||n(y))},[r,n]),m=w.useCallback(y=>{s&&(e==null||e(y))},[s,e]);return se.createElement("nav",x({},o),se.createElement(i.PreviousMonthButton,{type:"button",className:c[pe.PreviousMonthButton],tabIndex:s?void 0:-1,"aria-disabled":s?void 0:!0,"aria-label":f(s),onClick:m},se.createElement(i.Chevron,{disabled:s?void 0:!0,className:c[pe.Chevron],orientation:"left"})),se.createElement(i.NextMonthButton,{type:"button",className:c[pe.NextMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":u(r),onClick:h},se.createElement(i.Chevron,{disabled:r?void 0:!0,orientation:"right",className:c[pe.Chevron]})))}function DD(t){const{components:e}=po();return se.createElement(e.Button,x({},t))}function ID(t){return se.createElement("option",x({},t))}function AD(t){const{components:e}=po();return se.createElement(e.Button,x({},t))}function jD(t){const s=t,{rootRef:e}=s,n=G(s,["rootRef"]);return se.createElement("div",F(x({},n),{ref:e}))}function RD(t){return se.createElement("select",x({},t))}function PD(t){const s=t,{week:e}=s,n=G(s,["week"]);return se.createElement("tr",x({},n))}function OD(t){return se.createElement("th",x({},t))}function FD(t){return se.createElement("thead",{"aria-hidden":!0},se.createElement("tr",x({},t)))}function LD(t){const s=t,{week:e}=s,n=G(s,["week"]);return se.createElement("th",x({},n))}function $D(t){return se.createElement("th",x({},t))}function VD(t){return se.createElement("tbody",x({},t))}function UD(t){const{components:e}=po();return se.createElement(e.Dropdown,x({},t))}const BD=Object.freeze(Object.defineProperty({__proto__:null,Button:pD,CaptionLabel:yD,Chevron:xD,Day:vD,DayButton:wD,Dropdown:CD,DropdownNav:bD,Footer:kD,Month:_D,MonthCaption:TD,MonthGrid:SD,Months:ND,MonthsDropdown:MD,Nav:ED,NextMonthButton:DD,Option:ID,PreviousMonthButton:AD,Root:jD,Select:RD,Week:PD,WeekNumber:LD,WeekNumberHeader:$D,Weekday:OD,Weekdays:FD,Weeks:VD,YearsDropdown:UD},Symbol.toStringTag,{value:"Module"}));function GD(t){return x(x({},BD),t)}function WD(t){var n;const e={"data-mode":(n=t.mode)!=null?n:void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([s,r])=>{s.startsWith("data-")&&(e[s]=r)}),e}function Ul(){const t={};for(const e in pe)t[pe[e]]=`rdp-${pe[e]}`;for(const e in gt)t[gt[e]]=`rdp-${gt[e]}`;for(const e in rn)t[rn[e]]=`rdp-${rn[e]}`;for(const e in Yt)t[Yt[e]]=`rdp-${Yt[e]}`;return t}function im(t,e,n){return(n!=null?n:new ns(e)).format(t,"LLLL y")}const YD=im;function HD(t,e,n){return(n!=null?n:new ns(e)).format(t,"d")}function zD(t,e=Mn){return e.format(t,"LLLL")}function qD(t,e=Mn){return t<10?e.formatNumber(`0${t.toLocaleString()}`):e.formatNumber(`${t.toLocaleString()}`)}function ZD(){return""}function JD(t,e,n){return(n!=null?n:new ns(e)).format(t,"cccccc")}function lm(t,e=Mn){return e.format(t,"yyyy")}const KD=lm,XD=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:im,formatDay:HD,formatMonthCaption:YD,formatMonthDropdown:zD,formatWeekNumber:qD,formatWeekNumberHeader:ZD,formatWeekdayName:JD,formatYearCaption:KD,formatYearDropdown:lm},Symbol.toStringTag,{value:"Module"}));function QD(t){return t!=null&&t.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t!=null&&t.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),x(x({},XD),t)}function eI(t,e,n,s,r){const{startOfMonth:o,startOfYear:i,endOfYear:c,eachMonthOfInterval:f,getMonth:u}=r;return f({start:i(t),end:c(t)}).map(g=>{const y=s.formatMonthDropdown(g,r),p=u(g),v=e&&g<o(e)||n&&g>o(n)||!1;return{value:p,label:y,disabled:v}})}function tI(t,e={},n={}){let s=x({},e==null?void 0:e[pe.Day]);return Object.entries(t).filter(([,r])=>r===!0).forEach(([r])=>{s=x(x({},s),n==null?void 0:n[r])}),s}function nI(t,e,n){const s=t.today(),r=e?t.startOfISOWeek(s):t.startOfWeek(s),o=[];for(let i=0;i<7;i++){const c=t.addDays(r,i);o.push(c)}return o}function sI(t,e,n,s){if(!t||!e)return;const{startOfYear:r,endOfYear:o,addYears:i,getYear:c,isBefore:f,isSameYear:u}=s,h=r(t),m=o(e),g=[];let y=h;for(;f(y,m)||u(y,m);)g.push(y),y=i(y,1);return g.map(p=>{const v=n.formatYearDropdown(p,s);return{value:c(p),label:v,disabled:!1}})}function cm(t,e,n){return(n!=null?n:new ns(e)).format(t,"LLLL y")}const rI=cm;function oI(t,e,n,s){let r=(s!=null?s:new ns(n)).format(t,"PPPP");return e!=null&&e.today&&(r=`Today, ${r}`),r}function dm(t,e,n,s){let r=(s!=null?s:new ns(n)).format(t,"PPPP");return e.today&&(r=`Today, ${r}`),e.selected&&(r=`${r}, selected`),r}const aI=dm;function iI(){return""}function lI(t){return"Choose the Month"}function cI(t){return"Go to the Next Month"}function dI(t){return"Go to the Previous Month"}function uI(t,e,n){return(n!=null?n:new ns(e)).format(t,"cccc")}function fI(t,e){return`Week ${t}`}function hI(t){return"Week Number"}function mI(t){return"Choose the Year"}const gI=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:rI,labelDay:aI,labelDayButton:dm,labelGrid:cm,labelGridcell:oI,labelMonthDropdown:lI,labelNav:iI,labelNext:cI,labelPrevious:dI,labelWeekNumber:fI,labelWeekNumberHeader:hI,labelWeekday:uI,labelYearDropdown:mI},Symbol.toStringTag,{value:"Module"})),yo=t=>t instanceof HTMLElement?t:null,yi=t=>{var e;return[...(e=t.querySelectorAll("[data-animated-month]"))!=null?e:[]]},pI=t=>yo(t.querySelector("[data-animated-month]")),xi=t=>yo(t.querySelector("[data-animated-caption]")),vi=t=>yo(t.querySelector("[data-animated-weeks]")),yI=t=>yo(t.querySelector("[data-animated-nav]")),xI=t=>yo(t.querySelector("[data-animated-weekdays]"));function vI(t,e,{classNames:n,months:s,focused:r,dateLib:o}){const i=w.useRef(null),c=w.useRef(s),f=w.useRef(!1);w.useLayoutEffect(()=>{const u=c.current;if(c.current=s,!e||!t.current||!(t.current instanceof HTMLElement)||s.length===0||u.length===0||s.length!==u.length)return;const h=o.isSameMonth(s[0].date,u[0].date),m=o.isAfter(s[0].date,u[0].date),g=m?n[Yt.caption_after_enter]:n[Yt.caption_before_enter],y=m?n[Yt.weeks_after_enter]:n[Yt.weeks_before_enter],p=i.current,v=t.current.cloneNode(!0);if(v instanceof HTMLElement?(yi(v).forEach(M=>{if(!(M instanceof HTMLElement))return;const D=pI(M);D&&M.contains(D)&&M.removeChild(D);const k=xi(M);k&&k.classList.remove(g);const _=vi(M);_&&_.classList.remove(y)}),i.current=v):i.current=null,f.current||h||r)return;const C=p instanceof HTMLElement?yi(p):[],b=yi(t.current);if(b&&b.every(N=>N instanceof HTMLElement)&&C&&C.every(N=>N instanceof HTMLElement)){f.current=!0,t.current.style.isolation="isolate";const N=yI(t.current);N&&(N.style.zIndex="1"),b.forEach((M,D)=>{const k=C[D];if(!k)return;M.style.position="relative",M.style.overflow="hidden";const _=xi(M);_&&_.classList.add(g);const E=vi(M);E&&E.classList.add(y);const P=()=>{f.current=!1,t.current&&(t.current.style.isolation=""),N&&(N.style.zIndex=""),_&&_.classList.remove(g),E&&E.classList.remove(y),M.style.position="",M.style.overflow="",M.contains(k)&&M.removeChild(k)};k.style.pointerEvents="none",k.style.position="absolute",k.style.overflow="hidden",k.setAttribute("aria-hidden","true");const R=xI(k);R&&(R.style.opacity="0");const B=xi(k);B&&(B.classList.add(m?n[Yt.caption_before_exit]:n[Yt.caption_after_exit]),B.addEventListener("animationend",P));const $=vi(k);$&&$.classList.add(m?n[Yt.weeks_before_exit]:n[Yt.weeks_after_exit]),M.insertBefore(k,M.firstChild)})}})}function wI(t,e,n,s){const r=t[0],o=t[t.length-1],{ISOWeek:i,fixedWeeks:c,broadcastCalendar:f}=n!=null?n:{},{addDays:u,differenceInCalendarDays:h,differenceInCalendarMonths:m,endOfBroadcastWeek:g,endOfISOWeek:y,endOfMonth:p,endOfWeek:v,isAfter:C,startOfBroadcastWeek:b,startOfISOWeek:N,startOfWeek:M}=s,D=f?b(r,s):i?N(r):M(r),k=f?g(o):i?y(p(o)):v(p(o)),_=h(k,D),E=m(o,r)+1,P=[];for(let $=0;$<=_;$++){const K=u(D,$);if(e&&C(K,e))break;P.push(K)}const B=(f?35:42)*E;if(c&&P.length<B){const $=B-P.length;for(let K=0;K<$;K++){const te=u(P[P.length-1],1);P.push(te)}}return P}function CI(t){const e=[];return t.reduce((n,s)=>{const r=s.weeks.reduce((o,i)=>[...o,...i.days],e);return[...n,...r]},e)}function bI(t,e,n,s){const{numberOfMonths:r=1}=n,o=[];for(let i=0;i<r;i++){const c=s.addMonths(t,i);if(e&&c>e)break;o.push(c)}return o}function hu(t,e){const{month:n,defaultMonth:s,today:r=e.today(),numberOfMonths:o=1,endMonth:i,startMonth:c}=t;let f=n||s||r;const{differenceInCalendarMonths:u,addMonths:h,startOfMonth:m}=e;if(i&&u(i,f)<0){const g=-1*(o-1);f=h(i,g)}return c&&u(f,c)<0&&(f=c),m(f)}function kI(t,e,n,s){const{addDays:r,endOfBroadcastWeek:o,endOfISOWeek:i,endOfMonth:c,endOfWeek:f,getISOWeek:u,getWeek:h,startOfBroadcastWeek:m,startOfISOWeek:g,startOfWeek:y}=s,p=t.reduce((v,C)=>{const b=n.broadcastCalendar?m(C,s):n.ISOWeek?g(C):y(C),N=n.broadcastCalendar?o(C):n.ISOWeek?i(c(C)):f(c(C)),M=e.filter(E=>E>=b&&E<=N),D=n.broadcastCalendar?35:42;if(n.fixedWeeks&&M.length<D){const E=e.filter(P=>{const R=D-M.length;return P>N&&P<=r(N,R)});M.push(...E)}const k=M.reduce((E,P)=>{const R=n.ISOWeek?u(P):h(P),B=E.find(K=>K.weekNumber===R),$=new em(P,C,s);return B?B.days.push($):E.push(new hD(R,[$])),E},[]),_=new fD(C,k);return v.push(_),v},[]);return n.reverseMonths?p.reverse():p}function _I(t,e){var b,N;let{startMonth:n,endMonth:s}=t;const{startOfYear:r,startOfDay:o,startOfMonth:i,endOfMonth:c,addYears:f,endOfYear:u,newDate:h,today:m}=e,{fromYear:g,toYear:y,fromMonth:p,toMonth:v}=t;!n&&p&&(n=p),!n&&g&&(n=e.newDate(g,0,1)),!s&&v&&(s=v),!s&&y&&(s=h(y,11,31));const C=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return n?n=i(n):g?n=h(g,0,1):!n&&C&&(n=r(f((b=t.today)!=null?b:m(),-100))),s?s=c(s):y?s=h(y,11,31):!s&&C&&(s=u((N=t.today)!=null?N:m())),[n&&o(n),s&&o(s)]}function TI(t,e,n,s){if(n.disableNavigation)return;const{pagedNavigation:r,numberOfMonths:o=1}=n,{startOfMonth:i,addMonths:c,differenceInCalendarMonths:f}=s,u=r?o:1,h=i(t);if(!e)return c(h,u);if(!(f(e,t)<o))return c(h,u)}function SI(t,e,n,s){if(n.disableNavigation)return;const{pagedNavigation:r,numberOfMonths:o}=n,{startOfMonth:i,addMonths:c,differenceInCalendarMonths:f}=s,u=r&&o!=null?o:1,h=i(t);if(!e)return c(h,-u);if(!(f(h,e)<=0))return c(h,-u)}function NI(t){const e=[];return t.reduce((n,s)=>[...n,...s.weeks],e)}function Ia(t,e){const[n,s]=w.useState(t);return[e===void 0?n:e,s]}function MI(t,e){const[n,s]=_I(t,e),{startOfMonth:r,endOfMonth:o}=e,i=hu(t,e),[c,f]=Ia(i,t.month?i:void 0);w.useEffect(()=>{const _=hu(t,e);f(_)},[t.timeZone]);const u=bI(c,s,t,e),h=wI(u,t.endMonth?o(t.endMonth):void 0,t,e),m=kI(u,h,t,e),g=NI(m),y=CI(m),p=SI(c,n,t,e),v=TI(c,s,t,e),{disableNavigation:C,onMonthChange:b}=t,N=_=>g.some(E=>E.days.some(P=>P.isEqualTo(_))),M=_=>{if(C)return;let E=r(_);n&&E<r(n)&&(E=r(n)),s&&E>r(s)&&(E=r(s)),f(E),b==null||b(E)};return{months:m,weeks:g,days:y,navStart:n,navEnd:s,previousMonth:p,nextMonth:v,goToMonth:M,goToDay:_=>{N(_)||M(_.date)}}}var fn;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(fn||(fn={}));function mu(t){return!t[gt.disabled]&&!t[gt.hidden]&&!t[gt.outside]}function EI(t,e,n,s){let r,o=-1;for(const i of t){const c=e(i);mu(c)&&(c[gt.focused]&&o<fn.FocusedModifier?(r=i,o=fn.FocusedModifier):s!=null&&s.isEqualTo(i)&&o<fn.LastFocused?(r=i,o=fn.LastFocused):n(i.date)&&o<fn.Selected?(r=i,o=fn.Selected):c[gt.today]&&o<fn.Today&&(r=i,o=fn.Today))}return r||(r=t.find(i=>mu(e(i)))),r}function DI(t,e,n,s,r,o,i){const{ISOWeek:c,broadcastCalendar:f}=o,{addDays:u,addMonths:h,addWeeks:m,addYears:g,endOfBroadcastWeek:y,endOfISOWeek:p,endOfWeek:v,max:C,min:b,startOfBroadcastWeek:N,startOfISOWeek:M,startOfWeek:D}=i;let _={day:u,week:m,month:h,year:g,startOfWeek:E=>f?N(E,i):c?M(E):D(E),endOfWeek:E=>f?y(E):c?p(E):v(E)}[t](n,e==="after"?1:-1);return e==="before"&&s?_=C([s,_]):e==="after"&&r&&(_=b([r,_])),_}function um(t,e,n,s,r,o,i,c=0){if(c>365)return;const f=DI(t,e,n.date,s,r,o,i),u=!!(o.disabled&&Un(f,o.disabled,i)),h=!!(o.hidden&&Un(f,o.hidden,i)),m=f,g=new em(f,m,i);return!u&&!h?g:um(t,e,g,s,r,o,i,c+1)}function II(t,e,n,s,r){const{autoFocus:o}=t,[i,c]=w.useState(),f=EI(e.days,n,s||(()=>!1),i),[u,h]=w.useState(o?f:void 0);return{isFocusTarget:v=>!!(f!=null&&f.isEqualTo(v)),setFocused:h,focused:u,blur:()=>{c(u),h(void 0)},moveFocus:(v,C)=>{if(!u)return;const b=um(v,C,u,e.navStart,e.navEnd,t,r);b&&(e.goToDay(b),h(b))}}}function AI(t,e){const{selected:n,required:s,onSelect:r}=t,[o,i]=Ia(n,r?n:void 0),c=r?n:o,{isSameDay:f}=e,u=y=>{var p;return(p=c==null?void 0:c.some(v=>f(v,y)))!=null?p:!1},{min:h,max:m}=t;return{selected:c,select:(y,p,v)=>{let C=[...c!=null?c:[]];if(u(y)){if((c==null?void 0:c.length)===h||s&&(c==null?void 0:c.length)===1)return;C=c==null?void 0:c.filter(b=>!f(b,y))}else(c==null?void 0:c.length)===m?C=[y]:C=[...C,y];return r||i(C),r==null||r(C,y,p,v),C},isSelected:u}}function jI(t,e,n=0,s=0,r=!1,o=Mn){const{from:i,to:c}=e||{},{isSameDay:f,isAfter:u,isBefore:h}=o;let m;if(!i&&!c)m={from:t,to:n>0?void 0:t};else if(i&&!c)f(i,t)?r?m={from:i,to:void 0}:m=void 0:h(t,i)?m={from:t,to:i}:m={from:i,to:t};else if(i&&c)if(f(i,t)&&f(c,t))r?m={from:i,to:c}:m=void 0;else if(f(i,t))m={from:i,to:n>0?void 0:t};else if(f(c,t))m={from:t,to:n>0?void 0:t};else if(h(t,i))m={from:t,to:c};else if(u(t,i))m={from:i,to:t};else if(u(t,c))m={from:i,to:t};else throw new Error("Invalid range");if(m!=null&&m.from&&(m!=null&&m.to)){const g=o.differenceInCalendarDays(m.to,m.from);s>0&&g>s?m={from:t,to:void 0}:n>1&&g<n&&(m={from:t,to:void 0})}return m}function RI(t,e,n=Mn){const s=Array.isArray(e)?e:[e];let r=t.from;const o=n.differenceInCalendarDays(t.to,t.from),i=Math.min(o,6);for(let c=0;c<=i;c++){if(s.includes(r.getDay()))return!0;r=n.addDays(r,1)}return!1}function gu(t,e,n=Mn){return Vn(t,e.from,!1,n)||Vn(t,e.to,!1,n)||Vn(e,t.from,!1,n)||Vn(e,t.to,!1,n)}function PI(t,e,n=Mn){const s=Array.isArray(e)?e:[e];if(s.filter(c=>typeof c!="function").some(c=>typeof c=="boolean"?c:n.isDate(c)?Vn(t,c,!1,n):om(c,n)?c.some(f=>Vn(t,f,!1,n)):Vl(c)?c.from&&c.to?gu(t,{from:c.from,to:c.to},n):!1:rm(c)?RI(t,c.dayOfWeek,n):tm(c)?n.isAfter(c.before,c.after)?gu(t,{from:n.addDays(c.after,1),to:n.addDays(c.before,-1)},n):Un(t.from,c,n)||Un(t.to,c,n):nm(c)||sm(c)?Un(t.from,c,n)||Un(t.to,c,n):!1))return!0;const i=s.filter(c=>typeof c=="function");if(i.length){let c=t.from;const f=n.differenceInCalendarDays(t.to,t.from);for(let u=0;u<=f;u++){if(i.some(h=>h(c)))return!0;c=n.addDays(c,1)}}return!1}function OI(t,e){const{disabled:n,excludeDisabled:s,selected:r,required:o,onSelect:i}=t,[c,f]=Ia(r,i?r:void 0),u=i?r:c;return{selected:u,select:(g,y,p)=>{const{min:v,max:C}=t,b=g?jI(g,u,v,C,o,e):void 0;return s&&n&&(b!=null&&b.from)&&b.to&&PI({from:b.from,to:b.to},n,e)&&(b.from=g,b.to=void 0),i||f(b),i==null||i(b,g,y,p),b},isSelected:g=>u&&Vn(u,g,!1,e)}}function FI(t,e){const{selected:n,required:s,onSelect:r}=t,[o,i]=Ia(n,r?n:void 0),c=r?n:o,{isSameDay:f}=e;return{selected:c,select:(m,g,y)=>{let p=m;return!s&&c&&c&&f(m,c)&&(p=void 0),r||i(p),r==null||r(p,m,g,y),p},isSelected:m=>c?f(c,m):!1}}function LI(t,e){const n=FI(t,e),s=AI(t,e),r=OI(t,e);switch(t.mode){case"single":return n;case"multiple":return s;case"range":return r;default:return}}function $I(t){var Sr,Us;let e=t;e.timeZone&&(e=x({},t),e.today&&(e.today=new Mt(e.today,e.timeZone)),e.month&&(e.month=new Mt(e.month,e.timeZone)),e.defaultMonth&&(e.defaultMonth=new Mt(e.defaultMonth,e.timeZone)),e.startMonth&&(e.startMonth=new Mt(e.startMonth,e.timeZone)),e.endMonth&&(e.endMonth=new Mt(e.endMonth,e.timeZone)),e.mode==="single"&&e.selected?e.selected=new Mt(e.selected,e.timeZone):e.mode==="multiple"&&e.selected?e.selected=(Sr=e.selected)==null?void 0:Sr.map(Me=>new Mt(Me,e.timeZone)):e.mode==="range"&&e.selected&&(e.selected={from:e.selected.from?new Mt(e.selected.from,e.timeZone):void 0,to:e.selected.to?new Mt(e.selected.to,e.timeZone):void 0}));const{components:n,formatters:s,labels:r,dateLib:o,locale:i,classNames:c}=w.useMemo(()=>{const Me=x(x({},Yu),e.locale);return{dateLib:new ns({locale:Me,weekStartsOn:e.broadcastCalendar?1:e.weekStartsOn,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},e.dateLib),components:GD(e.components),formatters:QD(e.formatters),labels:x(x({},gI),e.labels),locale:Me,classNames:x(x({},Ul()),e.classNames)}},[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.components,e.formatters,e.labels,e.classNames]),{captionLayout:f,mode:u,navLayout:h,numberOfMonths:m=1,onDayBlur:g,onDayClick:y,onDayFocus:p,onDayKeyDown:v,onDayMouseEnter:C,onDayMouseLeave:b,onNextClick:N,onPrevClick:M,showWeekNumber:D,styles:k}=e,{formatCaption:_,formatDay:E,formatMonthDropdown:P,formatWeekNumber:R,formatWeekNumberHeader:B,formatWeekdayName:$,formatYearDropdown:K}=s,te=MI(e,o),{days:le,months:ve,navStart:we,navEnd:_e,previousMonth:S,nextMonth:L,goToMonth:j}=te,W=mD(le,e,o),{isSelected:Q,select:A,selected:H}=(Us=LI(e,o))!=null?Us:{},{blur:O,focused:q,isFocusTarget:ne,moveFocus:U,setFocused:Ce}=II(e,te,W,Q!=null?Q:()=>!1,o),{labelDayButton:dt,labelGridcell:yt,labelGrid:Je,labelMonthDropdown:Pt,labelNav:In,labelPrevious:bs,labelNext:Ot,labelWeekday:An,labelWeekNumber:ks,labelWeekNumberHeader:Wa,labelYearDropdown:Vs}=r,Ge=w.useMemo(()=>nI(o,e.ISOWeek),[o,e.ISOWeek]),jn=u!==void 0||y!==void 0,xt=w.useCallback(()=>{S&&(j(S),M==null||M(S))},[S,j,M]),qt=w.useCallback(()=>{L&&(j(L),N==null||N(L))},[j,L,N]),Tr=w.useCallback((Me,Ke)=>ze=>{ze.preventDefault(),ze.stopPropagation(),Ce(Me),A==null||A(Me.date,Ke,ze),y==null||y(Me.date,Ke,ze)},[A,y,Ce]),bo=w.useCallback((Me,Ke)=>ze=>{Ce(Me),p==null||p(Me.date,Ke,ze)},[p,Ce]),Ya=w.useCallback((Me,Ke)=>ze=>{O(),g==null||g(Me.date,Ke,ze)},[O,g]),Ha=w.useCallback((Me,Ke)=>ze=>{const un={ArrowLeft:["day",e.dir==="rtl"?"after":"before"],ArrowRight:["day",e.dir==="rtl"?"before":"after"],ArrowDown:["week","after"],ArrowUp:["week","before"],PageUp:[ze.shiftKey?"year":"month","before"],PageDown:[ze.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(un[ze.key]){ze.preventDefault(),ze.stopPropagation();const[Bt,Bs]=un[ze.key];U(Bt,Bs)}v==null||v(Me.date,Ke,ze)},[U,v,e.dir]),za=w.useCallback((Me,Ke)=>ze=>{C==null||C(Me.date,Ke,ze)},[C]),qa=w.useCallback((Me,Ke)=>ze=>{b==null||b(Me.date,Ke,ze)},[b]),Za=w.useCallback(Me=>Ke=>{const ze=Number(Ke.target.value),un=o.setMonth(o.startOfMonth(Me),ze);j(un)},[o,j]),Ja=w.useCallback(Me=>Ke=>{const ze=Number(Ke.target.value),un=o.setYear(o.startOfMonth(Me),ze);j(un)},[o,j]),{className:Ka,style:Xa}=w.useMemo(()=>({className:[c[pe.Root],e.className].filter(Boolean).join(" "),style:x(x({},k==null?void 0:k[pe.Root]),e.style)}),[c,e.className,e.style,k]),Qa=WD(e),ko=w.useRef(null);vI(ko,!!e.animate,{classNames:c,months:ve,focused:q,dateLib:o});const ei={dayPickerProps:e,selected:H,select:A,isSelected:Q,months:ve,nextMonth:L,previousMonth:S,goToMonth:j,getModifiers:W,components:n,classNames:c,styles:k,labels:r,formatters:s};return se.createElement(am.Provider,{value:ei},se.createElement(n.Root,x({rootRef:e.animate?ko:void 0,className:Ka,style:Xa,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"]},Qa),se.createElement(n.Months,{className:c[pe.Months],style:k==null?void 0:k[pe.Months]},!e.hideNavigation&&!h&&se.createElement(n.Nav,{"data-animated-nav":e.animate?"true":void 0,className:c[pe.Nav],style:k==null?void 0:k[pe.Nav],"aria-label":In(),onPreviousClick:xt,onNextClick:qt,previousMonth:S,nextMonth:L}),ve.map((Me,Ke)=>{const ze=eI(Me.date,we,_e,s,o),un=sI(we,_e,s,o);return se.createElement(n.Month,{"data-animated-month":e.animate?"true":void 0,className:c[pe.Month],style:k==null?void 0:k[pe.Month],key:Ke,displayIndex:Ke,calendarMonth:Me},h==="around"&&!e.hideNavigation&&Ke===0&&se.createElement(n.PreviousMonthButton,{type:"button",className:c[pe.PreviousMonthButton],tabIndex:S?void 0:-1,"aria-disabled":S?void 0:!0,"aria-label":bs(S),onClick:xt,"data-animated-button":e.animate?"true":void 0},se.createElement(n.Chevron,{disabled:S?void 0:!0,className:c[pe.Chevron],orientation:e.dir==="rtl"?"right":"left"})),se.createElement(n.MonthCaption,{"data-animated-caption":e.animate?"true":void 0,className:c[pe.MonthCaption],style:k==null?void 0:k[pe.MonthCaption],calendarMonth:Me,displayIndex:Ke},f!=null&&f.startsWith("dropdown")?se.createElement(n.DropdownNav,{className:c[pe.Dropdowns],style:k==null?void 0:k[pe.Dropdowns]},f==="dropdown"||f==="dropdown-months"?se.createElement(n.MonthsDropdown,{className:c[pe.MonthsDropdown],"aria-label":Pt(),classNames:c,components:n,disabled:!!e.disableNavigation,onChange:Za(Me.date),options:ze,style:k==null?void 0:k[pe.Dropdown],value:o.getMonth(Me.date)}):se.createElement("span",null,P(Me.date,o)),f==="dropdown"||f==="dropdown-years"?se.createElement(n.YearsDropdown,{className:c[pe.YearsDropdown],"aria-label":Vs(o.options),classNames:c,components:n,disabled:!!e.disableNavigation,onChange:Ja(Me.date),options:un,style:k==null?void 0:k[pe.Dropdown],value:o.getYear(Me.date)}):se.createElement("span",null,K(Me.date,o)),se.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},_(Me.date,o.options,o))):se.createElement(n.CaptionLabel,{className:c[pe.CaptionLabel],role:"status","aria-live":"polite"},_(Me.date,o.options,o))),h==="around"&&!e.hideNavigation&&Ke===m-1&&se.createElement(n.NextMonthButton,{type:"button",className:c[pe.NextMonthButton],tabIndex:L?void 0:-1,"aria-disabled":L?void 0:!0,"aria-label":Ot(L),onClick:qt,"data-animated-button":e.animate?"true":void 0},se.createElement(n.Chevron,{disabled:L?void 0:!0,className:c[pe.Chevron],orientation:e.dir==="rtl"?"left":"right"})),Ke===m-1&&h==="after"&&!e.hideNavigation&&se.createElement(n.Nav,{"data-animated-nav":e.animate?"true":void 0,className:c[pe.Nav],style:k==null?void 0:k[pe.Nav],"aria-label":In(),onPreviousClick:xt,onNextClick:qt,previousMonth:S,nextMonth:L}),se.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":Je(Me.date,o.options,o)||void 0,className:c[pe.MonthGrid],style:k==null?void 0:k[pe.MonthGrid]},!e.hideWeekdays&&se.createElement(n.Weekdays,{"data-animated-weekdays":e.animate?"true":void 0,className:c[pe.Weekdays],style:k==null?void 0:k[pe.Weekdays]},D&&se.createElement(n.WeekNumberHeader,{"aria-label":Wa(o.options),className:c[pe.WeekNumberHeader],style:k==null?void 0:k[pe.WeekNumberHeader],scope:"col"},B()),Ge.map((Bt,Bs)=>se.createElement(n.Weekday,{"aria-label":An(Bt,o.options,o),className:c[pe.Weekday],key:Bs,style:k==null?void 0:k[pe.Weekday],scope:"col"},$(Bt,o.options,o)))),se.createElement(n.Weeks,{"data-animated-weeks":e.animate?"true":void 0,className:c[pe.Weeks],style:k==null?void 0:k[pe.Weeks]},Me.weeks.map((Bt,Bs)=>se.createElement(n.Week,{className:c[pe.Week],key:Bt.weekNumber,style:k==null?void 0:k[pe.Week],week:Bt},D&&se.createElement(n.WeekNumber,{week:Bt,style:k==null?void 0:k[pe.WeekNumber],"aria-label":ks(Bt.weekNumber,{locale:i}),className:c[pe.WeekNumber],scope:"row",role:"rowheader"},R(Bt.weekNumber,o)),Bt.days.map(Tt=>{const{date:Gt}=Tt,Le=W(Tt);if(Le[gt.focused]=!Le.hidden&&!!(q!=null&&q.isEqualTo(Tt)),Le[rn.selected]=(Q==null?void 0:Q(Gt))||Le.selected,Vl(H)){const{from:J,to:Y}=H;Le[rn.range_start]=!!(J&&Y&&o.isSameDay(Gt,J)),Le[rn.range_end]=!!(J&&Y&&o.isSameDay(Gt,Y)),Le[rn.range_middle]=Vn(H,Gt,!0,o)}const ti=tI(Le,k,e.modifiersStyles),ni=gD(Le,c,e.modifiersClassNames),I=!jn&&!Le.hidden?yt(Gt,Le,o.options,o):void 0;return se.createElement(n.Day,{key:`${o.format(Gt,"yyyy-MM-dd")}_${o.format(Tt.displayMonth,"yyyy-MM")}`,day:Tt,modifiers:Le,className:ni.join(" "),style:ti,role:"gridcell","aria-selected":Le.selected||void 0,"aria-label":I,"data-day":o.format(Gt,"yyyy-MM-dd"),"data-month":Tt.outside?o.format(Gt,"yyyy-MM"):void 0,"data-selected":Le.selected||void 0,"data-disabled":Le.disabled||void 0,"data-hidden":Le.hidden||void 0,"data-outside":Tt.outside||void 0,"data-focused":Le.focused||void 0,"data-today":Le.today||void 0},!Le.hidden&&jn?se.createElement(n.DayButton,{className:c[pe.DayButton],style:k==null?void 0:k[pe.DayButton],type:"button",day:Tt,modifiers:Le,disabled:Le.disabled||void 0,tabIndex:ne(Tt)?0:-1,"aria-label":dt(Gt,Le,o.options,o),onClick:Tr(Tt,Le),onBlur:Ya(Tt,Le),onFocus:bo(Tt,Le),onKeyDown:Ha(Tt,Le),onMouseEnter:za(Tt,Le),onMouseLeave:qa(Tt,Le)},E(Gt,o.options,o)):!Le.hidden&&E(Tt.date,o.options,o))}))))))})),e.footer&&se.createElement(n.Footer,{className:c[pe.Footer],style:k==null?void 0:k[pe.Footer],role:"status","aria-live":"polite"},e.footer)))}function Bl(f){var u=f,{className:t,classNames:e,showOutsideDays:n=!0,captionLayout:s="label",buttonVariant:r="ghost",formatters:o,components:i}=u,c=G(u,["className","classNames","showOutsideDays","captionLayout","buttonVariant","formatters","components"]);const h=Ul();return a.jsx($I,x({showOutsideDays:n,className:V("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,t),captionLayout:s,formatters:x({formatMonthDropdown:m=>m.toLocaleString("default",{month:"short"})},o),classNames:x({root:V("w-fit",h.root),months:V("flex gap-4 flex-col md:flex-row relative",h.months),month:V("flex flex-col w-full gap-4",h.month),nav:V("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",h.nav),button_previous:V(Ui({variant:r}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",h.button_previous),button_next:V(Ui({variant:r}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",h.button_next),month_caption:V("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",h.month_caption),dropdowns:V("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",h.dropdowns),dropdown_root:V("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",h.dropdown_root),dropdown:V("absolute inset-0 opacity-0",h.dropdown),caption_label:V("select-none font-medium",s==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",h.caption_label),table:"w-full border-collapse",weekdays:V("flex",h.weekdays),weekday:V("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",h.weekday),week:V("flex w-full mt-2",h.week),week_number_header:V("select-none w-(--cell-size)",h.week_number_header),week_number:V("text-[0.8rem] select-none text-muted-foreground",h.week_number),day:V("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",h.day),range_start:V("rounded-l-md bg-accent",h.range_start),range_middle:V("rounded-none",h.range_middle),range_end:V("rounded-r-md bg-accent",h.range_end),today:V("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",h.today),outside:V("text-muted-foreground aria-selected:text-muted-foreground",h.outside),disabled:V("text-muted-foreground opacity-50",h.disabled),hidden:V("invisible",h.hidden)},e),components:x({Root:p=>{var v=p,{className:m,rootRef:g}=v,y=G(v,["className","rootRef"]);return a.jsx("div",x({"data-slot":"calendar",ref:g,className:V(m)},y))},Chevron:p=>{var v=p,{className:m,orientation:g}=v,y=G(v,["className","orientation"]);return g==="left"?a.jsx(Ml,x({className:V("size-4",m)},y)):g==="right"?a.jsx(lo,x({className:V("size-4",m)},y)):a.jsx(Nl,x({className:V("size-4",m)},y))},DayButton:m=>a.jsx(fm,x({},m)),WeekNumber:y=>{var p=y,{children:m}=p,g=G(p,["children"]);return a.jsx("td",F(x({},g),{children:a.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:m})}))}},i)},c))}const fm=w.forwardRef((o,r)=>{var i=o,{className:t,day:e,modifiers:n}=i,s=G(i,["className","day","modifiers"]);const c=Ul(),f=w.useRef(null),u=r||f;return w.useEffect(()=>{n.focused&&typeof u=="object"&&(u!=null&&u.current)&&u.current.focus()},[n.focused,u]),a.jsx(Z,x({ref:u,variant:"ghost",size:"icon","data-day":e.date.toLocaleDateString(),"data-selected-single":n.selected&&!n.range_start&&!n.range_end&&!n.range_middle,"data-range-start":n.range_start,"data-range-end":n.range_end,"data-range-middle":n.range_middle,className:V("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",c.day,t)},s))});fm.displayName="CalendarDayButton";function Ls(t){const e=w.useMemo(()=>(f,u=!1)=>{if(!f)return"";const h=typeof f=="string"?new Date(f):f;if(isNaN(h.getTime()))return"";const m=(t==null?void 0:t.dateFormat)||"MM/DD/YYYY",g=(t==null?void 0:t.timeFormat)||"12h";let y="";switch(m){case"DD/MM/YYYY":{y=h.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});break}case"YYYY-MM-DD":{y=h.toLocaleDateString("en-CA");break}case"MM/DD/YYYY":default:y=h.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});break}if(u){const p=h.toLocaleTimeString("en-US",{hour12:g==="12h",hour:"2-digit",minute:"2-digit"});return`${y} ${p}`}return y},[t==null?void 0:t.dateFormat,t==null?void 0:t.timeFormat]),n=w.useMemo(()=>f=>t!=null&&t.showCompletedTasks?f:f.filter(u=>u.status!=="done"),[t==null?void 0:t.showCompletedTasks]),s=w.useMemo(()=>f=>{const u=(t==null?void 0:t.taskSortBy)||"priority",h=(t==null?void 0:t.taskSortOrder)||"asc";return[...f].sort((g,y)=>{let p=0;switch(u){case"priority":{p=(y.priority||2)-(g.priority||2);break}case"dueDate":{const v=g.dueDate?new Date(g.dueDate).getTime():1/0,C=y.dueDate?new Date(y.dueDate).getTime():1/0;p=v-C;break}case"created":{const v=new Date(g.createdAt).getTime();p=new Date(y.createdAt).getTime()-v;break}case"alphabetical":p=g.title.localeCompare(y.title);break;default:p=0}return h==="desc"?-p:p})},[t==null?void 0:t.taskSortBy,t==null?void 0:t.taskSortOrder]),r=w.useMemo(()=>{var f;return(f=t==null?void 0:t.weekStartsOn)!=null?f:0},[t==null?void 0:t.weekStartsOn]),o=w.useMemo(()=>(t==null?void 0:t.autoSave)!==!1,[t==null?void 0:t.autoSave]),i=w.useMemo(()=>{var f;return(f=t==null?void 0:t.calendarDefaultZoom)!=null?f:1},[t==null?void 0:t.calendarDefaultZoom]),c=w.useMemo(()=>{var f;return(f=t==null?void 0:t.calendarDefaultView)!=null?f:"3-day"},[t==null?void 0:t.calendarDefaultView]);return{formatDate:e,filterTasks:n,sortTasks:s,weekStartsOn:r,isAutoSaveEnabled:o,calendarDefaultZoom:i,calendarDefaultView:c,preferences:t}}function VI(t,e,n){const{onEdit:s,onDuplicate:r,onDelete:o,onUpdateTask:i,onMoveTask:c,onUpdateTimeEstimate:f,onToggleComplete:u}=e,{formatDate:h}=Ls(n),m=()=>{s(t)},g=()=>T(null,null,function*(){r&&(yield r(t))}),y=()=>T(null,null,function*(){o&&(yield o(t.id))}),p=()=>{u&&u(t.id)},v=R=>T(null,null,function*(){i&&(yield i(t.id,{priority:R}))}),C=R=>T(null,null,function*(){f&&(yield f(t.id,R))}),b=R=>T(null,null,function*(){c&&(yield c(t.id,R))}),N=()=>T(null,null,function*(){if(i&&c){const R=new Date;R.setHours(9,0,0,0),yield i(t.id,{scheduledDate:R.toISOString()}),yield c(t.id,"today")}}),M=()=>T(null,null,function*(){if(i&&c){const R=new Date;R.setDate(R.getDate()+1),R.setHours(9,0,0,0),yield i(t.id,{scheduledDate:R.toISOString()}),yield c(t.id,"this-week")}}),D=()=>T(null,null,function*(){if(i&&c){const R=new Date,B=(6-R.getDay())%7,$=new Date(R);$.setDate(R.getDate()+B),$.setHours(10,0,0,0),yield i(t.id,{scheduledDate:$.toISOString()}),yield c(t.id,"this-week")}}),k=()=>T(null,null,function*(){i&&(yield i(t.id,{scheduledDate:void 0}))}),_=R=>T(null,null,function*(){i&&(yield i(t.id,{recurring:{pattern:R,interval:1,daysOfWeek:[],daysOfMonth:[],monthsOfYear:[]}}))}),E=()=>T(null,null,function*(){i&&(yield i(t.id,{recurring:void 0}))}),P=w.useCallback(R=>{var te,le,ve;if(!R.recurring)return null;const{pattern:B,interval:$}=R.recurring;let K="";switch(B){case"daily":K=$===1?"Daily":`Every ${$} days`;break;case"weekly":if(K=$===1?"Weekly":`Every ${$} weeks`,(te=R.recurring.daysOfWeek)!=null&&te.length){const we=R.recurring.daysOfWeek.map(_e=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][_e]).join(", ");K+=` on ${we}`}break;case"monthly":if(K=$===1?"Monthly":`Every ${$} months`,(le=R.recurring.daysOfMonth)!=null&&le.length){const we=R.recurring.daysOfMonth.map(_e=>_e+(_e===1?"st":_e===2?"nd":_e===3?"rd":"th")).join(", ");K+=` on the ${we}`}break;case"yearly":if(K=$===1?"Yearly":`Every ${$} years`,(ve=R.recurring.monthsOfYear)!=null&&ve.length){const we=R.recurring.monthsOfYear.map(_e=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][_e-1]).join(", ");K+=` in ${we}`}break}return R.recurring.endDate&&(K+=` until ${h(R.recurring.endDate)}`),K},[h]);return{handleEdit:m,handleDuplicate:g,handleDelete:y,handleToggleComplete:p,handleQuickPriority:v,handleQuickTime:C,handleMoveToStatus:b,handleScheduleToday:N,handleScheduleTomorrow:M,handleScheduleThisWeekend:D,handleClearSchedule:k,handleSetRecurringPattern:_,handleClearRecurring:E,getRecurringText:P,formatDate:h}}class UI{constructor(e){as(this,"tokens",null);as(this,"CALENDAR_API_BASE","https://www.googleapis.com/calendar/v3");as(this,"TASKS_API_BASE","https://www.googleapis.com/tasks/v1");as(this,"AUTH_BASE","https://accounts.google.com/o/oauth2/v2/auth");as(this,"SCOPES","https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/tasks");as(this,"userId",null);as(this,"refreshPromise",null);this.config=e}setUserId(e){this.userId=e}getAuthUrl(){const e=new URLSearchParams({client_id:this.config.clientId,redirect_uri:this.config.redirectUri,scope:this.SCOPES,response_type:"code",access_type:"offline",prompt:"consent",include_granted_scopes:"true"});return`${this.AUTH_BASE}?${e.toString()}`}exchangeCodeForTokens(e){return T(this,null,function*(){if(!this.userId)throw new Error("User ID must be set before exchanging tokens");try{console.log("Exchanging authorization code for tokens via secure backend...");const{data:{session:n}}=yield ye.auth.getSession();if(!n)throw new Error("No active session");const{data:s,error:r}=yield ye.functions.invoke("google-oauth-exchange",{body:{code:e,redirectUri:this.config.redirectUri},headers:{Authorization:`Bearer ${n.access_token}`}});if(r)throw console.error("Token exchange failed:",r),new Error(`Token exchange failed: ${r.message||"Unknown error"}`);if(!(s!=null&&s.success))throw console.error("Token exchange response:",s),new Error("Token exchange was not successful");if(!(yield this.loadStoredTokens()))throw new Error("Tokens were not stored properly");console.log("âœ… Google Calendar tokens exchanged and stored successfully")}catch(n){throw console.error("âŒ Failed to exchange code for tokens:",n),n}})}loadStoredTokens(){return T(this,null,function*(){if(!this.userId)return console.log("No user ID set, cannot load tokens"),!1;try{console.log(`ðŸ” Loading stored tokens for user: ${this.userId}`);const{data:e,error:n}=yield ye.from("google_calendar_tokens").select("*").eq("id",this.userId).maybeSingle();if(n)return console.error("Error loading tokens from database:",n),this.tokens=null,!1;if(!e)return console.log("No Google Calendar tokens found for user in database"),this.tokens=null,!1;console.log("ðŸ“¦ Found stored tokens, checking validity..."),this.tokens={id:e.id,accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:e.expires_at,scope:e.scope,createdAt:e.created_at,updatedAt:e.updated_at};const s=new Date(this.tokens.expiresAt),r=new Date,o=s.getTime()-r.getTime();return console.log(`â° Token expires in ${Math.round(o/6e4)} minutes`),yield this.ensureValidTokens(),console.log("âœ… Google Calendar tokens loaded successfully"),!0}catch(e){return console.error("âŒ Failed to load stored tokens:",e),this.tokens=null,!1}})}ensureValidTokens(){return T(this,null,function*(){if(!this.tokens)throw new Error("No tokens available");const e=new Date(this.tokens.expiresAt),n=new Date,s=e.getTime()-n.getTime(),r=10*60*1e3;if(s<=r){if(console.log(`ðŸ”„ Access token expires in ${Math.round(s/6e4)} minutes, refreshing...`),this.refreshPromise){console.log("â³ Waiting for existing refresh attempt..."),yield this.refreshPromise;return}this.refreshPromise=this.refreshAccessToken();try{yield this.refreshPromise}finally{this.refreshPromise=null}}})}refreshAccessToken(){return T(this,null,function*(){var e,n,s,r;if(!this.tokens||!this.userId)throw new Error("No tokens or user ID available for refresh");try{console.log("ðŸ”„ Refreshing Google Calendar access token via secure backend...");const{data:{session:o}}=yield ye.auth.getSession();if(!o)throw new Error("No active session");const{data:i,error:c}=yield ye.functions.invoke("google-oauth-exchange",{method:"PUT",headers:{Authorization:`Bearer ${o.access_token}`}});if(c)throw console.error("Token refresh failed:",c),(e=c.message)!=null&&e.includes("401")||(n=c.message)!=null&&n.includes("403")||(s=c.message)!=null&&s.includes("needsReauth")||(r=c.message)!=null&&r.includes("invalid_grant")?(console.warn("Authentication error detected, forcing re-authentication"),yield this.disconnect(),new Error("Authentication expired. Please reconnect to Google Calendar.")):new Error(`Failed to refresh access token: ${c.message}. Please try again.`);if(!(i!=null&&i.access_token)||!(i!=null&&i.expires_at))throw console.error("Invalid refresh response:",i),i!=null&&i.needsReauth?(yield this.disconnect(),new Error("Authentication expired. Please reconnect to Google Calendar.")):new Error("Invalid refresh response. Please try again later.");this.tokens=F(x({},this.tokens),{accessToken:i.access_token,expiresAt:i.expires_at,updatedAt:new Date().toISOString()}),console.log("âœ… Access token refreshed successfully")}catch(o){throw console.error("âŒ Failed to refresh access token:",o),o}})}isUserAuthenticated(){return this.tokens!==null&&this.userId!==null}disconnect(){return T(this,null,function*(){if(this.userId)try{yield ye.from("google_calendar_tokens").delete().eq("id",this.userId)}catch(e){console.error("Failed to remove tokens from database:",e)}this.tokens=null,this.refreshPromise=null,typeof window!="undefined"&&localStorage.removeItem("google_calendar_tokens"),console.log("âœ… Google Calendar disconnected successfully")})}makeApiRequest(s){return T(this,arguments,function*(e,n={}){if(!this.tokens)throw new Error("Not authenticated with Google Calendar");yield this.ensureValidTokens();const r=yield fetch(`${this.CALENDAR_API_BASE}${e}`,F(x({},n),{headers:x({Authorization:`Bearer ${this.tokens.accessToken}`,"Content-Type":"application/json"},n.headers)}));if(!r.ok){const o=yield r.text();if(console.error("API request failed:",{status:r.status,statusText:r.statusText,body:o}),r.status===401)try{yield this.refreshAccessToken();const i=yield fetch(`${this.CALENDAR_API_BASE}${e}`,F(x({},n),{headers:x({Authorization:`Bearer ${this.tokens.accessToken}`,"Content-Type":"application/json"},n.headers)}));if(!i.ok)throw new Error(`API request failed after refresh: ${i.status}`);return yield i.json()}catch(i){throw console.error("Failed to refresh and retry request:",i),new Error("Authentication expired. Please reconnect to Google Calendar.")}else throw new Error(`API request failed: ${r.status} ${r.statusText} - ${o}`)}return yield r.json()})}taskToCalendarEvent(e,n){const s=e.scheduledDate||e.startDate;if(!s)throw new Error("Task must have a scheduled date or start date");const r=new Date(s),o=new Date(r.getTime()+e.timeEstimate*60*1e3),c=`${n!=null&&n.name?`[${n.name}] `:""}${e.title}`,f=[n!=null&&n.name?`ðŸ“‹ Board: ${n.name}`:"",e.description?`ðŸ“ ${e.description}`:"",`â±ï¸ Time Estimate: ${e.timeEstimate} minutes`,e.priority?`ðŸ”¥ Priority: ${this.getPriorityText(e.priority)}`:"",e.category?`ðŸ·ï¸ Category: ${e.category}`:"",e.status?`ðŸ“Š Status: ${this.getStatusText(e.status)}`:"",e.tags&&e.tags.length>0?`ðŸ·ï¸ Tags: ${e.tags.join(", ")}`:"",e.progressPercentage>0?`ðŸ“ˆ Progress: ${e.progressPercentage}%`:"",e.timeSpent>0?`â° Time Spent: ${e.timeSpent} minutes`:"","","ðŸ“± Created in DayFlow"].filter(Boolean).join(`
`);return x({summary:c,description:f,start:{dateTime:r.toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},end:{dateTime:o.toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},source:{title:"DayFlow",url:window.location.origin}},(n==null?void 0:n.color)&&this.getCalendarColorId(n.color)&&{colorId:this.getCalendarColorId(n.color)})}getPriorityText(e){return{1:"Low",2:"Medium",3:"High",4:"Critical"}[e]||"Medium"}getStatusText(e){return{backlog:"Backlog","this-week":"This Week",today:"Today",done:"Done"}[e]||e}getCalendarColorId(e){return{"#1f2937":"8","#dc2626":"11","#ea580c":"6","#ca8a04":"5","#16a34a":"10","#0ea5e9":"9","#7c3aed":"3","#db2777":"4","#ef4444":"11","#f97316":"6","#eab308":"5","#22c55e":"10","#3b82f6":"9","#8b5cf6":"3","#ec4899":"4","#6b7280":"8"}[e.toLowerCase()]||null}createEvent(e,n="primary",s){return T(this,null,function*(){if(!this.isUserAuthenticated())throw new Error("Not authenticated with Google Calendar");try{const r=this.taskToCalendarEvent(e,s);return(yield this.makeApiRequest(`/calendars/${n}/events`,{method:"POST",body:JSON.stringify(r)})).id}catch(r){throw console.error("Error creating Google Calendar event:",r),r}})}updateEvent(e,n,s="primary",r){return T(this,null,function*(){if(!this.isUserAuthenticated())throw new Error("Not authenticated with Google Calendar");try{const o=this.taskToCalendarEvent(e,r);yield this.makeApiRequest(`/calendars/${s}/events/${n}`,{method:"PUT",body:JSON.stringify(o)})}catch(o){throw console.error("Error updating Google Calendar event:",o),o}})}deleteEvent(e,n="primary"){return T(this,null,function*(){if(!this.isUserAuthenticated())throw new Error("Not authenticated with Google Calendar");try{yield this.makeApiRequest(`/calendars/${n}/events/${e}`,{method:"DELETE"})}catch(s){throw console.error("Error deleting Google Calendar event:",s),s}})}getCalendarList(){return T(this,null,function*(){if(!this.isUserAuthenticated())throw new Error("Not authenticated with Google Calendar");try{return(yield this.makeApiRequest("/users/me/calendarList")).items||[]}catch(e){throw console.error("Error fetching calendar list:",e),e}})}getEvents(e="primary",n,s){return T(this,null,function*(){if(!this.isUserAuthenticated())throw new Error("Not authenticated with Google Calendar");try{const r=new Date,o=n||new Date(r.getTime()-7*24*60*60*1e3),i=s||new Date(r.getTime()+30*24*60*60*1e3),c=new URLSearchParams({timeMin:o.toISOString(),timeMax:i.toISOString(),singleEvents:"true",orderBy:"startTime",maxResults:"100"});return(yield this.makeApiRequest(`/calendars/${encodeURIComponent(e)}/events?${c}`)).items||[]}catch(r){throw console.error("Error fetching calendar events:",r),r}})}makeTasksApiRequest(s){return T(this,arguments,function*(e,n={}){if(!this.tokens)throw new Error("Not authenticated with Google Tasks");yield this.ensureValidTokens();const r=yield fetch(`${this.TASKS_API_BASE}${e}`,F(x({},n),{headers:x({Authorization:`Bearer ${this.tokens.accessToken}`,"Content-Type":"application/json"},n.headers)}));if(!r.ok){const o=yield r.text();if(console.error("Tasks API request failed:",{status:r.status,statusText:r.statusText,body:o}),r.status===401)try{yield this.refreshAccessToken();const i=yield fetch(`${this.TASKS_API_BASE}${e}`,F(x({},n),{headers:x({Authorization:`Bearer ${this.tokens.accessToken}`,"Content-Type":"application/json"},n.headers)}));if(!i.ok)throw new Error(`Tasks API request failed after refresh: ${i.status}`);return yield i.json()}catch(i){throw console.error("Failed to refresh and retry Tasks request:",i),new Error("Authentication expired. Please reconnect to Google Calendar.")}else throw new Error(`Tasks API request failed: ${r.status} ${r.statusText} - ${o}`)}return yield r.json()})}hasTasksScope(){return T(this,null,function*(){if(!this.tokens)return!1;try{return(yield fetch(`${this.TASKS_API_BASE}/users/@me/lists?maxResults=1`,{headers:{Authorization:`Bearer ${this.tokens.accessToken}`,"Content-Type":"application/json"}})).ok}catch(e){return console.log("Tasks scope check failed:",e),!1}})}getTaskLists(){return T(this,null,function*(){if(!this.isUserAuthenticated())throw new Error("Not authenticated with Google Tasks");if(!(yield this.hasTasksScope()))throw new Error("Google Tasks access not granted. Please reconnect to Google Calendar to enable Google Tasks import.");try{console.log("ðŸ“‹ Fetching Google Task Lists...");const s=(yield this.makeTasksApiRequest("/users/@me/lists")).items||[];return console.log(`ðŸ“‹ Found ${s.length} task lists`),s}catch(n){throw console.error("âŒ Failed to fetch task lists:",n),n instanceof Error&&n.message.includes("403")?new Error("Google Tasks access denied. Please reconnect to Google Calendar to grant Tasks permissions."):n instanceof Error&&n.message.includes("401")?new Error("Authentication expired. Please reconnect to Google Calendar."):n}})}getTasks(e="@default",n=!0,s=!1){return T(this,null,function*(){if(!this.isUserAuthenticated())throw new Error("Not authenticated with Google Tasks");try{console.log(`ðŸ“‹ Fetching Google Tasks from list: ${e}...`);const r=new URLSearchParams({showCompleted:n.toString(),showDeleted:s.toString(),showHidden:"true",maxResults:"100"}),i=(yield this.makeTasksApiRequest(`/lists/${e}/tasks?${r.toString()}`)).items||[];return console.log(`ðŸ“‹ Found ${i.length} tasks in list ${e}`),i}catch(r){throw console.error("âŒ Failed to fetch tasks:",r),r}})}filterImportableTasks(e){return e.filter(n=>{var s;return!(!n.title||n.title.trim()===""||n.deleted||n.parent||(s=n.notes)!=null&&s.includes("ðŸ“± Created in DayFlow"))})}googleTaskToTask(e,n){const s=e.due?new Date(e.due).toISOString():void 0;let r=e.notes||"",o=2,i="",c=[],f=60;if(r.includes("ðŸ”¥ Priority:")){const h=r.match(/ðŸ”¥ Priority: (Low|Medium|High|Critical)/);h&&(o={Low:1,Medium:2,High:3,Critical:4}[h[1]]||2)}if(r.includes("ðŸ·ï¸ Category:")){const h=r.match(/ðŸ·ï¸ Category: ([^\n]+)/);h&&(i=h[1].trim())}if(r.includes("ðŸ·ï¸ Tags:")){const h=r.match(/ðŸ·ï¸ Tags: ([^\n]+)/);h&&(c=h[1].split(",").map(m=>m.trim()).filter(Boolean))}if(r.includes("â±ï¸ Time Estimate:")){const h=r.match(/â±ï¸ Time Estimate: (\d+)/);h&&(f=parseInt(h[1])||60)}r=r.replace(/ðŸ“‹ Board: [^\n]+\n?/g,"").replace(/â±ï¸ Time Estimate: [^\n]+\n?/g,"").replace(/ðŸ”¥ Priority: [^\n]+\n?/g,"").replace(/ðŸ·ï¸ Category: [^\n]+\n?/g,"").replace(/ðŸ“Š Status: [^\n]+\n?/g,"").replace(/ðŸ·ï¸ Tags: [^\n]+\n?/g,"").replace(/ðŸ“ˆ Progress: [^\n]+\n?/g,"").replace(/â° Time Spent: [^\n]+\n?/g,"").replace(/ðŸ“± Created in DayFlow\n?/g,"").replace(/ðŸ“ /g,"").trim();let u="backlog";if(e.status==="completed")u="done";else if(s){const h=new Date,m=new Date(s),g=new Date(h.getFullYear(),h.getMonth(),h.getDate()),y=new Date(m.getFullYear(),m.getMonth(),m.getDate());y.getTime()===g.getTime()?u="today":y>g?Math.ceil((y.getTime()-g.getTime())/864e5)<=7&&(u="this-week"):u="today"}return{title:e.title.trim(),description:r,timeEstimate:f,priority:o,status:u,position:0,scheduledDate:s,startDate:s,dueDate:s,category:i,tags:c,boardId:n,progressPercentage:e.status==="completed"?100:0,timeSpent:0,labels:[],attachments:[],googleCalendarEventId:`task_${e.id}`,googleCalendarSynced:!1}}importTasks(e="@default",n,s=!1){return T(this,null,function*(){if(!this.isUserAuthenticated())throw new Error("Not authenticated with Google Tasks");try{console.log("ðŸ”„ Fetching tasks from Google Tasks...");const r=yield this.getTasks(e,s,!1);console.log(`ðŸ“‹ Found ${r.length} tasks`);const o=this.filterImportableTasks(r);return console.log(`âœ… ${o.length} tasks suitable for import`),o.map(c=>this.googleTaskToTask(c,n))}catch(r){throw console.error("âŒ Failed to import tasks from Google Tasks:",r),r}})}filterImportableEvents(e){return e.filter(n=>{var s,r,o,i,c;if(((s=n.source)==null?void 0:s.title)==="DayFlow"||(r=n.description)!=null&&r.includes("ðŸ“± Created in DayFlow")||(o=n.start)!=null&&o.date&&!((i=n.start)!=null&&i.dateTime)||!n.summary||n.summary.trim()===""||n.recurringEventId||n.status==="cancelled")return!1;if(n.attendees){const f=(c=n.organizer)==null?void 0:c.email,u=n.attendees.find(h=>h.email===f);if(u&&u.responseStatus==="declined")return!1}return!0})}eventToTask(e,n){var v,C,b,N;const s=((v=e.start)==null?void 0:v.dateTime)||((C=e.start)==null?void 0:C.date),r=((b=e.end)==null?void 0:b.dateTime)||((N=e.end)==null?void 0:N.date);let o=60;if(s&&r){const M=new Date(s),D=new Date(r);o=Math.max(15,Math.round((D.getTime()-M.getTime())/(1e3*60)))}let i=e.description||"",c=2,f="",u=[];if(i.includes("ðŸ”¥ Priority:")){const M=i.match(/ðŸ”¥ Priority: (Low|Medium|High|Critical)/);M&&(c={Low:1,Medium:2,High:3,Critical:4}[M[1]]||2)}if(i.includes("ðŸ·ï¸ Category:")){const M=i.match(/ðŸ·ï¸ Category: ([^\n]+)/);M&&(f=M[1].trim())}if(i.includes("ðŸ·ï¸ Tags:")){const M=i.match(/ðŸ·ï¸ Tags: ([^\n]+)/);M&&(u=M[1].split(",").map(D=>D.trim()).filter(Boolean))}i=i.replace(/ðŸ“‹ Board: [^\n]+\n?/g,"").replace(/â±ï¸ Time Estimate: [^\n]+\n?/g,"").replace(/ðŸ”¥ Priority: [^\n]+\n?/g,"").replace(/ðŸ·ï¸ Category: [^\n]+\n?/g,"").replace(/ðŸ“Š Status: [^\n]+\n?/g,"").replace(/ðŸ·ï¸ Tags: [^\n]+\n?/g,"").replace(/ðŸ“ˆ Progress: [^\n]+\n?/g,"").replace(/â° Time Spent: [^\n]+\n?/g,"").replace(/ðŸ“± Created in DayFlow\n?/g,"").replace(/ðŸ“ /g,"").trim();const h=new Date,m=new Date(s),g=new Date(h.getFullYear(),h.getMonth(),h.getDate()),y=new Date(m.getFullYear(),m.getMonth(),m.getDate());let p="backlog";return y.getTime()===g.getTime()?p="today":y>g?Math.ceil((y.getTime()-g.getTime())/864e5)<=7&&(p="this-week"):p="done",{title:e.summary.trim(),description:i,timeEstimate:o,priority:c,status:p,position:0,scheduledDate:s?new Date(s).toISOString():void 0,startDate:s?new Date(s).toISOString():void 0,dueDate:r?new Date(r).toISOString():void 0,category:f,tags:u,boardId:n,progressPercentage:p==="done"?100:0,timeSpent:0,labels:[],attachments:[],googleCalendarEventId:e.id,googleCalendarSynced:!0}}importEvents(e="primary",n,s,r,o=!0,i="@default",c=!1){return T(this,null,function*(){if(!this.isUserAuthenticated())throw new Error("Not authenticated with Google Calendar");try{console.log("ðŸ”„ Fetching events and tasks from Google...");const f=[];console.log("ðŸ“… Fetching events from Google Calendar...");const u=yield this.getEvents(e,s,r);console.log(`ðŸ“… Found ${u.length} events`);const h=this.filterImportableEvents(u);console.log(`âœ… ${h.length} events suitable for import`);const m=h.map(g=>this.eventToTask(g,n));if(f.push(...m),o)try{console.log("ðŸ“‹ Fetching tasks from Google Tasks...");const g=yield this.importTasks(i,n,c);console.log(`âœ… ${g.length} Google Tasks suitable for import`),f.push(...g)}catch(g){console.warn("âš ï¸ Failed to import Google Tasks (continuing with Calendar events only):",g)}return console.log(`ðŸŽ‰ Total: ${f.length} items ready for import (${m.length} events, ${f.length-m.length} tasks)`),f}catch(f){throw console.error("âŒ Failed to import from Google:",f),f}})}}let cl=null;function hm(t){return cl=new UI(t),cl}function Et(){return cl}function mm({task:t,children:e,onEdit:n,onDuplicate:s,onDelete:r,onUpdateTask:o,onMoveTask:i,onUpdateTimeEstimate:c,onToggleComplete:f,userPreferences:u,onManualSyncTask:h,onManualUnsyncTask:m}){const[g,y]=w.useState(!1),p=Et(),v=(p==null?void 0:p.isUserAuthenticated())||!1,C=VI(t,{onEdit:n,onDuplicate:s,onDelete:r,onUpdateTask:o,onMoveTask:i,onUpdateTimeEstimate:c,onToggleComplete:f},u),b=()=>T(null,null,function*(){if(h)try{yield h(t)}catch(M){console.error("Failed to sync task to Google Calendar:",M)}}),N=()=>T(null,null,function*(){if(m)try{yield m(t)}catch(M){console.error("Failed to unsync task from Google Calendar:",M)}});return a.jsxs(a.Fragment,{children:[a.jsxs(Wr,{children:[a.jsx(Yr,{asChild:!0,children:e}),a.jsxs(Hr,{className:"w-64",children:[a.jsxs(oe,{onClick:C.handleEdit,children:[a.jsx(en,{className:"mr-2 h-4 w-4"}),"Edit Task"]}),a.jsxs(oe,{onClick:C.handleDuplicate,children:[a.jsx($r,{className:"mr-2 h-4 w-4"}),"Duplicate Task"]}),a.jsx(ft,{}),a.jsxs(oe,{onClick:C.handleToggleComplete,children:[a.jsx(ms,{className:"mr-2 h-4 w-4"}),t.status==="done"?"Mark as Incomplete":"Mark as Complete"]}),a.jsx(ft,{}),a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(xa,{className:"mr-2 h-4 w-4"}),"Priority"]}),a.jsxs(sn,{children:[a.jsx(oe,{onClick:()=>C.handleQuickPriority(4),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),"Critical (4)"]})}),a.jsx(oe,{onClick:()=>C.handleQuickPriority(3),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),"High (3)"]})}),a.jsx(oe,{onClick:()=>C.handleQuickPriority(2),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),"Medium (2)"]})}),a.jsx(oe,{onClick:()=>C.handleQuickPriority(1),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),"Low (1)"]})})]})]},"priority-submenu"),a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Time Estimate"]}),a.jsxs(sn,{children:[a.jsx(oe,{onClick:()=>C.handleQuickTime(15),children:"15 minutes"}),a.jsx(oe,{onClick:()=>C.handleQuickTime(30),children:"30 minutes"}),a.jsx(oe,{onClick:()=>C.handleQuickTime(60),children:"1 hour"}),a.jsx(oe,{onClick:()=>C.handleQuickTime(120),children:"2 hours"}),a.jsx(oe,{onClick:()=>C.handleQuickTime(240),children:"4 hours"}),a.jsx(ft,{}),a.jsx(oe,{onClick:()=>C.handleQuickTime(0),children:"Clear"})]})]},"time-estimate-submenu"),a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(nt,{className:"mr-2 h-4 w-4"}),"Schedule"]}),a.jsxs(sn,{children:[a.jsxs(oe,{onSelect:M=>{M.preventDefault(),M.stopPropagation(),y(!0)},children:[a.jsx(nt,{className:"mr-2 h-4 w-4"}),"Pick a date..."]}),a.jsx(ft,{}),a.jsxs(oe,{onClick:C.handleScheduleToday,children:[a.jsx(nt,{className:"mr-2 h-4 w-4"}),"Today (9 AM)"]}),a.jsxs(oe,{onClick:C.handleScheduleTomorrow,children:[a.jsx(nt,{className:"mr-2 h-4 w-4"}),"Tomorrow (9 AM)"]}),a.jsxs(oe,{onClick:C.handleScheduleThisWeekend,children:[a.jsx(nt,{className:"mr-2 h-4 w-4"}),"This Weekend (10 AM)"]}),a.jsx(ft,{}),a.jsxs(oe,{onClick:C.handleClearSchedule,children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Clear Schedule"]})]})]},"schedule-submenu"),o&&a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Recurring"]}),a.jsxs(sn,{children:[a.jsx(oe,{onClick:()=>C.handleSetRecurringPattern("daily"),children:"Daily"}),a.jsx(oe,{onClick:()=>C.handleSetRecurringPattern("weekly"),children:"Weekly"}),a.jsx(oe,{onClick:()=>C.handleSetRecurringPattern("monthly"),children:"Monthly"}),a.jsx(oe,{onClick:()=>C.handleSetRecurringPattern("yearly"),children:"Yearly"}),a.jsx(ft,{}),a.jsx(oe,{onClick:C.handleClearRecurring,children:"Clear Recurring"})]})]},"recurring-submenu"),v&&a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Google Calendar"]}),a.jsxs(sn,{children:[t.googleCalendarSynced?a.jsxs(a.Fragment,{children:[a.jsxs(oe,{disabled:!0,children:[a.jsx(ms,{className:"mr-2 h-4 w-4"}),"Synced to Calendar"]}),a.jsx(ft,{}),a.jsxs(oe,{onClick:N,children:[a.jsx(Zx,{className:"mr-2 h-4 w-4"}),"Remove from Calendar"]})]}):a.jsxs(oe,{onClick:b,disabled:!t.scheduledDate&&!t.startDate,children:[a.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Sync to Calendar"]}),!t.scheduledDate&&!t.startDate&&a.jsxs(a.Fragment,{children:[a.jsx(ft,{}),a.jsx("div",{className:"px-2 py-1 text-xs text-muted-foreground",children:"Schedule task first to sync"})]})]})]},"google-calendar-submenu"),a.jsx(ft,{}),i&&a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(ff,{className:"mr-2 h-4 w-4"}),"Move to..."]}),a.jsxs(sn,{children:[t.status!=="backlog"&&a.jsxs(oe,{onClick:()=>C.handleMoveToStatus("backlog"),children:[a.jsx(nr,{className:"mr-2 h-4 w-4"}),"Backlog"]}),t.status!=="this-week"&&a.jsxs(oe,{onClick:()=>C.handleMoveToStatus("this-week"),children:[a.jsx(Xo,{className:"mr-2 h-4 w-4"}),"This Week"]}),t.status!=="today"&&a.jsxs(oe,{onClick:()=>C.handleMoveToStatus("today"),children:[a.jsx(Xo,{className:"mr-2 h-4 w-4"}),"Today"]}),t.status!=="done"&&a.jsxs(oe,{onClick:()=>C.handleMoveToStatus("done"),children:[a.jsx(ms,{className:"mr-2 h-4 w-4"}),"Done"]})]})]},"move-to-submenu"),a.jsx(ft,{}),a.jsxs(oe,{onClick:C.handleDelete,className:"text-destructive",children:[a.jsx(ds,{className:"mr-2 h-4 w-4"}),"Delete Task"]})]})]}),a.jsx(vn,{open:g,onOpenChange:y,children:a.jsxs(wn,{className:"max-w-md",children:[a.jsxs(gs,{children:[a.jsx(Yn,{children:"Schedule Task"}),a.jsxs(Hn,{children:['Set date and time for "',t.title,'"']})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Date"}),a.jsx("div",{className:"border rounded-md p-3 bg-background",children:a.jsx(Bl,{mode:"single",selected:t.scheduledDate?new Date(t.scheduledDate):void 0,onSelect:M=>{if(M&&o){const D=t.scheduledDate?new Date(t.scheduledDate):new Date,k=new Date(M);k.setHours(D.getHours()||9,D.getMinutes()||0,0,0),o(t.id,{scheduledDate:k.toISOString()})}},className:"w-full"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Time"}),a.jsx(Ae,{type:"time",value:t.scheduledDate?(()=>{const M=new Date(t.scheduledDate);return`${M.getHours().toString().padStart(2,"0")}:${M.getMinutes().toString().padStart(2,"0")}`})():"09:00",onChange:M=>{if(M.target.value&&o){const[D,k]=M.target.value.split(":").map(Number),_=t.scheduledDate?new Date(t.scheduledDate):new Date;_.setHours(D,k,0,0),o(t.id,{scheduledDate:_.toISOString()})}},className:"bg-background"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quick Times"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{label:"9:00 AM",hour:9,minute:0},{label:"12:00 PM",hour:12,minute:0},{label:"2:00 PM",hour:14,minute:0},{label:"5:00 PM",hour:17,minute:0},{label:"7:00 PM",hour:19,minute:0},{label:"9:00 PM",hour:21,minute:0}].map(M=>a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{const D=t.scheduledDate?new Date(t.scheduledDate):new Date;D.setHours(M.hour,M.minute,0,0),o&&o(t.id,{scheduledDate:D.toISOString()})},className:"text-xs",children:M.label},M.label))})]})]}),a.jsxs(Is,{children:[a.jsx(Z,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),a.jsx(Z,{onClick:()=>{if(t.scheduledDate&&o&&i){const M=new Date(t.scheduledDate),D=new Date;D.setHours(0,0,0,0);const k=new Date(M);k.setHours(0,0,0,0);let _="backlog";k.getTime()===D.getTime()?_="today":k>D&&k<=new Date(D.getTime()+7*24*60*60*1e3)&&(_="this-week"),o(t.id,{scheduledDate:M.toISOString(),status:_})}y(!1)},disabled:!t.scheduledDate,children:"Schedule Task"})]})]})})]})}function pu({task:t,boardInfo:e,userPreferences:n,showBoardInfo:s=!0,showTitle:r=!0,showDescription:o=!0,showDates:i=!0,showRecurring:c=!0,className:f}){const{formatDate:u}=Ls(n),h=y=>{switch(y){case 1:return{color:"#0ea5e9",bgColor:"#e0f2fe",darkBgColor:"#0c4a6e"};case 2:return{color:"#eab308",bgColor:"#fefce8",darkBgColor:"#713f12"};case 3:return{color:"#f97316",bgColor:"#fff7ed",darkBgColor:"#9a3412"};case 4:return{color:"#ef4444",bgColor:"#fef2f2",darkBgColor:"#7f1d1d"};default:return{color:"#64748b",bgColor:"#f1f5f9",darkBgColor:"#1e293b"}}},m=y=>{var b,N,M;if(!y.recurring)return null;const{pattern:p,interval:v}=y.recurring;let C="";switch(p){case"daily":C=v===1?"Daily":`Every ${v} days`;break;case"weekly":if(C=v===1?"Weekly":`Every ${v} weeks`,(b=y.recurring.daysOfWeek)!=null&&b.length){const D=y.recurring.daysOfWeek.map(k=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][k]).join(", ");C+=` on ${D}`}break;case"monthly":if(C=v===1?"Monthly":`Every ${v} months`,(N=y.recurring.daysOfMonth)!=null&&N.length){const D=y.recurring.daysOfMonth.map(k=>k+(k===1?"st":k===2?"nd":k===3?"rd":"th")).join(", ");C+=` on the ${D}`}break;case"yearly":if(C=v===1?"Yearly":`Every ${v} years`,(M=y.recurring.monthsOfYear)!=null&&M.length){const D=y.recurring.monthsOfYear.map(k=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][k-1]).join(", ");C+=` in ${D}`}break}return y.recurring.endDate&&(C+=` until ${u(y.recurring.endDate)}`),C},g=h(t.priority);return a.jsxs("div",{className:V("space-y-2",f),children:[s&&e&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color||"#3B82F6"}}),a.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:e.name}),a.jsx("div",{className:"flex items-center justify-center w-4 h-4 rounded-full text-xs font-semibold",style:{backgroundColor:g.bgColor,color:g.color},title:`Priority: ${t.priority} (${t.priority===1?"Low":t.priority===2?"Medium":t.priority===3?"High":"Critical"})`,children:t.priority})]}),r&&a.jsx("h3",{className:V("font-medium text-sm",t.status==="done"?"line-through text-muted-foreground":""),children:t.title}),o&&t.description&&t.description.trim()!==""&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:t.description}),i&&(t.dueDate||t.startDate||t.scheduledDate)&&a.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.dueDate&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-red-50 dark:bg-red-950/20 text-red-700 dark:text-red-300 rounded text-xs",children:[a.jsx(nt,{className:"h-3 w-3"}),a.jsxs("span",{children:["Due: ",u(t.dueDate)]})]}),t.startDate&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300 rounded text-xs",children:[a.jsx(nt,{className:"h-3 w-3"}),a.jsxs("span",{children:["Start: ",u(t.startDate)]})]}),t.scheduledDate&&!t.startDate&&a.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300 rounded text-xs",children:[a.jsx(nt,{className:"h-3 w-3"}),a.jsxs("span",{children:["Scheduled: ",u(t.scheduledDate)]})]})]}),c&&t.recurring&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Ns,{className:"h-3 w-3"}),a.jsx("span",{children:m(t)})]})]})}function yu({subtasks:t,onAddSubtask:e,onUpdateSubtask:n,onDeleteSubtask:s,className:r}){const[o,i]=w.useState(!1),[c,f]=w.useState(""),[u,h]=w.useState(null),[m,g]=w.useState(""),y=()=>T(null,null,function*(){if(c.trim())try{yield e(c.trim()),f(""),i(!1)}catch(D){console.error("Failed to add subtask:",D)}}),p=(D,k)=>T(null,null,function*(){try{yield n(D,k)}catch(_){console.error("Failed to update subtask:",_)}}),v=D=>T(null,null,function*(){m.trim()&&(yield p(D,{title:m.trim()}),h(null),g(""))}),C=D=>{h(D.id),g(D.title)},b=()=>{h(null),g("")},N=t.filter(D=>D.isCompleted).length,M=t.length;return a.jsxs("div",{className:V("space-y-3",r),children:[M>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Subtasks"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[N,"/",M," completed"]})]}),M>0&&a.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:a.jsx("div",{className:"bg-primary h-1.5 rounded-full transition-all duration-300",style:{width:`${N/M*100}%`}})}),a.jsx("div",{className:"space-y-2",children:t.map(D=>a.jsxs("div",{className:"flex items-center gap-2 group",children:[a.jsx(Ev,{className:"h-3 w-3 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity cursor-grab"}),a.jsx(bt,{checked:D.isCompleted,onCheckedChange:k=>p(D.id,{isCompleted:!!k}),className:"flex-shrink-0"}),u===D.id?a.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[a.jsx(Ae,{value:m,onChange:k=>g(k.target.value),onKeyDown:k=>{k.key==="Enter"&&v(D.id),k.key==="Escape"&&b()},className:"flex-1 h-7 text-sm",autoFocus:!0}),a.jsx(Z,{size:"sm",variant:"ghost",onClick:()=>v(D.id),className:"h-7 w-7 p-0",children:"âœ“"}),a.jsx(Z,{size:"sm",variant:"ghost",onClick:b,className:"h-7 w-7 p-0",children:a.jsx(xn,{className:"h-3 w-3"})})]}):a.jsxs("div",{className:"flex-1 flex items-center justify-between group/item",children:[a.jsx("span",{className:V("text-sm cursor-pointer flex-1",D.isCompleted&&"line-through text-muted-foreground"),onClick:()=>C(D),children:D.title}),a.jsx(Z,{size:"sm",variant:"ghost",onClick:()=>s(D.id),className:"h-6 w-6 p-0 opacity-0 group-hover/item:opacity-100 transition-opacity",children:a.jsx(xn,{className:"h-3 w-3"})})]})]},D.id))}),o?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3"})," ",a.jsx(bt,{disabled:!0,className:"flex-shrink-0"}),a.jsx(Ae,{value:c,onChange:D=>f(D.target.value),onKeyDown:D=>{D.key==="Enter"&&y(),D.key==="Escape"&&(i(!1),f(""))},placeholder:"Add subtask...",className:"flex-1 h-7 text-sm",autoFocus:!0}),a.jsx(Z,{size:"sm",variant:"ghost",onClick:y,className:"h-7 w-7 p-0",children:"âœ“"}),a.jsx(Z,{size:"sm",variant:"ghost",onClick:()=>{i(!1),f("")},className:"h-7 w-7 p-0",children:a.jsx(xn,{className:"h-3 w-3"})})]}):a.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>i(!0),className:"w-full justify-start gap-2 text-muted-foreground hover:text-foreground h-8",children:[a.jsx($n,{className:"h-3 w-3"}),"Add subtask"]})]})}function gm({taskId:t,className:e}){const{addSubtask:n,updateSubtask:s,deleteSubtask:r,getSubtasks:o}=Na(),[i,c]=w.useState([]),[f,u]=w.useState(!0),h=w.useCallback(()=>T(null,null,function*(){try{u(!0);const p=yield o(t);c(p)}catch(p){console.error("Failed to load subtasks:",p)}finally{u(!1)}}),[t,o]);w.useEffect(()=>{h()},[h]);const m=w.useCallback(p=>T(null,null,function*(){try{const v=yield n(t,p);c(C=>[...C,v])}catch(v){throw console.error("Failed to add subtask:",v),v}}),[t,n]),g=w.useCallback((p,v)=>T(null,null,function*(){try{c(C=>C.map(b=>b.id===p?x(x({},b),v):b)),yield s(p,v)}catch(C){throw console.error("Failed to update subtask:",C),yield h(),C}}),[s,h]),y=w.useCallback(p=>T(null,null,function*(){try{c(v=>v.filter(C=>C.id!==p)),yield r(p)}catch(v){throw console.error("Failed to delete subtask:",v),yield h(),v}}),[r,h]);return f?a.jsx("div",{className:"text-xs text-muted-foreground",children:"Loading subtasks..."}):i.length===0?a.jsx(yu,{subtasks:i,onAddSubtask:m,onUpdateSubtask:g,onDeleteSubtask:y,className:e}):a.jsx(yu,{subtasks:i,onAddSubtask:m,onUpdateSubtask:g,onDeleteSubtask:y,className:e})}function xu({task:t,onMove:e,onEdit:n,onUpdateTimeEstimate:s,onDuplicate:r,onDelete:o,isDone:i=!1,boardInfo:c=null,userPreferences:f,onUpdateTask:u}){const[h,m]=w.useState(!1),[g,y]=w.useState(t.timeEstimate.toString()),[p,v]=w.useState(!1),C=t.status!=="backlog",b=t.status!=="done",N=$=>{switch($){case"backlog":return"this-week";case"this-week":return"today";case"today":return"done";default:return"done"}},M=$=>{switch($){case"done":return"today";case"today":return"this-week";case"this-week":return"backlog";default:return"backlog"}},D=$=>{$.stopPropagation(),n==null||n(t)},k=$=>{$.stopPropagation(),t.status==="done"?e(t.id,"today"):e(t.id,"done")},_=$=>{$.stopPropagation(),m(!0)},E=()=>{const $=parseInt(g)||0;s==null||s(t.id,$),m(!1)},P=$=>{$.key==="Enter"?E():$.key==="Escape"&&(y(t.timeEstimate.toString()),m(!1))},R=($,K)=>T(null,null,function*(){e($,K)}),B=$=>{t.status==="done"?e($,"today"):e($,"done")};return a.jsx(mm,{task:t,onEdit:n||(()=>{}),onDuplicate:r,onDelete:o,onUpdateTask:u,onMoveTask:R,onUpdateTimeEstimate:s,onToggleComplete:B,boardInfo:c,userPreferences:f,children:a.jsx("div",{className:"transition-all duration-200 group",onClick:()=>n==null?void 0:n(t),draggable:!i,onDragStart:$=>{i||($.dataTransfer.setData("text/plain",t.id.toString()),$.dataTransfer.effectAllowed="move",v(!0))},onDragEnd:()=>v(!1),children:a.jsx("div",{className:V("bg-background border border-border rounded-xl shadow-sm hover:shadow-lg transition-all duration-300",i?"cursor-pointer":"cursor-grab active:cursor-grabbing","hover:border-border/80 hover:-translate-y-0.5",i&&"opacity-70 saturate-50",p&&"opacity-50 scale-95 rotate-2 cursor-grabbing"),children:a.jsxs("div",{className:"relative p-3",children:[c&&a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(pu,{task:t,boardInfo:c,userPreferences:f,showBoardInfo:!0,showTitle:!1,showDescription:!1,showDates:!1,showRecurring:!1,className:"flex-1"}),a.jsxs("div",{className:"flex gap-1 ml-auto opacity-0 group-hover:opacity-100 transition-all duration-300",children:[C&&a.jsx(Z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",onClick:$=>{$.stopPropagation(),e(t.id,M(t.status))},title:"Move left",children:a.jsx(Ml,{className:"h-3 w-3"})}),b&&a.jsx(Z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",onClick:$=>{$.stopPropagation(),e(t.id,N(t.status))},title:"Move right",children:a.jsx(lo,{className:"h-3 w-3"})})]})]}),a.jsx("div",{className:"mb-3",children:a.jsx(pu,{task:t,boardInfo:null,userPreferences:f,showBoardInfo:!1,showTitle:!0,showDescription:!0,showDates:!0,showRecurring:!0})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:h?a.jsx("input",{placeholder:"--",type:"number",value:g,onChange:$=>y($.target.value),onBlur:E,onKeyDown:P,className:"text-xs text-muted-foreground bg-transparent border-none outline-none w-12 p-0 focus:text-foreground",autoFocus:!0,min:"0"}):a.jsx("button",{onClick:_,className:V("text-xs text-muted-foreground hover:text-foreground transition-colors duration-200 font-medium",i&&"text-muted-foreground/60"),title:"Click to edit time estimate",children:t.timeEstimate>0?`${t.timeEstimate} min`:"--"})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:k,className:V("shrink-0 w-4 h-4 rounded border-2 flex items-center justify-center transition-all duration-200 cursor-pointer",t.status==="done"?"bg-primary border-primary text-primary-foreground shadow-sm":"border-border hover:border-primary/50 bg-background hover:bg-accent/30"),title:t.status==="done"?"Mark as incomplete":"Mark as complete",children:t.status==="done"&&a.jsx(ms,{className:"h-2.5 w-2.5"})}),a.jsx(Z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",onClick:D,title:"Edit task",children:a.jsx(en,{className:"h-3 w-3"})})]})]}),a.jsx(gm,{taskId:t.id}),!p&&!i&&a.jsx("div",{className:"text-xs text-muted-foreground mt-2 pt-2 border-t border-border/30 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Drag to move or click to edit"})]})})})})}function Po({title:t,status:e,tasks:n,onMoveTask:s,onEditTask:r,onAddTask:o,onUpdateTimeEstimate:i,onDuplicateTask:c,onDeleteTask:f,onUpdateTask:u,showAddButton:h=!0,showProgress:m=!1,completedCount:g=0,totalTimeEstimate:y=0,onStartSprint:p,isAllTasksBoard:v=!1,boards:C=[],getBoardInfo:b,currentBoard:N,userPreferences:M}){const[D,k]=w.useState(!1),[_,E]=w.useState(""),[P,R]=w.useState(""),[B,$]=w.useState(null),[K,te]=w.useState(!1),{formatDate:le}=Ls(M);w.useEffect(()=>{const A=()=>{te(!1)};return document.addEventListener("dragend",A),()=>{document.removeEventListener("dragend",A)}},[]);const ve=m&&e==="today"?g/(n.length+g)*100||0:m&&n.length>0?g/n.length*100:0,we=A=>{const H=Math.floor(A/60),O=A%60;return H>100?"100+ Hr":`${H.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`},_e=A=>{const H={};return A.forEach(q=>{if(q.completedAt){const ne=new Date(q.completedAt).toDateString();H[ne]||(H[ne]=[]),H[ne].push(q)}else H.Unknown||(H.Unknown=[]),H.Unknown.push(q)}),Object.entries(H).sort(([q],[ne])=>q==="Unknown"?1:ne==="Unknown"?-1:new Date(ne).getTime()-new Date(q).getTime())},S=A=>{if(A==="Unknown")return"Unknown Date";const H=new Date(A),O=new Date,q=new Date(O);return q.setDate(q.getDate()-1),H.toDateString()===O.toDateString()?"Today":H.toDateString()===q.toDateString()?"Yesterday":le(A)},L=()=>T(null,null,function*(){if(!_.trim()||!o)return;const A=parseInt(P)||0;try{yield o({title:_,description:"",timeEstimate:A,status:e,position:n.length,boardId:v&&B||void 0,priority:2,progressPercentage:0,timeSpent:0,labels:[],attachments:[]}),E(""),R(""),$(null)}catch(H){console.error("Failed to add task:",H)}}),j=A=>T(null,null,function*(){A.preventDefault(),te(!1);const H=A.dataTransfer.getData("text/plain");if(H){const O=parseInt(H);yield s(O,e)}}),W=A=>{A.preventDefault(),A.dataTransfer.dropEffect="move",te(!0)},Q=A=>{const H=A.relatedTarget,O=A.currentTarget;(!H||!O.contains(H))&&te(!1)};return a.jsxs("div",{className:V("flex-none rounded-lg w-80 bg-card border border-border shadow-sm hover:shadow-md transition-all duration-300 flex flex-col backdrop-blur-sm",K&&"border-primary/50 bg-primary/5 shadow-lg"),style:{height:"calc(100vh - 120px)"},onDrop:j,onDragOver:W,onDragLeave:Q,children:[a.jsxs("div",{className:"p-4 border-b border-border/50 flex-shrink-0",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg text-card-foreground",children:t}),y>0&&a.jsxs("span",{className:"text-sm font-mono text-muted-foreground px-2 py-1 rounded-md ml-2 ",children:[we(y)," Remaining"]}),h&&a.jsx(Z,{size:"sm",variant:"ghost",onClick:()=>k(!D),className:"h-8 w-8 p-0 hover:bg-accent/80 rounded-full transition-all duration-200 hover:scale-105",title:"Quick add task",children:a.jsx($n,{className:"h-4 w-4"})})]})," ",a.jsx("div",{className:"flex items-center justify-between",children:m?a.jsxs("div",{className:"space-y-1 flex-1",children:[a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"Progress"}),a.jsxs("span",{children:[Math.round(ve),"%"]})]}),a.jsx("div",{className:"w-full bg-muted rounded-full h-2.5 overflow-hidden",children:a.jsx("div",{className:"bg-primary h-full rounded-full transition-all duration-500 ease-out",style:{width:`${ve}%`}})})]}):a.jsx("span",{className:"text-sm text-muted-foreground bg-muted/50 px-3 py-1.5 rounded-full inline-block font-medium border border-border/30",children:n.length})})," ",D&&h&&a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsx(Ae,{placeholder:"Task title",value:_,onChange:A=>E(A.target.value),onKeyDown:A=>A.key==="Enter"&&L(),className:"text-sm"}),v&&C.length>0&&a.jsxs(ht,{value:(B==null?void 0:B.toString())||"",onValueChange:A=>$(A?parseInt(A):null),children:[a.jsx(st,{className:"text-sm",children:a.jsx(mt,{placeholder:"Select board (optional)"})}),a.jsx(rt,{children:C.filter(A=>!A.isDefault).map(A=>a.jsx(ge,{value:A.id.toString(),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:A.color||"#3B82F6"}}),A.name]})},A.id))})]})," ",a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ae,{type:"number",placeholder:"Minutes (optional)",value:P,onChange:A=>R(A.target.value),className:"text-sm flex-1",min:"0",max:"999"}),a.jsx(Z,{size:"sm",onClick:L,disabled:!_.trim(),children:"Add"}),a.jsx(Z,{size:"sm",variant:"outline",onClick:()=>{k(!1),E(""),R(""),$(null)},children:"Done"})]})]})]})," ",a.jsxs("div",{className:V("flex-1 overflow-y-auto kanban-scroll-container p-3 space-y-3 transition-all duration-300 scrollbar-thin scrollbar-thumb-muted scrollbar-track-transparent",K&&"bg-primary/5"),children:[e==="done"?a.jsx("div",{className:"space-y-4",children:_e(n).map(([A,H])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:S(A)}),a.jsx("div",{className:"flex-1 h-px bg-border/30"}),a.jsx("span",{className:"text-xs text-muted-foreground bg-muted/50 px-2 py-0.5 rounded-full",children:H.length})]})," ",a.jsxs("div",{className:"space-y-3",children:[" ",H.map(O=>a.jsx(xu,{task:O,onMove:s,onEdit:r,onUpdateTimeEstimate:i,onDuplicate:c,onDelete:f,onUpdateTask:u,isDone:O.status==="done",userPreferences:M,boardInfo:(()=>{if(v&&b&&O.boardId){const q=b(O.boardId);if(q)return q}return N})()},O.id))]})]},A))}):a.jsxs("div",{className:"space-y-3",children:[K&&n.length>0&&a.jsx("div",{className:"h-2 bg-primary/20 border-2 border-dashed border-primary/50 rounded-lg mx-1 transition-all duration-200",children:a.jsx("div",{className:"h-full bg-primary/10 rounded"})}),n.map(A=>a.jsx(xu,{task:A,onMove:s,onEdit:r,onUpdateTimeEstimate:i,onDuplicate:c,onDelete:f,onUpdateTask:u,isDone:A.status==="done",userPreferences:M,boardInfo:(()=>{if(v&&b&&A.boardId){const H=b(A.boardId);if(H)return H}return N})()},A.id))]}),n.length===0&&a.jsxs("div",{className:V("text-center text-muted-foreground py-8 border-2 border-dashed border-border/30 rounded-xl bg-muted/20 hover:bg-muted/30 transition-colors duration-300",K&&"border-primary/50 bg-primary/10 text-primary"),children:[a.jsx("p",{className:"text-sm font-medium",children:K?"Drop task here":"No tasks"}),a.jsx("p",{className:"text-xs mt-1 opacity-70",children:K?`Move to ${t}`:"Drag tasks here or add new ones"})]})," ",e==="today"&&n.length>0&&p&&f1()&&a.jsx("div",{className:"pt-2 border-t border-border/30 mt-4",children:a.jsx(Z,{onClick:p,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground shadow-sm hover:shadow-md transition-all duration-200",size:"sm",children:"Start Sprint"})})]})]})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var pm;function re(){return pm.apply(null,arguments)}function BI(t){pm=t}function ln(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function js(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Ue(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Gl(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Ue(t,e))return!1;return!0}function Lt(t){return t===void 0}function Qn(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function xo(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function ym(t,e){var n=[],s,r=t.length;for(s=0;s<r;++s)n.push(e(t[s],s));return n}function fs(t,e){for(var n in e)Ue(e,n)&&(t[n]=e[n]);return Ue(e,"toString")&&(t.toString=e.toString),Ue(e,"valueOf")&&(t.valueOf=e.valueOf),t}function En(t,e,n,s){return Vm(t,e,n,s,!0).utc()}function GI(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Ee(t){return t._pf==null&&(t._pf=GI()),t._pf}var dl;Array.prototype.some?dl=Array.prototype.some:dl=function(t){var e=Object(this),n=e.length>>>0,s;for(s=0;s<n;s++)if(s in e&&t.call(this,e[s],s,e))return!0;return!1};function Wl(t){var e=null,n=!1,s=t._d&&!isNaN(t._d.getTime());if(s&&(e=Ee(t),n=dl.call(e.parsedDateParts,function(r){return r!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=s;else return s;return t._isValid}function Aa(t){var e=En(NaN);return t!=null?fs(Ee(e),t):Ee(e).userInvalidated=!0,e}var vu=re.momentProperties=[],wi=!1;function Yl(t,e){var n,s,r,o=vu.length;if(Lt(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Lt(e._i)||(t._i=e._i),Lt(e._f)||(t._f=e._f),Lt(e._l)||(t._l=e._l),Lt(e._strict)||(t._strict=e._strict),Lt(e._tzm)||(t._tzm=e._tzm),Lt(e._isUTC)||(t._isUTC=e._isUTC),Lt(e._offset)||(t._offset=e._offset),Lt(e._pf)||(t._pf=Ee(e)),Lt(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)s=vu[n],r=e[s],Lt(r)||(t[s]=r);return t}function vo(t){Yl(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),wi===!1&&(wi=!0,re.updateOffset(this),wi=!1)}function cn(t){return t instanceof vo||t!=null&&t._isAMomentObject!=null}function xm(t){re.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+t)}function Xt(t,e){var n=!0;return fs(function(){if(re.deprecationHandler!=null&&re.deprecationHandler(null,t),n){var s=[],r,o,i,c=arguments.length;for(o=0;o<c;o++){if(r="",typeof arguments[o]=="object"){r+=`
[`+o+"] ";for(i in arguments[0])Ue(arguments[0],i)&&(r+=i+": "+arguments[0][i]+", ");r=r.slice(0,-2)}else r=arguments[o];s.push(r)}xm(t+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var wu={};function vm(t,e){re.deprecationHandler!=null&&re.deprecationHandler(t,e),wu[t]||(xm(e),wu[t]=!0)}re.suppressDeprecationWarnings=!1;re.deprecationHandler=null;function Dn(t){return typeof Function!="undefined"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function WI(t){var e,n;for(n in t)Ue(t,n)&&(e=t[n],Dn(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ul(t,e){var n=fs({},t),s;for(s in e)Ue(e,s)&&(js(t[s])&&js(e[s])?(n[s]={},fs(n[s],t[s]),fs(n[s],e[s])):e[s]!=null?n[s]=e[s]:delete n[s]);for(s in t)Ue(t,s)&&!Ue(e,s)&&js(t[s])&&(n[s]=fs({},n[s]));return n}function Hl(t){t!=null&&this.set(t)}var fl;Object.keys?fl=Object.keys:fl=function(t){var e,n=[];for(e in t)Ue(t,e)&&n.push(e);return n};var YI={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function HI(t,e,n){var s=this._calendar[t]||this._calendar.sameElse;return Dn(s)?s.call(e,n):s}function Tn(t,e,n){var s=""+Math.abs(t),r=e-s.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+s}var zl=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oo=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ci={},or={};function xe(t,e,n,s){var r=s;typeof s=="string"&&(r=function(){return this[s]()}),t&&(or[t]=r),e&&(or[e[0]]=function(){return Tn(r.apply(this,arguments),e[1],e[2])}),n&&(or[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function zI(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function qI(t){var e=t.match(zl),n,s;for(n=0,s=e.length;n<s;n++)or[e[n]]?e[n]=or[e[n]]:e[n]=zI(e[n]);return function(r){var o="",i;for(i=0;i<s;i++)o+=Dn(e[i])?e[i].call(r,t):e[i];return o}}function zo(t,e){return t.isValid()?(e=wm(e,t.localeData()),Ci[e]=Ci[e]||qI(e),Ci[e](t)):t.localeData().invalidDate()}function wm(t,e){var n=5;function s(r){return e.longDateFormat(r)||r}for(Oo.lastIndex=0;n>=0&&Oo.test(t);)t=t.replace(Oo,s),Oo.lastIndex=0,n-=1;return t}var ZI={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function JI(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(zl).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[t])}var KI="Invalid date";function XI(){return this._invalidDate}var QI="%d",eA=/\d{1,2}/;function tA(t){return this._ordinal.replace("%d",t)}var nA={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function sA(t,e,n,s){var r=this._relativeTime[n];return Dn(r)?r(t,e,n,s):r.replace(/%d/i,t)}function rA(t,e){var n=this._relativeTime[t>0?"future":"past"];return Dn(n)?n(e):n.replace(/%s/i,e)}var Cu={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Qt(t){return typeof t=="string"?Cu[t]||Cu[t.toLowerCase()]:void 0}function ql(t){var e={},n,s;for(s in t)Ue(t,s)&&(n=Qt(s),n&&(e[n]=t[s]));return e}var oA={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function aA(t){var e=[],n;for(n in t)Ue(t,n)&&e.push({unit:n,priority:oA[n]});return e.sort(function(s,r){return s.priority-r.priority}),e}var Cm=/\d/,zt=/\d\d/,bm=/\d{3}/,Zl=/\d{4}/,ja=/[+-]?\d{6}/,ct=/\d\d?/,km=/\d\d\d\d?/,_m=/\d\d\d\d\d\d?/,Ra=/\d{1,3}/,Jl=/\d{1,4}/,Pa=/[+-]?\d{1,6}/,br=/\d+/,Oa=/[+-]?\d+/,iA=/Z|[+-]\d\d:?\d\d/gi,Fa=/Z|[+-]\d\d(?::?\d\d)?/gi,lA=/[+-]?\d+(\.\d{1,3})?/,wo=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,kr=/^[1-9]\d?/,Kl=/^([1-9]\d|\d)/,ca;ca={};function ie(t,e,n){ca[t]=Dn(e)?e:function(s,r){return s&&n?n:e}}function cA(t,e){return Ue(ca,t)?ca[t](e._strict,e._locale):new RegExp(dA(t))}function dA(t){return zn(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,s,r,o){return n||s||r||o}))}function zn(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Jt(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Re(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Jt(e)),n}var hl={};function Ze(t,e){var n,s=e,r;for(typeof t=="string"&&(t=[t]),Qn(e)&&(s=function(o,i){i[e]=Re(o)}),r=t.length,n=0;n<r;n++)hl[t[n]]=s}function Co(t,e){Ze(t,function(n,s,r,o){r._w=r._w||{},e(n,r._w,r,o)})}function uA(t,e,n){e!=null&&Ue(hl,t)&&hl[t](e,n._a,n,t)}function La(t){return t%4===0&&t%100!==0||t%400===0}var Dt=0,Bn=1,mn=2,_t=3,on=4,Gn=5,Ds=6,fA=7,hA=8;xe("Y",0,0,function(){var t=this.year();return t<=9999?Tn(t,4):"+"+t});xe(0,["YY",2],0,function(){return this.year()%100});xe(0,["YYYY",4],0,"year");xe(0,["YYYYY",5],0,"year");xe(0,["YYYYYY",6,!0],0,"year");ie("Y",Oa);ie("YY",ct,zt);ie("YYYY",Jl,Zl);ie("YYYYY",Pa,ja);ie("YYYYYY",Pa,ja);Ze(["YYYYY","YYYYYY"],Dt);Ze("YYYY",function(t,e){e[Dt]=t.length===2?re.parseTwoDigitYear(t):Re(t)});Ze("YY",function(t,e){e[Dt]=re.parseTwoDigitYear(t)});Ze("Y",function(t,e){e[Dt]=parseInt(t,10)});function qr(t){return La(t)?366:365}re.parseTwoDigitYear=function(t){return Re(t)+(Re(t)>68?1900:2e3)};var Tm=_r("FullYear",!0);function mA(){return La(this.year())}function _r(t,e){return function(n){return n!=null?(Sm(this,t,n),re.updateOffset(this,e),this):Qr(this,t)}}function Qr(t,e){if(!t.isValid())return NaN;var n=t._d,s=t._isUTC;switch(e){case"Milliseconds":return s?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return s?n.getUTCSeconds():n.getSeconds();case"Minutes":return s?n.getUTCMinutes():n.getMinutes();case"Hours":return s?n.getUTCHours():n.getHours();case"Date":return s?n.getUTCDate():n.getDate();case"Day":return s?n.getUTCDay():n.getDay();case"Month":return s?n.getUTCMonth():n.getMonth();case"FullYear":return s?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Sm(t,e,n){var s,r,o,i,c;if(!(!t.isValid()||isNaN(n))){switch(s=t._d,r=t._isUTC,e){case"Milliseconds":return void(r?s.setUTCMilliseconds(n):s.setMilliseconds(n));case"Seconds":return void(r?s.setUTCSeconds(n):s.setSeconds(n));case"Minutes":return void(r?s.setUTCMinutes(n):s.setMinutes(n));case"Hours":return void(r?s.setUTCHours(n):s.setHours(n));case"Date":return void(r?s.setUTCDate(n):s.setDate(n));case"FullYear":break;default:return}o=n,i=t.month(),c=t.date(),c=c===29&&i===1&&!La(o)?28:c,r?s.setUTCFullYear(o,i,c):s.setFullYear(o,i,c)}}function gA(t){return t=Qt(t),Dn(this[t])?this[t]():this}function pA(t,e){if(typeof t=="object"){t=ql(t);var n=aA(t),s,r=n.length;for(s=0;s<r;s++)this[n[s].unit](t[n[s].unit])}else if(t=Qt(t),Dn(this[t]))return this[t](e);return this}function yA(t,e){return(t%e+e)%e}var wt;Array.prototype.indexOf?wt=Array.prototype.indexOf:wt=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Xl(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=yA(e,12);return t+=(e-n)/12,n===1?La(t)?29:28:31-n%7%2}xe("M",["MM",2],"Mo",function(){return this.month()+1});xe("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});xe("MMMM",0,0,function(t){return this.localeData().months(this,t)});ie("M",ct,kr);ie("MM",ct,zt);ie("MMM",function(t,e){return e.monthsShortRegex(t)});ie("MMMM",function(t,e){return e.monthsRegex(t)});Ze(["M","MM"],function(t,e){e[Bn]=Re(t)-1});Ze(["MMM","MMMM"],function(t,e,n,s){var r=n._locale.monthsParse(t,s,n._strict);r!=null?e[Bn]=r:Ee(n).invalidMonth=t});var xA="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Nm="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Mm=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,vA=wo,wA=wo;function CA(t,e){return t?ln(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Mm).test(e)?"format":"standalone"][t.month()]:ln(this._months)?this._months:this._months.standalone}function bA(t,e){return t?ln(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Mm.test(e)?"format":"standalone"][t.month()]:ln(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function kA(t,e,n){var s,r,o,i=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)o=En([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(r=wt.call(this._shortMonthsParse,i),r!==-1?r:null):(r=wt.call(this._longMonthsParse,i),r!==-1?r:null):e==="MMM"?(r=wt.call(this._shortMonthsParse,i),r!==-1?r:(r=wt.call(this._longMonthsParse,i),r!==-1?r:null)):(r=wt.call(this._longMonthsParse,i),r!==-1?r:(r=wt.call(this._shortMonthsParse,i),r!==-1?r:null))}function _A(t,e,n){var s,r,o;if(this._monthsParseExact)return kA.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(r=En([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!n&&!this._monthsParse[s]&&(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[s]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[s].test(t))return s;if(n&&e==="MMM"&&this._shortMonthsParse[s].test(t))return s;if(!n&&this._monthsParse[s].test(t))return s}}function Em(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=Re(e);else if(e=t.localeData().monthsParse(e),!Qn(e))return t}var n=e,s=t.date();return s=s<29?s:Math.min(s,Xl(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,s):t._d.setMonth(n,s),t}function Dm(t){return t!=null?(Em(this,t),re.updateOffset(this,!0),this):Qr(this,"Month")}function TA(){return Xl(this.year(),this.month())}function SA(t){return this._monthsParseExact?(Ue(this,"_monthsRegex")||Im.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Ue(this,"_monthsShortRegex")||(this._monthsShortRegex=vA),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function NA(t){return this._monthsParseExact?(Ue(this,"_monthsRegex")||Im.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Ue(this,"_monthsRegex")||(this._monthsRegex=wA),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function Im(){function t(f,u){return u.length-f.length}var e=[],n=[],s=[],r,o,i,c;for(r=0;r<12;r++)o=En([2e3,r]),i=zn(this.monthsShort(o,"")),c=zn(this.months(o,"")),e.push(i),n.push(c),s.push(c),s.push(i);e.sort(t),n.sort(t),s.sort(t),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function MA(t,e,n,s,r,o,i){var c;return t<100&&t>=0?(c=new Date(t+400,e,n,s,r,o,i),isFinite(c.getFullYear())&&c.setFullYear(t)):c=new Date(t,e,n,s,r,o,i),c}function eo(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function da(t,e,n){var s=7+e-n,r=(7+eo(t,0,s).getUTCDay()-e)%7;return-r+s-1}function Am(t,e,n,s,r){var o=(7+n-s)%7,i=da(t,s,r),c=1+7*(e-1)+o+i,f,u;return c<=0?(f=t-1,u=qr(f)+c):c>qr(t)?(f=t+1,u=c-qr(t)):(f=t,u=c),{year:f,dayOfYear:u}}function to(t,e,n){var s=da(t.year(),e,n),r=Math.floor((t.dayOfYear()-s-1)/7)+1,o,i;return r<1?(i=t.year()-1,o=r+qn(i,e,n)):r>qn(t.year(),e,n)?(o=r-qn(t.year(),e,n),i=t.year()+1):(i=t.year(),o=r),{week:o,year:i}}function qn(t,e,n){var s=da(t,e,n),r=da(t+1,e,n);return(qr(t)-s+r)/7}xe("w",["ww",2],"wo","week");xe("W",["WW",2],"Wo","isoWeek");ie("w",ct,kr);ie("ww",ct,zt);ie("W",ct,kr);ie("WW",ct,zt);Co(["w","ww","W","WW"],function(t,e,n,s){e[s.substr(0,1)]=Re(t)});function EA(t){return to(t,this._week.dow,this._week.doy).week}var DA={dow:0,doy:6};function IA(){return this._week.dow}function AA(){return this._week.doy}function jA(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function RA(t){var e=to(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}xe("d",0,"do","day");xe("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});xe("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});xe("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});xe("e",0,0,"weekday");xe("E",0,0,"isoWeekday");ie("d",ct);ie("e",ct);ie("E",ct);ie("dd",function(t,e){return e.weekdaysMinRegex(t)});ie("ddd",function(t,e){return e.weekdaysShortRegex(t)});ie("dddd",function(t,e){return e.weekdaysRegex(t)});Co(["dd","ddd","dddd"],function(t,e,n,s){var r=n._locale.weekdaysParse(t,s,n._strict);r!=null?e.d=r:Ee(n).invalidWeekday=t});Co(["d","e","E"],function(t,e,n,s){e[s]=Re(t)});function PA(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function OA(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Ql(t,e){return t.slice(e,7).concat(t.slice(0,e))}var FA="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),jm="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),LA="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$A=wo,VA=wo,UA=wo;function BA(t,e){var n=ln(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Ql(n,this._week.dow):t?n[t.day()]:n}function GA(t){return t===!0?Ql(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function WA(t){return t===!0?Ql(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function YA(t,e,n){var s,r,o,i=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)o=En([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(r=wt.call(this._weekdaysParse,i),r!==-1?r:null):e==="ddd"?(r=wt.call(this._shortWeekdaysParse,i),r!==-1?r:null):(r=wt.call(this._minWeekdaysParse,i),r!==-1?r:null):e==="dddd"?(r=wt.call(this._weekdaysParse,i),r!==-1||(r=wt.call(this._shortWeekdaysParse,i),r!==-1)?r:(r=wt.call(this._minWeekdaysParse,i),r!==-1?r:null)):e==="ddd"?(r=wt.call(this._shortWeekdaysParse,i),r!==-1||(r=wt.call(this._weekdaysParse,i),r!==-1)?r:(r=wt.call(this._minWeekdaysParse,i),r!==-1?r:null)):(r=wt.call(this._minWeekdaysParse,i),r!==-1||(r=wt.call(this._weekdaysParse,i),r!==-1)?r:(r=wt.call(this._shortWeekdaysParse,i),r!==-1?r:null))}function HA(t,e,n){var s,r,o;if(this._weekdaysParseExact)return YA.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(r=En([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[s]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[s].test(t))return s;if(n&&e==="ddd"&&this._shortWeekdaysParse[s].test(t))return s;if(n&&e==="dd"&&this._minWeekdaysParse[s].test(t))return s;if(!n&&this._weekdaysParse[s].test(t))return s}}function zA(t){if(!this.isValid())return t!=null?this:NaN;var e=Qr(this,"Day");return t!=null?(t=PA(t,this.localeData()),this.add(t-e,"d")):e}function qA(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function ZA(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=OA(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function JA(t){return this._weekdaysParseExact?(Ue(this,"_weekdaysRegex")||ec.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Ue(this,"_weekdaysRegex")||(this._weekdaysRegex=$A),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function KA(t){return this._weekdaysParseExact?(Ue(this,"_weekdaysRegex")||ec.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ue(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=VA),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function XA(t){return this._weekdaysParseExact?(Ue(this,"_weekdaysRegex")||ec.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ue(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=UA),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function ec(){function t(h,m){return m.length-h.length}var e=[],n=[],s=[],r=[],o,i,c,f,u;for(o=0;o<7;o++)i=En([2e3,1]).day(o),c=zn(this.weekdaysMin(i,"")),f=zn(this.weekdaysShort(i,"")),u=zn(this.weekdays(i,"")),e.push(c),n.push(f),s.push(u),r.push(c),r.push(f),r.push(u);e.sort(t),n.sort(t),s.sort(t),r.sort(t),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function tc(){return this.hours()%12||12}function QA(){return this.hours()||24}xe("H",["HH",2],0,"hour");xe("h",["hh",2],0,tc);xe("k",["kk",2],0,QA);xe("hmm",0,0,function(){return""+tc.apply(this)+Tn(this.minutes(),2)});xe("hmmss",0,0,function(){return""+tc.apply(this)+Tn(this.minutes(),2)+Tn(this.seconds(),2)});xe("Hmm",0,0,function(){return""+this.hours()+Tn(this.minutes(),2)});xe("Hmmss",0,0,function(){return""+this.hours()+Tn(this.minutes(),2)+Tn(this.seconds(),2)});function Rm(t,e){xe(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Rm("a",!0);Rm("A",!1);function Pm(t,e){return e._meridiemParse}ie("a",Pm);ie("A",Pm);ie("H",ct,Kl);ie("h",ct,kr);ie("k",ct,kr);ie("HH",ct,zt);ie("hh",ct,zt);ie("kk",ct,zt);ie("hmm",km);ie("hmmss",_m);ie("Hmm",km);ie("Hmmss",_m);Ze(["H","HH"],_t);Ze(["k","kk"],function(t,e,n){var s=Re(t);e[_t]=s===24?0:s});Ze(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Ze(["h","hh"],function(t,e,n){e[_t]=Re(t),Ee(n).bigHour=!0});Ze("hmm",function(t,e,n){var s=t.length-2;e[_t]=Re(t.substr(0,s)),e[on]=Re(t.substr(s)),Ee(n).bigHour=!0});Ze("hmmss",function(t,e,n){var s=t.length-4,r=t.length-2;e[_t]=Re(t.substr(0,s)),e[on]=Re(t.substr(s,2)),e[Gn]=Re(t.substr(r)),Ee(n).bigHour=!0});Ze("Hmm",function(t,e,n){var s=t.length-2;e[_t]=Re(t.substr(0,s)),e[on]=Re(t.substr(s))});Ze("Hmmss",function(t,e,n){var s=t.length-4,r=t.length-2;e[_t]=Re(t.substr(0,s)),e[on]=Re(t.substr(s,2)),e[Gn]=Re(t.substr(r))});function ej(t){return(t+"").toLowerCase().charAt(0)==="p"}var tj=/[ap]\.?m?\.?/i,nj=_r("Hours",!0);function sj(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var Om={calendar:YI,longDateFormat:ZI,invalidDate:KI,ordinal:QI,dayOfMonthOrdinalParse:eA,relativeTime:nA,months:xA,monthsShort:Nm,week:DA,weekdays:FA,weekdaysMin:LA,weekdaysShort:jm,meridiemParse:tj},ut={},Ir={},no;function rj(t,e){var n,s=Math.min(t.length,e.length);for(n=0;n<s;n+=1)if(t[n]!==e[n])return n;return s}function bu(t){return t&&t.toLowerCase().replace("_","-")}function oj(t){for(var e=0,n,s,r,o;e<t.length;){for(o=bu(t[e]).split("-"),n=o.length,s=bu(t[e+1]),s=s?s.split("-"):null;n>0;){if(r=$a(o.slice(0,n).join("-")),r)return r;if(s&&s.length>=n&&rj(o,s)>=n-1)break;n--}e++}return no}function aj(t){return!!(t&&t.match("^[^/\\\\]*$"))}function $a(t){var e=null,n;if(ut[t]===void 0&&typeof Jo!="undefined"&&Jo&&Jo.exports&&aj(t))try{e=no._abbr,n=require,n("./locale/"+t),xs(e)}catch(s){ut[t]=null}return ut[t]}function xs(t,e){var n;return t&&(Lt(e)?n=ss(t):n=nc(t,e),n?no=n:typeof console!="undefined"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),no._abbr}function nc(t,e){if(e!==null){var n,s=Om;if(e.abbr=t,ut[t]!=null)vm("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=ut[t]._config;else if(e.parentLocale!=null)if(ut[e.parentLocale]!=null)s=ut[e.parentLocale]._config;else if(n=$a(e.parentLocale),n!=null)s=n._config;else return Ir[e.parentLocale]||(Ir[e.parentLocale]=[]),Ir[e.parentLocale].push({name:t,config:e}),null;return ut[t]=new Hl(ul(s,e)),Ir[t]&&Ir[t].forEach(function(r){nc(r.name,r.config)}),xs(t),ut[t]}else return delete ut[t],null}function ij(t,e){if(e!=null){var n,s,r=Om;ut[t]!=null&&ut[t].parentLocale!=null?ut[t].set(ul(ut[t]._config,e)):(s=$a(t),s!=null&&(r=s._config),e=ul(r,e),s==null&&(e.abbr=t),n=new Hl(e),n.parentLocale=ut[t],ut[t]=n),xs(t)}else ut[t]!=null&&(ut[t].parentLocale!=null?(ut[t]=ut[t].parentLocale,t===xs()&&xs(t)):ut[t]!=null&&delete ut[t]);return ut[t]}function ss(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return no;if(!ln(t)){if(e=$a(t),e)return e;t=[t]}return oj(t)}function lj(){return fl(ut)}function sc(t){var e,n=t._a;return n&&Ee(t).overflow===-2&&(e=n[Bn]<0||n[Bn]>11?Bn:n[mn]<1||n[mn]>Xl(n[Dt],n[Bn])?mn:n[_t]<0||n[_t]>24||n[_t]===24&&(n[on]!==0||n[Gn]!==0||n[Ds]!==0)?_t:n[on]<0||n[on]>59?on:n[Gn]<0||n[Gn]>59?Gn:n[Ds]<0||n[Ds]>999?Ds:-1,Ee(t)._overflowDayOfYear&&(e<Dt||e>mn)&&(e=mn),Ee(t)._overflowWeeks&&e===-1&&(e=fA),Ee(t)._overflowWeekday&&e===-1&&(e=hA),Ee(t).overflow=e),t}var cj=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,dj=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,uj=/Z|[+-]\d\d(?::?\d\d)?/,Fo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],bi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],fj=/^\/?Date\((-?\d+)/i,hj=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,mj={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Fm(t){var e,n,s=t._i,r=cj.exec(s)||dj.exec(s),o,i,c,f,u=Fo.length,h=bi.length;if(r){for(Ee(t).iso=!0,e=0,n=u;e<n;e++)if(Fo[e][1].exec(r[1])){i=Fo[e][0],o=Fo[e][2]!==!1;break}if(i==null){t._isValid=!1;return}if(r[3]){for(e=0,n=h;e<n;e++)if(bi[e][1].exec(r[3])){c=(r[2]||" ")+bi[e][0];break}if(c==null){t._isValid=!1;return}}if(!o&&c!=null){t._isValid=!1;return}if(r[4])if(uj.exec(r[4]))f="Z";else{t._isValid=!1;return}t._f=i+(c||"")+(f||""),oc(t)}else t._isValid=!1}function gj(t,e,n,s,r,o){var i=[pj(t),Nm.indexOf(e),parseInt(n,10),parseInt(s,10),parseInt(r,10)];return o&&i.push(parseInt(o,10)),i}function pj(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function yj(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function xj(t,e,n){if(t){var s=jm.indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(s!==r)return Ee(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function vj(t,e,n){if(t)return mj[t];if(e)return 0;var s=parseInt(n,10),r=s%100,o=(s-r)/100;return o*60+r}function Lm(t){var e=hj.exec(yj(t._i)),n;if(e){if(n=gj(e[4],e[3],e[2],e[5],e[6],e[7]),!xj(e[1],n,t))return;t._a=n,t._tzm=vj(e[8],e[9],e[10]),t._d=eo.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),Ee(t).rfc2822=!0}else t._isValid=!1}function wj(t){var e=fj.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(Fm(t),t._isValid===!1)delete t._isValid;else return;if(Lm(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:re.createFromInputFallback(t)}re.createFromInputFallback=Xt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Ks(t,e,n){return t!=null?t:e!=null?e:n}function Cj(t){var e=new Date(re.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function rc(t){var e,n,s=[],r,o,i;if(!t._d){for(r=Cj(t),t._w&&t._a[mn]==null&&t._a[Bn]==null&&bj(t),t._dayOfYear!=null&&(i=Ks(t._a[Dt],r[Dt]),(t._dayOfYear>qr(i)||t._dayOfYear===0)&&(Ee(t)._overflowDayOfYear=!0),n=eo(i,0,t._dayOfYear),t._a[Bn]=n.getUTCMonth(),t._a[mn]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=s[e]=r[e];for(;e<7;e++)t._a[e]=s[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[_t]===24&&t._a[on]===0&&t._a[Gn]===0&&t._a[Ds]===0&&(t._nextDay=!0,t._a[_t]=0),t._d=(t._useUTC?eo:MA).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[_t]=24),t._w&&typeof t._w.d!="undefined"&&t._w.d!==o&&(Ee(t).weekdayMismatch=!0)}}function bj(t){var e,n,s,r,o,i,c,f,u;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,i=4,n=Ks(e.GG,t._a[Dt],to(lt(),1,4).year),s=Ks(e.W,1),r=Ks(e.E,1),(r<1||r>7)&&(f=!0)):(o=t._locale._week.dow,i=t._locale._week.doy,u=to(lt(),o,i),n=Ks(e.gg,t._a[Dt],u.year),s=Ks(e.w,u.week),e.d!=null?(r=e.d,(r<0||r>6)&&(f=!0)):e.e!=null?(r=e.e+o,(e.e<0||e.e>6)&&(f=!0)):r=o),s<1||s>qn(n,o,i)?Ee(t)._overflowWeeks=!0:f!=null?Ee(t)._overflowWeekday=!0:(c=Am(n,s,r,o,i),t._a[Dt]=c.year,t._dayOfYear=c.dayOfYear)}re.ISO_8601=function(){};re.RFC_2822=function(){};function oc(t){if(t._f===re.ISO_8601){Fm(t);return}if(t._f===re.RFC_2822){Lm(t);return}t._a=[],Ee(t).empty=!0;var e=""+t._i,n,s,r,o,i,c=e.length,f=0,u,h;for(r=wm(t._f,t._locale).match(zl)||[],h=r.length,n=0;n<h;n++)o=r[n],s=(e.match(cA(o,t))||[])[0],s&&(i=e.substr(0,e.indexOf(s)),i.length>0&&Ee(t).unusedInput.push(i),e=e.slice(e.indexOf(s)+s.length),f+=s.length),or[o]?(s?Ee(t).empty=!1:Ee(t).unusedTokens.push(o),uA(o,s,t)):t._strict&&!s&&Ee(t).unusedTokens.push(o);Ee(t).charsLeftOver=c-f,e.length>0&&Ee(t).unusedInput.push(e),t._a[_t]<=12&&Ee(t).bigHour===!0&&t._a[_t]>0&&(Ee(t).bigHour=void 0),Ee(t).parsedDateParts=t._a.slice(0),Ee(t).meridiem=t._meridiem,t._a[_t]=kj(t._locale,t._a[_t],t._meridiem),u=Ee(t).era,u!==null&&(t._a[Dt]=t._locale.erasConvertYear(u,t._a[Dt])),rc(t),sc(t)}function kj(t,e,n){var s;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(s=t.isPM(n),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function _j(t){var e,n,s,r,o,i,c=!1,f=t._f.length;if(f===0){Ee(t).invalidFormat=!0,t._d=new Date(NaN);return}for(r=0;r<f;r++)o=0,i=!1,e=Yl({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[r],oc(e),Wl(e)&&(i=!0),o+=Ee(e).charsLeftOver,o+=Ee(e).unusedTokens.length*10,Ee(e).score=o,c?o<s&&(s=o,n=e):(s==null||o<s||i)&&(s=o,n=e,i&&(c=!0));fs(t,n||e)}function Tj(t){if(!t._d){var e=ql(t._i),n=e.day===void 0?e.date:e.day;t._a=ym([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),rc(t)}}function Sj(t){var e=new vo(sc($m(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function $m(t){var e=t._i,n=t._f;return t._locale=t._locale||ss(t._l),e===null||n===void 0&&e===""?Aa({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),cn(e)?new vo(sc(e)):(xo(e)?t._d=e:ln(n)?_j(t):n?oc(t):Nj(t),Wl(t)||(t._d=null),t))}function Nj(t){var e=t._i;Lt(e)?t._d=new Date(re.now()):xo(e)?t._d=new Date(e.valueOf()):typeof e=="string"?wj(t):ln(e)?(t._a=ym(e.slice(0),function(n){return parseInt(n,10)}),rc(t)):js(e)?Tj(t):Qn(e)?t._d=new Date(e):re.createFromInputFallback(t)}function Vm(t,e,n,s,r){var o={};return(e===!0||e===!1)&&(s=e,e=void 0),(n===!0||n===!1)&&(s=n,n=void 0),(js(t)&&Gl(t)||ln(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=t,o._f=e,o._strict=s,Sj(o)}function lt(t,e,n,s){return Vm(t,e,n,s,!1)}var Mj=Xt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=lt.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Aa()}),Ej=Xt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=lt.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Aa()});function Um(t,e){var n,s;if(e.length===1&&ln(e[0])&&(e=e[0]),!e.length)return lt();for(n=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](n))&&(n=e[s]);return n}function Dj(){var t=[].slice.call(arguments,0);return Um("isBefore",t)}function Ij(){var t=[].slice.call(arguments,0);return Um("isAfter",t)}var Aj=function(){return Date.now?Date.now():+new Date},Ar=["year","quarter","month","week","day","hour","minute","second","millisecond"];function jj(t){var e,n=!1,s,r=Ar.length;for(e in t)if(Ue(t,e)&&!(wt.call(Ar,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(s=0;s<r;++s)if(t[Ar[s]]){if(n)return!1;parseFloat(t[Ar[s]])!==Re(t[Ar[s]])&&(n=!0)}return!0}function Rj(){return this._isValid}function Pj(){return dn(NaN)}function Va(t){var e=ql(t),n=e.year||0,s=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,i=e.day||0,c=e.hour||0,f=e.minute||0,u=e.second||0,h=e.millisecond||0;this._isValid=jj(e),this._milliseconds=+h+u*1e3+f*6e4+c*1e3*60*60,this._days=+i+o*7,this._months=+r+s*3+n*12,this._data={},this._locale=ss(),this._bubble()}function qo(t){return t instanceof Va}function ml(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Oj(t,e,n){var s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0,i;for(i=0;i<s;i++)Re(t[i])!==Re(e[i])&&o++;return o+r}function Bm(t,e){xe(t,0,0,function(){var n=this.utcOffset(),s="+";return n<0&&(n=-n,s="-"),s+Tn(~~(n/60),2)+e+Tn(~~n%60,2)})}Bm("Z",":");Bm("ZZ","");ie("Z",Fa);ie("ZZ",Fa);Ze(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=ac(Fa,t)});var Fj=/([\+\-]|\d\d)/gi;function ac(t,e){var n=(e||"").match(t),s,r,o;return n===null?null:(s=n[n.length-1]||[],r=(s+"").match(Fj)||["-",0,0],o=+(r[1]*60)+Re(r[2]),o===0?0:r[0]==="+"?o:-o)}function ic(t,e){var n,s;return e._isUTC?(n=e.clone(),s=(cn(t)||xo(t)?t.valueOf():lt(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),re.updateOffset(n,!1),n):lt(t).local()}function gl(t){return-Math.round(t._d.getTimezoneOffset())}re.updateOffset=function(){};function Lj(t,e,n){var s=this._offset||0,r;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=ac(Fa,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(r=gl(this)),this._offset=t,this._isUTC=!0,r!=null&&this.add(r,"m"),s!==t&&(!e||this._changeInProgress?Ym(this,dn(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,re.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:gl(this)}function $j(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Vj(t){return this.utcOffset(0,t)}function Uj(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(gl(this),"m")),this}function Bj(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=ac(iA,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Gj(t){return this.isValid()?(t=t?lt(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Wj(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Yj(){if(!Lt(this._isDSTShifted))return this._isDSTShifted;var t={},e;return Yl(t,this),t=$m(t),t._a?(e=t._isUTC?En(t._a):lt(t._a),this._isDSTShifted=this.isValid()&&Oj(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Hj(){return this.isValid()?!this._isUTC:!1}function zj(){return this.isValid()?this._isUTC:!1}function Gm(){return this.isValid()?this._isUTC&&this._offset===0:!1}var qj=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Zj=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function dn(t,e){var n=t,s=null,r,o,i;return qo(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:Qn(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(s=qj.exec(t))?(r=s[1]==="-"?-1:1,n={y:0,d:Re(s[mn])*r,h:Re(s[_t])*r,m:Re(s[on])*r,s:Re(s[Gn])*r,ms:Re(ml(s[Ds]*1e3))*r}):(s=Zj.exec(t))?(r=s[1]==="-"?-1:1,n={y:Ss(s[2],r),M:Ss(s[3],r),w:Ss(s[4],r),d:Ss(s[5],r),h:Ss(s[6],r),m:Ss(s[7],r),s:Ss(s[8],r)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(i=Jj(lt(n.from),lt(n.to)),n={},n.ms=i.milliseconds,n.M=i.months),o=new Va(n),qo(t)&&Ue(t,"_locale")&&(o._locale=t._locale),qo(t)&&Ue(t,"_isValid")&&(o._isValid=t._isValid),o}dn.fn=Va.prototype;dn.invalid=Pj;function Ss(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function ku(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Jj(t,e){var n;return t.isValid()&&e.isValid()?(e=ic(e,t),t.isBefore(e)?n=ku(t,e):(n=ku(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Wm(t,e){return function(n,s){var r,o;return s!==null&&!isNaN(+s)&&(vm(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=s,s=o),r=dn(n,s),Ym(this,r,t),this}}function Ym(t,e,n,s){var r=e._milliseconds,o=ml(e._days),i=ml(e._months);t.isValid()&&(s=s==null?!0:s,i&&Em(t,Qr(t,"Month")+i*n),o&&Sm(t,"Date",Qr(t,"Date")+o*n),r&&t._d.setTime(t._d.valueOf()+r*n),s&&re.updateOffset(t,o||i))}var Kj=Wm(1,"add"),Xj=Wm(-1,"subtract");function Hm(t){return typeof t=="string"||t instanceof String}function Qj(t){return cn(t)||xo(t)||Hm(t)||Qn(t)||t4(t)||e4(t)||t===null||t===void 0}function e4(t){var e=js(t)&&!Gl(t),n=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,o,i=s.length;for(r=0;r<i;r+=1)o=s[r],n=n||Ue(t,o);return e&&n}function t4(t){var e=ln(t),n=!1;return e&&(n=t.filter(function(s){return!Qn(s)&&Hm(t)}).length===0),e&&n}function n4(t){var e=js(t)&&!Gl(t),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,o;for(r=0;r<s.length;r+=1)o=s[r],n=n||Ue(t,o);return e&&n}function s4(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function r4(t,e){arguments.length===1&&(arguments[0]?Qj(arguments[0])?(t=arguments[0],e=void 0):n4(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||lt(),s=ic(n,this).startOf("day"),r=re.calendarFormat(this,s)||"sameElse",o=e&&(Dn(e[r])?e[r].call(this,n):e[r]);return this.format(o||this.localeData().calendar(r,this,lt(n)))}function o4(){return new vo(this)}function a4(t,e){var n=cn(t)?t:lt(t);return this.isValid()&&n.isValid()?(e=Qt(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function i4(t,e){var n=cn(t)?t:lt(t);return this.isValid()&&n.isValid()?(e=Qt(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function l4(t,e,n,s){var r=cn(t)?t:lt(t),o=cn(e)?e:lt(e);return this.isValid()&&r.isValid()&&o.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(r,n):!this.isBefore(r,n))&&(s[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function c4(t,e){var n=cn(t)?t:lt(t),s;return this.isValid()&&n.isValid()?(e=Qt(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(s=n.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function d4(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function u4(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function f4(t,e,n){var s,r,o;if(!this.isValid())return NaN;if(s=ic(t,this),!s.isValid())return NaN;switch(r=(s.utcOffset()-this.utcOffset())*6e4,e=Qt(e),e){case"year":o=Zo(this,s)/12;break;case"month":o=Zo(this,s);break;case"quarter":o=Zo(this,s)/3;break;case"second":o=(this-s)/1e3;break;case"minute":o=(this-s)/6e4;break;case"hour":o=(this-s)/36e5;break;case"day":o=(this-s-r)/864e5;break;case"week":o=(this-s-r)/6048e5;break;default:o=this-s}return n?o:Jt(o)}function Zo(t,e){if(t.date()<e.date())return-Zo(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),s=t.clone().add(n,"months"),r,o;return e-s<0?(r=t.clone().add(n-1,"months"),o=(e-s)/(s-r)):(r=t.clone().add(n+1,"months"),o=(e-s)/(r-s)),-(n+o)||0}re.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";re.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function h4(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function m4(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?zo(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Dn(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",zo(n,"Z")):zo(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function g4(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,s,r,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+s+r+o)}function p4(t){t||(t=this.isUtc()?re.defaultFormatUtc:re.defaultFormat);var e=zo(this,t);return this.localeData().postformat(e)}function y4(t,e){return this.isValid()&&(cn(t)&&t.isValid()||lt(t).isValid())?dn({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function x4(t){return this.from(lt(),t)}function v4(t,e){return this.isValid()&&(cn(t)&&t.isValid()||lt(t).isValid())?dn({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function w4(t){return this.to(lt(),t)}function zm(t){var e;return t===void 0?this._locale._abbr:(e=ss(t),e!=null&&(this._locale=e),this)}var qm=Xt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Zm(){return this._locale}var ua=1e3,ar=60*ua,fa=60*ar,Jm=(365*400+97)*24*fa;function ir(t,e){return(t%e+e)%e}function Km(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-Jm:new Date(t,e,n).valueOf()}function Xm(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-Jm:Date.UTC(t,e,n)}function C4(t){var e,n;if(t=Qt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Xm:Km,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ir(e+(this._isUTC?0:this.utcOffset()*ar),fa);break;case"minute":e=this._d.valueOf(),e-=ir(e,ar);break;case"second":e=this._d.valueOf(),e-=ir(e,ua);break}return this._d.setTime(e),re.updateOffset(this,!0),this}function b4(t){var e,n;if(t=Qt(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Xm:Km,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=fa-ir(e+(this._isUTC?0:this.utcOffset()*ar),fa)-1;break;case"minute":e=this._d.valueOf(),e+=ar-ir(e,ar)-1;break;case"second":e=this._d.valueOf(),e+=ua-ir(e,ua)-1;break}return this._d.setTime(e),re.updateOffset(this,!0),this}function k4(){return this._d.valueOf()-(this._offset||0)*6e4}function _4(){return Math.floor(this.valueOf()/1e3)}function T4(){return new Date(this.valueOf())}function S4(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function N4(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function M4(){return this.isValid()?this.toISOString():null}function E4(){return Wl(this)}function D4(){return fs({},Ee(this))}function I4(){return Ee(this).overflow}function A4(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}xe("N",0,0,"eraAbbr");xe("NN",0,0,"eraAbbr");xe("NNN",0,0,"eraAbbr");xe("NNNN",0,0,"eraName");xe("NNNNN",0,0,"eraNarrow");xe("y",["y",1],"yo","eraYear");xe("y",["yy",2],0,"eraYear");xe("y",["yyy",3],0,"eraYear");xe("y",["yyyy",4],0,"eraYear");ie("N",lc);ie("NN",lc);ie("NNN",lc);ie("NNNN",G4);ie("NNNNN",W4);Ze(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,s){var r=n._locale.erasParse(t,s,n._strict);r?Ee(n).era=r:Ee(n).invalidEra=t});ie("y",br);ie("yy",br);ie("yyy",br);ie("yyyy",br);ie("yo",Y4);Ze(["y","yy","yyy","yyyy"],Dt);Ze(["yo"],function(t,e,n,s){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Dt]=n._locale.eraYearOrdinalParse(t,r):e[Dt]=parseInt(t,10)});function j4(t,e){var n,s,r,o=this._eras||ss("en")._eras;for(n=0,s=o.length;n<s;++n){switch(typeof o[n].since){case"string":r=re(o[n].since).startOf("day"),o[n].since=r.valueOf();break}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":r=re(o[n].until).startOf("day").valueOf(),o[n].until=r.valueOf();break}}return o}function R4(t,e,n){var s,r,o=this.eras(),i,c,f;for(t=t.toUpperCase(),s=0,r=o.length;s<r;++s)if(i=o[s].name.toUpperCase(),c=o[s].abbr.toUpperCase(),f=o[s].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(c===t)return o[s];break;case"NNNN":if(i===t)return o[s];break;case"NNNNN":if(f===t)return o[s];break}else if([i,c,f].indexOf(t)>=0)return o[s]}function P4(t,e){var n=t.since<=t.until?1:-1;return e===void 0?re(t.since).year():re(t.since).year()+(e-t.offset)*n}function O4(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].name;return""}function F4(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].narrow;return""}function L4(){var t,e,n,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),s[t].since<=n&&n<=s[t].until||s[t].until<=n&&n<=s[t].since)return s[t].abbr;return""}function $4(){var t,e,n,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=r[t].since<=r[t].until?1:-1,s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return(this.year()-re(r[t].since).year())*n+r[t].offset;return this.year()}function V4(t){return Ue(this,"_erasNameRegex")||cc.call(this),t?this._erasNameRegex:this._erasRegex}function U4(t){return Ue(this,"_erasAbbrRegex")||cc.call(this),t?this._erasAbbrRegex:this._erasRegex}function B4(t){return Ue(this,"_erasNarrowRegex")||cc.call(this),t?this._erasNarrowRegex:this._erasRegex}function lc(t,e){return e.erasAbbrRegex(t)}function G4(t,e){return e.erasNameRegex(t)}function W4(t,e){return e.erasNarrowRegex(t)}function Y4(t,e){return e._eraYearOrdinalRegex||br}function cc(){var t=[],e=[],n=[],s=[],r,o,i,c,f,u=this.eras();for(r=0,o=u.length;r<o;++r)i=zn(u[r].name),c=zn(u[r].abbr),f=zn(u[r].narrow),e.push(i),t.push(c),n.push(f),s.push(i),s.push(c),s.push(f);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}xe(0,["gg",2],0,function(){return this.weekYear()%100});xe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ua(t,e){xe(0,[t,t.length],0,e)}Ua("gggg","weekYear");Ua("ggggg","weekYear");Ua("GGGG","isoWeekYear");Ua("GGGGG","isoWeekYear");ie("G",Oa);ie("g",Oa);ie("GG",ct,zt);ie("gg",ct,zt);ie("GGGG",Jl,Zl);ie("gggg",Jl,Zl);ie("GGGGG",Pa,ja);ie("ggggg",Pa,ja);Co(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,s){e[s.substr(0,2)]=Re(t)});Co(["gg","GG"],function(t,e,n,s){e[s]=re.parseTwoDigitYear(t)});function H4(t){return Qm.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function z4(t){return Qm.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function q4(){return qn(this.year(),1,4)}function Z4(){return qn(this.isoWeekYear(),1,4)}function J4(){var t=this.localeData()._week;return qn(this.year(),t.dow,t.doy)}function K4(){var t=this.localeData()._week;return qn(this.weekYear(),t.dow,t.doy)}function Qm(t,e,n,s,r){var o;return t==null?to(this,s,r).year:(o=qn(t,s,r),e>o&&(e=o),X4.call(this,t,e,n,s,r))}function X4(t,e,n,s,r){var o=Am(t,e,n,s,r),i=eo(o.year,0,o.dayOfYear);return this.year(i.getUTCFullYear()),this.month(i.getUTCMonth()),this.date(i.getUTCDate()),this}xe("Q",0,"Qo","quarter");ie("Q",Cm);Ze("Q",function(t,e){e[Bn]=(Re(t)-1)*3});function Q4(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}xe("D",["DD",2],"Do","date");ie("D",ct,kr);ie("DD",ct,zt);ie("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Ze(["D","DD"],mn);Ze("Do",function(t,e){e[mn]=Re(t.match(ct)[0])});var eg=_r("Date",!0);xe("DDD",["DDDD",3],"DDDo","dayOfYear");ie("DDD",Ra);ie("DDDD",bm);Ze(["DDD","DDDD"],function(t,e,n){n._dayOfYear=Re(t)});function eR(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}xe("m",["mm",2],0,"minute");ie("m",ct,Kl);ie("mm",ct,zt);Ze(["m","mm"],on);var tR=_r("Minutes",!1);xe("s",["ss",2],0,"second");ie("s",ct,Kl);ie("ss",ct,zt);Ze(["s","ss"],Gn);var nR=_r("Seconds",!1);xe("S",0,0,function(){return~~(this.millisecond()/100)});xe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});xe(0,["SSS",3],0,"millisecond");xe(0,["SSSS",4],0,function(){return this.millisecond()*10});xe(0,["SSSSS",5],0,function(){return this.millisecond()*100});xe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});xe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});xe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});xe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});ie("S",Ra,Cm);ie("SS",Ra,zt);ie("SSS",Ra,bm);var hs,tg;for(hs="SSSS";hs.length<=9;hs+="S")ie(hs,br);function sR(t,e){e[Ds]=Re(("0."+t)*1e3)}for(hs="S";hs.length<=9;hs+="S")Ze(hs,sR);tg=_r("Milliseconds",!1);xe("z",0,0,"zoneAbbr");xe("zz",0,0,"zoneName");function rR(){return this._isUTC?"UTC":""}function oR(){return this._isUTC?"Coordinated Universal Time":""}var X=vo.prototype;X.add=Kj;X.calendar=r4;X.clone=o4;X.diff=f4;X.endOf=b4;X.format=p4;X.from=y4;X.fromNow=x4;X.to=v4;X.toNow=w4;X.get=gA;X.invalidAt=I4;X.isAfter=a4;X.isBefore=i4;X.isBetween=l4;X.isSame=c4;X.isSameOrAfter=d4;X.isSameOrBefore=u4;X.isValid=E4;X.lang=qm;X.locale=zm;X.localeData=Zm;X.max=Ej;X.min=Mj;X.parsingFlags=D4;X.set=pA;X.startOf=C4;X.subtract=Xj;X.toArray=S4;X.toObject=N4;X.toDate=T4;X.toISOString=m4;X.inspect=g4;typeof Symbol!="undefined"&&Symbol.for!=null&&(X[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});X.toJSON=M4;X.toString=h4;X.unix=_4;X.valueOf=k4;X.creationData=A4;X.eraName=O4;X.eraNarrow=F4;X.eraAbbr=L4;X.eraYear=$4;X.year=Tm;X.isLeapYear=mA;X.weekYear=H4;X.isoWeekYear=z4;X.quarter=X.quarters=Q4;X.month=Dm;X.daysInMonth=TA;X.week=X.weeks=jA;X.isoWeek=X.isoWeeks=RA;X.weeksInYear=J4;X.weeksInWeekYear=K4;X.isoWeeksInYear=q4;X.isoWeeksInISOWeekYear=Z4;X.date=eg;X.day=X.days=zA;X.weekday=qA;X.isoWeekday=ZA;X.dayOfYear=eR;X.hour=X.hours=nj;X.minute=X.minutes=tR;X.second=X.seconds=nR;X.millisecond=X.milliseconds=tg;X.utcOffset=Lj;X.utc=Vj;X.local=Uj;X.parseZone=Bj;X.hasAlignedHourOffset=Gj;X.isDST=Wj;X.isLocal=Hj;X.isUtcOffset=zj;X.isUtc=Gm;X.isUTC=Gm;X.zoneAbbr=rR;X.zoneName=oR;X.dates=Xt("dates accessor is deprecated. Use date instead.",eg);X.months=Xt("months accessor is deprecated. Use month instead",Dm);X.years=Xt("years accessor is deprecated. Use year instead",Tm);X.zone=Xt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",$j);X.isDSTShifted=Xt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Yj);function aR(t){return lt(t*1e3)}function iR(){return lt.apply(null,arguments).parseZone()}function ng(t){return t}var Be=Hl.prototype;Be.calendar=HI;Be.longDateFormat=JI;Be.invalidDate=XI;Be.ordinal=tA;Be.preparse=ng;Be.postformat=ng;Be.relativeTime=sA;Be.pastFuture=rA;Be.set=WI;Be.eras=j4;Be.erasParse=R4;Be.erasConvertYear=P4;Be.erasAbbrRegex=U4;Be.erasNameRegex=V4;Be.erasNarrowRegex=B4;Be.months=CA;Be.monthsShort=bA;Be.monthsParse=_A;Be.monthsRegex=NA;Be.monthsShortRegex=SA;Be.week=EA;Be.firstDayOfYear=AA;Be.firstDayOfWeek=IA;Be.weekdays=BA;Be.weekdaysMin=WA;Be.weekdaysShort=GA;Be.weekdaysParse=HA;Be.weekdaysRegex=JA;Be.weekdaysShortRegex=KA;Be.weekdaysMinRegex=XA;Be.isPM=ej;Be.meridiem=sj;function ha(t,e,n,s){var r=ss(),o=En().set(s,e);return r[n](o,t)}function sg(t,e,n){if(Qn(t)&&(e=t,t=void 0),t=t||"",e!=null)return ha(t,e,n,"month");var s,r=[];for(s=0;s<12;s++)r[s]=ha(t,s,n,"month");return r}function dc(t,e,n,s){typeof t=="boolean"?(Qn(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,Qn(e)&&(n=e,e=void 0),e=e||"");var r=ss(),o=t?r._week.dow:0,i,c=[];if(n!=null)return ha(e,(n+o)%7,s,"day");for(i=0;i<7;i++)c[i]=ha(e,(i+o)%7,s,"day");return c}function lR(t,e){return sg(t,e,"months")}function cR(t,e){return sg(t,e,"monthsShort")}function dR(t,e,n){return dc(t,e,n,"weekdays")}function uR(t,e,n){return dc(t,e,n,"weekdaysShort")}function fR(t,e,n){return dc(t,e,n,"weekdaysMin")}xs("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=Re(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});re.lang=Xt("moment.lang is deprecated. Use moment.locale instead.",xs);re.langData=Xt("moment.langData is deprecated. Use moment.localeData instead.",ss);var Pn=Math.abs;function hR(){var t=this._data;return this._milliseconds=Pn(this._milliseconds),this._days=Pn(this._days),this._months=Pn(this._months),t.milliseconds=Pn(t.milliseconds),t.seconds=Pn(t.seconds),t.minutes=Pn(t.minutes),t.hours=Pn(t.hours),t.months=Pn(t.months),t.years=Pn(t.years),this}function rg(t,e,n,s){var r=dn(e,n);return t._milliseconds+=s*r._milliseconds,t._days+=s*r._days,t._months+=s*r._months,t._bubble()}function mR(t,e){return rg(this,t,e,1)}function gR(t,e){return rg(this,t,e,-1)}function _u(t){return t<0?Math.floor(t):Math.ceil(t)}function pR(){var t=this._milliseconds,e=this._days,n=this._months,s=this._data,r,o,i,c,f;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=_u(pl(n)+e)*864e5,e=0,n=0),s.milliseconds=t%1e3,r=Jt(t/1e3),s.seconds=r%60,o=Jt(r/60),s.minutes=o%60,i=Jt(o/60),s.hours=i%24,e+=Jt(i/24),f=Jt(og(e)),n+=f,e-=_u(pl(f)),c=Jt(n/12),n%=12,s.days=e,s.months=n,s.years=c,this}function og(t){return t*4800/146097}function pl(t){return t*146097/4800}function yR(t){if(!this.isValid())return NaN;var e,n,s=this._milliseconds;if(t=Qt(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+s/864e5,n=this._months+og(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(pl(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+t)}}function rs(t){return function(){return this.as(t)}}var ag=rs("ms"),xR=rs("s"),vR=rs("m"),wR=rs("h"),CR=rs("d"),bR=rs("w"),kR=rs("M"),_R=rs("Q"),TR=rs("y"),SR=ag;function NR(){return dn(this)}function MR(t){return t=Qt(t),this.isValid()?this[t+"s"]():NaN}function $s(t){return function(){return this.isValid()?this._data[t]:NaN}}var ER=$s("milliseconds"),DR=$s("seconds"),IR=$s("minutes"),AR=$s("hours"),jR=$s("days"),RR=$s("months"),PR=$s("years");function OR(){return Jt(this.days()/7)}var On=Math.round,tr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function FR(t,e,n,s,r){return r.relativeTime(e||1,!!n,t,s)}function LR(t,e,n,s){var r=dn(t).abs(),o=On(r.as("s")),i=On(r.as("m")),c=On(r.as("h")),f=On(r.as("d")),u=On(r.as("M")),h=On(r.as("w")),m=On(r.as("y")),g=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||i<=1&&["m"]||i<n.m&&["mm",i]||c<=1&&["h"]||c<n.h&&["hh",c]||f<=1&&["d"]||f<n.d&&["dd",f];return n.w!=null&&(g=g||h<=1&&["w"]||h<n.w&&["ww",h]),g=g||u<=1&&["M"]||u<n.M&&["MM",u]||m<=1&&["y"]||["yy",m],g[2]=e,g[3]=+t>0,g[4]=s,FR.apply(null,g)}function $R(t){return t===void 0?On:typeof t=="function"?(On=t,!0):!1}function VR(t,e){return tr[t]===void 0?!1:e===void 0?tr[t]:(tr[t]=e,t==="s"&&(tr.ss=e-1),!0)}function UR(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=tr,r,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(s=Object.assign({},tr,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),r=this.localeData(),o=LR(this,!n,s,r),n&&(o=r.pastFuture(+this,o)),r.postformat(o)}var ki=Math.abs;function qs(t){return(t>0)-(t<0)||+t}function Ba(){if(!this.isValid())return this.localeData().invalidDate();var t=ki(this._milliseconds)/1e3,e=ki(this._days),n=ki(this._months),s,r,o,i,c=this.asSeconds(),f,u,h,m;return c?(s=Jt(t/60),r=Jt(s/60),t%=60,s%=60,o=Jt(n/12),n%=12,i=t?t.toFixed(3).replace(/\.?0+$/,""):"",f=c<0?"-":"",u=qs(this._months)!==qs(c)?"-":"",h=qs(this._days)!==qs(c)?"-":"",m=qs(this._milliseconds)!==qs(c)?"-":"",f+"P"+(o?u+o+"Y":"")+(n?u+n+"M":"")+(e?h+e+"D":"")+(r||s||t?"T":"")+(r?m+r+"H":"")+(s?m+s+"M":"")+(t?m+i+"S":"")):"P0D"}var Fe=Va.prototype;Fe.isValid=Rj;Fe.abs=hR;Fe.add=mR;Fe.subtract=gR;Fe.as=yR;Fe.asMilliseconds=ag;Fe.asSeconds=xR;Fe.asMinutes=vR;Fe.asHours=wR;Fe.asDays=CR;Fe.asWeeks=bR;Fe.asMonths=kR;Fe.asQuarters=_R;Fe.asYears=TR;Fe.valueOf=SR;Fe._bubble=pR;Fe.clone=NR;Fe.get=MR;Fe.milliseconds=ER;Fe.seconds=DR;Fe.minutes=IR;Fe.hours=AR;Fe.days=jR;Fe.weeks=OR;Fe.months=RR;Fe.years=PR;Fe.humanize=UR;Fe.toISOString=Ba;Fe.toString=Ba;Fe.toJSON=Ba;Fe.locale=zm;Fe.localeData=Zm;Fe.toIsoString=Xt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ba);Fe.lang=qm;xe("X",0,0,"unix");xe("x",0,0,"valueOf");ie("x",Oa);ie("X",lA);Ze("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});Ze("x",function(t,e,n){n._d=new Date(Re(t))});//! moment.js
re.version="2.30.1";BI(lt);re.fn=X;re.min=Dj;re.max=Ij;re.now=Aj;re.utc=En;re.unix=aR;re.months=lR;re.isDate=xo;re.locale=xs;re.invalid=Aa;re.duration=dn;re.isMoment=cn;re.weekdays=dR;re.parseZone=iR;re.localeData=ss;re.isDuration=qo;re.monthsShort=cR;re.weekdaysMin=fR;re.defineLocale=nc;re.updateLocale=ij;re.locales=lj;re.weekdaysShort=uR;re.normalizeUnits=Qt;re.relativeTimeRounding=$R;re.relativeTimeThreshold=VR;re.calendarFormat=s4;re.prototype=X;re.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var Ga="Switch",[BR,FP]=ma(Ga),[GR,WR]=BR(Ga),ig=w.forwardRef((t,e)=>{const M=t,{__scopeSwitch:n,name:s,checked:r,defaultChecked:o,required:i,disabled:c,value:f="on",onCheckedChange:u,form:h}=M,m=G(M,["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]),[g,y]=w.useState(null),p=gr(e,D=>y(D)),v=w.useRef(!1),C=g?h||!!g.closest("form"):!0,[b,N]=ga({prop:r,defaultProp:o!=null?o:!1,onChange:u,caller:Ga});return a.jsxs(GR,{scope:n,checked:b,disabled:c,children:[a.jsx(es.button,F(x({type:"button",role:"switch","aria-checked":b,"aria-required":i,"data-state":ug(b),"data-disabled":c?"":void 0,disabled:c,value:f},m),{ref:p,onClick:$t(t.onClick,D=>{N(k=>!k),C&&(v.current=D.isPropagationStopped(),v.current||D.stopPropagation())})})),C&&a.jsx(dg,{control:g,bubbles:!v.current,name:s,value:f,checked:b,required:i,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});ig.displayName=Ga;var lg="SwitchThumb",cg=w.forwardRef((t,e)=>{const o=t,{__scopeSwitch:n}=o,s=G(o,["__scopeSwitch"]),r=WR(lg,n);return a.jsx(es.span,F(x({"data-state":ug(r.checked),"data-disabled":r.disabled?"":void 0},s),{ref:e}))});cg.displayName=lg;var YR="SwitchBubbleInput",dg=w.forwardRef((i,o)=>{var c=i,{__scopeSwitch:t,control:e,checked:n,bubbles:s=!0}=c,r=G(c,["__scopeSwitch","control","checked","bubbles"]);const f=w.useRef(null),u=gr(f,o),h=Pu(n),m=Ou(e);return w.useEffect(()=>{const g=f.current;if(!g)return;const y=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(y,"checked").set;if(h!==n&&v){const C=new Event("click",{bubbles:s});v.call(g,n),g.dispatchEvent(C)}},[h,n,s]),a.jsx("input",F(x({type:"checkbox","aria-hidden":!0,defaultChecked:n},r),{tabIndex:-1,ref:u,style:F(x(x({},r.style),m),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});dg.displayName=YR;function ug(t){return t?"checked":"unchecked"}var HR=ig,zR=cg;function yl(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx(HR,F(x({"data-slot":"switch",className:V("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t)},e),{children:a.jsx(zR,{"data-slot":"switch-thumb",className:V("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})}))}function bn({task:t,isOpen:e,onClose:n,onSave:s,onCreate:r,onDelete:o,isAllTasksBoard:i=!1,boards:c=[],isCreating:f=!1}){var B,$,K,te,le,ve,we,_e,S,L,j,W,Q,A,H;const[u,h]=w.useState({}),[m,g]=w.useState({}),[y,p]=w.useState(!1),[v,C]=w.useState(!1),b=w.useMemo(()=>{if(!m||Object.keys(m).length===0)return!1;const O=["title","description","timeEstimate","priority","status","category","scheduledDate","recurring"];for(const q of O)if(q==="recurring"){const ne=u.recurring,U=m.recurring;if(!ne&&!U)continue;if(!ne||!U||ne.pattern!==U.pattern||ne.interval!==U.interval||JSON.stringify(ne.daysOfWeek)!==JSON.stringify(U.daysOfWeek)||JSON.stringify(ne.daysOfMonth)!==JSON.stringify(U.daysOfMonth)||JSON.stringify(ne.monthsOfYear)!==JSON.stringify(U.monthsOfYear)||ne.endDate!==U.endDate)return!0}else if(u[q]!==m[q])return!0;return!1},[u,m]);w.useEffect(()=>{const O=t?{title:t.title,description:t.description||"",timeEstimate:t.timeEstimate,priority:t.priority,status:t.status,scheduledDate:t.scheduledDate,startDate:t.startDate,dueDate:t.dueDate,category:t.category||"",progressPercentage:t.progressPercentage,timeSpent:t.timeSpent,boardId:t.boardId,recurring:t.recurring}:{title:"",description:"",timeEstimate:0,priority:2,status:"backlog",progressPercentage:0,timeSpent:0,category:""};h(O),g(O),C(!!O.recurring)},[t,e,f]),w.useEffect(()=>{if(!e&&f){const O={title:"",description:"",timeEstimate:0,priority:2,status:"backlog",progressPercentage:0,timeSpent:0,category:""};h(O),g(O),C(!1)}},[e,f]),w.useEffect(()=>{const O=q=>{var ne;if(!y){if((q.ctrlKey||q.metaKey)&&q.key==="Enter"&&b)q.preventDefault(),M();else if(q.key==="Enter"&&!q.ctrlKey&&!q.metaKey&&!q.shiftKey){const U=q.target;U.tagName!=="TEXTAREA"&&U.tagName!=="BUTTON"&&!U.closest('[role="combobox"]')&&!U.closest('[role="listbox"]')&&((ne=u.title)!=null&&ne.trim())&&b&&(q.preventDefault(),M())}}};if(e)return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[e,b,u.title,y]);const N=O=>{var q;y||O.key==="Enter"&&!O.shiftKey&&((q=u.title)!=null&&q.trim())&&(O.preventDefault(),M())},M=()=>T(null,null,function*(){var O,q,ne,U,Ce,dt,yt;if(!(!((O=u.title)!=null&&O.trim())||y)){p(!0);try{const Je=x({},u);if(v&&u.recurring){const Pt=u.scheduledDate?new Date(u.scheduledDate):new Date;if(Je.recurring={pattern:((q=u.recurring)==null?void 0:q.pattern)||"daily",interval:((ne=u.recurring)==null?void 0:ne.interval)||1,daysOfWeek:((U=u.recurring)==null?void 0:U.daysOfWeek)||[],daysOfMonth:((Ce=u.recurring)==null?void 0:Ce.daysOfMonth)||[],monthsOfYear:((dt=u.recurring)==null?void 0:dt.monthsOfYear)||[],endDate:(yt=u.recurring)==null?void 0:yt.endDate},Je.scheduledDate){const In=new Date(Je.scheduledDate);In.setHours(Pt.getHours(),Pt.getMinutes(),Pt.getSeconds()),Je.scheduledDate=In.toISOString()}}else Je.recurring=void 0;t&&!f&&s?yield s(t.id,Je):f&&r&&(yield r(Je)),g(x({},Je)),n()}catch(Je){console.error("Failed to save task:",Je)}finally{p(!1)}}}),D=()=>T(null,null,function*(){if(t){p(!0);try{yield o(t.id),n()}catch(O){console.error("Failed to delete task:",O)}finally{p(!1)}}}),k=(O,q)=>{h(ne=>F(x({},ne),{[O]:q}))},_=()=>T(null,null,function*(){if(!t)return;const O=t.status==="done"?"backlog":"done",q={status:O,completedAt:O==="done"?new Date().toISOString():void 0,progressPercentage:O==="done"?100:t.progressPercentage};k("status",O),O==="done"&&k("progressPercentage",100),p(!0);try{s&&(yield s(t.id,q))}catch(ne){console.error("Failed to toggle task completion:",ne),k("status",t.status),k("progressPercentage",t.progressPercentage)}finally{p(!1)}}),E=O=>{switch(O){case"backlog":return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200";case"this-week":return"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200";case"today":return"bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200";case"done":return"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200"}},P=O=>{switch(O){case 1:return"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200";case 2:return"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200";case 3:return"bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200";case 4:return"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200"}},R=({value:O,onChange:q,min:ne=0,max:U=999,step:Ce=1,placeholder:dt="0",className:yt="",onKeyDown:Je})=>{const Pt=()=>{const Ot=Math.min(O+Ce,U);q(Ot)},In=()=>{const Ot=Math.max(O-Ce,ne);q(Ot)},bs=Ot=>{const An=parseInt(Ot.target.value)||ne,ks=Math.min(Math.max(An,ne),U);q(ks)};return a.jsxs("div",{className:`flex items-center ${yt}`,children:[a.jsx(Z,{type:"button",variant:"outline",size:"sm",className:"h-9 w-9 p-0 rounded-r-none border-r-0 shrink-0",onClick:In,disabled:O<=ne,children:a.jsx(gf,{className:"h-4 w-4"})}),a.jsx(Ae,{type:"number",value:O,onChange:bs,onKeyDown:Je,placeholder:dt,className:"h-9 rounded-none border-x-0 text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",min:ne,max:U}),a.jsx(Z,{type:"button",variant:"outline",size:"sm",className:"h-9 w-9 p-0 rounded-l-none border-l-0 shrink-0",onClick:Pt,disabled:O>=U,children:a.jsx($n,{className:"h-4 w-4"})})]})};return a.jsx(vn,{open:e,onOpenChange:n,children:a.jsxs(wn,{className:"sm:max-w-5xl max-h-[90vh] overflow-hidden p-0 bg-background [&>button]:hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border bg-background",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[t&&a.jsx("button",{onClick:_,disabled:y,className:"flex items-center hover:scale-110 transition-transform disabled:opacity-50",children:u.status==="done"?a.jsx(At,{className:"h-5 w-5 text-green-600"}):a.jsx(Hx,{className:"h-5 w-5 text-muted-foreground hover:text-green-600 transition-colors"})}),a.jsxs("div",{children:[a.jsx(Yn,{className:"text-xl font-semibold text-foreground",children:f?"Create New Task":"Task Details"}),!f&&t&&a.jsxs(Hn,{className:"text-sm text-muted-foreground mt-1",children:["Created ",re(t.createdAt).format("MMM D, YYYY"),t.completedAt&&` â€¢ Completed ${re(t.completedAt).format("MMM D, YYYY")}`]})]})]})," ",a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Z,{onClick:M,disabled:y||!((B=u.title)!=null&&B.trim()),size:"sm",children:y?"Saving...":f?"Create Task":"Save Changes"}),t&&!f&&a.jsx(Z,{variant:"destructive",size:"sm",onClick:D,disabled:y,children:a.jsx(ds,{className:"h-4 w-4"})}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:n,children:a.jsx(xn,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[a.jsxs("div",{className:"flex-1 p-8 overflow-y-auto bg-background",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-3",children:"Task Title"}),a.jsx(Ae,{value:u.title||"",onChange:O=>k("title",O.target.value),placeholder:"Enter task title...",className:"text-2xl font-semibold border-none shadow-none p-4 h-auto focus-visible:ring-0 bg-transparent text-foreground placeholder:text-muted-foreground",onKeyDown:N})]}),a.jsxs("div",{className:"mb-10",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-3",children:"Description"}),a.jsx(va,{value:u.description||"",onChange:O=>k("description",O.target.value),placeholder:"Add a description for this task...",className:"min-h-[140px] border-none shadow-none p-4 resize-none focus-visible:ring-0 bg-transparent text-base text-foreground placeholder:text-muted-foreground",onKeyDown:N})]}),t&&a.jsx("div",{className:"mb-8",children:a.jsx(gm,{taskId:t.id,className:"m-0"})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-3",children:"Category"}),a.jsx(Ae,{value:u.category||"",onChange:O=>k("category",O.target.value),placeholder:"e.g., Work, Personal, Health",className:"bg-muted/50 border-border text-foreground",onKeyDown:N})]}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Recurring Task"}),a.jsx(yl,{checked:v,onCheckedChange:O=>{C(O),O?u.recurring||k("recurring",{pattern:"daily",interval:1,daysOfWeek:[],daysOfMonth:[],monthsOfYear:[],endDate:void 0}):k("recurring",void 0)}})]}),v&&a.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/30",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:"Pattern"}),a.jsxs(ht,{value:(($=u.recurring)==null?void 0:$.pattern)||"daily",onValueChange:O=>k("recurring",F(x({},u.recurring),{pattern:O})),children:[a.jsx(st,{children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"daily",children:"Daily"}),a.jsx(ge,{value:"weekly",children:"Weekly"}),a.jsx(ge,{value:"monthly",children:"Monthly"}),a.jsx(ge,{value:"yearly",children:"Yearly"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:["Every X ",((K=u.recurring)==null?void 0:K.pattern)==="daily"?"days":((te=u.recurring)==null?void 0:te.pattern)==="weekly"?"weeks":((le=u.recurring)==null?void 0:le.pattern)==="monthly"?"months":((ve=u.recurring)==null?void 0:ve.pattern)==="yearly"?"years":"days"]}),a.jsx(R,{value:((we=u.recurring)==null?void 0:we.interval)||1,onChange:O=>k("recurring",F(x({},u.recurring),{interval:O})),onKeyDown:N})]})]}),((_e=u.recurring)==null?void 0:_e.pattern)==="weekly"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:"Days of Week"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((O,q)=>{var ne,U;return a.jsx(Z,{variant:(U=(ne=u.recurring)==null?void 0:ne.daysOfWeek)!=null&&U.includes(q)?"default":"outline",size:"sm",onClick:()=>{var yt;const Ce=((yt=u.recurring)==null?void 0:yt.daysOfWeek)||[],dt=Ce.includes(q)?Ce.filter(Je=>Je!==q):[...Ce,q];k("recurring",F(x({},u.recurring),{daysOfWeek:dt}))},children:O},O)})})]}),((S=u.recurring)==null?void 0:S.pattern)==="monthly"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:"Days of Month"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:31},(O,q)=>q+1).map(O=>{var q,ne;return a.jsx(Z,{variant:(ne=(q=u.recurring)==null?void 0:q.daysOfMonth)!=null&&ne.includes(O)?"default":"outline",size:"sm",onClick:()=>{var dt;const U=((dt=u.recurring)==null?void 0:dt.daysOfMonth)||[],Ce=U.includes(O)?U.filter(yt=>yt!==O):[...U,O];k("recurring",F(x({},u.recurring),{daysOfMonth:Ce}))},children:O},O)})})]}),((L=u.recurring)==null?void 0:L.pattern)==="yearly"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:"Months of Year"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((O,q)=>{var ne,U;return a.jsx(Z,{variant:(U=(ne=u.recurring)==null?void 0:ne.monthsOfYear)!=null&&U.includes(q+1)?"default":"outline",size:"sm",onClick:()=>{var Je;const Ce=((Je=u.recurring)==null?void 0:Je.monthsOfYear)||[],dt=q+1,yt=Ce.includes(dt)?Ce.filter(Pt=>Pt!==dt):[...Ce,dt];k("recurring",F(x({},u.recurring),{monthsOfYear:yt}))},children:O},O)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:"End Date (Optional)"}),a.jsx(Ae,{type:"date",value:((W=(j=u.recurring)==null?void 0:j.endDate)==null?void 0:W.split("T")[0])||"",onChange:O=>k("recurring",F(x({},u.recurring),{endDate:O.target.value?`${O.target.value}T00:00:00Z`:void 0}))})]})]})]})]}),a.jsx("div",{className:"w-80 border-l border-border bg-muted/30 p-6 overflow-y-auto",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-3",children:"Status"}),a.jsxs(ht,{value:u.status||"backlog",onValueChange:O=>k("status",O),children:[a.jsx(st,{className:"w-full mb-2",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"backlog",children:"Backlog"}),a.jsx(ge,{value:"this-week",children:"This Week"}),a.jsx(ge,{value:"today",children:"Today"}),a.jsx(ge,{value:"done",children:"Done"})]})]}),a.jsx(tt,{className:E(u.status||"backlog"),children:((Q=u.status)==null?void 0:Q.replace(/-/g," ").toUpperCase())||"BACKLOG"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-3",children:"Priority"}),a.jsxs(ht,{value:((A=u.priority)==null?void 0:A.toString())||"2",onValueChange:O=>k("priority",parseInt(O)),children:[a.jsx(st,{className:"w-full mb-2",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"1",children:"1 - Low"}),a.jsx(ge,{value:"2",children:"2 - Medium"}),a.jsx(ge,{value:"3",children:"3 - High"}),a.jsx(ge,{value:"4",children:"4 - Critical"})]})]}),a.jsxs(tt,{className:P(u.priority||2),children:["Priority ",u.priority||2]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-medium text-muted-foreground block mb-3",children:[a.jsx(Vt,{className:"h-4 w-4 inline mr-1"}),"Time Estimate"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(R,{value:u.timeEstimate||0,onChange:O=>k("timeEstimate",O),min:0,max:1440,step:15,placeholder:"0",className:"flex-1",onKeyDown:N}),a.jsx("span",{className:"self-center text-sm text-muted-foreground",children:"min"})]})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("label",{className:"text-sm font-medium text-muted-foreground",children:[a.jsx(nt,{className:"h-4 w-4 inline mr-1"}),"Scheduled Date & Time"]}),u.scheduledDate&&a.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>k("scheduledDate",void 0),className:"text-xs text-muted-foreground hover:text-destructive",children:[a.jsx(xn,{className:"h-3 w-3 mr-1"}),"Clear"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Date"}),a.jsx("div",{className:"border rounded-md p-3 bg-background",children:a.jsx(Bl,{mode:"single",selected:u.scheduledDate?new Date(u.scheduledDate):void 0,onSelect:O=>{if(O){const q=u.scheduledDate?new Date(u.scheduledDate):new Date,ne=new Date(O);ne.setHours(q.getHours()||9,q.getMinutes()||0,0,0),k("scheduledDate",ne.toISOString())}else k("scheduledDate",void 0)},className:"w-full"})})]}),u.scheduledDate&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Time"}),a.jsx(Ae,{type:"time",value:(()=>{const O=new Date(u.scheduledDate);return`${O.getHours().toString().padStart(2,"0")}:${O.getMinutes().toString().padStart(2,"0")}`})(),onChange:O=>{if(O.target.value&&u.scheduledDate){const[q,ne]=O.target.value.split(":").map(Number),U=new Date(u.scheduledDate);U.setHours(q,ne,0,0),k("scheduledDate",U.toISOString())}},className:"bg-background",onKeyDown:N})]}),u.scheduledDate&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quick Times"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{label:"9:00 AM",hour:9,minute:0},{label:"12:00 PM",hour:12,minute:0},{label:"2:00 PM",hour:14,minute:0},{label:"5:00 PM",hour:17,minute:0},{label:"7:00 PM",hour:19,minute:0},{label:"9:00 PM",hour:21,minute:0}].map(O=>a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{if(u.scheduledDate){const q=new Date(u.scheduledDate);q.setHours(O.hour,O.minute,0,0),k("scheduledDate",q.toISOString())}},className:"text-xs",children:O.label},O.label))})]})]})]})}),i&&c&&c.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground block mb-3",children:"Board"}),a.jsxs(ht,{value:((H=u.boardId)==null?void 0:H.toString())||"",onValueChange:O=>k("boardId",O?parseInt(O):void 0),children:[a.jsx(st,{children:a.jsx(mt,{placeholder:"Select board (optional)"})}),a.jsx(rt,{children:c.map(O=>a.jsx(ge,{value:O.id.toString(),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:O.color||"#3B82F6"}}),O.name]})},O.id))})]})]})]})})]})]})})}function qR({board:t,tasks:e,onBack:n,onSelectBoard:s,onMoveTask:r,onAddTask:o,onUpdateTask:i,onDeleteTask:c,onDuplicateTask:f,onUpdateTimeEstimate:u,onStartSprint:h,isAllTasksBoard:m=!1,boards:g=[],user:y,onSignOut:p,onViewChange:v,onOpenSettings:C,userPreferences:b}){const[N,M]=w.useState(!1),[D,k]=w.useState(null),[_,E]=w.useState(!1),{filterTasks:P,sortTasks:R}=Ls(b),B=w.useCallback(W=>{const A=(m?e:e.filter(O=>O.boardId===t.id)).filter(O=>O.status===W),H=P(A);return R(H)},[e,P,R,m,t.id]),$=w.useCallback(W=>B(W).reduce((Q,A)=>Q+(A.timeEstimate||0),0),[B]),K=w.useCallback(()=>{const W=new Date().toISOString().split("T")[0];return B("done").filter(Q=>Q.completedAt&&Q.completedAt.startsWith(W)).length},[B]),te=W=>{k(W),M(!0)},le=(W,Q)=>T(null,null,function*(){yield i(W,Q),M(!1),k(null)}),ve=W=>T(null,null,function*(){yield c(W),M(!1),k(null)}),we=W=>T(null,null,function*(){f&&(yield f(W))}),_e=W=>T(null,null,function*(){const Q=m?W:F(x({},W),{boardId:t.id});yield o(Q)}),S=()=>{E(!0)},L=W=>T(null,null,function*(){const Q={title:W.title||"",description:W.description||"",timeEstimate:W.timeEstimate||0,priority:W.priority||2,status:W.status||"backlog",position:e.filter(A=>A.status===(W.status||"backlog")).length,boardId:m?W.boardId:t.id,progressPercentage:W.progressPercentage||0,timeSpent:W.timeSpent||0,labels:W.labels||[],attachments:W.attachments||[],category:W.category||"",scheduledDate:W.scheduledDate,startDate:W.startDate,dueDate:W.dueDate,recurring:W.recurring};yield o(Q),E(!1)}),j=W=>!m||!g?null:g.find(Q=>Q.id===W)||null;return a.jsxs(fo,{children:[a.jsxs("div",{className:"h-screen bg-background flex w-full",children:[a.jsx(Ea,{boards:g,currentBoard:t,currentView:"kanban",tasks:e,userPreferences:b,onSelectBoard:W=>{s?s(W):n()},onSelectBoardView:(W,Q)=>{v?v(W,Q):s?s(W):n()},onCreateTask:W=>{W.id!==t.id&&s&&s(W),E(!0)},onNavigateToBoards:()=>{n()},onTaskClick:W=>{te(W)}}),a.jsxs(ho,{children:[a.jsx(Da,{title:t.name,subtitle:t.description,board:t,currentView:"kanban",tasks:e,boards:g,userPreferences:b,onViewChange:v,onCreateDetailedTask:S,user:y,onSignOut:p,onOpenSettings:C}),a.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:a.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden kanban-scroll-container",children:a.jsxs("div",{className:"flex justify-center gap-8 p-4 min-w-fit h-full",children:[a.jsx(Po,{title:"Backlog",status:"backlog",tasks:B("backlog"),onMoveTask:r,onEditTask:te,onAddTask:_e,onUpdateTimeEstimate:u,onDuplicateTask:f,onDeleteTask:c,onUpdateTask:i,showAddButton:!0,showProgress:!1,totalTimeEstimate:$("backlog"),isAllTasksBoard:m,boards:g,getBoardInfo:j,currentBoard:t,userPreferences:b}),a.jsx(Po,{title:"This Week",status:"this-week",tasks:B("this-week"),onMoveTask:r,onEditTask:te,onAddTask:_e,onUpdateTimeEstimate:u,onDuplicateTask:f,onDeleteTask:c,onUpdateTask:i,showAddButton:!0,showProgress:!1,totalTimeEstimate:$("this-week"),isAllTasksBoard:m,boards:g,getBoardInfo:j,currentBoard:t,userPreferences:b}),a.jsx(Po,{title:"Today",status:"today",tasks:B("today"),onMoveTask:r,onEditTask:te,onAddTask:_e,onUpdateTimeEstimate:u,onDuplicateTask:f,onDeleteTask:c,onUpdateTask:i,showAddButton:!0,showProgress:!0,completedCount:K(),totalTimeEstimate:$("today"),onStartSprint:h,isAllTasksBoard:m,boards:g,getBoardInfo:j,currentBoard:t,userPreferences:b}),a.jsx(Po,{title:"Done",status:"done",tasks:B("done"),onMoveTask:r,onEditTask:te,onAddTask:_e,onUpdateTimeEstimate:u,onDuplicateTask:f,onDeleteTask:c,onUpdateTask:i,showAddButton:!1,showProgress:!1,isAllTasksBoard:m,boards:g,getBoardInfo:j,currentBoard:t,userPreferences:b})]})})})]})]}),a.jsx(bn,{task:D,isOpen:N,onClose:()=>M(!1),onSave:le,onDelete:ve,onDuplicate:f?we:void 0,isAllTasksBoard:m,boards:g,userPreferences:b}),a.jsx(bn,{task:null,isOpen:_,onClose:()=>E(!1),onCreate:L,onDelete:()=>T(null,null,function*(){}),isAllTasksBoard:m,boards:g,isCreating:!0,userPreferences:b})]})}const Tu=t=>({id:t.id,originalTaskId:t.original_task_id,instanceDate:t.instance_date,completedAt:t.completed_at||void 0,createdAt:t.created_at,updatedAt:t.updated_at,userId:t.user_id});class ZR{getCurrentUser(){return T(this,null,function*(){const{data:{user:e},error:n}=yield ye.auth.getUser();if(n||!e)throw new Error("User not authenticated");return e})}markInstanceCompleted(e,n){return T(this,null,function*(){try{const s=yield this.getCurrentUser(),r=new Date().toISOString(),{error:o}=yield ye.from("recurring_instances").upsert({original_task_id:e,instance_date:n,completed_at:r,user_id:s.id});return o?(console.error("Error marking instance as completed:",o),!1):!0}catch(s){return console.error("Error marking instance as completed:",s),!1}})}markInstanceIncomplete(e,n){return T(this,null,function*(){try{const s=yield this.getCurrentUser(),{error:r}=yield ye.from("recurring_instances").delete().eq("original_task_id",e).eq("instance_date",n).eq("user_id",s.id);return r?(console.error("Error marking instance as incomplete:",r),!1):!0}catch(s){return console.error("Error marking instance as incomplete:",s),!1}})}isInstanceCompleted(e,n){return T(this,null,function*(){try{const s=yield this.getCurrentUser(),{data:r,error:o}=yield ye.from("recurring_instances").select("id").eq("original_task_id",e).eq("instance_date",n).eq("user_id",s.id).not("completed_at","is",null).single();return o&&o.code!=="PGRST116"?(console.error("Error checking instance completion:",o),!1):!!r}catch(s){return console.error("Error checking instance completion:",s),!1}})}getCompletedInstancesForTask(e){return T(this,null,function*(){try{const n=yield this.getCurrentUser(),{data:s,error:r}=yield ye.from("recurring_instances").select("*").eq("original_task_id",e).eq("user_id",n.id).not("completed_at","is",null).order("instance_date",{ascending:!0});return r?(console.error("Error fetching completed instances:",r),[]):s.map(Tu)}catch(n){return console.error("Error fetching completed instances:",n),[]}})}getCompletionMap(e){return T(this,null,function*(){try{const n=yield this.getCurrentUser(),{data:s,error:r}=yield ye.from("recurring_instances").select("instance_date").eq("original_task_id",e).eq("user_id",n.id).not("completed_at","is",null);if(r)return console.error("Error fetching completion map:",r),new Map;const o=new Map;return s.forEach(i=>{const c=`${e}-${i.instance_date}`;o.set(c,!0)}),o}catch(n){return console.error("Error fetching completion map:",n),new Map}})}getInstancesForTaskInRange(e,n,s){return T(this,null,function*(){try{const r=yield this.getCurrentUser(),{data:o,error:i}=yield ye.from("recurring_instances").select("*").eq("original_task_id",e).eq("user_id",r.id).gte("instance_date",n).lte("instance_date",s).order("instance_date",{ascending:!0});return i?(console.error("Error fetching instances in range:",i),[]):o.map(Tu)}catch(r){return console.error("Error fetching instances in range:",r),[]}})}cleanupOldInstances(){return T(this,null,function*(){try{const{data:e,error:n}=yield ye.rpc("cleanup_old_recurring_instances");return n?(console.error("Error cleaning up old instances:",n),0):e||0}catch(e){return console.error("Error cleaning up old instances:",e),0}})}getTaskCompletionStats(e,n=30){return T(this,null,function*(){try{const s=yield this.getCurrentUser(),r=new Date;r.setDate(r.getDate()-n);const{data:o,error:i}=yield ye.from("recurring_instances").select("completed_at").eq("original_task_id",e).eq("user_id",s.id).gte("instance_date",r.toISOString().split("T")[0]);if(i)return console.error("Error fetching completion stats:",i),{total:0,completed:0,completionRate:0};const c=o.length,f=o.filter(h=>h.completed_at).length,u=c>0?f/c*100:0;return{total:c,completed:f,completionRate:u}}catch(s){return console.error("Error fetching completion stats:",s),{total:0,completed:0,completionRate:0}}})}migrateFromLocalStorage(){return T(this,null,function*(){try{const e="dayflow_recurring_instances",n=localStorage.getItem(e);if(!n)return console.log("No localStorage data to migrate"),!0;const s=yield this.getCurrentUser(),r=JSON.parse(n),o=[];for(const[i,c]of Object.entries(r)){const f=i.split("-");if(f.length>=4){const u=parseInt(f[0]),h=f.slice(1).join("-");o.push({original_task_id:u,instance_date:h,completed_at:c.completedAt||new Date().toISOString(),user_id:s.id})}}if(o.length>0){const{error:i}=yield ye.from("recurring_instances").insert(o);if(i)return console.error("Error migrating localStorage data:",i),!1;localStorage.removeItem(e),console.log(`Migrated ${o.length} recurring instances from localStorage`)}return!0}catch(e){return console.error("Error migrating from localStorage:",e),!1}})}}const so=new ZR;typeof window!="undefined"&&setTimeout(()=>T(null,null,function*(){try{yield so.migrateFromLocalStorage();const t=yield so.cleanupOldInstances();t>0&&console.log(`Cleaned up ${t} old recurring instance records`)}catch(t){console.error("Error during initialization:",t)}}),2e3);function JR(t,e){return`${t}-${e.toISOString().split("T")[0]}`}function KR(t,e,n,s){return T(this,null,function*(){var r;if(!t.recurring)return[t];try{const o=[],{pattern:i,interval:c,endDate:f}=t.recurring,u=f?new Date(f):n;if(!i||!c||c<1)return console.warn("Invalid recurring pattern:",t.recurring),[t];const h=365;let m=0;const g=s||(yield so.getCompletionMap(t.id)),y=t.scheduledDate?new Date(t.scheduledDate):new Date;if(i==="weekly"&&((r=t.recurring.daysOfWeek)!=null&&r.length)){const p=new Date(y);p.setDate(p.getDate()-p.getDay());let v=new Date(p);for(;Ht(v,6)<e&&m<h;)v=jr(v,c),m++;for(;v<=n&&v<=u&&m<h;){for(const C of t.recurring.daysOfWeek){if(m>=h)break;const b=Ht(v,C);if(b>=e&&b<=n&&b<=u&&b>=y){const N=_i(t,b,g);o.push(N),m++}}if(v=jr(v,c),f&&v>new Date(f))break}}else{let p=new Date(y);if(y<e){let v=new Date(y);for(;v<e&&v<u&&m<h;){if(v>=e&&Su(v,t.recurring)){const C=_i(t,v,g);o.push(C),m++}switch(i){case"daily":v=Ht(v,c);break;case"weekly":v=jr(v,c);break;case"monthly":v=Di(v,c);break;case"yearly":v=Ii(v,c);break;default:return console.warn("Unknown recurring pattern:",i),[t]}}p=new Date(v)}for(;p<=n&&p<=u&&m<h;){if(Su(p,t.recurring)){const v=_i(t,p,g);o.push(v),m++}switch(i){case"daily":p=Ht(p,c);break;case"weekly":p=jr(p,c);break;case"monthly":p=Di(p,c);break;case"yearly":p=Ii(p,c);break;default:console.warn("Unknown recurring pattern:",i);break}if(f&&p>new Date(f))break}}return m>=h&&console.warn("Reached maximum instance limit for recurring task:",t.title),o}catch(o){return console.error("Error generating recurring instances:",o),[t]}})}function Su(t,e){var o,i,c;const n=t.getDay(),s=t.getDate(),r=t.getMonth()+1;return e.pattern==="weekly"&&((o=e.daysOfWeek)!=null&&o.length)?e.daysOfWeek.includes(n):e.pattern==="monthly"&&((i=e.daysOfMonth)!=null&&i.length)?e.daysOfMonth.includes(s):e.pattern==="yearly"&&((c=e.monthsOfYear)!=null&&c.length)?e.monthsOfYear.includes(r):!0}function _i(t,e,n=new Map){const s=x({},t),r=JR(t.id,e);s.id=t.id,s.recurringInstanceId=r,s.createdAt=e.toISOString();const o=t.scheduledDate?new Date(t.scheduledDate):new Date,i=new Date(e);return i.setHours(o.getHours(),o.getMinutes(),o.getSeconds()),s.scheduledDate=i.toISOString(),n.get(r)||!1?(s.completedAt=new Date().toISOString(),s.status="done",s.progressPercentage=100):(s.completedAt=void 0,s.progressPercentage=0,s.timeSpent=0,s.status==="done"&&(s.status="backlog")),s}const Ti=[{label:"Compact",height:60,timeInterval:60},{label:"Comfortable",height:80,timeInterval:60},{label:"Spacious",height:120,timeInterval:60},{label:"Detailed",height:160,timeInterval:30}];function XR({board:t,tasks:e,onAddTask:n,onUpdateTask:s,onDeleteTask:r,onDuplicateTask:o,isAllTasksBoard:i=!1,boards:c,user:f,onSignOut:u,onViewChange:h,onOpenSettings:m,userPreferences:g,onManualSyncTask:y,onManualUnsyncTask:p}){const{filterTasks:v,weekStartsOn:C,calendarDefaultZoom:b,calendarDefaultView:N,formatDate:M}=Ls(g),[D,k]=w.useState(!1),[_,E]=w.useState(null),P=w.useCallback(()=>{const I=Et(),J=(g==null?void 0:g.googleCalendarAutoSync)||localStorage.getItem("google_calendar_auto_sync")==="true";return{isAuthenticated:(I==null?void 0:I.isUserAuthenticated())||!1,autoSync:J,hasManualSync:!!(y&&p)}},[y,p,g]),R=w.useCallback(()=>T(null,null,function*(){if(y){k(!0),E(null);try{const J=(i?e:e.filter(fe=>fe.boardId===t.id)).filter(fe=>(fe.scheduledDate||fe.startDate)&&!fe.googleCalendarSynced);if(J.length===0){E("No unsynced scheduled tasks found");return}const Y=yield Promise.allSettled(J.map(fe=>y(fe))),be=Y.filter(fe=>fe.status==="fulfilled").length,me=Y.filter(fe=>fe.status==="rejected").length;me>0&&E(`Synced ${be} tasks, ${me} failed`)}catch(I){E("Failed to sync tasks to Google Calendar"),console.error("Bulk sync error:",I)}finally{k(!1)}}}),[y,e,i,t.id]),[B,$]=w.useState(0),[K,te]=w.useState([]),[le,ve]=w.useState(!1),we=I=>((g==null?void 0:g.timeFormat)||"12h")==="24h"?Nt(I,"HH:mm"):Nt(I,"h:mm a"),_e=I=>{switch(I){case 4:return"bg-red-500";case 3:return"bg-orange-500";case 2:return"bg-blue-500";case 1:return"bg-gray-400";default:return"bg-gray-400"}},[S,L]=w.useState(new Date),[j,W]=w.useState(N),[Q,A]=w.useState(b),[H,O]=w.useState(!1),[q,ne]=w.useState(null),[U,Ce]=w.useState(null),[dt,yt]=w.useState(!1),[Je,Pt]=w.useState(!1),[In,bs]=w.useState(!1),[Ot,An]=w.useState({title:"",description:"",timeEstimate:60,priority:2,status:"backlog"}),ks=w.useRef(null),[Wa,Vs]=w.useState(!1),[Ge,jn]=w.useState(null),xt=Ti[Q],qt=w.useMemo(()=>{if(j==="3-day")return Array.from({length:3},(I,J)=>Ht(S,J));{const I=Zs(S,{weekStartsOn:C});return Array.from({length:7},(J,Y)=>Ht(I,Y))}},[S,j,C]);w.useEffect(()=>{const I=()=>T(null,null,function*(){try{const Y=i?e:e.filter(je=>je.boardId===t.id),be=v(Y),me=[],fe=be.filter(je=>je.scheduledDate||je.startDate||je.dueDate).slice(0,100);for(const je of fe)try{let Qe=[je];je.recurring&&(Qe=(yield KR(je,Vo(qt[0]),gc(qt[qt.length-1]))).slice(0,100)),Qe.forEach(Pe=>{let Ne,St;if(Pe.scheduledDate?Ne=new Date(Pe.scheduledDate):Pe.startDate?Ne=new Date(Pe.startDate):Pe.dueDate?Ne=new Date(Pe.dueDate):Ne=new Date,isNaN(Ne.getTime())){console.warn("Invalid date for task:",Pe.title);return}if(St=new Date(Ne),Pe.timeEstimate&&Pe.timeEstimate>0?St=pc(Ne,Pe.timeEstimate):St=pc(Ne,60),Pe.startDate&&Pe.dueDate){const os=new Date(Pe.startDate),Gs=new Date(Pe.dueDate);!isNaN(os.getTime())&&!isNaN(Gs.getTime())&&(Ne=os,St=Gs)}me.push({id:Pe.id,task:Pe,start:Ne,end:St,title:Pe.title||"Untitled Task"})})}catch(Qe){console.error("Error processing task:",je.title,Qe)}const We=me.filter(je=>{try{return qt.some(Qe=>$o(je.start,Qe)||$o(je.end,Qe)||je.start<=Vo(Qe)&&je.end>=gc(Qe))}catch(Qe){return console.error("Error filtering event:",je.title,Qe),!1}});te(We)}catch(Y){console.error("Error generating calendar events:",Y),te([])}finally{ve(!1)}}),J=setTimeout(()=>{ve(!0),I()},10);return()=>clearTimeout(J)},[e,v,qt,i,t.id,B]);const Tr=w.useMemo(()=>{const J=(i?e:e.filter(me=>me.boardId===t.id)).filter(me=>!me.scheduledDate&&!me.startDate&&!me.dueDate&&me.status!=="done"),Y=v(J),be={today:0,"this-week":1,backlog:2};return Y.sort((me,fe)=>{var St,os;const We=(St=be[me.status])!=null?St:2,je=(os=be[fe.status])!=null?os:2;if(We!==je)return We-je;const Qe=(g==null?void 0:g.taskSortBy)||"priority",Pe=(g==null?void 0:g.taskSortOrder)||"asc";let Ne=0;switch(Qe){case"priority":Ne=(fe.priority||2)-(me.priority||2);break;case"dueDate":{const Gs=me.dueDate?new Date(me.dueDate).getTime():1/0,uc=fe.dueDate?new Date(fe.dueDate).getTime():1/0;Ne=Gs-uc;break}case"created":{const Gs=new Date(me.createdAt).getTime();Ne=new Date(fe.createdAt).getTime()-Gs;break}case"alphabetical":Ne=me.title.localeCompare(fe.title);break;default:Ne=0}return Pe==="desc"?-Ne:Ne})},[e,v,g==null?void 0:g.taskSortBy,g==null?void 0:g.taskSortOrder,i,t.id]),bo=w.useMemo(()=>{const I=[],be=xt.timeInterval,me=(g==null?void 0:g.timeFormat)||"12h";for(let fe=0;fe<=23;fe++)if(be===30){const We=new Date().setHours(fe,0),je=new Date().setHours(fe,30);me==="24h"?(I.push({hour:fe,minute:0,label:Nt(We,"HH:mm")}),fe<23&&I.push({hour:fe,minute:30,label:Nt(je,"HH:mm")})):(I.push({hour:fe,minute:0,label:Nt(We,"h:mm a")}),fe<23&&I.push({hour:fe,minute:30,label:Nt(je,"h:mm a")}))}else{const We=new Date().setHours(fe,0);me==="24h"?I.push({hour:fe,minute:0,label:Nt(We,"HH:mm")}):I.push({hour:fe,minute:0,label:Nt(We,"h a")})}return I},[xt.timeInterval,g==null?void 0:g.timeFormat]),Ya=(I,J)=>{const Y=Vo(qt[J]),be=new Date(Y).setHours(0,0,0,0),me=Math.max(I.start.getTime(),be),fe=Math.min(I.end.getTime(),new Date(Y).setHours(23,59,59,999)),We=(me-be)/(1e3*60),je=(fe-me)/(1e3*60),Qe=We/xt.timeInterval*xt.height,Pe=Math.max(je/xt.timeInterval*xt.height,24);return{top:Qe,height:Pe}},Ha=(I,J,Y)=>{const be=new Date(I);be.setHours(J,Y,0,0),ne(be),O(!0)},za=(I,J,Y,be)=>T(null,null,function*(){try{const me=e.find(St=>St.id===parseInt(be));if(!me)return;const fe=new Date(I);fe.setHours(J,Y,0,0);const We=new Date;We.setHours(0,0,0,0);const je=new Date(fe);je.setHours(0,0,0,0);const Qe=Zs(We,{weekStartsOn:C}),Pe=Rr(We,{weekStartsOn:C});let Ne="backlog";je.getTime()===We.getTime()?Ne="today":je>=Qe&&je<=Pe&&(Ne="this-week"),yield s(me.id,{scheduledDate:fe.toISOString(),startDate:fe.toISOString(),status:Ne})}catch(me){console.error("Failed to move task:",me)}}),qa=I=>{I.preventDefault(),I.dataTransfer.dropEffect="move",I.currentTarget.classList.add("bg-primary/20","border-primary/50")},Za=I=>{I.currentTarget.classList.remove("bg-primary/20","border-primary/50")},Ja=()=>T(null,null,function*(){if(!(!Ot.title.trim()||!q))try{const I=new Date;I.setHours(0,0,0,0);const J=new Date(q);J.setHours(0,0,0,0);const Y=Zs(I,{weekStartsOn:C}),be=Rr(I,{weekStartsOn:C});let me="backlog";J.getTime()===I.getTime()?me="today":J>=Y&&J<=be&&(me="this-week");const fe=F(x({},Ot),{status:me,scheduledDate:q.toISOString(),startDate:q.toISOString(),position:e.length,progressPercentage:0,effortEstimate:2,impactEstimate:2,labels:[],attachments:[],timeSpent:0,boardId:i?void 0:t.id});yield n(fe),O(!1),An({title:"",description:"",timeEstimate:60,priority:2,status:"backlog"}),ne(null)}catch(I){console.error("Failed to create task:",I)}}),Ka=(I,J)=>T(null,null,function*(){try{let Y=J.status;if(J.scheduledDate){const be=new Date;be.setHours(0,0,0,0);const me=new Date(J.scheduledDate);me.setHours(0,0,0,0);const fe=Zs(be,{weekStartsOn:C}),We=Rr(be,{weekStartsOn:C});me.getTime()===be.getTime()?Y="today":me>=fe&&me<=We?Y="this-week":J.status!=="done"&&(Y="backlog")}yield s(I,F(x({},J),{status:Y}))}catch(Y){throw console.error("Failed to update task:",Y),Y}}),Xa=I=>T(null,null,function*(){try{yield r(I)}catch(J){throw console.error("Failed to delete task:",J),J}}),Qa=I=>{Ce(I),yt(!0)},ko=I=>T(null,null,function*(){o&&(yield o(I))}),ei=I=>T(null,null,function*(){yield r(I)}),Sr=I=>T(null,null,function*(){if(I.recurring&&I.recurringInstanceId){const be=I.status==="done",me=(I.scheduledDate||new Date().toISOString()).split("T")[0];try{be?yield so.markInstanceIncomplete(I.id,me):yield so.markInstanceCompleted(I.id,me),$(fe=>fe+1)}catch(fe){console.error("Error updating recurring instance:",fe)}return}const J=I.status==="done"?"today":"done",Y={status:J,completedAt:J==="done"?new Date().toISOString():void 0,progressPercentage:J==="done"?100:I.progressPercentage};yield s(I.id,Y)}),Us=(I,J)=>{I.stopPropagation(),Sr(J)},Me=(I,J)=>T(null,null,function*(){yield s(I.id,{status:J})}),Ke=()=>{L(j==="3-day"?I=>Ht(I,-1):I=>Ht(I,-7))},ze=()=>{L(j==="3-day"?I=>Ht(I,1):I=>Ht(I,7))},un=()=>{A(I=>Math.min(I+1,Ti.length-1))},Bt=()=>{A(I=>Math.max(I-1,0))},Bs=(I,J=!1)=>a.jsx(Gt,{task:I,children:a.jsxs("div",{className:`p-3 bg-background rounded-lg border border-border hover:shadow-sm transition-shadow cursor-pointer ${J?"opacity-70":""}`,draggable:!J,onDragStart:Y=>{J||(Y.dataTransfer.setData("text/plain",I.id.toString()),Y.dataTransfer.effectAllowed="move",Pt(!0))},onDragEnd:()=>Pt(!1),onClick:()=>{Ce(I),yt(!0)},children:[a.jsxs("div",{className:"flex items-start justify-between",children:[" ",a.jsxs("div",{className:"flex-1 min-w-0",children:[" ",a.jsxs("div",{className:"flex items-center gap-2",children:[J&&a.jsx(At,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),a.jsx("div",{className:`w-5 h-5 rounded-full ${_e(I.priority)} text-white text-xs flex items-center justify-center font-bold flex-shrink-0`,children:I.priority}),a.jsx("h4",{className:`text-sm font-medium truncate ${J?"line-through text-muted-foreground":""}`,children:I.title})]}),I.description&&a.jsx("p",{className:"text-xs mt-1 line-clamp-2 text-muted-foreground",children:I.description}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.status==="done"?"bg-green-100 text-green-800":I.status==="today"?"bg-red-100 text-red-800":I.status==="this-week"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:I.status.replace(/-/g," ")}),I.timeEstimate&&I.timeEstimate>0&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Vt,{className:"h-3 w-3"}),I.timeEstimate,"m"]})]})]})]}),!J&&a.jsx("div",{className:"text-xs text-muted-foreground mt-2 pt-2 border-t border-border",children:"Drag to calendar or click to edit"})]},I.id)}),Tt=I=>{if(I.status==="done")return"bg-gray-400 border-gray-500";switch(I.priority){case 4:return"bg-red-500 border-red-600";case 3:return"bg-orange-500 border-orange-600";case 2:return"bg-blue-500 border-blue-600";case 1:return"bg-green-500 border-green-600";default:return"bg-gray-500 border-gray-600"}},Gt=({task:I,children:J})=>{const Y=Ne=>T(null,null,function*(){yield s(I.id,{priority:Ne})}),be=Ne=>T(null,null,function*(){yield s(I.id,{timeEstimate:Ne})}),me=Ne=>T(null,null,function*(){const St={pattern:Ne,interval:1,daysOfWeek:[],daysOfMonth:[],monthsOfYear:[]};yield s(I.id,{recurring:St})}),fe=()=>T(null,null,function*(){yield s(I.id,{recurring:void 0})}),We=()=>T(null,null,function*(){const Ne=new Date;Ne.setHours(9,0,0,0),yield s(I.id,{scheduledDate:Ne.toISOString(),status:"today"})}),je=()=>T(null,null,function*(){const Ne=new Date;Ne.setDate(Ne.getDate()+1),Ne.setHours(9,0,0,0),yield s(I.id,{scheduledDate:Ne.toISOString(),status:"this-week"})}),Qe=()=>T(null,null,function*(){const Ne=new Date,St=new Date(Ne),os=(6-Ne.getDay())%7;St.setDate(Ne.getDate()+(os===0?7:os)),St.setHours(10,0,0,0),yield s(I.id,{scheduledDate:St.toISOString(),status:"this-week"})}),Pe=()=>T(null,null,function*(){yield s(I.id,{scheduledDate:void 0,startDate:void 0,dueDate:void 0})});return a.jsxs(Wr,{children:[a.jsx(Yr,{asChild:!0,children:J}),a.jsxs(Hr,{className:"w-64",children:[a.jsxs(oe,{onClick:()=>Qa(I),children:[a.jsx(en,{className:"mr-2 h-4 w-4"}),"Edit Task"]}),o&&a.jsxs(oe,{onClick:()=>ko(I),children:[a.jsx($r,{className:"mr-2 h-4 w-4"}),"Duplicate Task"]}),a.jsx(ft,{}),a.jsxs(oe,{onClick:()=>Sr(I),children:[a.jsx(ms,{className:"mr-2 h-4 w-4"}),I.status==="done"?"Mark as Incomplete":"Mark as Complete"]}),a.jsx(ft,{}),a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(xa,{className:"mr-2 h-4 w-4"}),"Priority"]}),a.jsxs(sn,{children:[a.jsx(oe,{onClick:()=>Y(4),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),"Critical (4)"]})}),a.jsx(oe,{onClick:()=>Y(3),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),"High (3)"]})}),a.jsx(oe,{onClick:()=>Y(2),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),"Medium (2)"]})}),a.jsx(oe,{onClick:()=>Y(1),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),"Low (1)"]})})]})]},"priority-submenu"),a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Time Estimate"]}),a.jsxs(sn,{children:[a.jsx(oe,{onClick:()=>be(15),children:"15 minutes"}),a.jsx(oe,{onClick:()=>be(30),children:"30 minutes"}),a.jsx(oe,{onClick:()=>be(60),children:"1 hour"}),a.jsx(oe,{onClick:()=>be(120),children:"2 hours"}),a.jsx(oe,{onClick:()=>be(240),children:"4 hours"}),a.jsx(ft,{}),a.jsx(oe,{onClick:()=>be(0),children:"Clear"})]})]},"time-estimate-submenu"),a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(nt,{className:"mr-2 h-4 w-4"}),"Schedule"]}),a.jsxs(sn,{children:[a.jsxs(oe,{onSelect:Ne=>{Ne.preventDefault(),Ne.stopPropagation(),jn(I),Vs(!0)},children:[a.jsx(nt,{className:"mr-2 h-4 w-4"}),"Pick a date..."]}),a.jsx(ft,{}),a.jsxs(oe,{onClick:We,children:[a.jsx(nt,{className:"mr-2 h-4 w-4"}),"Today (9 AM)"]}),a.jsxs(oe,{onClick:je,children:[a.jsx(nt,{className:"mr-2 h-4 w-4"}),"Tomorrow (9 AM)"]}),a.jsxs(oe,{onClick:Qe,children:[a.jsx(nt,{className:"mr-2 h-4 w-4"}),"This Weekend (10 AM)"]}),a.jsx(ft,{}),a.jsxs(oe,{onClick:Pe,children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Clear Schedule"]})]})]},"schedule-submenu"),a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Recurring"]}),a.jsxs(sn,{children:[a.jsx(oe,{onClick:()=>me("daily"),children:"Daily"}),a.jsx(oe,{onClick:()=>me("weekly"),children:"Weekly"}),a.jsx(oe,{onClick:()=>me("monthly"),children:"Monthly"}),a.jsx(oe,{onClick:()=>me("yearly"),children:"Yearly"}),a.jsx(ft,{}),a.jsx(oe,{onClick:fe,children:"Clear Recurring"})]})]},"recurring-submenu"),a.jsx(ft,{}),a.jsxs(tn,{children:[a.jsxs(nn,{children:[a.jsx(ff,{className:"mr-2 h-4 w-4"}),"Move to..."]}),a.jsxs(sn,{children:[I.status!=="backlog"&&a.jsxs(oe,{onClick:()=>Me(I,"backlog"),children:[a.jsx(nr,{className:"mr-2 h-4 w-4"}),"Backlog"]}),I.status!=="this-week"&&a.jsxs(oe,{onClick:()=>Me(I,"this-week"),children:[a.jsx(Xo,{className:"mr-2 h-4 w-4"}),"This Week"]}),I.status!=="today"&&a.jsxs(oe,{onClick:()=>Me(I,"today"),children:[a.jsx(Xo,{className:"mr-2 h-4 w-4"}),"Today"]}),I.status!=="done"&&a.jsxs(oe,{onClick:()=>Me(I,"done"),children:[a.jsx(ms,{className:"mr-2 h-4 w-4"}),"Done"]})]})]},"move-to-submenu"),a.jsx(ft,{}),a.jsxs(oe,{onClick:()=>ei(I.id),className:"text-destructive",children:[a.jsx(ds,{className:"mr-2 h-4 w-4"}),"Delete Task"]})]})]})},Le=w.useCallback(()=>{const I=ks.current;if(!I)return;const J=new Date;To(S)||L(J);const Y=J.getHours(),be=J.getMinutes(),me=Y*60+be,fe=xt.timeInterval/xt.height,We=me/fe,je=I.clientHeight,Qe=Math.max(0,We-je/3);I.scrollTo({top:Qe,behavior:"smooth"})},[S,xt.height,xt.timeInterval]);w.useEffect(()=>{if(!ks.current)return;const I=setTimeout(()=>Le(),100);return()=>clearTimeout(I)},[Le]);const ti=()=>{bs(!0)},ni=I=>T(null,null,function*(){const J={title:I.title||"",description:I.description||"",timeEstimate:I.timeEstimate||0,priority:I.priority||2,status:I.status||"backlog",position:e.filter(Y=>Y.status===(I.status||"backlog")).length,boardId:i?I.boardId:t.id,progressPercentage:I.progressPercentage||0,timeSpent:I.timeSpent||0,labels:I.labels||[],attachments:I.attachments||[],category:I.category||"",scheduledDate:I.scheduledDate,startDate:I.startDate,dueDate:I.dueDate,recurring:I.recurring};yield n(J),bs(!1)});return a.jsxs("div",{className:"h-screen bg-background flex flex-col overflow-hidden",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Da,{title:t.name,subtitle:t.description,board:t,currentView:"calendar",tasks:e,boards:c,userPreferences:g,onViewChange:h,onCreateDetailedTask:ti,user:f,onSignOut:u,onOpenSettings:m,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-sm font-medium mr-3",children:j==="3-day"?`${M(S)} - ${M(Ht(S,2))}`:`${M(Zs(S,{weekStartsOn:C}))} - ${M(Rr(S,{weekStartsOn:C}))}`}),a.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[a.jsx(Z,{variant:"outline",size:"sm",onClick:Bt,disabled:Q===0,className:"h-7 w-7 p-0",children:a.jsx(Iw,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"text-xs text-muted-foreground px-2",children:xt.label}),a.jsx(Z,{variant:"outline",size:"sm",onClick:un,disabled:Q===Ti.length-1,className:"h-7 w-7 p-0",children:a.jsx(Ew,{className:"h-3.5 w-3.5"})})]}),a.jsxs(Z,{variant:"outline",size:"sm",onClick:Le,className:"mr-2 gap-1.5",title:"Scroll to current time",children:[a.jsx(Vt,{className:"h-3.5 w-3.5"}),"Now"]}),a.jsx("div",{className:"flex gap-1 mr-2 bg-muted/30 p-1 rounded-lg border border-border/50",children:["3-day","week"].map(I=>a.jsx(Z,{variant:j===I?"default":"ghost",size:"sm",onClick:()=>W(I),className:"capitalize h-7",children:I},I))}),(()=>{const I=P();if(!I.isAuthenticated)return null;if(!I.autoSync&&I.hasManualSync){const J=(i?e:e.filter(Y=>Y.boardId===t.id)).filter(Y=>(Y.scheduledDate||Y.startDate)&&!Y.googleCalendarSynced).length;return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Z,{variant:"outline",size:"sm",onClick:R,disabled:D||J===0,className:"gap-1.5",title:J===0?"No unsynced scheduled tasks":`Sync ${J} scheduled tasks to Google Calendar`,children:[D?a.jsx(V0,{className:"h-3.5 w-3.5 animate-spin"}):a.jsx(Rs,{className:"h-3.5 w-3.5"}),D?"Syncing...":`Sync (${J})`]}),_&&a.jsx("span",{className:"text-xs text-red-600 max-w-40 truncate",title:_,children:_})]})}return I.autoSync?a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Rs,{className:"h-4 w-4 text-green-600"}),"Auto-sync enabled"]}):null})()]})})}),a.jsxs("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[a.jsxs("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[a.jsxs("div",{className:"flex border-b border-border bg-muted/30 flex-shrink-0 items-center",children:[a.jsx("div",{className:"w-16 border-r border-border p-2 text-xs text-muted-foreground text-center",children:"Time"}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:Ke,className:"h-8 w-8 p-0",children:a.jsx(Ml,{className:"h-4 w-4"})}),qt.map((I,J)=>a.jsxs("div",{className:"flex-1  p-2 text-center",children:[" ",a.jsx("div",{className:`text-sm font-medium ${To(I)?"text-primary":""}`,children:Nt(I,j==="3-day"?"EEEE":"EEE")}),a.jsx("div",{className:`text-xs ${To(I)?"text-primary font-semibold":"text-muted-foreground"}`,children:Nt(I,j==="3-day"?"MMM d":"d")})]},J)),a.jsx(Z,{variant:"ghost",size:"sm",onClick:ze,className:"h-8 w-8 p-0",children:a.jsx(lo,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 relative",ref:ks,children:[le&&a.jsx("div",{className:"absolute inset-0 bg-background/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),"Loading events..."]})}),a.jsxs("div",{className:"flex min-h-full",children:[a.jsx("div",{className:"w-16 border-r border-border bg-muted/10",children:bo.map((I,J)=>a.jsx("div",{className:"time-slot border-b border-border text-xs text-muted-foreground text-center py-1",style:{height:`${xt.height}px`},"data-hour":I.hour,"data-minute":I.minute,children:I.minute===0?I.label:""},J))}),qt.map((I,J)=>a.jsxs("div",{className:"flex-1 border-r border-border relative",children:[" ",bo.map((Y,be)=>a.jsx("div",{className:`border-b border-border hover:bg-muted/20 cursor-pointer transition-colors ${Je?"border-dashed border-primary/30 hover:bg-primary/10":""}`,style:{height:`${xt.height}px`},onClick:()=>Ha(I,Y.hour,Y.minute),onDragOver:qa,onDragLeave:Za,onDrop:me=>{me.preventDefault(),me.currentTarget.classList.remove("bg-primary/20","border-primary/50");const We=me.dataTransfer.getData("text/plain");We&&za(I,Y.hour,Y.minute,We)},children:To(I)&&(()=>{const me=new Date,fe=me.getHours(),We=me.getMinutes();if(Y.hour===fe&&(xt.timeInterval===60&&Y.minute===0||xt.timeInterval===30&&Math.abs(Y.minute-(We>=30?30:0))<15)){const Qe=(We-Y.minute)/xt.timeInterval*xt.height;return a.jsx("div",{className:"absolute left-0 right-0 h-0.5 bg-red-500 z-10",style:{top:`${Qe}px`}})}return null})()},be)),K.filter(Y=>$o(Y.start,I)).map(Y=>{const be=Ya(Y,J),me=Tt(Y.task),fe=be.height<30,We=be.height<50,je=be.height>=50&&be.height<80,Qe=be.height>=80;return a.jsx(Gt,{task:Y.task,children:a.jsxs("div",{className:`absolute left-1 right-1 ${me} text-white rounded cursor-pointer hover:shadow-lg transition-all duration-200 border-l-4 overflow-hidden ${fe?"hover:scale-105":"hover:scale-[1.02]"}`,style:{top:`${be.top}px`,height:`${be.height}px`,zIndex:5},draggable:Y.task.status!=="done",onDragStart:Pe=>{Y.task.status!=="done"&&(Pe.dataTransfer.setData("text/plain",Y.task.id.toString()),Pe.dataTransfer.effectAllowed="move",Pt(!0))},onDragEnd:()=>Pt(!1),onClick:()=>{Ce(Y.task),yt(!0)},children:[fe&&a.jsxs("div",{className:"px-1.5 py-0.5 h-full flex items-center",children:[a.jsxs("div",{className:"text-xs font-medium truncate leading-none flex items-center gap-1",children:[Y.task.recurring&&a.jsx(Ns,{className:"h-2.5 w-2.5 opacity-60"}),Y.title]}),Y.task.status==="done"&&a.jsx(At,{className:"h-3 w-3 text-green-300 ml-1 flex-shrink-0"})]}),We&&!fe&&a.jsxs("div",{className:"p-1.5 h-full flex flex-col justify-center",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-xs font-semibold truncate flex-1 leading-tight flex items-center gap-1",children:[Y.task.recurring&&a.jsx(Ns,{className:"h-2.5 w-2.5 opacity-60"}),Y.title]}),a.jsx("button",{onClick:Pe=>Us(Pe,Y.task),className:`ml-1 flex-shrink-0 w-3 h-3 rounded-sm border transition-all duration-200 flex items-center justify-center ${Y.task.status==="done"?"bg-green-500 border-green-500 text-white":"border-white/50 hover:border-white hover:bg-white/10"}`,title:Y.task.status==="done"?"Mark as incomplete":"Mark as complete",children:Y.task.status==="done"&&a.jsx(At,{className:"h-2.5 w-2.5"})})]}),a.jsx("div",{className:"text-xs opacity-90 leading-none mt-0.5",children:we(Y.start)})]}),je&&a.jsxs("div",{className:"p-2 h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-start justify-between mb-1",children:[a.jsxs("div",{className:"font-semibold text-sm leading-tight truncate flex-1 flex items-center gap-1",children:[Y.task.recurring&&a.jsx(Ns,{className:"h-3 w-3 opacity-60"}),Y.title]}),a.jsx("button",{onClick:Pe=>Us(Pe,Y.task),className:`ml-1 flex-shrink-0 w-4 h-4 rounded border transition-all duration-200 flex items-center justify-center ${Y.task.status==="done"?"bg-green-500 border-green-500 text-white":"border-white/50 hover:border-white hover:bg-white/10"}`,title:Y.task.status==="done"?"Mark as incomplete":"Mark as complete",children:Y.task.status==="done"&&a.jsx(At,{className:"h-3 w-3"})})]}),a.jsxs("div",{className:"text-xs opacity-90 mb-1",children:[we(Y.start)," - ",we(Y.end)]}),a.jsx("div",{className:"mt-auto flex items-center justify-between text-xs",children:Y.task.timeEstimate&&Y.task.timeEstimate>0&&a.jsxs("div",{className:"flex items-center gap-1 opacity-90",children:[a.jsx(Vt,{className:"h-3 w-3"}),a.jsxs("span",{children:[Y.task.timeEstimate,"m"]})]})})]}),Qe&&a.jsxs("div",{className:"p-2 h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-start justify-between mb-1",children:[a.jsxs("div",{className:"font-semibold text-sm leading-tight truncate flex-1 flex items-center gap-1",children:[Y.task.recurring&&a.jsx(Ns,{className:"h-3 w-3 opacity-60"}),Y.title]}),a.jsx("button",{onClick:Pe=>Us(Pe,Y.task),className:`ml-1 flex-shrink-0 w-4 h-4 rounded border transition-all duration-200 flex items-center justify-center ${Y.task.status==="done"?"bg-green-500 border-green-500 text-white":"border-white/50 hover:border-white hover:bg-white/10"}`,title:Y.task.status==="done"?"Mark as incomplete":"Mark as complete",children:Y.task.status==="done"&&a.jsx(At,{className:"h-3 w-3"})})]}),a.jsxs("div",{className:"text-xs opacity-90 mb-2",children:[we(Y.start)," - ",we(Y.end)]}),Y.task.description&&a.jsx("div",{className:"text-xs opacity-85 line-clamp-2 mb-2 leading-relaxed flex-1",children:Y.task.description}),a.jsxs("div",{className:"mt-auto flex items-center justify-between text-xs opacity-90",children:[a.jsx("div",{className:"flex items-center gap-1",children:Y.task.timeEstimate&&Y.task.timeEstimate>0&&a.jsxs(a.Fragment,{children:[a.jsx(Vt,{className:"h-3 w-3"}),a.jsxs("span",{children:[Y.task.timeEstimate,"m"]})]})}),a.jsx("div",{className:`px-1.5 py-0.5 rounded text-xs font-medium ${Y.task.status==="done"?"bg-green-500/20 text-green-100":Y.task.status==="today"?"bg-orange-500/20 text-orange-100":Y.task.status==="this-week"?"bg-blue-500/20 text-blue-100":"bg-gray-500/20 text-gray-100"}`,children:Y.task.status==="this-week"?"This Week":Y.task.status})]})]})]})},Y.id)})]},J))]})]})]}),Tr.length>0&&a.jsxs("div",{className:"w-80 border-l border-border bg-muted/20 flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"flex-shrink-0 p-4 border-b border-border",children:[a.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[a.jsx(nt,{className:"h-4 w-4"}),"Unscheduled Tasks (",Tr.length,")"]}),Je&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Drop on a time slot to schedule the task"})]}),a.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:Tr.map(I=>Bs(I,!1))})})]})]}),a.jsx(vn,{open:H,onOpenChange:O,children:a.jsxs(wn,{className:"sm:max-w-md",children:[a.jsxs(gs,{children:[a.jsx(Yn,{children:"Create New Task"}),a.jsx(Hn,{children:q&&`Scheduled for ${M(q,!0)}`})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{children:a.jsx(Ae,{placeholder:"Task title",value:Ot.title,onChange:I=>An(J=>F(x({},J),{title:I.target.value})),className:"w-full"})}),a.jsx("div",{children:a.jsx(va,{placeholder:"Description (optional)",value:Ot.description,onChange:I=>An(J=>F(x({},J),{description:I.target.value})),className:"w-full",rows:3})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Time Estimate (minutes)"}),a.jsx(Ae,{type:"number",value:Ot.timeEstimate,onChange:I=>An(J=>F(x({},J),{timeEstimate:parseInt(I.target.value)||0})),min:"0",step:"15"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Priority"}),a.jsxs(ht,{value:Ot.priority.toString(),onValueChange:I=>An(J=>F(x({},J),{priority:parseInt(I)})),children:[a.jsx(st,{children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"1",children:"Low"}),a.jsx(ge,{value:"2",children:"Medium"}),a.jsx(ge,{value:"3",children:"High"}),a.jsx(ge,{value:"4",children:"Critical"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(Z,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),a.jsx(Z,{onClick:Ja,children:"Create Task"})]})]})]})}),a.jsx(bn,{task:U,isOpen:dt,onClose:()=>{Ce(null),yt(!1)},onSave:Ka,onDelete:Xa}),a.jsx(bn,{task:null,isOpen:In,onClose:()=>bs(!1),onCreate:ni,onDelete:()=>T(null,null,function*(){}),isAllTasksBoard:i,boards:c,isCreating:!0,userPreferences:g}),a.jsx(vn,{open:Wa,onOpenChange:Vs,children:a.jsxs(wn,{className:"max-w-md",children:[a.jsxs(gs,{children:[a.jsx(Yn,{children:"Schedule Task"}),a.jsx(Hn,{children:Ge&&`Set date and time for "${Ge.title}"`})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Date"}),a.jsx("div",{className:"border rounded-md p-3 bg-background",children:a.jsx(Bl,{mode:"single",selected:Ge!=null&&Ge.scheduledDate?new Date(Ge.scheduledDate):void 0,onSelect:I=>{if(I&&Ge){const J=Ge.scheduledDate?new Date(Ge.scheduledDate):new Date,Y=new Date(I);Y.setHours(J.getHours()||9,J.getMinutes()||0,0,0),jn(F(x({},Ge),{scheduledDate:Y.toISOString()}))}},className:"w-full"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Time"}),a.jsx(Ae,{type:"time",value:Ge!=null&&Ge.scheduledDate?(()=>{const I=new Date(Ge.scheduledDate);return`${I.getHours().toString().padStart(2,"0")}:${I.getMinutes().toString().padStart(2,"0")}`})():"09:00",onChange:I=>{if(Ge&&I.target.value){const[J,Y]=I.target.value.split(":").map(Number),be=Ge.scheduledDate?new Date(Ge.scheduledDate):new Date;be.setHours(J,Y,0,0),jn(F(x({},Ge),{scheduledDate:be.toISOString()}))}},className:"bg-background"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quick Times"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{label:"9:00 AM",hour:9,minute:0},{label:"12:00 PM",hour:12,minute:0},{label:"2:00 PM",hour:14,minute:0},{label:"5:00 PM",hour:17,minute:0},{label:"7:00 PM",hour:19,minute:0},{label:"9:00 PM",hour:21,minute:0}].map(I=>a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{if(Ge){const J=Ge.scheduledDate?new Date(Ge.scheduledDate):new Date;J.setHours(I.hour,I.minute,0,0),jn(F(x({},Ge),{scheduledDate:J.toISOString()}))}},className:"text-xs",children:I.label},I.label))})]})]}),a.jsxs(Is,{children:[a.jsx(Z,{variant:"outline",onClick:()=>{Vs(!1),jn(null)},children:"Cancel"}),a.jsx(Z,{onClick:()=>T(null,null,function*(){if(Ge&&Ge.scheduledDate){const I=new Date(Ge.scheduledDate),J=new Date;J.setHours(0,0,0,0);const Y=new Date(I);Y.setHours(0,0,0,0);let be="backlog";Y.getTime()===J.getTime()?be="today":Y>J&&Y<=new Date(J.getTime()+7*24*60*60*1e3)&&(be="this-week"),yield s(Ge.id,{scheduledDate:I.toISOString(),status:be}),Vs(!1),jn(null)}}),disabled:!(Ge!=null&&Ge.scheduledDate),children:"Schedule Task"})]})]})})]})}function QR(t){return a.jsx(fo,{children:a.jsxs("div",{className:"h-screen bg-background flex w-full",children:[a.jsx(Ea,{boards:t.boards||[],currentBoard:t.board,currentView:"calendar",tasks:t.tasks,userPreferences:t.userPreferences,onSelectBoard:e=>{t.onSelectBoard?t.onSelectBoard(e):t.onBack()},onSelectBoardView:(e,n)=>{t.onViewChange?t.onViewChange(e,n):t.onSelectBoard?t.onSelectBoard(e):t.onBack()},onNavigateToBoards:()=>{t.onBack()},onTaskClick:e=>{console.log("Task clicked from upcoming preview:",e)}}),a.jsx(ho,{className:"flex flex-col",children:a.jsx(XR,x({},t))})]})})}function Lo({task:t,onToggleComplete:e,onEditTask:n,onMoveTask:s,onUpdateTask:r,onUpdateTimeEstimate:o,onDuplicateTask:i,onDeleteTask:c,boardInfo:f,userPreferences:u,isDone:h=!1}){const{formatDate:m}=Ls(u),[g,y]=w.useState(!1),[p,v]=w.useState(t.timeEstimate.toString()),C=()=>{e(t.id)},b=()=>{n(t)},N=E=>{E.stopPropagation(),n(t)},M=E=>{E.stopPropagation(),y(!0)},D=()=>{const E=parseInt(p)||0;o==null||o(t.id,E),y(!1)},k=E=>{E.key==="Enter"?D():E.key==="Escape"&&(v(t.timeEstimate.toString()),y(!1))},_={1:"text-green-500",2:"text-yellow-500",3:"text-orange-500",4:"text-red-500"};return a.jsx(mm,{task:t,onEdit:n,onDuplicate:i,onDelete:c,onUpdateTask:r,onMoveTask:s,onUpdateTimeEstimate:o,onToggleComplete:e,boardInfo:f,userPreferences:u,children:a.jsxs("div",{className:V("grid items-center mb-3 px-4 py-2 bg-background rounded-md shadow-sm hover:bg-muted cursor-pointer transition-all duration-200 gap-x-2",t.status==="done"?"opacity-60":""),style:{gridTemplateColumns:"2rem 1fr 8rem 8rem 6rem 8rem 3rem"},onClick:b,children:[a.jsx(bt,{checked:t.status==="done",onCheckedChange:C,onClick:E=>E.stopPropagation(),className:"mr-2","aria-label":`Mark task ${t.title} as ${t.status==="done"?"incomplete":"complete"}`}),a.jsx("span",{className:"truncate font-medium text-left",children:t.title}),f&&a.jsx("span",{className:"text-sm text-muted-foreground text-center",children:f.name}),a.jsx("span",{className:"text-sm text-muted-foreground text-center",children:t.dueDate?m(t.dueDate):"--"}),a.jsx("span",{className:V("font-medium text-center",_[t.priority]),title:`Priority: ${t.priority}`,children:t.priority}),g?a.jsx("input",{placeholder:"--",type:"number",value:p,onChange:E=>v(E.target.value),onBlur:D,onKeyDown:k,className:"text-sm text-muted-foreground bg-transparent border-none outline-none w-full p-0 focus:text-foreground text-center",autoFocus:!0,min:"0"}):a.jsx("button",{onClick:E=>{E.stopPropagation(),M(E)},className:V("text-sm text-muted-foreground hover:text-foreground transition-colors duration-200 font-medium text-center",h&&"text-muted-foreground/60"),title:"Click to edit time estimate",children:t.timeEstimate>0?`${t.timeEstimate} min`:"--"}),a.jsx(Z,{size:"sm",variant:"ghost",className:"p-1 text-muted-foreground hover:text-foreground justify-self-center",onClick:N,title:"Edit task",children:a.jsx(en,{className:"h-4 w-4"})})]})})}function eP({board:t,tasks:e,onUpdateTask:n,onDeleteTask:s,onDuplicateTask:r,onMoveTask:o,onUpdateTimeEstimate:i,isAllTasksBoard:c=!1,boards:f,userPreferences:u}){const[h,m]=w.useState(null),[g,y]=w.useState(!1),{filterTasks:p,sortTasks:v}=Ls(u),C=w.useMemo(()=>{const _=c?e:e.filter(P=>P.boardId===t.id),E=p(_);return v(E)},[e,p,v,c,t.id]),b=w.useMemo(()=>({today:C.filter(_=>_.status==="today"),thisWeek:C.filter(_=>_.status==="this-week"),backlog:C.filter(_=>_.status==="backlog"),done:C.filter(_=>_.status==="done")}),[C]),N=_=>{m(_),y(!0)},M=_=>T(null,null,function*(){yield s(_),y(!1),m(null)}),D=_=>T(null,null,function*(){const E=_.status==="done"?"today":"done",P=E==="done"?new Date().toISOString():void 0;yield n(_.id,{status:E,completedAt:P})}),k=(_,E)=>T(null,null,function*(){yield o(_,E)});return a.jsxs("div",{className:"flex flex-col h-full bg-muted/40",children:[a.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[b.today.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 text-foreground border-b border-border pb-2",children:["Today (",b.today.length,")"]}),a.jsxs("div",{className:"grid items-center px-4 py-2 gap-x-2 text-xs font-semibold text-muted-foreground bg-background rounded-md",style:{gridTemplateColumns:"2rem 1fr 8rem 8rem 6rem 8rem 3rem"},children:[a.jsx("span",{}),a.jsx("span",{className:"text-left",children:"Title"}),a.jsx("span",{className:"text-center",children:"Board"}),a.jsx("span",{className:"text-center",children:"Due"}),a.jsx("span",{className:"text-center",children:"Priority"}),a.jsx("span",{className:"text-center",children:"Estimate"}),a.jsx("span",{className:"text-center",children:"Action"})]}),a.jsx("div",{className:"space-y-3 mt-1",children:b.today.map(_=>a.jsx(Lo,{task:_,onToggleComplete:()=>D(_),onEditTask:()=>N(_),onMoveTask:k,onUpdateTask:n,onUpdateTimeEstimate:i,onDuplicateTask:r,onDeleteTask:M,boardInfo:c?f==null?void 0:f.find(E=>E.id===_.boardId):t,userPreferences:u},_.id))})]}),b.thisWeek.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 text-foreground border-b border-border pb-2",children:["This Week (",b.thisWeek.length,")"]}),a.jsxs("div",{className:"grid items-center px-4 py-2 gap-x-2 text-xs font-semibold text-muted-foreground bg-background rounded-md",style:{gridTemplateColumns:"2rem 1fr 8rem 8rem 6rem 8rem 3rem"},children:[a.jsx("span",{}),a.jsx("span",{className:"text-left",children:"Title"}),a.jsx("span",{className:"text-center",children:"Board"}),a.jsx("span",{className:"text-center",children:"Due"}),a.jsx("span",{className:"text-center",children:"Priority"}),a.jsx("span",{className:"text-center",children:"Estimate"}),a.jsx("span",{className:"text-center",children:"Action"})]}),a.jsx("div",{className:"space-y-3 mt-1",children:b.thisWeek.map(_=>a.jsx(Lo,{task:_,onToggleComplete:()=>D(_),onEditTask:()=>N(_),onMoveTask:k,onUpdateTask:n,onUpdateTimeEstimate:i,onDuplicateTask:r,onDeleteTask:M,boardInfo:c?f==null?void 0:f.find(E=>E.id===_.boardId):t,userPreferences:u},_.id))})]}),b.backlog.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 text-foreground border-b border-border pb-2",children:["Backlog (",b.backlog.length,")"]}),a.jsxs("div",{className:"grid items-center px-4 py-2 gap-x-2 text-xs font-semibold text-muted-foreground bg-background rounded-md",style:{gridTemplateColumns:"2rem 1fr 8rem 8rem 6rem 8rem 3rem"},children:[a.jsx("span",{}),a.jsx("span",{className:"text-left",children:"Title"}),a.jsx("span",{className:"text-center",children:"Board"}),a.jsx("span",{className:"text-center",children:"Due"}),a.jsx("span",{className:"text-center",children:"Priority"}),a.jsx("span",{className:"text-center",children:"Estimate"}),a.jsx("span",{className:"text-center",children:"Action"})]}),a.jsx("div",{className:"space-y-3 mt-1",children:b.backlog.map(_=>a.jsx(Lo,{task:_,onToggleComplete:()=>D(_),onEditTask:()=>N(_),onMoveTask:k,onUpdateTask:n,onUpdateTimeEstimate:i,onDuplicateTask:r,onDeleteTask:M,boardInfo:c?f==null?void 0:f.find(E=>E.id===_.boardId):t,userPreferences:u},_.id))})]}),b.done.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 text-foreground border-b border-border pb-2",children:["Done (",b.done.length,")"]}),a.jsxs("div",{className:"grid items-center px-4 py-2 gap-x-2 text-xs font-semibold text-muted-foreground bg-background rounded-md",style:{gridTemplateColumns:"2rem 1fr 8rem 8rem 6rem 8rem 3rem"},children:[a.jsx("span",{}),a.jsx("span",{className:"text-left",children:"Title"}),a.jsx("span",{className:"text-center",children:"Board"}),a.jsx("span",{className:"text-center",children:"Due"}),a.jsx("span",{className:"text-center",children:"Priority"}),a.jsx("span",{className:"text-center",children:"Estimate"}),a.jsx("span",{className:"text-center",children:"Action"})]}),a.jsx("div",{className:"space-y-3 mt-1",children:b.done.map(_=>a.jsx(Lo,{task:_,onToggleComplete:()=>D(_),onEditTask:()=>N(_),onMoveTask:k,onUpdateTask:n,onUpdateTimeEstimate:i,onDuplicateTask:r,onDeleteTask:M,boardInfo:c?f==null?void 0:f.find(E=>E.id===_.boardId):t,userPreferences:u,isDone:!0},_.id))})]}),C.length===0&&a.jsx("div",{className:"text-center text-muted-foreground py-8",children:a.jsx("p",{children:"No tasks in this list. Add some!"})})]}),g&&a.jsx(bn,{task:h||null,isOpen:g,onClose:()=>{y(!1),m(null)},onSave:h?(_,E)=>T(null,null,function*(){yield n(_,E)}):void 0,onDelete:_=>T(null,null,function*(){yield M(_)}),isAllTasksBoard:c,boards:f||[],isCreating:!1,userPreferences:u})]})}function tP(t){const[e,n]=w.useState(!1),[s,r]=w.useState(null),[o,i]=w.useState(!1),c=()=>{n(!0)},f=y=>{r(y),i(!0)},u=(y,p)=>T(null,null,function*(){yield t.onUpdateTask(y,p),i(!1),r(null)}),h=y=>T(null,null,function*(){yield t.onDeleteTask(y),i(!1),r(null)}),m=y=>T(null,null,function*(){t.onDuplicateTask&&(yield t.onDuplicateTask(y)),i(!1),r(null)}),g=y=>T(null,null,function*(){const p={title:y.title||"",description:y.description||"",timeEstimate:y.timeEstimate||0,priority:y.priority||2,status:y.status||"backlog",position:t.tasks.filter(v=>v.status===(y.status||"backlog")).length,boardId:t.isAllTasksBoard?y.boardId:t.board.id,progressPercentage:y.progressPercentage||0,timeSpent:y.timeSpent||0,labels:y.labels||[],attachments:y.attachments||[],category:y.category||"",scheduledDate:y.scheduledDate,startDate:y.startDate,dueDate:y.dueDate,recurring:y.recurring};yield t.onAddTask(p),n(!1)});return a.jsxs(fo,{children:[a.jsxs("div",{className:"h-screen bg-background flex w-full",children:[a.jsx(Ea,{boards:t.boards||[],currentBoard:t.board,currentView:"list",tasks:t.tasks,userPreferences:t.userPreferences,onSelectBoard:y=>{t.onSelectBoard?t.onSelectBoard(y):t.onBack()},onSelectBoardView:(y,p)=>{t.onViewChange?t.onViewChange(y,p):t.onSelectBoard?t.onSelectBoard(y):t.onBack()},onCreateTask:y=>{y.id!==t.board.id&&t.onSelectBoard&&t.onSelectBoard(y),n(!0)},onNavigateToBoards:()=>{t.onBack()},onTaskClick:y=>{f(y)}}),a.jsxs(ho,{className:"flex flex-col flex-1 overflow-y-auto",children:[a.jsx(Da,{title:t.board.name,subtitle:t.board.description,board:t.board,currentView:"list",tasks:t.tasks,boards:t.boards,userPreferences:t.userPreferences,onViewChange:t.onViewChange,onCreateDetailedTask:c,user:t.user,onSignOut:t.onSignOut,onOpenSettings:t.onOpenSettings}),a.jsx(eP,x({},t))]})]}),a.jsx(bn,{task:s,isOpen:o,onClose:()=>i(!1),onSave:u,onDelete:h,onDuplicate:t.onDuplicateTask?m:void 0,isAllTasksBoard:t.isAllTasksBoard,boards:t.boards,userPreferences:t.userPreferences}),a.jsx(bn,{task:null,isOpen:e,onClose:()=>n(!1),onCreate:g,onDelete:()=>T(null,null,function*(){}),isAllTasksBoard:t.isAllTasksBoard,boards:t.boards,isCreating:!0,userPreferences:t.userPreferences})]})}const nP=co("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Zn=w.forwardRef((r,s)=>{var o=r,{className:t,variant:e}=o,n=G(o,["className","variant"]);return a.jsx("div",x({ref:s,role:"alert",className:V(nP({variant:e}),t)},n))});Zn.displayName="Alert";const Jn=w.forwardRef((s,n)=>{var r=s,{className:t}=r,e=G(r,["className"]);return a.jsx("div",x({ref:n,className:V("text-sm [&_p]:leading-relaxed",t)},e))});Jn.displayName="AlertDescription";const sP=t=>{var r,o;const e=((r=t.summary)==null?void 0:r.toLowerCase())||"",n=((o=t.id)==null?void 0:o.toLowerCase())||"";return!["holiday","holidays","observance","phases of the moon","week numbers","#contacts@group.v.calendar.google.com","@import.calendar.google.com"].some(i=>e.includes(i)||n.includes(i))};function rP({userPreferences:t,onUpdateUserPreferences:e,isAuthenticated:n,isLoading:s,error:r,calendars:o,handleAuthCallback:i,disconnect:c,setSelectedCalendarId:f,authenticate:u}){const[h,m]=w.useState(!1),[g,y]=w.useState(!0),[p,v]=w.useState(""),[C,b]=w.useState(!1),[N,M]=w.useState("idle"),[D,k]=w.useState(null),_=o.filter(sP);w.useEffect(()=>{const $=new URLSearchParams(window.location.search),K=$.get("code"),te=$.get("error");K&&!n?(console.log("Found OAuth authorization code in URL, processing..."),window.history.replaceState({},document.title,window.location.pathname),i(K)):te&&(console.error("OAuth error:",te),window.history.replaceState({},document.title,window.location.pathname))},[n,i]),w.useEffect(()=>{T(null,null,function*(){if(!n){k(null);return}try{const K=Et();if(K){const te=yield K.hasTasksScope();k(te)}}catch(K){console.warn("Failed to check Tasks scope:",K),k(!1)}})},[n]),w.useEffect(()=>{t&&(m(t.googleCalendarAutoSync),y(t.googleCalendarSyncOnlyScheduled),t.googleCalendarSelectedCalendar&&(v(t.googleCalendarSelectedCalendar),f(t.googleCalendarSelectedCalendar)))},[t,f]),w.useEffect(()=>{if(!t)return;const $=t.googleCalendarAutoSync!==h||t.googleCalendarSyncOnlyScheduled!==g||t.googleCalendarSelectedCalendar!==p;b($),$&&M("idle")},[h,g,p,t]);const E=()=>T(null,null,function*(){if(!e){console.error("onUpdateUserPreferences not provided");return}try{M("saving"),yield e({googleCalendarEnabled:n,googleCalendarAutoSync:h,googleCalendarSyncOnlyScheduled:g,googleCalendarSelectedCalendar:p||void 0}),M("saved"),b(!1),setTimeout(()=>M("idle"),2e3)}catch($){console.error("Failed to save settings:",$),M("error"),setTimeout(()=>M("idle"),3e3)}}),P=()=>{console.log("Starting Google Calendar OAuth flow..."),u()},R=$=>{v($),f($)},B=()=>T(null,null,function*(){yield c(),e&&(yield e({googleCalendarEnabled:!1,googleCalendarSelectedCalendar:void 0}))});return a.jsxs($e,{className:"w-full",children:[a.jsxs(ot,{children:[a.jsxs(at,{className:"flex items-center gap-2",children:[a.jsx(nt,{className:"h-5 w-5"}),"Google Calendar Integration"]}),a.jsx(it,{children:"Connect once and your scheduled tasks will automatically sync with Google Calendar forever."})]}),a.jsxs(qe,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:"Connection Status"}),n?a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(tt,{variant:"default",className:"flex items-center gap-1",children:[a.jsx(At,{className:"h-3 w-3"}),"Connected & Persistent"]}),D===!1&&a.jsxs(tt,{variant:"destructive",className:"flex items-center gap-1",children:[a.jsx(Ut,{className:"h-3 w-3"}),"No Tasks Access"]}),D===!0&&a.jsxs(tt,{variant:"outline",className:"flex items-center gap-1 text-green-700 border-green-200 bg-green-50",children:[a.jsx(At,{className:"h-3 w-3"}),"Tasks Enabled"]})]}):a.jsxs(tt,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(Ut,{className:"h-3 w-3"}),"Not Connected"]})]}),n?a.jsxs(Z,{variant:"outline",onClick:B,disabled:s,className:"flex items-center gap-2",children:[a.jsx(ww,{className:"h-4 w-4"}),"Disconnect"]}):a.jsxs(Z,{onClick:P,disabled:s,className:"flex items-center gap-2",children:[a.jsx(mf,{className:"h-4 w-4"}),s?"Connecting...":"Connect to Google Calendar"]})]}),r&&a.jsxs(Zn,{children:[a.jsx(Ut,{className:"h-4 w-4"}),a.jsx(Jn,{className:"text-sm",children:r})]}),!n&&a.jsxs(Zn,{children:[a.jsx(nt,{className:"h-4 w-4"}),a.jsxs(Jn,{children:[a.jsx("strong",{children:"One-time setup:"})," Connect your Google Calendar once and your tasks will automatically sync forever. No need to reconnect or worry about expired sessions."]})]}),n&&D===!1&&a.jsxs(Zn,{children:[a.jsx($v,{className:"h-4 w-4"}),a.jsxs(Jn,{children:[a.jsx("strong",{children:"Google Tasks Import:"})," Your connection doesn't have access to Google Tasks. To enable importing from Google Tasks, please disconnect and reconnect to grant additional permissions."]})]}),n&&a.jsxs(a.Fragment,{children:[a.jsx(As,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Wt,{htmlFor:"calendar-select",className:"text-sm font-medium",children:"Target Calendar"}),a.jsxs(ht,{value:p,onValueChange:R,disabled:s,children:[a.jsx(st,{children:a.jsx(mt,{placeholder:"Select a calendar for syncing tasks"})}),a.jsx(rt,{children:_.map($=>a.jsx(ge,{value:$.id,children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("span",{children:$.summary}),$.primary&&a.jsx(tt,{variant:"outline",className:"ml-2 text-xs",children:"Primary"})]})},$.id))})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.length," calendars available"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Wt,{htmlFor:"auto-sync",className:"text-sm font-medium",children:"Auto-sync"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically sync tasks to Google Calendar when scheduled"})]}),a.jsx(yl,{id:"auto-sync",checked:h,onCheckedChange:m})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Wt,{htmlFor:"sync-only-scheduled",className:"text-sm font-medium",children:"Sync only scheduled tasks"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Only sync tasks that have a scheduled date or time"})]}),a.jsx(yl,{id:"sync-only-scheduled",checked:g,onCheckedChange:y})]})]}),C&&a.jsxs(a.Fragment,{children:[a.jsx(As,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"You have unsaved changes"}),a.jsxs(Z,{onClick:E,disabled:N==="saving",variant:"default",className:"flex items-center gap-2",children:[a.jsx(pf,{className:"h-4 w-4"}),N==="saving"?"Saving...":N==="saved"?"Saved!":N==="error"?"Error - Try Again":"Save Settings"]})]})]})]})]})]})}function oP(t,e=[]){const[n,s]=w.useState(!1),[r,o]=w.useState(null),[i,c]=w.useState([]),f=w.useCallback(y=>e.some(p=>p.googleCalendarEventId===y),[e]),u=w.useCallback((y,p,v,C,b=!0,N="@default",M=!1)=>T(null,null,function*(){const D=Et();if(!D||!D.isUserAuthenticated())throw new Error("Not authenticated with Google Calendar");s(!0),o(null);try{console.log("ðŸ”„ Starting calendar import preview...");const k=yield D.importEvents(y,p,v,C,b,N,M),_=k.filter(P=>P.googleCalendarEventId&&!f(P.googleCalendarEventId));console.log(`ðŸ“‹ ${_.length} new tasks ready for import (${k.length-_.length} duplicates filtered)`);const E=_.map(P=>({title:P.title,description:P.description,scheduledDate:P.scheduledDate,timeEstimate:P.timeEstimate,priority:P.priority,status:P.status,category:P.category,tags:P.tags||[],originalEventId:P.googleCalendarEventId}));return c(E),E}catch(k){const _=k instanceof Error?k.message:"Failed to import calendar events";throw console.error("âŒ Calendar import failed:",k),o(_),k}finally{s(!1)}}),[f]),h=w.useCallback((y,p)=>T(null,null,function*(){s(!0),o(null);try{console.log(`ðŸš€ Importing ${y.length} tasks from calendar...`);let v=0;const C=[];for(const b of y)try{const N={title:b.title,description:b.description,timeEstimate:b.timeEstimate,priority:b.priority,status:b.status,position:0,scheduledDate:b.scheduledDate,startDate:b.scheduledDate,category:b.category,tags:b.tags,boardId:p,progressPercentage:b.status==="done"?100:0,timeSpent:0,labels:[],attachments:[],googleCalendarEventId:b.originalEventId,googleCalendarSynced:!0};yield t(N),v++}catch(N){console.error(`Failed to import task "${b.title}":`,N),C.push(`"${b.title}": ${N instanceof Error?N.message:"Unknown error"}`)}if(C.length>0)throw new Error(`Imported ${v} tasks successfully, but ${C.length} failed:
${C.join(`
`)}`);console.log(`âœ… Successfully imported ${v} tasks from Google Calendar`),c([])}catch(v){const C=v instanceof Error?v.message:"Failed to import some tasks";throw console.error("âŒ Import confirmation failed:",v),o(C),v}finally{s(!1)}}),[t]),m=w.useCallback(()=>{c([]),o(null)},[]),g=w.useCallback(()=>T(null,null,function*(){const y=Et();if(!y||!y.isUserAuthenticated())throw new Error("Not authenticated with Google Tasks");try{return yield y.getTaskLists()}catch(p){throw console.error("âŒ Failed to fetch task lists:",p),p}}),[]);return{isLoading:n,error:r,previewTasks:i,importEvents:u,confirmImport:h,clearPreview:m,getTaskLists:g}}function aP({calendars:t,boards:e,tasks:n,onAddTask:s,selectedBoardId:r}){const[o,i]=w.useState("primary"),[c,f]=w.useState(r),[u,h]=w.useState(!1),[m,g]=w.useState(new Set),[y,p]=w.useState("month"),[v,C]=w.useState(!0),[b,N]=w.useState("@default"),[M,D]=w.useState(!1),[k,_]=w.useState([]),{isLoading:E,error:P,previewTasks:R,importEvents:B,confirmImport:$,clearPreview:K,getTaskLists:te}=oP(s,n);w.useEffect(()=>{T(null,null,function*(){if(v)try{const H=yield te();_(H),console.log(`âœ… Loaded ${H.length} Google Task Lists`)}catch(H){console.warn("Failed to load task lists:",H),H instanceof Error&&H.message.includes("Google Tasks access not granted")?Ye.error("Google Tasks access not available. Please reconnect to Google Calendar to enable Google Tasks import."):H instanceof Error&&H.message.includes("Authentication expired")?Ye.error("Google authentication expired. Please reconnect to Google Calendar."):console.error("Unexpected error loading task lists:",H),C(!1)}})},[te,v]);const le=()=>T(null,null,function*(){try{const A=new Date;let H,O;switch(y){case"week":H=new Date(A.getTime()-7*24*60*60*1e3),O=new Date(A.getTime()+7*24*60*60*1e3);break;case"month":H=new Date(A.getTime()-30*24*60*60*1e3),O=new Date(A.getTime()+30*24*60*60*1e3);break;default:H=new Date(A.getTime()-30*24*60*60*1e3),O=new Date(A.getTime()+30*24*60*60*1e3)}const q=yield B(o,c,H,O,v,b,M);if(q.length===0){const ne=v?"events or tasks":"events";Ye.info(`No new ${ne} found to import`);return}g(new Set(q.map(ne=>ne.originalEventId))),h(!0)}catch(A){Ye.error("Failed to load calendar events"),console.error("Import preview failed:",A)}}),ve=()=>T(null,null,function*(){try{const A=R.filter(O=>m.has(O.originalEventId));if(A.length===0){Ye.error("No tasks selected for import");return}yield $(A,c);const H=v?"Google Calendar & Tasks":"Google Calendar";Ye.success(`Successfully imported ${A.length} items from ${H}`),h(!1),g(new Set)}catch(A){Ye.error("Failed to import selected tasks"),console.error("Import confirmation failed:",A)}}),we=A=>{const H=new Set(m);H.has(A)?H.delete(A):H.add(A),g(H)},_e=()=>{m.size===R.length?g(new Set):g(new Set(R.map(A=>A.originalEventId)))},S=m.size,L=S===R.length,j=A=>({1:"bg-gray-100 text-gray-800",2:"bg-blue-100 text-blue-800",3:"bg-yellow-100 text-yellow-800",4:"bg-red-100 text-red-800"})[A],W=A=>({1:"Low",2:"Medium",3:"High",4:"Critical"})[A],Q=A=>({backlog:"bg-gray-100 text-gray-800","this-week":"bg-blue-100 text-blue-800",today:"bg-green-100 text-green-800",done:"bg-purple-100 text-purple-800"})[A];return a.jsxs(a.Fragment,{children:[a.jsxs($e,{className:"w-full",children:[a.jsxs(ot,{children:[a.jsxs(at,{className:"flex items-center gap-2",children:[a.jsx(Pi,{className:"h-5 w-5"}),"Import from Google Calendar"]}),a.jsx(it,{children:"Import existing calendar events and Google Tasks into DayFlow. Duplicates and DayFlow-created items are automatically filtered out."})]}),a.jsxs(qe,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium",children:"Source Calendar"}),a.jsxs(ht,{value:o,onValueChange:i,children:[a.jsx(st,{children:a.jsx(mt,{placeholder:"Select calendar to import from"})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"primary",children:"Primary Calendar"}),t.map(A=>a.jsx(ge,{value:A.id,children:A.summary||A.id},A.id))]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium",children:"Target Board"}),a.jsxs(ht,{value:(c==null?void 0:c.toString())||"",onValueChange:A=>f(A?parseInt(A):void 0),children:[a.jsx(st,{children:a.jsx(mt,{placeholder:"Select board for imported tasks"})}),a.jsx(rt,{children:e.map(A=>a.jsx(ge,{value:A.id.toString(),children:a.jsxs("div",{className:"flex items-center gap-2",children:[A.icon&&a.jsx("span",{children:A.icon}),a.jsx("span",{children:A.name})]})},A.id))})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),a.jsxs(ht,{value:y,onValueChange:A=>p(A),children:[a.jsx(st,{children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"week",children:"Past & Next Week"}),a.jsx(ge,{value:"month",children:"Past & Next Month"})]})]})]}),a.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium",children:"Import Sources"}),a.jsx(tt,{variant:"outline",children:"Enhanced Import"})]}),a.jsxs(Zn,{children:[a.jsx(Ut,{className:"h-4 w-4"}),a.jsxs(Jn,{className:"text-xs",children:[a.jsx("strong",{children:"Note:"})," Google Tasks import requires additional permissions. If you connected to Google Calendar before this feature was added, you may need to reconnect in Settings to enable Google Tasks access."]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium",children:"Include Google Tasks"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Import tasks from Google Tasks in addition to calendar events"})]}),a.jsx(bt,{checked:v,onCheckedChange:A=>C(A===!0)})]}),v&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Google Task List"}),a.jsxs(ht,{value:b,onValueChange:N,children:[a.jsx(st,{children:a.jsx(mt,{placeholder:"Select task list"})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"@default",children:"My Tasks (Default)"}),k.map(A=>a.jsx(ge,{value:A.id,children:A.title},A.id))]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium",children:"Include Completed Tasks"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Import tasks that are already marked as completed"})]}),a.jsx(bt,{checked:M,onCheckedChange:A=>D(A===!0)})]})]})]})]}),P&&a.jsxs(Zn,{children:[a.jsx(Ut,{className:"h-4 w-4"}),a.jsx(Jn,{children:P})]}),a.jsx(Z,{onClick:le,disabled:E||!o,className:"w-full",children:E?a.jsxs(a.Fragment,{children:[a.jsx(Vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading Events..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Pi,{className:"h-4 w-4 mr-2"}),"Preview Import"]})})]})]}),a.jsx(vn,{open:u,onOpenChange:A=>{h(A),A||(K(),g(new Set))},children:a.jsxs(wn,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[a.jsxs(gs,{children:[a.jsx(Yn,{children:"Import Preview"}),a.jsxs(Hn,{children:["Review and select events to import as tasks. ",R.length," events found."]})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{checked:L,onCheckedChange:_e}),a.jsxs("span",{className:"text-sm font-medium",children:["Select All (",S," of ",R.length,")"]})]}),a.jsxs(tt,{variant:"outline",children:[S," task",S!==1?"s":""," selected"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:R.map(A=>a.jsx("div",{className:`border rounded-lg p-4 space-y-3 ${m.has(A.originalEventId)?"border-primary bg-primary/5":"border-border"}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(bt,{checked:m.has(A.originalEventId),onCheckedChange:()=>we(A.originalEventId),className:"mt-1"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"font-medium",children:A.title}),A.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:A.description}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(tt,{className:j(A.priority),children:[a.jsx(xf,{className:"h-3 w-3 mr-1"}),W(A.priority)]}),a.jsxs(tt,{className:Q(A.status),children:[a.jsx(yv,{className:"h-3 w-3 mr-1"}),A.status.replace("-"," ")]}),a.jsxs(tt,{variant:"outline",children:[a.jsx(Vt,{className:"h-3 w-3 mr-1"}),A.timeEstimate,"m"]}),A.scheduledDate&&a.jsxs(tt,{variant:"outline",children:[a.jsx(nt,{className:"h-3 w-3 mr-1"}),Nt(new Date(A.scheduledDate),"MMM d, h:mm a")]}),A.category&&a.jsxs(tt,{variant:"outline",children:[a.jsx(uw,{className:"h-3 w-3 mr-1"}),A.category]})]}),A.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:A.tags.map((H,O)=>a.jsx("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:H},O))})]})]})},A.originalEventId))})]}),a.jsxs(Is,{children:[a.jsx(Z,{variant:"outline",onClick:()=>h(!1),disabled:E,children:"Cancel"}),a.jsx(Z,{onClick:ve,disabled:E||S===0,children:E?a.jsxs(a.Fragment,{children:[a.jsx(Vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(At,{className:"h-4 w-4 mr-2"}),"Import ",S," Task",S!==1?"s":""]})})]})]})})]})}function iP(t,e,n){const[s,r]=w.useState(!1),[o,i]=w.useState(!1),[c,f]=w.useState(null),[u,h]=w.useState([]),[m,g]=w.useState("primary"),y=w.useCallback(k=>{},[n]),p=w.useCallback(()=>T(null,null,function*(){const k=Et();if(!k){console.log("Cannot load calendars: service not initialized");return}if(!k.isUserAuthenticated()){console.log("Cannot load calendars: service not authenticated");return}try{i(!0),f(null),console.log("Loading calendars...");const _=yield k.getCalendarList();console.log("Calendars loaded:",_),h(_)}catch(_){console.error("Failed to load calendars:",_),_ instanceof Error&&_.message.includes("Authentication expired")?(f("Your Google Calendar session has expired. Please reconnect to continue."),r(!1)):f("Failed to load calendars. Please try reconnecting.")}finally{i(!1)}}),[]);w.useEffect(()=>{T(null,null,function*(){const _=hm(t),{data:{user:E}}=yield ye.auth.getUser();if(!E){console.log("No authenticated user found");return}_.setUserId(E.id);const P=yield _.loadStoredTokens(),R=_.isUserAuthenticated();if(console.log("Google Calendar initialization:",{hasStoredTokens:P,isServiceAuthenticated:R,userId:E.id,config:{hasClientId:!!t.clientId,redirectUri:t.redirectUri}}),r(R),R)try{i(!0),f(null),console.log("Loading calendars...");const B=yield _.getCalendarList();console.log("Calendars loaded:",B),h(B)}catch(B){console.error("Failed to load calendars:",B),B instanceof Error&&B.message.includes("Authentication expired")?(f("Your Google Calendar session has expired. Please reconnect to continue."),r(!1)):f("Failed to load calendars. Please try reconnecting.")}finally{i(!1)}})},[t]);const v=w.useCallback(()=>{const k=Et();if(!k)throw new Error("Google Calendar service not initialized");return k.getAuthUrl()},[]),C=w.useCallback(()=>{const k=v();window.location.href=k},[v]),b=w.useCallback(k=>T(null,null,function*(){const _=Et();if(!_){f("Google Calendar service not initialized");return}try{i(!0),f(null),console.log("Processing Google Calendar authorization code...");const{data:{user:E}}=yield ye.auth.getUser();if(!E)throw new Error("User not authenticated");console.log("User authenticated, setting user ID:",E.id),_.setUserId(E.id),console.log("Calling exchangeCodeForTokens..."),yield _.exchangeCodeForTokens(k);const P=_.isUserAuthenticated();console.log("Authentication result:",P),r(P),P&&(yield p(),console.log("âœ… Google Calendar connected successfully"))}catch(E){console.error("Authentication failed:",E),f(`Authentication failed: ${E instanceof Error?E.message:"Unknown error"}`),r(!1)}finally{i(!1)}}),[p]),N=w.useCallback(()=>T(null,null,function*(){const k=Et();if(k)try{i(!0),console.log("Disconnecting from Google Calendar"),yield k.disconnect(),r(!1),h([]),g("primary"),f(null),console.log("âœ… Google Calendar disconnected successfully")}catch(_){console.error("Failed to disconnect from Google Calendar:",_),f("Failed to disconnect from Google Calendar")}finally{i(!1)}}),[]),M=w.useCallback(k=>T(null,null,function*(){const _=Et();if(!_||!_.isUserAuthenticated())throw new Error("Not authenticated with Google Calendar");if(!k.scheduledDate&&!k.startDate)throw new Error("Task must have a scheduled date or start date to sync");try{let E=null;const P=y(k);k.googleCalendarEventId?(console.log("ðŸ”„ Updating existing Google Calendar event:",k.googleCalendarEventId),yield _.updateEvent(k,k.googleCalendarEventId,m,P),E=k.googleCalendarEventId):(console.log("âž• Creating new Google Calendar event"),E=yield _.createEvent(k,m,P)),e&&E&&(yield e(k.id,{googleCalendarEventId:E,googleCalendarSynced:!0}),console.log("âœ… Successfully linked task to Google Calendar event"))}catch(E){throw console.error("âŒ Failed to sync task to Google Calendar:",E),e&&(yield e(k.id,{googleCalendarSynced:!1})),E}}),[m,e,y]),D=w.useCallback(k=>T(null,null,function*(){const _=Et();if(!_||!_.isUserAuthenticated())throw new Error("Not authenticated with Google Calendar");if(!k.googleCalendarEventId)throw new Error("Task is not synced with Google Calendar");try{yield _.deleteEvent(k.googleCalendarEventId,m),e&&(yield e(k.id,{googleCalendarEventId:void 0,googleCalendarSynced:!1}))}catch(E){throw console.error("âŒ Failed to remove task from Google Calendar:",E),E}}),[m,e]);return{isAuthenticated:s,isLoading:o,error:c,calendars:u,selectedCalendarId:m,authenticate:C,handleAuthCallback:b,disconnect:N,syncTask:M,unsyncTask:D,setSelectedCalendarId:g,getAuthUrl:v}}const xl={clientId:"396651979133-t41mkb1t8imdj64a6avnjjjnjpn8qaad.apps.googleusercontent.com",redirectUri:"http://localhost:1420"};function lP(){return!!(xl.clientId&&xl.redirectUri)}const us={googleCalendar:xl,validateGoogleCalendar:lP};function cP({tasks:t,onTaskUpdate:e,onAddTask:n,onManualSyncTask:s,onManualUnsyncTask:r,boards:o,userPreferences:i,onUpdateUserPreferences:c}){const[f,u]=w.useState(!1),[h,m]=w.useState({totalScheduledTasks:0,syncedTasks:0,unsyncedTasks:0}),g=(E,P)=>T(null,null,function*(){yield e(E,P)}),{isAuthenticated:y,calendars:p,isLoading:v,error:C,handleAuthCallback:b,disconnect:N,setSelectedCalendarId:M,authenticate:D}=iP(us.googleCalendar,g);w.useEffect(()=>{u(us.validateGoogleCalendar())},[]),w.useEffect(()=>{const E=t.filter(R=>R.scheduledDate||R.startDate),P=t.filter(R=>R.googleCalendarSynced);m({totalScheduledTasks:E.length,syncedTasks:P.length,unsyncedTasks:E.length-P.length})},[t]);const k=()=>T(null,null,function*(){if(!s){Ye.error("Sync function not available");return}const E=t.filter(R=>(R.scheduledDate||R.startDate)&&!R.googleCalendarSynced);if(E.length===0){Ye.info("No tasks to sync");return}const P=Ye.loading(`Syncing ${E.length} tasks...`);try{const R=yield Promise.allSettled(E.map(K=>s(K))),B=R.filter(K=>K.status==="fulfilled").length,$=R.filter(K=>K.status==="rejected").length;B>0&&Ye.success(`Successfully synced ${B} tasks`,{id:P}),$>0&&Ye.error(`Failed to sync ${$} tasks`,{id:P})}catch(R){Ye.error("Failed to sync tasks",{id:P})}}),_=()=>T(null,null,function*(){if(!r){Ye.error("Unsync function not available");return}const E=t.filter(R=>R.googleCalendarSynced);if(E.length===0){Ye.info("No synced tasks to remove");return}const P=Ye.loading(`Removing ${E.length} tasks from calendar...`);try{const R=yield Promise.allSettled(E.map(K=>r(K))),B=R.filter(K=>K.status==="fulfilled").length,$=R.filter(K=>K.status==="rejected").length;B>0&&Ye.success(`Successfully removed ${B} tasks from calendar`,{id:P}),$>0&&Ye.error(`Failed to remove ${$} tasks`,{id:P})}catch(R){Ye.error("Failed to remove tasks from calendar",{id:P})}});return f?a.jsxs("div",{className:"space-y-6",children:[a.jsx(rP,{userPreferences:i,onUpdateUserPreferences:c,isAuthenticated:y,isLoading:v,error:C,calendars:p,handleAuthCallback:b,disconnect:N,setSelectedCalendarId:M,authenticate:D}),y?a.jsx(aP,{calendars:p,boards:o,tasks:t,onAddTask:n}):a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsxs(at,{className:"flex items-center gap-2",children:[a.jsx(Pi,{className:"h-5 w-5"}),"Import from Google Calendar"]}),a.jsx(it,{children:"Connect to Google Calendar to import existing events as tasks"})]}),a.jsx(qe,{children:a.jsxs(Zn,{children:[a.jsx(Ut,{className:"h-4 w-4"}),a.jsx(Jn,{children:"Please connect to Google Calendar above to use import features."})]})})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsxs(at,{className:"flex items-center gap-2",children:[a.jsx(vf,{className:"h-5 w-5"}),"Sync Manager"]}),a.jsx(it,{children:"Manage synchronization between your tasks and Google Calendar"})]}),a.jsxs(qe,{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsx($e,{children:a.jsxs(qe,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.totalScheduledTasks}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Scheduled Tasks"})]})}),a.jsx($e,{children:a.jsxs(qe,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.syncedTasks}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Synced to Calendar"})]})}),a.jsx($e,{children:a.jsxs(qe,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:h.unsyncedTasks}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Not Synced"})]})})]}),a.jsx(As,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium",children:"Bulk Actions"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs(Z,{onClick:k,disabled:!y||h.unsyncedTasks===0,className:"flex-1",children:[a.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Sync All Unsynced Tasks"]}),a.jsxs(Z,{variant:"outline",onClick:_,disabled:!y||h.syncedTasks===0,className:"flex-1",children:[a.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Remove All from Calendar"]})]})]}),!y&&a.jsxs(Zn,{children:[a.jsx(Ut,{className:"h-4 w-4"}),a.jsx(Jn,{children:"Connect to Google Calendar above to use sync features."})]})]})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsxs(at,{className:"flex items-center gap-2",children:[a.jsx(nt,{className:"h-5 w-5"}),"Integration Overview"]}),a.jsx(it,{children:"How the Google Calendar integration works with your tasks"})]}),a.jsxs(qe,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${y?"bg-green-500":"bg-red-500"}`}),a.jsx("span",{className:"font-medium",children:"Google Calendar"})]}),a.jsx(tt,{variant:y?"default":"secondary",children:y?"Connected & Persistent":"Not Connected"})]}),a.jsx(As,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium",children:"Features"}),a.jsx("div",{className:"grid gap-3",children:[{icon:At,title:"Automatic Sync",description:"Tasks are automatically synced when scheduled or updated",enabled:!0},{icon:At,title:"Manual Control",description:"Right-click any task to manually sync or unsync",enabled:!0},{icon:At,title:"Bulk Operations",description:"Sync or unsync multiple tasks at once",enabled:!0},{icon:At,title:"Smart Filtering",description:"Only scheduled tasks are synced by default",enabled:!0}].map((E,P)=>a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[a.jsx(E.icon,{className:"h-5 w-5 text-green-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:E.title}),a.jsx("div",{className:"text-sm text-muted-foreground",children:E.description})]})]},P))})]}),a.jsx(As,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium",children:"Usage Tips"}),a.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsx("li",{children:"â€¢ Schedule tasks with specific dates and times for automatic sync"}),a.jsx("li",{children:"â€¢ Use the context menu (right-click) to manually sync individual tasks"}),a.jsx("li",{children:"â€¢ Task updates (title, description, time) automatically sync to Google Calendar"}),a.jsx("li",{children:"â€¢ Deleting a task will remove it from Google Calendar"}),a.jsx("li",{children:"â€¢ Use the Sync Manager to handle multiple tasks at once"})]})]})]})]})]}):a.jsxs($e,{className:"w-full",children:[a.jsxs(ot,{children:[a.jsxs(at,{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"h-5 w-5 text-orange-500"}),"Google Calendar Setup Required"]}),a.jsx(it,{children:"Google Calendar integration is not configured. Please set up your API credentials."})]}),a.jsxs(qe,{className:"space-y-4",children:[a.jsxs(Zn,{children:[a.jsx(Ut,{className:"h-4 w-4"}),a.jsx(Jn,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{children:"To use Google Calendar integration, you need to:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[a.jsxs("li",{children:["Go to ",a.jsx("a",{href:"https://console.developers.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Google Cloud Console"})]}),a.jsx("li",{children:"Create a new project or select an existing one"}),a.jsx("li",{children:"Enable the Google Calendar API"}),a.jsx("li",{children:a.jsx("strong",{children:'Create credentials (OAuth 2.0 Client ID) - Select "Web application" type'})}),a.jsx("li",{children:'Add your domain to "Authorized JavaScript origins" (e.g., https://yourdomain.com)'}),a.jsxs("li",{children:["For development, add: ",a.jsx("code",{children:"http://localhost:1420"})]}),a.jsx("li",{children:"Add the Client ID to your environment variables"})]}),a.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-200 dark:border-blue-800",children:a.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"â„¹ï¸ This integration uses Google Identity Services (GIS) - the modern, secure approach for web applications that doesn't require exposing client secrets."})})]})})]}),a.jsxs("div",{className:"bg-muted p-4 rounded-md",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Required Environment Variables:"}),a.jsx("pre",{className:"text-sm bg-background p-2 rounded border",children:`VITE_GOOGLE_CLIENT_ID=your_web_application_client_id
VITE_GOOGLE_REDIRECT_URI=http://localhost:1420`}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Note: No client secret required! Google Identity Services handles authentication securely."})]}),a.jsx(Z,{asChild:!0,className:"w-full",children:a.jsxs("a",{href:"https://developers.google.com/calendar/api/quickstart",target:"_blank",rel:"noopener noreferrer",children:[a.jsx(mf,{className:"h-4 w-4 mr-2"}),"View Setup Guide"]})})]})]})}function dP(e){var t=G(e,[]);return a.jsx("nav",x({"aria-label":"breadcrumb","data-slot":"breadcrumb"},t))}function uP(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("ol",x({"data-slot":"breadcrumb-list",className:V("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t)},e))}function Nu(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("li",x({"data-slot":"breadcrumb-item",className:V("inline-flex items-center gap-1.5",t)},e))}function fP(n){var s=n,{className:t}=s,e=G(s,["className"]);return a.jsx("span",x({"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:V("text-foreground font-normal",t)},e))}function hP({activeSection:t,onSectionChange:e,onBackToBoards:n}){const s=[{id:"profile",name:"Profile",icon:Fi,description:"Personal information and account"},{id:"appearance",name:"Appearance",icon:T0,description:"Theme and visual preferences"},{id:"datetime",name:"Date & Time",icon:nt,description:"Date, time and timezone settings"},{id:"calendar",name:"Calendar",icon:hf,description:"Calendar view and behavior"},{id:"tasks",name:"Tasks",icon:Jr,description:"Task management preferences"},{id:"ai",name:"AI Scheduling",icon:cs,description:"Automatic task scheduling with AI"}];return a.jsxs(Hf,{variant:"inset",children:[a.jsx(qf,{children:a.jsx(Es,{children:a.jsx(hn,{children:a.jsx(Ln,{size:"lg",asChild:!0,children:a.jsxs("div",{className:"cursor-default",children:[a.jsx("div",{className:"bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg",children:a.jsx(Fi,{className:"size-4"})}),a.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[a.jsx("span",{className:"truncate font-medium",children:"Settings"}),a.jsx("span",{className:"truncate text-xs",children:"Customize your experience"})]})]})})})})}),a.jsxs(Zf,{children:[a.jsxs(Vr,{children:[a.jsx(Ur,{children:"Navigation"}),a.jsx(Br,{children:a.jsx(Es,{children:a.jsx(hn,{children:a.jsxs(Ln,{onClick:n,tooltip:"Return to boards view",children:[a.jsx(Zv,{className:"size-4"}),a.jsx("span",{children:"Back to Boards"})]})})})})]}),a.jsxs(Vr,{children:[a.jsx(Ur,{children:"Configuration"}),a.jsx(Br,{children:a.jsx(Es,{children:s.map(r=>{const o=r.icon;return a.jsx(hn,{children:a.jsxs(Ln,{onClick:()=>e(r.id),isActive:t===r.id,tooltip:r.description,children:[a.jsx(o,{className:"size-4"}),a.jsx("span",{children:r.name})]})},r.id)})})})]})]})]})}function mP({user:t,userPreferences:e,userProfile:n,onBack:s,onUpdatePreferences:r,onUpdateProfile:o,onSignOut:i,onUpdatePassword:c,onUpdateTask:f,onAddTask:u,tasks:h,boards:m}){const{setTheme:g}=sx(),[y,p]=w.useState("profile"),[v,C]=w.useState(!1),[b,N]=w.useState(!1),[M,D]=w.useState(!1),[k,_]=w.useState(x({theme:"system",language:"en",dateFormat:"MM/DD/YYYY",timeFormat:"12h",weekStartsOn:0,autoSave:!0,showCompletedTasks:!1,taskSortBy:"priority",taskSortOrder:"asc",calendarDefaultZoom:1,calendarDefaultView:"3-day",boardDefaultView:"compact"},e)),[E,P]=w.useState(x({firstName:"",lastName:"",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},n));w.useEffect(()=>{e&&_(x({},e))},[e]),w.useEffect(()=>{n&&P(x({},n))},[n]);const R=(S,L)=>{if(_(j=>F(x({},j),{[S]:L})),N(!0),S==="theme"){const j=L;if(j==="system"){const W=window.matchMedia("(prefers-color-scheme: dark)").matches;g(W?"dark":"light")}else g(j)}},B=(S,L)=>{P(j=>F(x({},j),{[S]:L})),N(!0)},$=()=>T(null,null,function*(){C(!0);try{yield Promise.all([r(k),o(E)]),N(!1)}catch(S){console.error("Failed to save settings:",S)}finally{C(!1)}}),K=()=>{b?D(!0):s()},te=()=>T(null,null,function*(){yield $(),D(!1),s()}),le=()=>{N(!1),D(!1),s()},ve=()=>{D(!1)},we=()=>T(null,null,function*(){if(i){C(!0);try{const{error:S}=yield i();S&&console.error("Sign out error:",S)}catch(S){console.error("Sign out error:",S)}finally{C(!1)}}}),_e=()=>({profile:"Profile",appearance:"Appearance",datetime:"Date & Time",calendar:"Calendar",tasks:"Tasks",ai:"AI Scheduling"})[y];return a.jsxs(fo,{children:[a.jsx(hP,{activeSection:y,onSectionChange:p,onBackToBoards:K}),a.jsxs(ho,{children:[a.jsxs("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12",children:[a.jsxs("div",{className:"flex items-center gap-2 px-4",children:[a.jsx(zf,{className:"-ml-1"}),a.jsx(As,{orientation:"vertical",className:"mr-2 h-4"}),a.jsx(dP,{children:a.jsxs(uP,{children:[a.jsx(Nu,{children:a.jsxs(Z,{variant:"ghost",size:"sm",onClick:K,className:"h-auto p-0 text-muted-foreground hover:text-foreground",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),"Back"]})}),a.jsx(Nu,{children:a.jsx(fP,{children:_e()})})]})})]}),a.jsxs("div",{className:"ml-auto flex items-center gap-2 px-4",children:[b&&a.jsx(tt,{variant:"outline",className:"text-orange-600 border-orange-200",children:"Unsaved changes"}),a.jsxs(Z,{onClick:$,disabled:!b||v,size:"sm",className:"gap-2",children:[a.jsx(pf,{className:"h-4 w-4"}),v?"Saving...":"Save Changes"]})]})]}),a.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:[y==="profile"&&a.jsx(gP,{profile:E,user:t,onUpdateProfile:B,onSignOut:we,onUpdatePassword:c,isLoading:v}),y==="appearance"&&a.jsx(pP,{preferences:k,onUpdatePreference:R}),y==="datetime"&&a.jsx(yP,{preferences:k,onUpdatePreference:R}),y==="calendar"&&a.jsx(xP,{preferences:k,onUpdatePreference:R,onUpdateTask:f,onAddTask:u,tasks:h,boards:m}),y==="tasks"&&a.jsx(vP,{preferences:k,onUpdatePreference:R}),y==="ai"&&a.jsx(wP,{preferences:k,onUpdatePreference:R})]})]}),a.jsx(vn,{open:M,onOpenChange:D,children:a.jsxs(wn,{children:[a.jsxs(gs,{children:[a.jsxs(Yn,{className:"flex items-center gap-2",children:[a.jsx(xa,{className:"h-5 w-5 text-amber-500"}),"Unsaved Changes"]}),a.jsx(Hn,{children:"You have unsaved changes that will be lost if you leave this page. What would you like to do?"})]}),a.jsx(Is,{className:"sm:justify-start",children:a.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[a.jsx(Z,{variant:"default",onClick:te,disabled:v,className:"flex-1 sm:flex-none",children:v?"Saving...":"Save & Exit"}),a.jsx(Z,{variant:"destructive",onClick:le,disabled:v,className:"flex-1 sm:flex-none",children:"Discard Changes"}),a.jsx(Z,{variant:"outline",onClick:ve,disabled:v,className:"flex-1 sm:flex-none",children:"Cancel"})]})})]})})]})}function gP({profile:t,user:e,onUpdateProfile:n,onSignOut:s,onUpdatePassword:r,isLoading:o}){var k;const i=["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Shanghai","Australia/Sydney","UTC"],[c,f]=w.useState(!1),[u,h]=w.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[m,g]=w.useState({current:!1,new:!1,confirm:!1}),[y,p]=w.useState(!1),[v,C]=w.useState(""),b=((k=e==null?void 0:e.app_metadata)==null?void 0:k.provider)==="google"||e&&"identities"in e&&Array.isArray(e.identities)?e.identities.some(_=>_.provider==="google"):!1,N=()=>T(null,null,function*(){if(!r){C("Password update function not available");return}if(u.newPassword!==u.confirmPassword){C("New passwords do not match");return}if(u.newPassword.length<6){C("Password must be at least 6 characters long");return}p(!0),C("");try{const{error:_}=yield r(u.newPassword);if(_){C(_.message||"Failed to change password. Please try again.");return}h({currentPassword:"",newPassword:"",confirmPassword:""}),f(!1)}catch(_){C("Failed to change password. Please try again."),console.error("Password change error:",_)}finally{p(!1)}}),D=b?{provider:"Google",icon:a.jsx(Qs,{className:"h-4 w-4"}),description:"You signed in with your Google account",canChangePassword:!1}:{provider:"Email & Password",icon:a.jsx(Oi,{className:"h-4 w-4"}),description:"You signed in with email and password",canChangePassword:!0};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Profile Information"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your personal information and account settings."})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Personal Details"}),a.jsx(it,{children:"Your name and basic information"})]}),a.jsxs(qe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"First Name"}),a.jsx(Ae,{value:t.firstName||"",onChange:_=>n("firstName",_.target.value),placeholder:"Enter your first name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Last Name"}),a.jsx(Ae,{value:t.lastName||"",onChange:_=>n("lastName",_.target.value),placeholder:"Enter your last name"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Email"}),a.jsx(Ae,{value:(e==null?void 0:e.email)||"",disabled:!0,className:"bg-muted"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed from this page"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Timezone"}),a.jsxs(ht,{value:t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,onValueChange:_=>n("timezone",_),children:[a.jsx(st,{children:a.jsx(mt,{})}),a.jsx(rt,{className:"max-h-60",children:i.map(_=>a.jsx(ge,{value:_,children:_.replace(/_/g," ")},_))})]})]})]})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsxs(at,{className:"flex items-center gap-2",children:[a.jsx(yf,{className:"h-5 w-5"}),"Authentication Method"]}),a.jsx(it,{children:"How you sign in to your account"})]}),a.jsxs(qe,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[D.icon,a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-sm",children:D.provider}),a.jsx("p",{className:"text-xs text-muted-foreground",children:D.description})]}),b&&a.jsx(tt,{variant:"secondary",className:"text-xs",children:"OAuth"})]}),D.canChangePassword&&a.jsx("div",{className:"space-y-3",children:c?a.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium",children:"Change Password"}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>{f(!1),h({currentPassword:"",newPassword:"",confirmPassword:""}),C("")},children:"Cancel"})]}),v&&a.jsx("div",{className:"text-sm text-red-600 bg-red-50 dark:bg-red-950/20 p-2 rounded",children:v}),a.jsxs("div",{className:"space-y-3",children:[!b&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Current Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ae,{type:m.current?"text":"password",value:u.currentPassword,onChange:_=>h(E=>F(x({},E),{currentPassword:_.target.value})),placeholder:"Enter current password"}),a.jsx(Z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(_=>F(x({},_),{current:!_.current})),children:m.current?a.jsx(ai,{className:"h-4 w-4"}):a.jsx(Go,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ae,{type:m.new?"text":"password",value:u.newPassword,onChange:_=>h(E=>F(x({},E),{newPassword:_.target.value})),placeholder:"Enter new password"}),a.jsx(Z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(_=>F(x({},_),{new:!_.new})),children:m.new?a.jsx(ai,{className:"h-4 w-4"}):a.jsx(Go,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ae,{type:m.confirm?"text":"password",value:u.confirmPassword,onChange:_=>h(E=>F(x({},E),{confirmPassword:_.target.value})),placeholder:"Confirm new password"}),a.jsx(Z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(_=>F(x({},_),{confirm:!_.confirm})),children:m.confirm?a.jsx(ai,{className:"h-4 w-4"}):a.jsx(Go,{className:"h-4 w-4"})})]})]}),a.jsx(Z,{onClick:N,disabled:y||!b&&!u.currentPassword||!u.newPassword||!u.confirmPassword,className:"w-full",children:y?"Changing Password...":"Change Password"})]})]}):a.jsxs(Z,{variant:"outline",onClick:()=>f(!0),className:"gap-2",children:[a.jsx(Oi,{className:"h-4 w-4"}),"Change Password"]})}),b&&a.jsx("div",{className:"text-xs text-muted-foreground p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:a.jsx("p",{children:"Since you signed in with Google, your password is managed by Google. You can change it in your Google account settings."})})]})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Account Actions"}),a.jsx(it,{children:"Manage your account and session"})]}),a.jsx(qe,{children:a.jsx(Z,{variant:"outline",onClick:s,disabled:o,className:"text-red-600 border-red-200 hover:bg-red-50 dark:hover:bg-red-950",children:o?"Signing Out...":"Sign Out"})})]})]})}function pP({preferences:t,onUpdatePreference:e}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Appearance"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Customize the look and feel of your workspace."})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Theme"}),a.jsx(it,{children:"Choose your preferred color scheme"})]}),a.jsx(qe,{children:a.jsxs(ht,{value:t.theme||"system",onValueChange:n=>e("theme",n),children:[a.jsx(st,{className:"w-48",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"light",children:"Light"}),a.jsx(ge,{value:"dark",children:"Dark"}),a.jsx(ge,{value:"system",children:"System"})]})]})})]})]})}function yP({preferences:t,onUpdatePreference:e}){var n;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Date & Time"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure how dates and times are displayed throughout the app."})," "]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Date Format"}),a.jsx(it,{children:"Choose how dates are displayed (limited implementation)"})]}),a.jsx(qe,{children:a.jsxs(ht,{value:t.dateFormat||"MM/DD/YYYY",onValueChange:s=>e("dateFormat",s),children:[a.jsx(st,{className:"w-48 text-left",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"MM/DD/YYYY",className:"text-left",children:"MM/DD/YYYY (12/31/2024)"}),a.jsx(ge,{value:"DD/MM/YYYY",className:"text-left",children:"DD/MM/YYYY (31/12/2024)"}),a.jsx(ge,{value:"YYYY-MM-DD",className:"text-left",children:"YYYY-MM-DD (2024-12-31)"})]})]})})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Time Format"}),a.jsx(it,{children:"Choose 12-hour or 24-hour time display (limited implementation)"})]}),a.jsx(qe,{children:a.jsxs(ht,{value:t.timeFormat||"12h",onValueChange:s=>e("timeFormat",s),children:[a.jsx(st,{className:"w-48",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"12h",children:"12-hour (2:30 PM)"}),a.jsx(ge,{value:"24h",children:"24-hour (14:30)"})]})]})})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Week Start"}),a.jsx(it,{children:"Choose which day your week starts on (used in calendar)"})]}),a.jsx(qe,{children:a.jsxs(ht,{value:((n=t.weekStartsOn)==null?void 0:n.toString())||"0",onValueChange:s=>e("weekStartsOn",parseInt(s)),children:[a.jsx(st,{className:"w-48",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"0",children:"Sunday"}),a.jsx(ge,{value:"1",children:"Monday"})]})]})})]})]})}function xP({preferences:t,onUpdatePreference:e,onUpdateTask:n,onAddTask:s,tasks:r,boards:o}){var c;const i=[{value:0,label:"Compact"},{value:1,label:"Comfortable"},{value:2,label:"Spacious"},{value:3,label:"Detailed"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Calendar Settings"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure default settings for the calendar view and external integrations."})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Default View Mode"}),a.jsx(it,{children:"Choose the default calendar view when opening the calendar"})]}),a.jsx(qe,{children:a.jsxs(ht,{value:t.calendarDefaultView||"3-day",onValueChange:f=>e("calendarDefaultView",f),children:[a.jsx(st,{className:"w-48",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"3-day",children:"3-Day View"}),a.jsx(ge,{value:"week",children:"Weekly View"})]})]})})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Default Zoom Level"}),a.jsx(it,{children:"Choose the default zoom level for the calendar timeline"})]}),a.jsx(qe,{children:a.jsxs(ht,{value:((c=t.calendarDefaultZoom)==null?void 0:c.toString())||"1",onValueChange:f=>e("calendarDefaultZoom",parseInt(f)),children:[a.jsx(st,{className:"w-64 text-left",children:a.jsx(mt,{})}),a.jsx(rt,{children:i.map(f=>a.jsx(ge,{value:f.value.toString(),className:"text-left",children:a.jsx("div",{className:"flex flex-col items-start",children:a.jsx("span",{className:"font-medium",children:f.label})})},f.value))})]})})]}),n&&s&&r&&a.jsx(cP,{tasks:r,onTaskUpdate:n,onAddTask:s,config:us.googleCalendar,boards:o,userPreferences:t,onUpdateUserPreferences:f=>T(null,null,function*(){for(const[u,h]of Object.entries(f))e(u,h)})})]})}function vP({preferences:t,onUpdatePreference:e}){const n=[{value:"compact",label:"Compact Grid",description:"Square cards in a dense grid layout",preview:a.jsxs("div",{className:"w-full h-16 bg-muted/30 rounded-md p-2 flex flex-col gap-1",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-4 h-4 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-4 h-4 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-4 h-4 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-4 h-4 bg-primary/60 rounded-sm"})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-4 h-4 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-4 h-4 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-4 h-4 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-4 h-4 bg-primary/60 rounded-sm"})]})]})},{value:"grid",label:"Grid View",description:"Larger cards with more details",preview:a.jsxs("div",{className:"w-full h-16 bg-muted/30 rounded-md p-2 flex flex-col gap-1",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-8 h-6 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-8 h-6 bg-primary/60 rounded-sm"})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-8 h-6 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-8 h-6 bg-primary/60 rounded-sm"})]})]})},{value:"list",label:"List View",description:"Horizontal layout for easy scanning",preview:a.jsxs("div",{className:"w-full h-16 bg-muted/30 rounded-md p-2 flex flex-col gap-1",children:[a.jsx("div",{className:"w-full h-2 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-full h-2 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-full h-2 bg-primary/60 rounded-sm"}),a.jsx("div",{className:"w-full h-2 bg-primary/60 rounded-sm"})]})}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Task Management"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure how tasks are displayed and organized."})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Board View Layout"}),a.jsx(it,{children:"Choose your preferred layout for the board selection screen"})]}),a.jsx(qe,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map(s=>a.jsx("div",{className:`relative cursor-pointer rounded-lg border-2 p-4 transition-all hover:shadow-md ${t.boardDefaultView===s.value?"border-primary bg-primary/5 shadow-sm":"border-border hover:border-primary/50"}`,onClick:()=>e("boardDefaultView",s.value),children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium text-sm",children:s.label}),t.boardDefaultView===s.value&&a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})]}),s.preview,a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:s.description})]})},s.value))})})]}),a.jsxs($e,{children:[" ",a.jsxs(ot,{children:[a.jsx(at,{children:"Task Sorting"}),a.jsx(it,{children:"Choose how unscheduled tasks are sorted in calendar view"})]}),a.jsxs(qe,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Sort By"}),a.jsxs(ht,{value:t.taskSortBy||"priority",onValueChange:s=>e("taskSortBy",s),children:[a.jsx(st,{className:"w-48",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"priority",children:"Priority"}),a.jsx(ge,{value:"dueDate",children:"Due Date"}),a.jsx(ge,{value:"created",children:"Created Date"}),a.jsx(ge,{value:"alphabetical",children:"Alphabetical"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Sort Order"}),a.jsxs(ht,{value:t.taskSortOrder||"asc",onValueChange:s=>e("taskSortOrder",s),children:[a.jsx(st,{className:"w-48",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"asc",children:"Ascending"}),a.jsx(ge,{value:"desc",children:"Descending"})]})]})]})]})]}),a.jsxs($e,{children:[" ",a.jsxs(ot,{children:[a.jsx(at,{children:"Display Options"}),a.jsx(it,{children:"Control what tasks are visible in all views"})]}),a.jsxs(qe,{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{id:"show-completed",checked:t.showCompletedTasks||!1,onCheckedChange:s=>e("showCompletedTasks",s)}),a.jsx("label",{htmlFor:"show-completed",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Show completed tasks"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"When enabled, completed tasks will remain visible in task lists and calendar"})]})]})," "]})}function wP({preferences:t,onUpdatePreference:e}){const n=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"AI Scheduling"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure how AI automatically schedules your tasks."})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"AI Scheduling"}),a.jsx(it,{children:"Enable automatic task scheduling with Google Gemini AI"})]}),a.jsxs(qe,{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{id:"auto-schedule-enabled",checked:t.autoScheduleEnabled||!1,onCheckedChange:s=>e("autoScheduleEnabled",s)}),a.jsx("label",{htmlFor:"auto-schedule-enabled",className:"text-sm font-medium",children:"Enable AI Scheduling"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"When enabled, AI can automatically schedule your tasks based on your preferences and working hours."})]})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Working Hours"}),a.jsx(it,{children:"Set your availability for each day of the week"})]}),a.jsx(qe,{className:"space-y-4",children:n.map(s=>{const r=`workingHours${s.key.charAt(0).toUpperCase()+s.key.slice(1)}Enabled`,o=`workingHours${s.key.charAt(0).toUpperCase()+s.key.slice(1)}Start`,i=`workingHours${s.key.charAt(0).toUpperCase()+s.key.slice(1)}End`,c=t[r],f=t[o]||"09:00",u=t[i]||"17:00";return a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 w-24",children:[a.jsx(bt,{id:`${s.key}-enabled`,checked:c,onCheckedChange:h=>e(r,h)}),a.jsx("label",{htmlFor:`${s.key}-enabled`,className:"text-sm font-medium",children:s.label})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ae,{type:"time",value:f,onChange:h=>e(o,h.target.value),disabled:!c,className:"w-32"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"to"}),a.jsx(Ae,{type:"time",value:u,onChange:h=>e(i,h.target.value),disabled:!c,className:"w-32"})]})]},s.key)})})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Scheduling Preferences"}),a.jsx(it,{children:"Configure how tasks are automatically scheduled"})]}),a.jsxs(qe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Max Daily Work Hours"}),a.jsx(Ae,{type:"number",min:"1",max:"16",step:"0.5",value:t.maxDailyWorkHours||8,onChange:s=>e("maxDailyWorkHours",parseFloat(s.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Buffer Time Between Tasks (minutes)"}),a.jsx(Ae,{type:"number",min:"0",max:"120",value:t.bufferTimeBetweenTasks||15,onChange:s=>e("bufferTimeBetweenTasks",parseInt(s.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Minimum Task Chunk (minutes)"}),a.jsx(Ae,{type:"number",min:"15",max:"120",value:t.minTaskChunkSize||30,onChange:s=>e("minTaskChunkSize",parseInt(s.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Maximum Task Chunk (minutes)"}),a.jsx(Ae,{type:"number",min:"30",max:"480",value:t.maxTaskChunkSize||120,onChange:s=>e("maxTaskChunkSize",parseInt(s.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Focus Time Minimum (minutes)"}),a.jsx(Ae,{type:"number",min:"30",max:"240",value:t.focusTimeMinimumMinutes||90,onChange:s=>e("focusTimeMinimumMinutes",parseInt(s.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Scheduling Lookahead (days)"}),a.jsx(Ae,{type:"number",min:"1",max:"90",value:t.schedulingLookaheadDays||14,onChange:s=>e("schedulingLookaheadDays",parseInt(s.target.value))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"AI Suggestion Style"}),a.jsxs(ht,{value:t.aiSuggestionPreference||"balanced",onValueChange:s=>e("aiSuggestionPreference",s),children:[a.jsx(st,{className:"w-48",children:a.jsx(mt,{})}),a.jsxs(rt,{children:[a.jsx(ge,{value:"conservative",children:"Conservative"}),a.jsx(ge,{value:"balanced",children:"Balanced"}),a.jsx(ge,{value:"aggressive",children:"Aggressive"})]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Conservative: More realistic time estimates. Balanced: Standard estimates. Aggressive: Optimistic estimates."})]})]})]}),a.jsxs($e,{children:[a.jsxs(ot,{children:[a.jsx(at,{children:"Advanced Options"}),a.jsx(it,{children:"Fine-tune AI scheduling behavior"})]}),a.jsxs(qe,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{id:"respect-calendar-events",checked:t.respectCalendarEvents!==!1,onCheckedChange:s=>e("respectCalendarEvents",s)}),a.jsx("label",{htmlFor:"respect-calendar-events",className:"text-sm font-medium",children:"Respect calendar events"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Avoid scheduling tasks during existing calendar events."}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{id:"allow-overtime-scheduling",checked:t.allowOvertimeScheduling||!1,onCheckedChange:s=>e("allowOvertimeScheduling",s)}),a.jsx("label",{htmlFor:"allow-overtime-scheduling",className:"text-sm font-medium",children:"Allow overtime scheduling"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow tasks to be scheduled outside of normal working hours when necessary."}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{id:"auto-reschedule-on-conflict",checked:t.autoRescheduleOnConflict||!1,onCheckedChange:s=>e("autoRescheduleOnConflict",s)}),a.jsx("label",{htmlFor:"auto-reschedule-on-conflict",className:"text-sm font-medium",children:"Auto-reschedule on conflict"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically reschedule tasks when conflicts are detected."}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bt,{id:"priority-boost-for-overdue",checked:t.priorityBoostForOverdue!==!1,onCheckedChange:s=>e("priorityBoostForOverdue",s)}),a.jsx("label",{htmlFor:"priority-boost-for-overdue",className:"text-sm font-medium",children:"Priority boost for overdue tasks"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically increase priority for tasks that are past their due date."}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Deadline Buffer (days)"}),a.jsx(Ae,{type:"number",min:"0",max:"7",value:t.deadlineBufferDays||1,onChange:s=>e("deadlineBufferDays",parseInt(s.target.value)),className:"w-32"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Days before deadline to finish tasks."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Context Switch Penalty (minutes)"}),a.jsx(Ae,{type:"number",min:"0",max:"60",value:t.contextSwitchPenaltyMinutes||10,onChange:s=>e("contextSwitchPenaltyMinutes",parseInt(s.target.value)),className:"w-32"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Additional time added when switching between different types of tasks."})]})]})]})]})}const Si=t=>t&&typeof t=="object"&&"message"in t?String(t.message):"An unexpected error occurred";function CP({onSignUp:t,onSignIn:e,onGoogleSignIn:n,onResetPassword:s}){const[r,o]=w.useState(!1),[i,c]=w.useState(!1),[f,u]=w.useState(""),[h,m]=w.useState(""),[g,y]=w.useState(null),[p,v]=w.useState(!1),[C,b]=w.useState(""),[N,M]=w.useState(!1),[D,k]=w.useState(!1),[_,E]=w.useState(""),[P,R]=w.useState(!1),[B,$]=w.useState(!1),K=[{label:"At least 6 characters",test:j=>j.length>=6},{label:"Contains uppercase letter (A-Z)",test:j=>/[A-Z]/.test(j)},{label:"Contains lowercase letter (a-z)",test:j=>/[a-z]/.test(j)},{label:"Contains number (0-9)",test:j=>/\d/.test(j)},{label:"Contains symbol (!@#$%^&*)",test:j=>/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(j)}],te=j=>K.filter(Q=>Q.test(j)).length,le=j=>K.every(W=>W.test(j)),ve=()=>T(null,null,function*(){$(!0),y(null);try{const{error:j}=yield n();j&&y(L(Si(j)))}catch(j){y("Failed to sign in with Google. Please try again.")}finally{$(!1)}}),we=j=>T(null,null,function*(){if(j.preventDefault(),o(!0),y(null),i&&!le(h)){y("Please ensure your password meets all requirements listed below."),o(!1),M(!0);return}try{const{error:W}=i?yield t(f,h):yield e(f,h);W?y(L(Si(W))):i&&(b(f),v(!0))}catch(W){y("An unexpected error occurred")}finally{o(!1)}}),_e=()=>{v(!1),k(!1),R(!1),c(!1),u(""),m(""),E(""),y(null),b("")},S=()=>T(null,null,function*(){if(!_.trim()){y("Please enter your email address");return}o(!0),y(null);try{if(s){const{error:j}=yield s(_);j?y(L(Si(j))):R(!0)}}catch(j){y("An unexpected error occurred")}finally{o(!1)}}),L=j=>j.includes("Invalid login credentials")?"Invalid email or password. Please check your credentials and try again.":j.includes("Email not confirmed")?"Please check your email and click the confirmation link before signing in.":j.includes("signup is disabled")?"New account registration is currently disabled.":j.includes("Password should be at least")?"Password must be at least 6 characters long.":j.includes("already registered")?"An account with this email already exists. Try signing in instead.":j.includes("rate limit")?"Too many attempts. Please wait a moment before trying again.":j;return p?a.jsxs("div",{className:"h-screen bg-background flex flex-col",children:[a.jsx(Ms,{title:"DayFlow - Email Confirmation"}),a.jsx("div",{className:"flex-1 flex items-center justify-center pt-8",children:a.jsxs($e,{className:"w-full max-w-md p-6 space-y-6",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:a.jsx(At,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Check Your Email"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"We've sent a confirmation link to"}),a.jsx("p",{className:"font-semibold text-foreground break-all",children:C})]})]}),a.jsx("div",{className:"bg-muted/50 p-4 rounded-lg space-y-3",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Qs,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium text-foreground mb-1",children:"Next Steps:"}),a.jsxs("ol",{className:"text-muted-foreground space-y-1 list-decimal list-inside",children:[a.jsx("li",{children:"Open your email inbox"}),a.jsx("li",{children:"Find the email from DayFlow"}),a.jsx("li",{children:'Click the "Confirm Account" button'}),a.jsx("li",{children:"Return here to sign in"})]})]})]})}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[a.jsx("strong",{children:"Didn't receive the email?"})," Check your spam folder or wait a few minutes. The confirmation link will expire in 24 hours."]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(Z,{onClick:_e,variant:"outline",className:"w-full",children:[a.jsx(nr,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]}),a.jsx("button",{onClick:()=>{v(!1),u(C),m(""),y(null)},className:"w-full text-sm text-primary hover:underline",children:"Try signing up again"})]})]})})]}):P?a.jsxs("div",{className:"h-screen bg-background flex flex-col",children:[a.jsx(Ms,{title:"DayFlow - Password Reset"}),a.jsx("div",{className:"flex-1 flex items-center justify-center pt-8",children:a.jsxs($e,{className:"w-full max-w-md p-6 space-y-6",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:a.jsx(Qs,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Reset Link Sent"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"We've sent a password reset link to"}),a.jsx("p",{className:"font-semibold text-foreground break-all",children:_})]})]}),a.jsx("div",{className:"bg-muted/50 p-4 rounded-lg space-y-3",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Qs,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium text-foreground mb-1",children:"Next Steps:"}),a.jsxs("ol",{className:"text-muted-foreground space-y-1 list-decimal list-inside",children:[a.jsx("li",{children:"Check your email inbox"}),a.jsx("li",{children:'Click the "Reset Password" link'}),a.jsx("li",{children:"Enter your new password"}),a.jsx("li",{children:"Return here to sign in"})]})]})]})}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[a.jsx("strong",{children:"Security Note:"})," The reset link will expire in 1 hour for your security. If you don't see the email, check your spam folder."]})}),a.jsxs(Z,{onClick:_e,variant:"outline",className:"w-full",children:[a.jsx(nr,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]})]})})]}):D?a.jsxs("div",{className:"h-screen bg-background flex flex-col",children:[a.jsx(Ms,{title:"DayFlow - Reset Password"}),a.jsx("div",{className:"flex-1 flex items-center justify-center pt-8",children:a.jsxs($e,{className:"w-full max-w-md p-6 space-y-4",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Reset Password"}),a.jsx("p",{className:"text-muted-foreground",children:"Enter your email address and we'll send you a link to reset your password."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"reset-email",className:"text-sm font-medium text-foreground",children:"Email"}),a.jsx(Ae,{id:"reset-email",type:"email",placeholder:"Enter your email",value:_,onChange:j=>{E(j.target.value),y(null)},disabled:r,className:"w-full",autoComplete:"email"})]}),g&&a.jsxs("div",{className:"flex items-start space-x-2 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 p-3 rounded-md",children:[a.jsx(Ut,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsx("div",{children:g})]}),a.jsx(Z,{onClick:S,className:"w-full",disabled:r,children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Sending Reset Link..."]}):"Send Reset Link"}),a.jsxs(Z,{onClick:_e,variant:"outline",className:"w-full",children:[a.jsx(nr,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]})]})]})})]}):a.jsxs("div",{className:"h-screen bg-background flex flex-col",children:[a.jsx(Ms,{title:"DayFlow - Authentication"}),a.jsx("div",{className:"flex-1 flex items-center justify-center pt-8",children:a.jsxs($e,{className:"w-full max-w-md p-6 space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Welcome to DayFlow"}),a.jsx("p",{className:"text-muted-foreground",children:i?"Create your account":"Sign in to your account"})]}),a.jsxs("form",{onSubmit:we,className:"space-y-3",children:[a.jsx("div",{children:a.jsx(Ae,{type:"email",placeholder:"Email address",value:f,onChange:j=>u(j.target.value),required:!0,disabled:r})})," ",a.jsxs("div",{children:[a.jsx(Ae,{type:"password",placeholder:"Password",value:h,onChange:j=>m(j.target.value),onFocus:()=>i&&M(!0),required:!0,disabled:r,minLength:6,className:i&&h&&!le(h)?"border-orange-300 focus:border-orange-500":""}),i&&a.jsx("div",{className:"mt-3 space-y-3",children:a.jsx("div",{className:`transition-all duration-300 ${N||h?"opacity-100":"opacity-0 h-0 overflow-hidden"}`,children:a.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg border",children:[a.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Password Requirements:"}),a.jsx("div",{className:"space-y-1",children:K.map((j,W)=>{const Q=j.test(h);return a.jsxs("div",{className:`flex items-center gap-2 text-xs transition-colors duration-200 ${Q?"text-green-600 dark:text-green-400":"text-muted-foreground"}`,children:[a.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center transition-colors duration-200 ${Q?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-muted text-muted-foreground"}`,children:Q?"âœ“":"â—‹"}),a.jsx("span",{className:Q?"line-through":"",children:j.label})]},W)})}),h&&a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-xs font-medium text-foreground",children:"Strength:"}),a.jsx("span",{className:`text-xs font-medium ${te(h)<=2?"text-red-600 dark:text-red-400":te(h)<=4?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:te(h)<=2?"Weak":te(h)<=4?"Good":"Strong"})]}),a.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((j,W)=>a.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors duration-200 ${W<te(h)?te(h)<=2?"bg-red-400":te(h)<=4?"bg-orange-400":"bg-green-400":"bg-muted"}`},W))})]})]})})})]}),g&&a.jsxs("div",{className:"flex items-start space-x-2 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 p-3 rounded-md",children:[a.jsx(Ut,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsx("div",{children:g})]}),i&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-3 rounded-md",children:a.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[a.jsx(Qs,{className:"w-4 h-4 inline mr-1"}),"We'll send you a confirmation email to verify your account."]})}),a.jsx(Z,{type:"submit",className:"w-full",disabled:r,children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),i?"Creating Account...":"Signing In..."]}):i?"Create Account":"Sign In"}),a.jsx(Z,{type:"button",variant:"outline",onClick:ve,className:"w-full",disabled:r||B,children:B?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Signing in with Google..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})})," "]}),a.jsxs("div",{className:"space-y-3",children:[!i&&a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>k(!0),className:"text-sm text-muted-foreground hover:text-primary hover:underline transition-colors",disabled:r,children:"Forgot your password?"})}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>{c(!i),y(null)},className:"text-sm text-primary hover:underline",disabled:r,children:i?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})]})}function bP({onAuthComplete:t}){const[e,n]=w.useState("loading"),[s,r]=w.useState("Processing authentication...");return w.useEffect(()=>{T(null,null,function*(){try{const i=new URLSearchParams(window.location.search),c=i.get("code"),f=i.get("error");if(f)throw new Error(f);if(c){const{data:u,error:h}=yield ye.auth.exchangeCodeForSession(c);if(h)throw h;if(u!=null&&u.session)n("success"),r("Successfully signed in with Google!"),setTimeout(()=>{t()},2e3);else throw new Error("No session received")}else throw new Error("No authorization code received")}catch(i){console.error("Auth callback error:",i),n("error"),r(i instanceof Error?i.message:"Authentication failed"),setTimeout(()=>{t()},3e3)}})},[t]),a.jsxs("div",{className:"h-screen bg-background flex flex-col",children:[a.jsx(Ms,{title:"DayFlow - Authentication"}),a.jsx("div",{className:"flex-1 flex items-center justify-center pt-8",children:a.jsxs($e,{className:"w-full max-w-md p-6 space-y-6",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsxs("div",{className:`mx-auto w-16 h-16 rounded-full flex items-center justify-center ${e==="loading"?"bg-blue-100 dark:bg-blue-900/20":e==="success"?"bg-green-100 dark:bg-green-900/20":"bg-red-100 dark:bg-red-900/20"}`,children:[e==="loading"&&a.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),e==="success"&&a.jsx(At,{className:"w-8 h-8 text-green-600 dark:text-green-400"}),e==="error"&&a.jsx(Ut,{className:"w-8 h-8 text-red-600 dark:text-red-400"})]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:[e==="loading"&&"Authenticating...",e==="success"&&"Welcome to DayFlow!",e==="error"&&"Authentication Failed"]}),a.jsx("p",{className:"text-muted-foreground mt-2",children:s})]})]}),e==="loading"&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-4 rounded-lg",children:a.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Please wait while we complete your Google sign-in..."})}),e==="error"&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 p-4 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:"Something went wrong during authentication. You'll be redirected back to the sign-in page."})})]})})]})}const Ni=t=>({id:t.id,theme:t.theme,language:t.language,dateFormat:t.date_format,timeFormat:t.time_format,weekStartsOn:t.week_starts_on,autoSave:t.auto_save,showCompletedTasks:t.show_completed_tasks,taskSortBy:t.task_sort_by,taskSortOrder:t.task_sort_order,calendarDefaultZoom:t.calendar_default_zoom||1,calendarDefaultView:t.calendar_default_view||"3-day",boardDefaultView:t.board_default_view||"compact",googleCalendarEnabled:t.google_calendar_enabled||!1,googleCalendarSelectedCalendar:t.google_calendar_selected_calendar||void 0,googleCalendarAutoSync:t.google_calendar_auto_sync||!1,googleCalendarSyncOnlyScheduled:t.google_calendar_sync_only_scheduled!==void 0?t.google_calendar_sync_only_scheduled:!0,autoScheduleEnabled:t.auto_schedule_enabled||!1,workingHoursMondayStart:t.working_hours_monday_start||"09:00",workingHoursMondayEnd:t.working_hours_monday_end||"17:00",workingHoursMondayEnabled:t.working_hours_monday_enabled!==void 0?t.working_hours_monday_enabled:!0,workingHoursTuesdayStart:t.working_hours_tuesday_start||"09:00",workingHoursTuesdayEnd:t.working_hours_tuesday_end||"17:00",workingHoursTuesdayEnabled:t.working_hours_tuesday_enabled!==void 0?t.working_hours_tuesday_enabled:!0,workingHoursWednesdayStart:t.working_hours_wednesday_start||"09:00",workingHoursWednesdayEnd:t.working_hours_wednesday_end||"17:00",workingHoursWednesdayEnabled:t.working_hours_wednesday_enabled!==void 0?t.working_hours_wednesday_enabled:!0,workingHoursThursdayStart:t.working_hours_thursday_start||"09:00",workingHoursThursdayEnd:t.working_hours_thursday_end||"17:00",workingHoursThursdayEnabled:t.working_hours_thursday_enabled!==void 0?t.working_hours_thursday_enabled:!0,workingHoursFridayStart:t.working_hours_friday_start||"09:00",workingHoursFridayEnd:t.working_hours_friday_end||"17:00",workingHoursFridayEnabled:t.working_hours_friday_enabled!==void 0?t.working_hours_friday_enabled:!0,workingHoursSaturdayStart:t.working_hours_saturday_start||"10:00",workingHoursSaturdayEnd:t.working_hours_saturday_end||"15:00",workingHoursSaturdayEnabled:t.working_hours_saturday_enabled||!1,workingHoursSundayStart:t.working_hours_sunday_start||"10:00",workingHoursSundayEnd:t.working_hours_sunday_end||"15:00",workingHoursSundayEnabled:t.working_hours_sunday_enabled||!1,bufferTimeBetweenTasks:t.buffer_time_between_tasks||15,maxTaskChunkSize:t.max_task_chunk_size||120,minTaskChunkSize:t.min_task_chunk_size||30,allowOvertimeScheduling:t.allow_overtime_scheduling||!1,schedulingLookaheadDays:t.scheduling_lookahead_days||14,aiSuggestionPreference:t.ai_suggestion_preference||"balanced",respectCalendarEvents:t.respect_calendar_events!==void 0?t.respect_calendar_events:!0,autoRescheduleOnConflict:t.auto_reschedule_on_conflict||!1,energyPeakHours:t.energy_peak_hours?JSON.parse(JSON.stringify(t.energy_peak_hours)):[],deepWorkTimeSlots:t.deep_work_time_slots?JSON.parse(JSON.stringify(t.deep_work_time_slots)):[],deadlineBufferDays:t.deadline_buffer_days||1,priorityBoostForOverdue:t.priority_boost_for_overdue!==void 0?t.priority_boost_for_overdue:!0,maxDailyWorkHours:t.max_daily_work_hours||8,focusTimeMinimumMinutes:t.focus_time_minimum_minutes||90,contextSwitchPenaltyMinutes:t.context_switch_penalty_minutes||10,createdAt:t.created_at,updatedAt:t.updated_at}),Mi=t=>({id:t.id,firstName:t.first_name||void 0,lastName:t.last_name||void 0,avatarUrl:t.avatar_url||void 0,timezone:t.timezone,createdAt:t.created_at,updatedAt:t.updated_at}),kP=t=>F(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x({},t.id&&{id:t.id}),t.theme&&{theme:t.theme}),t.language&&{language:t.language}),t.dateFormat&&{date_format:t.dateFormat}),t.timeFormat&&{time_format:t.timeFormat}),t.weekStartsOn!==void 0&&{week_starts_on:t.weekStartsOn}),t.autoSave!==void 0&&{auto_save:t.autoSave}),t.showCompletedTasks!==void 0&&{show_completed_tasks:t.showCompletedTasks}),t.taskSortBy&&{task_sort_by:t.taskSortBy}),t.taskSortOrder&&{task_sort_order:t.taskSortOrder}),t.calendarDefaultZoom!==void 0&&{calendar_default_zoom:t.calendarDefaultZoom}),t.calendarDefaultView&&{calendar_default_view:t.calendarDefaultView}),t.boardDefaultView&&{board_default_view:t.boardDefaultView}),t.googleCalendarEnabled!==void 0&&{google_calendar_enabled:t.googleCalendarEnabled}),t.googleCalendarSelectedCalendar!==void 0&&{google_calendar_selected_calendar:t.googleCalendarSelectedCalendar}),t.googleCalendarAutoSync!==void 0&&{google_calendar_auto_sync:t.googleCalendarAutoSync}),t.googleCalendarSyncOnlyScheduled!==void 0&&{google_calendar_sync_only_scheduled:t.googleCalendarSyncOnlyScheduled}),t.autoScheduleEnabled!==void 0&&{auto_schedule_enabled:t.autoScheduleEnabled}),t.workingHoursMondayStart&&{working_hours_monday_start:t.workingHoursMondayStart}),t.workingHoursMondayEnd&&{working_hours_monday_end:t.workingHoursMondayEnd}),t.workingHoursMondayEnabled!==void 0&&{working_hours_monday_enabled:t.workingHoursMondayEnabled}),t.workingHoursTuesdayStart&&{working_hours_tuesday_start:t.workingHoursTuesdayStart}),t.workingHoursTuesdayEnd&&{working_hours_tuesday_end:t.workingHoursTuesdayEnd}),t.workingHoursTuesdayEnabled!==void 0&&{working_hours_tuesday_enabled:t.workingHoursTuesdayEnabled}),t.workingHoursWednesdayStart&&{working_hours_wednesday_start:t.workingHoursWednesdayStart}),t.workingHoursWednesdayEnd&&{working_hours_wednesday_end:t.workingHoursWednesdayEnd}),t.workingHoursWednesdayEnabled!==void 0&&{working_hours_wednesday_enabled:t.workingHoursWednesdayEnabled}),t.workingHoursThursdayStart&&{working_hours_thursday_start:t.workingHoursThursdayStart}),t.workingHoursThursdayEnd&&{working_hours_thursday_end:t.workingHoursThursdayEnd}),t.workingHoursThursdayEnabled!==void 0&&{working_hours_thursday_enabled:t.workingHoursThursdayEnabled}),t.workingHoursFridayStart&&{working_hours_friday_start:t.workingHoursFridayStart}),t.workingHoursFridayEnd&&{working_hours_friday_end:t.workingHoursFridayEnd}),t.workingHoursFridayEnabled!==void 0&&{working_hours_friday_enabled:t.workingHoursFridayEnabled}),t.workingHoursSaturdayStart&&{working_hours_saturday_start:t.workingHoursSaturdayStart}),t.workingHoursSaturdayEnd&&{working_hours_saturday_end:t.workingHoursSaturdayEnd}),t.workingHoursSaturdayEnabled!==void 0&&{working_hours_saturday_enabled:t.workingHoursSaturdayEnabled}),t.workingHoursSundayStart&&{working_hours_sunday_start:t.workingHoursSundayStart}),t.workingHoursSundayEnd&&{working_hours_sunday_end:t.workingHoursSundayEnd}),t.workingHoursSundayEnabled!==void 0&&{working_hours_sunday_enabled:t.workingHoursSundayEnabled}),t.bufferTimeBetweenTasks!==void 0&&{buffer_time_between_tasks:t.bufferTimeBetweenTasks}),t.maxTaskChunkSize!==void 0&&{max_task_chunk_size:t.maxTaskChunkSize}),t.minTaskChunkSize!==void 0&&{min_task_chunk_size:t.minTaskChunkSize}),t.allowOvertimeScheduling!==void 0&&{allow_overtime_scheduling:t.allowOvertimeScheduling}),t.schedulingLookaheadDays!==void 0&&{scheduling_lookahead_days:t.schedulingLookaheadDays}),t.aiSuggestionPreference&&{ai_suggestion_preference:t.aiSuggestionPreference}),t.respectCalendarEvents!==void 0&&{respect_calendar_events:t.respectCalendarEvents}),t.autoRescheduleOnConflict!==void 0&&{auto_reschedule_on_conflict:t.autoRescheduleOnConflict}),t.energyPeakHours&&{energy_peak_hours:t.energyPeakHours}),t.deepWorkTimeSlots&&{deep_work_time_slots:t.deepWorkTimeSlots}),t.deadlineBufferDays!==void 0&&{deadline_buffer_days:t.deadlineBufferDays}),t.priorityBoostForOverdue!==void 0&&{priority_boost_for_overdue:t.priorityBoostForOverdue}),t.maxDailyWorkHours!==void 0&&{max_daily_work_hours:t.maxDailyWorkHours}),t.focusTimeMinimumMinutes!==void 0&&{focus_time_minimum_minutes:t.focusTimeMinimumMinutes}),t.contextSwitchPenaltyMinutes!==void 0&&{context_switch_penalty_minutes:t.contextSwitchPenaltyMinutes}),{updated_at:new Date().toISOString()}),_P=t=>F(x(x(x(x(x({},t.id&&{id:t.id}),t.firstName!==void 0&&{first_name:t.firstName}),t.lastName!==void 0&&{last_name:t.lastName}),t.avatarUrl!==void 0&&{avatar_url:t.avatarUrl}),t.timezone&&{timezone:t.timezone}),{updated_at:new Date().toISOString()});function fg(t){const[e,n]=w.useState(null),[s,r]=w.useState(null),[o,i]=w.useState(!0),[c,f]=w.useState(null),u=w.useCallback(()=>T(null,null,function*(){var p,v;if(t){i(!0),f(null);try{const[C,b]=yield Promise.allSettled([ye.from("user_preferences").select("*").eq("id",t).single(),ye.from("profiles").select("*").eq("id",t).single()]);C.status==="fulfilled"&&C.value.data?n(Ni(C.value.data)):(C.status==="rejected"||C.status==="fulfilled"&&((p=C.value.error)==null?void 0:p.code)==="PGRST116")&&(yield h(t)),b.status==="fulfilled"&&b.value.data?r(Mi(b.value.data)):(b.status==="rejected"||b.status==="fulfilled"&&((v=b.value.error)==null?void 0:v.code)==="PGRST116")&&(yield m(t))}catch(C){console.error("Error loading user settings:",C),f("Failed to load user settings")}finally{i(!1)}}}),[t]),h=p=>T(null,null,function*(){const v={id:p,theme:"system",language:"en",date_format:"MM/DD/YYYY",time_format:"12h",week_starts_on:0,auto_save:!0,show_completed_tasks:!1,task_sort_by:"priority",task_sort_order:"asc",calendar_default_zoom:1,calendar_default_view:"3-day",board_default_view:"compact",google_calendar_enabled:!1,google_calendar_selected_calendar:null,google_calendar_auto_sync:!1,google_calendar_sync_only_scheduled:!0,auto_schedule_enabled:!0},{data:C,error:b}=yield ye.from("user_preferences").insert(v).select().single();if(b)throw console.error("Error creating default preferences:",b),b;C&&n(Ni(C))}),m=p=>T(null,null,function*(){const v={id:p,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},{data:C,error:b}=yield ye.from("profiles").insert(v).select().single();if(b)throw console.error("Error creating default profile:",b),b;C&&r(Mi(C))}),g=p=>T(null,null,function*(){if(!t)throw new Error("User ID required");f(null);try{const v=kP(p);n(N=>N?x(x({},N),p):null);const{data:C,error:b}=yield ye.from("user_preferences").update(v).eq("id",t).select().single();if(b)throw b;C&&n(Ni(C))}catch(v){throw console.error("Error updating user preferences:",v),f("Failed to update preferences"),yield u(),v}}),y=p=>T(null,null,function*(){if(!t)throw new Error("User ID required");f(null);try{const v=_P(p);r(N=>N?x(x({},N),p):null);const{data:C,error:b}=yield ye.from("profiles").update(v).eq("id",t).select().single();if(b)throw b;C&&r(Mi(C))}catch(v){throw console.error("Error updating user profile:",v),f("Failed to update profile"),yield u(),v}});return w.useEffect(()=>{t?u():(n(null),r(null),i(!1))},[t,u]),{userPreferences:e,userProfile:s,isLoading:o,error:c,updateUserPreferences:g,updateUserProfile:y,refetch:u}}function TP(t,e,n,s,r){const o=w.useCallback(()=>{if(s)return{autoSync:s.googleCalendarAutoSync||!1,syncOnlyScheduled:s.googleCalendarSyncOnlyScheduled!==void 0?s.googleCalendarSyncOnlyScheduled:!0,selectedCalendarId:s.googleCalendarSelectedCalendar||"primary"};const p=localStorage.getItem("google_calendar_auto_sync"),v=localStorage.getItem("google_calendar_sync_only_scheduled"),C=localStorage.getItem("google_calendar_selected_calendar");return{autoSync:p?JSON.parse(p):!1,syncOnlyScheduled:v?JSON.parse(v):!0,selectedCalendarId:C||"primary"}},[s]),i=w.useCallback((p,v)=>{const C=o(),b=Et();if(console.log("ðŸ” shouldSyncTask check:",{taskId:p.id,taskTitle:p.title,settings:C,isAuthenticated:b==null?void 0:b.isUserAuthenticated(),hasScheduledDate:!!(p.scheduledDate||p.startDate),updates:v}),!C.autoSync||!(b!=null&&b.isUserAuthenticated()))return console.log("âŒ Sync blocked - autoSync:",C.autoSync,"isAuthenticated:",b==null?void 0:b.isUserAuthenticated()),!1;const N=v?x(x({},p),v):p;if(C.syncOnlyScheduled){const M=!!(N.scheduledDate||N.startDate);return console.log("ðŸ“… syncOnlyScheduled check:",M,"scheduledDate:",N.scheduledDate,"startDate:",N.startDate),M}return console.log("âœ… Should sync task"),!0},[o]),c=w.useCallback(p=>{if(!r||!p.boardId)return;const v=r.find(C=>C.id===p.boardId);return v?{name:v.name,color:v.color||void 0}:void 0},[r]),f=w.useCallback(p=>T(null,null,function*(){const v=Et(),C=o(),b=c(p);if(console.log("ðŸ“Š syncTaskToCalendar:",{taskId:p.id,taskTitle:p.title,hasExistingEvent:!!p.googleCalendarEventId,calendarId:C.selectedCalendarId,isAuthenticated:v==null?void 0:v.isUserAuthenticated(),boardInfo:b}),!(v!=null&&v.isUserAuthenticated())){console.log("âŒ Not authenticated, skipping sync");return}try{if(p.googleCalendarEventId)console.log("ðŸ”„ Updating existing Google Calendar event:",p.googleCalendarEventId),yield v.updateEvent(p,p.googleCalendarEventId,C.selectedCalendarId,b),console.log("âœ… Successfully updated Google Calendar event");else{console.log("âž• Creating new Google Calendar event");const N=yield v.createEvent(p,C.selectedCalendarId,b);console.log("ðŸ“… Created event with ID:",N),N&&(yield t(p.id,{googleCalendarEventId:N,googleCalendarSynced:!0}),console.log("âœ… Successfully linked task to Google Calendar event"))}}catch(N){console.error("âŒ Failed to sync task to Google Calendar:",N),yield t(p.id,{googleCalendarSynced:!1})}}),[o,t,c]),u=w.useCallback(p=>T(null,null,function*(){const v=Et(),C=o();if(!(!(v!=null&&v.isUserAuthenticated())||!p.googleCalendarEventId))try{yield v.deleteEvent(p.googleCalendarEventId,C.selectedCalendarId)}catch(b){console.error("Failed to remove task from Google Calendar:",b)}}),[o]),h=w.useCallback((p,v)=>T(null,null,function*(){const C=n.find(N=>N.id===p);if(!C)return t(p,v);console.log("ðŸ”„ updateTask called:",{taskId:p,taskTitle:C.title,updates:v});const b=yield t(p,v);if(console.log("ðŸ’¾ Database update result:",b),b&&i(C,v)){console.log("ðŸš€ Starting Google Calendar sync...");const N=x(x({},C),v);C.scheduledDate&&!N.scheduledDate&&!N.startDate?(console.log("ðŸ—‘ï¸ Removing from Google Calendar (task unscheduled)"),yield u(C),yield t(p,{googleCalendarEventId:void 0,googleCalendarSynced:!1})):(N.scheduledDate||N.startDate)&&(console.log("ðŸ“… Syncing to Google Calendar..."),yield f(N))}else console.log("â­ï¸ Skipping Google Calendar sync");return b}),[n,t,i,f,u]),m=w.useCallback(p=>T(null,null,function*(){const v=n.find(C=>C.id===p);return v&&v.googleCalendarEventId&&(yield u(v)),e(p)}),[n,e,u]),g=w.useCallback(p=>T(null,null,function*(){if(!p.scheduledDate&&!p.startDate)throw new Error("Task must have a scheduled date or start date to sync");yield f(p)}),[f]),y=w.useCallback(p=>T(null,null,function*(){p.googleCalendarEventId&&(yield u(p),yield t(p.id,{googleCalendarEventId:void 0,googleCalendarSynced:!1}))}),[u,t]);return{updateTask:h,deleteTask:m,manualSyncTask:g,manualUnsyncTask:y,isGoogleCalendarConnected:()=>{const p=Et();return(p==null?void 0:p.isUserAuthenticated())||!1}}}function SP(){const{boardId:t,view:e="kanban"}=iy(),n=bl(),{tasks:s,boards:r,addTask:o,deleteTask:i,duplicateTask:c,moveTask:f,updateTask:u,reorderTasksInColumn:h,isLoading:m,user:g,signOut:y}=Na(),{userPreferences:p}=fg(g==null?void 0:g.id),[v,C]=w.useState(null),[b,N]=w.useState(!1),{updateTask:M,deleteTask:D,manualSyncTask:k,manualUnsyncTask:_}=TP(u,i,s,p,r),E=r.find(O=>O.id===parseInt(t||"")),P=O=>{C(O),N(!0)},R=(O,q)=>T(null,null,function*(){yield u(O,q),N(!1),C(null)}),B=O=>T(null,null,function*(){yield i(O),N(!1),C(null)}),$=O=>T(null,null,function*(){yield c(O),N(!1),C(null)}),K=O=>{P(O)},te=O=>T(null,null,function*(){n(`/board/${O.id}/kanban`)}),le=(O,q)=>T(null,null,function*(){n(`/board/${O.id}/${q}`)}),ve=()=>{n("/")},we=()=>{n("/settings")},_e=(O,q)=>T(null,null,function*(){yield f(O,q)}),S=O=>T(null,null,function*(){yield o(O)}),L=(O,q)=>T(null,null,function*(){yield M(O,q)}),j=O=>T(null,null,function*(){yield D(O)}),W=O=>T(null,null,function*(){yield c(O)}),Q=(O,q)=>T(null,null,function*(){yield h(O,q)}),A=(O,q)=>T(null,null,function*(){yield u(O,{timeEstimate:q})});if(!E&&!m)return n("/"),null;if(m||!E)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."});const H={board:E,tasks:s,onBack:ve,onSelectBoard:te,onMoveTask:_e,onAddTask:S,onUpdateTask:L,onDeleteTask:j,onDuplicateTask:W,onUpdateTimeEstimate:A,isAllTasksBoard:E.isDefault,boards:r,user:g,onSignOut:y,onViewChange:le,onOpenSettings:we,userPreferences:p||void 0,onTaskClick:K};switch(e){case"kanban":return a.jsxs(a.Fragment,{children:[a.jsx(qR,F(x({},H),{onReorderTasksInColumn:Q,onStartSprint:()=>{console.log("Sprint mode not yet implemented with router")}})),b&&v&&a.jsx(bn,{task:v,isOpen:b,onClose:()=>{N(!1),C(null)},onSave:R,onDelete:B,onDuplicate:$,boards:r})]});case"calendar":return a.jsxs(a.Fragment,{children:[a.jsx(QR,F(x({},H),{onManualSyncTask:k,onManualUnsyncTask:_})),b&&v&&a.jsx(bn,{task:v,isOpen:b,onClose:()=>{N(!1),C(null)},onSave:R,onDelete:B,onDuplicate:$,boards:r})]});case"list":return a.jsxs(a.Fragment,{children:[a.jsx(tP,F(x({},H),{userPreferences:p||void 0})),b&&v&&a.jsx(bn,{task:v,isOpen:b,onClose:()=>{N(!1),C(null)},onSave:R,onDelete:B,onDuplicate:$,boards:r})]});default:return n(`/board/${t}/kanban`),null}}function NP(){const{boards:t,user:e,signOut:n,signUp:s,signIn:r,signInWithGoogle:o,resetPasswordForEmail:i,updatePassword:c,addBoard:f,updateBoard:u,deleteBoard:h}=Na(),{userPreferences:m,userProfile:g,updateUserPreferences:y,updateUserProfile:p}=fg(e==null?void 0:e.id),v=bl(),C=ws(),[b,N]=w.useState(!1);w.useEffect(()=>{T(null,null,function*(){if(!e||!us.validateGoogleCalendar()){console.log("ðŸ” Skipping Google Calendar initialization: user not authenticated or config invalid");return}try{console.log("ðŸ”„ Initializing Google Calendar service on app startup...");const le=hm(us.googleCalendar);le.setUserId(e.id);const ve=yield le.loadStoredTokens(),we=le.isUserAuthenticated();console.log("Google Calendar service initialized:",{hasStoredTokens:ve,isServiceAuthenticated:we,userId:e.id,config:{hasClientId:!!us.googleCalendar.clientId,redirectUri:us.googleCalendar.redirectUri}}),console.log(we?"âœ… Google Calendar service authenticated and ready":"â„¹ï¸ Google Calendar service initialized but not authenticated")}catch(le){console.error("âŒ Failed to initialize Google Calendar service:",le)}})},[e]);const M=w.useCallback(te=>T(null,null,function*(){try{console.log("ðŸ”„ Processing Google Calendar authorization code in App.tsx...");const le=Et();if(!le){console.error("Google Calendar service not initialized");return}le.setUserId(e.id),yield le.exchangeCodeForTokens(te),console.log("âœ… Google Calendar connected successfully on app load"),v("/",{replace:!0})}catch(le){console.error("âŒ Failed to process Google Calendar callback:",le),v("/",{replace:!0})}}),[e,v]);w.useEffect(()=>{const te=new URLSearchParams(C.search),le=te.get("code"),ve=te.get("state"),we=te.get("error");le&&ve?N(!0):le&&!ve&&e&&us.validateGoogleCalendar()?(console.log("ðŸ”„ Processing Google Calendar OAuth callback on app load..."),M(le)):we&&(console.error("OAuth error on app load:",we),v("/",{replace:!0}))},[e,C.search,M,v]);const D=()=>{N(!1),v("/",{replace:!0})},k=te=>T(null,null,function*(){yield f(te)}),_=(te,le)=>T(null,null,function*(){yield u(te,le)}),E=te=>T(null,null,function*(){yield h(te)}),P=(te,le)=>T(null,null,function*(){return yield s(te,le)}),R=(te,le)=>T(null,null,function*(){return yield r(te,le)}),B=()=>T(null,null,function*(){return yield o()}),$=te=>T(null,null,function*(){v(`/board/${te.id}/kanban`)}),K=()=>{v("/settings")};return b?a.jsx(bP,{onAuthComplete:D}):e?a.jsxs(a.Fragment,{children:[a.jsx(Ms,{}),a.jsxs(by,{children:[a.jsx(Pr,{path:"/",element:a.jsx(oD,{boards:t,tasks:[],onSelectBoard:$,onCreateBoard:k,onUpdateBoard:_,onDeleteBoard:E,onDuplicateBoard:te=>T(null,null,function*(){const S=te,{id:le,createdAt:ve,userId:we}=S,_e=G(S,["id","createdAt","userId"]);yield k(F(x({},_e),{name:`${te.name} (Copy)`}))}),user:e,onSignOut:n,onOpenSettings:K,userPreferences:m||void 0,onUpdateUserPreferences:y})}),a.jsx(Pr,{path:"/board/:boardId/:view",element:a.jsx(SP,{})}),a.jsx(Pr,{path:"/settings",element:a.jsx(mP,{user:e,userPreferences:m||void 0,userProfile:g||void 0,onBack:()=>v("/"),onUpdatePreferences:y,onUpdateProfile:p,onSignOut:n,onUpdatePassword:c,onUpdateTask:()=>T(null,null,function*(){}),onAddTask:()=>T(null,null,function*(){}),tasks:[],boards:t,onTaskClick:()=>{}})}),a.jsx(Pr,{path:"*",element:a.jsx("div",{children:"Redirecting..."})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ms,{}),a.jsx(CP,{onSignUp:P,onSignIn:R,onGoogleSignIn:B,onResetPassword:i})]})}Dp.createRoot(document.getElementById("root")).render(a.jsx(se.StrictMode,{children:a.jsx(Hy,{children:a.jsx(nx,{children:a.jsx(NP,{})})})}))});export default MP();
